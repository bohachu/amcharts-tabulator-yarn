parcelRequire=function(e){var r="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require,i={};function u(e,u){if(e in i)return i[e];var t="function"==typeof parcelRequire&&parcelRequire;if(!u&&t)return t(e,!0);if(r)return r(e,!0);if(n&&"string"==typeof e)return n(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return u.register=function(e,r){i[e]=r},i=e(u),u.modules=i,u}(function (require) {var mj=function(t,e){return(mj=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function da(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}mj(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var $b=function(){return $b=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},$b.apply(this,arguments)};function Pa(t,e,r,o){return new(r||(r=Promise))(function(n,a){function $(t){try{p(o.next(t))}catch(e){a(e)}}function i(t){try{p(o.throw(t))}catch(e){a(e)}}function p(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then($,i)}p((o=o.apply(t,e||[])).next())})}function Ja(t,e){var r,o,n,a,$={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;$;)try{if(r=1,o&&(n=2&a[0]?o.return:a[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,a[1])).done)return n;switch(o=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return $.label++,{value:a[1],done:!1};case 5:$.label++,o=a[1],a=[0];continue;case 7:a=$.ops.pop(),$.trys.pop();continue;default:if(!(n=(n=$.trys).length>0&&n[n.length-1])&&(6===a[0]||2===a[0])){$=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){$.label=a[1];break}if(6===a[0]&&$.label<n[1]){$.label=n[1],n=a;break}if(n&&$.label<n[2]){$.label=n[2],$.ops.push(a);break}n[2]&&$.ops.pop(),$.trys.pop();continue;}a=e.call(t,$)}catch(i){a=[6,i],o=0}finally{r=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}}var a=Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){void 0===o&&(o=r),t[o]=e[r]};function be(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],o=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function dd(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var o,n,a=r.call(t),$=[];try{for(;(void 0===e||e-->0)&&!(o=a.next()).done;)$.push(o.value)}catch(i){n={error:i}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return $}function Lc(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(dd(arguments[e]));return t}function Kg(t){return this instanceof Kg?(this.v=t,this):new Kg(t)}var b=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function _b($,e){for(var r=$.length,t=0;t<r;++t)if($[t]===e)return t;return-1}function ff($,e){for(var r=$.length,t=0;t<r;++t)if(e($[t]))return!0;return!1}function vd($,e){for(var r=$.length,t=new Array(r),o=0;o<r;++o)t[o]=e($[o],o);return t}function la($,e){for(var r=$.length,t=0;t<r;++t)e($[t],t)}function nj($,e){for(var r=$.length;r--;)e($[r],r)}function gf($,e){for(var r=$.length,t=0;t<r&&e($[t],t);++t);}function oj($,e){for(var r=$.length,t=e;t<r;++t)$[t-e]=$[t];$.length=r-e}function pj($,e){for(var r=e.length,t=0;t<r;++t)$.push(e[t])}function ta($,e){var r=!1,t=$.indexOf(e);if(-1!==t){r=!0,$.splice(t,1);for(var o=$.length;t<o;)$[t]===e?($.splice(t,1),--o):++t}return r}function Wb($,e,r){var t=_b($,e);-1!==t&&gd($,t),null==r?$.push(e):fd($,r,e)}function ed($,e,r){aa(r)?0===r?$.unshift(e):$.splice(r,0,e):$.push(e)}function qj($,e,r){var t=$.indexOf(e);-1!==t&&$.splice(t,1),aa(r)?$.splice(r,0,e):$.push(e)}function Lg($){return Array.isArray($)?$:[$]}function wd($){for(var e=$.length,r=new Array(e),t=0;t<e;++t)r[t]=$[t];return r}function fd($,e,r){$.splice(e,0,r)}function gd($,e){$.splice(e,1)}function ce($,e,r){for(var t=0,o=$.length,n=!1;t<o;){var p=t+o>>1,x=e(r,$[p]);x<0?o=p:0===x?(n=!0,t=p+1):t=p+1}return{found:n,index:n?t-1:t}}function Mg($,e){for(var r=$.length,t=0;t<r;++t)if(e($[t],t))return t;return-1}function Ng($,e){for(var r=$.length,t=0;t<r;)e($[t])?++t:($.splice(t,1),--r)}function yb(e){return Number(e)!==e}function Og(e){return{}.toString.call(e)}function hf(e){if("string"==typeof e)return e;if("number"==typeof e)return""+e;throw new Error("Expected a string or number but got "+Og(e))}function Ua(e){return!!e}function Ra(e){if(ba(e)&&!aa(e)){var t=Number(e);return yb(t)&&Ca(e)&&""!=e?Ra(e.replace(/[^0-9.\-]+/g,"")):t}return e}function wb(e){if(ba(e)&&!Ca(e)){if(aa(e))return hf(e);if(Wa(e))return e.toString()}return e}function rj(e){return!ba(e)||aa(e)||sj(e)?e:Ca(e)&&-1!=e.indexOf("%")?ia(Ra(e)):Ra(e)}function ba(e){return null!=e}function Va(e){if(ba(e))return e;throw new Error("Value doesn't exist")}function jf(e,t){return ba(e)?e:t}function xd(e){return"[object Date]"===Og(e)}function Ca(e){return"string"==typeof e}function aa(e){return"number"==typeof e&&Number(e)==e}function Wa(e){return"object"==typeof e&&null!=e}function mb(e){return Array.isArray(e)}var Da=function(){function e(e){this._value=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value/100},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"percent",{get:function(){return this._value},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this._value+"%"},e}();function ia(e){return new Da(e)}function sj(e){return e instanceof Da}var de=Math.PI;var Pg=de/2;var ee=de/180;var zc=180/de;function kf(t,$,e){return ba(t)?na(t=Ra(t),$,e):t}function ha(t,$,e){if(!aa($)||$<=0){var r=Math.round(t);return e&&r-t==.5&&r--,r}var o=Math.pow(10,$);return Math.round(t*o)/o}function Qg(t,$){if(!aa($)||$<=0)return Math.ceil(t);var e=Math.pow(10,$);return Math.ceil(t*e)/e}function na(t,$,e){if(aa($)){if(aa(e)&&e<$){var r=e;e=$,$=r}t<$&&(t=$)}return aa(e)&&t>e&&(t=e),t}function ja(t){return ha(Math.sin(ee*t),10)}function Rg(t){return ha(Math.tan(ee*t),10)}function ka(t){return ha(Math.cos(ee*t),10)}function wa(t,$){return aa(t)?aa($)&&$>t?$:t:aa($)?$:null}function Ea(t,$){return aa(t)?aa($)&&$<t?$:t:aa($)?$:null}function tj(t,$){return t.reduce(function(t,e){return Math.abs(e-$)<Math.abs(t-$)?e:t})}function fe(t,$){var e=Va(t.start),r=Va($.start),o=Va(t.end),n=Va($.end);return Math.max(e,r)<=Math.min(o,n)}function lf(t){var $=Va(t.start);return{start:1-Va(t.end),end:1-$}}function uj(t,$){var e=Va(t.start),r=Va($.start),o=Va(t.end),n=Va($.end),m=Math.max(e,r),i=Math.min(o,n);return i<m?void 0:{start:m,end:i}}function Ka(t,$){return t?($||($={x:0,y:0}),Math.sqrt(Math.pow(Math.abs(t.x-$.x),2)+Math.pow(Math.abs(t.y-$.y),2))):0}function vj(t,$){return t?($||($={x:0,y:0}),Math.abs(t.x-$.x)):0}function wj(t,$){return t?($||($={x:0,y:0}),Math.abs(t.y-$.y)):0}function xj(t,$,e,r,o){if(!t)return 0;$||($={x:0,y:0});var n=0,m=t;if(o>0)for(var i=0;i<=o;i++){var x=mf(t,$,e,r,i/o);n+=Ka(m,x),m=x}return n}function yj(t,$,e,r){var o=Ka($,r),n=Ka(t,e);return Math.abs(n/o)}function ge(t,$,e){return aa(e)||(e=.5),{x:t.x+($.x-t.x)*e,y:t.y+($.y-t.y)*e}}function xb(t,$){$||($={x:2*t.x,y:2*t.y});var e=$.x-t.x,r=$.y-t.y,o=Math.atan2(r,e)*zc;return o<0&&(o+=360),Mc(o)}function yd(t){if(t){var $=t.length;if(0!==$){for(var e,r=void 0,o=void 0,n=void 0,m=0;m<$;m++){var i=t[m];(!aa(o)||i.x>o)&&(o=i.x),(!aa(r)||i.x<r)&&(r=i.x),(!aa(e)||i.y<e)&&(e=i.y),(!aa(n)||i.y>n)&&(n=i.y)}return{x:r,y:e,width:o-r,height:n-e}}}return{x:0,y:0,width:0,height:0}}function zd(t){var $=t.length;if(0!==$){for(var e=void 0,r=void 0,o=void 0,n=void 0,m=0;m<$;m++){var i=t[m];e=Ea(i.x,e),r=Ea(i.y,r),o=wa(i.x+i.width,o),n=wa(i.y+i.height,n)}return{x:e,y:r,width:o-e,height:n-r}}}function Sg(t,$,e,r){return{x:(1-r)*(1-r)*t.x+2*(1-r)*r*e.x+r*r*$.x,y:(1-r)*(1-r)*t.y+2*(1-r)*r*e.y+r*r*$.y}}function mf(t,$,e,r,o){var n={x:0,y:0},m=1-o,i=m*m,x=i*m;return n.x=t.x*x+3*e.x*i*o+3*r.x*m*o*o+$.x*o*o*o,n.y=t.y*x+3*e.y*i*o+3*r.y*m*o*o+$.y*o*o*o,n}function Tg(t,$,e,r,o,n){return o=he(o),n=he(n),{x:(-t.x+$.x/o+e.x)*o,y:(-t.y+$.y/n+e.y)*n}}function Ug(t,$,e,r,o,n){return o=he(o),n=he(n),{x:($.x+e.x/o-r.x)*o,y:($.y+e.y/n-r.y)*n}}function he(t){return 1-t+1e-5}function Mc(t){return 360==t?360:t%360}function fc(t,$,e){if($>e){var r=$;$=e,e=r}t=Mc(t);var o=($-Mc($))/360;return t<$&&(t+=360*(o+1)),t>e&&(t-360>$?t-=360:t=t<$+(e-$)/2+180?e:$),t<$&&(t=t>$+(e-$)/2-180?$:e),t}function gc(t,$,e){var r=Number.MAX_VALUE,o=Number.MAX_VALUE,n=-Number.MAX_VALUE,m=-Number.MAX_VALUE,i=[];aa(e)||(e=1),i.push(nf(e,t)),i.push(nf(e,$));for(var x=Math.min(90*Math.floor(t/90),90*Math.floor($/90)),b=Math.max(90*Math.ceil(t/90),90*Math.ceil($/90)),p=x;p<=b;p+=90)p>=t&&p<=$&&i.push(nf(e,p));for(var D=0;D<i.length;D++){var F=i[D];F.x<r&&(r=F.x),F.y<o&&(o=F.y),F.x>n&&(n=F.x),F.y>m&&(m=F.y)}return{x:r,y:o,width:n-r,height:m-o}}function nf(t,$){return{x:t*ka($),y:t*ja($)}}function Vg(t,$){return t.x>=$.x&&t.x<=$.x+$.width&&t.y>$.y&&t.y<$.y+$.height}var La=function(){function e(e){this._disposed=!1,this._dispose=e}return e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._dispose())},e}();var Ya=function(e){function t(t){return e.call(this,function(){la(t,function(e){e.dispose()})})||this}return da(t,e),t}(La);var nb=function(e){function t(){var t=e.call(this,function(){ba(t._disposer)&&(t._disposer.dispose(),t._disposer=void 0)})||this;return t}return da(t,e),t.prototype.get=function(){return this._value},t.prototype.set=function(e,t){ba(this._disposer)&&this._disposer.dispose(),this._disposer=t,this._value=e},t.prototype.reset=function(){this.set(void 0,void 0)},t}(La);var ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._counter=0,t}return da(t,e),t.prototype.increment=function(){var e=this;return++this._counter,new La(function(){--e._counter,0===e._counter&&e.dispose()})},t}(La);var zj=!1,je=[],Ad=[],ke=[],of=[],Aj=1e3/60,pf="function"==typeof requestAnimationFrame?function($){requestAnimationFrame($)}:function($){setTimeout($,Aj)};function Wg(){for(var $=Date.now(),e=je.length,r=0;r<e;++r)je[r]($);oj(je,e);for(r=0;r<Ad.length;++r)Ad[r]($);Ad.length=0;for(r=0;r<ke.length;++r)ke[r]($);ke.length=0,0===je.length&&0===Ad.length?zj=!1:pf(Wg)}function Xg(){zj||(zj=!0,pf(Wg))}function Bj($){Ad.push($),Xg()}function Yg($){ke.push($),Xg()}function Cj($){of.push($)}function Dj(){for(var $=Date.now(),e=of.length,r=0;r<e;++r)of.shift()($)}var Ac=function(){function t(){this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}return t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var t=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{la(t,function(t){t.disposer.dispose()})}finally{this._killed=null,this._iterating=null}}},t.prototype.hasListeners=function(){return 0!==this._listeners.length},t.prototype.hasListenersByType=function(t){return ff(this._listeners,function(e){return(null===e.type||e.type===t)&&!e.killed})},t.prototype.enable=function(){this._enabled=!0},t.prototype.disable=function(){this._enabled=!1},t.prototype.enableType=function(t){delete this._disabled[t]},t.prototype.disableType=function(t,e){void 0===e&&(e=1/0),this._disabled[t]=e},t.prototype._removeListener=function(t){if(0===this._iterating){var e=this._listeners.indexOf(t);if(-1===e)throw new Error("Invalid state: could not remove listener");this._listeners.splice(e,1)}else this._killed.push(t)},t.prototype._removeExistingListener=function(t,e,i,s){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener(function(n){n.once!==t||n.type!==e||null!=i&&n.callback!==i||n.context!==s||n.disposer.dispose()})},t.prototype.isEnabled=function(t){if(this._disposed)throw new Error("EventDispatcher is disposed");return this._enabled&&this._listeners.length>0&&this.hasListenersByType(t)&&null==this._disabled[t]},t.prototype.has=function(t,e,i){return-1!==Mg(this._listeners,function(s){return!0!==s.once&&s.type===t&&(null==e||s.callback===e)&&s.context===i})},t.prototype._shouldDispatch=function(t){if(this._disposed)throw new Error("EventDispatcher is disposed");var e=this._disabled[t];return aa(e)?(e<=1?delete this._disabled[t]:--this._disabled[t],!1):this._enabled},t.prototype._eachListener=function(t){var e=this;++this._iterating;try{la(this._listeners,t)}finally{--this._iterating,0===this._iterating&&0!==this._killed.length&&(la(this._killed,function(t){e._removeListener(t)}),this._killed.length=0)}},t.prototype.dispatchImmediately=function(t,e){this._shouldDispatch(t)&&this._eachListener(function(i){i.killed||null!==i.type&&i.type!==t||i.dispatch(t,e)})},t.prototype.dispatch=function(t,e){this._shouldDispatch(t)&&this._eachListener(function(i){i.killed||null!==i.type&&i.type!==t||Cj(function(){i.killed||i.dispatch(t,e)})})},t.prototype._on=function(t,e,i,s,n,r){var o=this;if(this._disposed)throw new Error("EventDispatcher is disposed");this._removeExistingListener(t,e,i,s);var p={type:e,callback:i,context:s,shouldClone:n,dispatch:r,killed:!1,once:t,disposer:new La(function(){p.killed=!0,o._removeListener(p)})};return this._listeners.push(p),p},t.prototype.onAll=function(t,e,i){return void 0===i&&(i=!0),this._on(!1,null,t,e,i,function(i,s){return t.call(e,i,s)}).disposer},t.prototype.on=function(t,e,i,s){return void 0===s&&(s=!0),this._on(!1,t,e,i,s,function(t,s){return e.call(i,s)}).disposer},t.prototype.once=function(t,e,i,s){void 0===s&&(s=!0);var n=this._on(!0,t,e,i,s,function(t,s){n.disposer.dispose(),e.call(i,s)});return n.disposer},t.prototype.off=function(t,e,i){this._removeExistingListener(!1,t,e,i)},t.prototype.copyFrom=function(t){var e=this;if(this._disposed)throw new Error("EventDispatcher is disposed");if(t===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");la(t._listeners,function(t){!t.killed&&t.shouldClone&&(null===t.type?e.onAll(t.callback,t.context):t.once?e.once(t.type,t.callback,t.context):e.on(t.type,t.callback,t.context))})},t}();var Zg=function(t){function e(e){var i=t.call(this)||this;return i.target=e,i}return da(e,t),e.prototype.copyFrom=function(t){var e=this;if(this._disposed)throw new Error("EventDispatcher is disposed");if(t===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");la(t._listeners,function(i){i.context!==t.target&&!i.killed&&i.shouldClone&&(null===i.type?e.onAll(i.callback,i.context):i.once?e.once(i.type,i.callback,i.context):e.on(i.type,i.callback,i.context))})},e}(Ac);function Ej(e){return function($){for(var r in e)if(hc(e,r)&&!$([r,e[r]]))break}}function $g(e){var $=[];for(var r in e)hc(e,r)&&$.push(r);return $}function Fj(e,$){return $g(e).sort($)}function hc(e,$){return{}.hasOwnProperty.call(e,$)}function _g(e,$){for(var r in e)if(hc(e,r)&&!$(r,e[r]))break}function sa(e,$){_g(e,function(e,r){return $(e,r),!0})}function sc(e,$,r){la(Fj(e,r),function(r){$(r,e[r])})}function qf(e,$){return Object.assign({},e,$)}function Gj(e){return JSON.parse(JSON.stringify(e))}function gb(e,$,r){la(r,function(r){ba(e[r])&&($[r]=e[r])})}function Hj(e,$,r){la(r,function(r){$[r]=e[r]})}function Bd(e,$){gb(e,$,$g(e))}function Nc(t){return function(r){for(var n=t.length,$=0;$<n&&r(t[$]);++$);}}function Ij(t){var r=0;return t(function(t){return++r,!0}),r}function Cd(t){var r=[];return t(function(t){return r.push(t),!0}),r}function Pb(t,r){t(r)}function ga(t,r){t(function(t){return r(t),!0})}function hd(t,r){return Nc(Cd(t).sort(r))}function ah(t,r){return function(n){return t(function(t){return n(r(t))})}}function Jj(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(r){for(var n=!0,$=function(t){return n=r(t)},e=t.length,o=0;o<e&&(t[o]($),n);++o);}}function Kj(t){return function(r){var n=!0,$=function(t){return n=r(t)};t(function(t){return t($),n})}}function Oc(t){return function(r){var n=0;t(function(t){return r([n++,t])})}}function Lj(t,r){var n;return t(function(t){return!r(t)||(n=t,!1)}),n}function rf(t,r){var n=!1;return t(function(t){return!r(t)||(n=!0,!1)}),n}var sf=function(){function t(t,r){this.createNewItems=!1,this.list=t,this._create=r,this.reset()}return t.prototype.reset=function(){this._listCopy=Cd(this.list.iterator())},t.prototype.clear=function(){this._listCopy.length=0},t.prototype.getFirst=function(){return this.returnItem(0)},t.prototype.getLast=function(){return this.returnItem(this._listCopy.length-1)},t.prototype.find=function(t){var r=Mg(this._listCopy,t);if(-1!==r){var n=this._listCopy[r];return ta(this._listCopy,n),n}return this.getLast()},t.prototype.removeItem=function(t){return ta(this._listCopy,t)},t.prototype.returnItem=function(t){if(t>=0&&t<this._listCopy.length){var r=this._listCopy[t];return ta(this._listCopy,r),r}if(this.createNewItems)return this._create()},t.prototype.iterator=function(){return Nc(this._listCopy)},t}();function tf(r,t){return r===t?0:r<t?-1:1}function bh(r,t){return new Array(t+1).join(r)}function Mj(r){for(var t="",$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=0;e<r;e++)t+=$.charAt(Math.floor(Math.random()*$.length));return t}var Pc=function(e){function t(t){var i=t.events.on("removed",function(e){e.oldValue.dispose()},void 0,!1);return e.call(this,function(){i.dispose(),ga(t.iterator(),function(e){e[1].dispose()})})||this}return da(t,e),t}(La);var Ta=function(){function e(){this.events=new Ac,this._dictionary={}}return e.prototype.hasKey=function(e){return hc(this._dictionary,e)},e.prototype.getKey=function(e){return this._dictionary[e]},e.prototype.insertKey=function(e,t){if(hc(this._dictionary,e))throw new Error("Key "+e+" already exists in dictionary");this._dictionary[e]=t,this.events.isEnabled("insertKey")&&this.events.dispatchImmediately("insertKey",{type:"insertKey",target:this,key:e,newValue:t})},e.prototype.setKey=function(e,t){if(hc(this._dictionary,e)){var i=this._dictionary[e];i!==t&&(this._dictionary[e]=t,this.events.isEnabled("setKey")&&this.events.dispatchImmediately("setKey",{type:"setKey",target:this,key:e,oldValue:i,newValue:t}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:i}))}else this._dictionary[e]=t,this.events.isEnabled("insertKey")&&this.events.dispatchImmediately("insertKey",{type:"insertKey",target:this,key:e,newValue:t})},e.prototype.updateKey=function(e,t){if(!hc(this._dictionary,e))throw new Error("Key "+e+" doesn't exist in dictionary");var i=this._dictionary[e],r=t(i);i!==r&&(this._dictionary[e]=r,this.events.isEnabled("setKey")&&this.events.dispatchImmediately("setKey",{type:"setKey",target:this,key:e,oldValue:i,newValue:r}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:i}))},e.prototype.removeKey=function(e){if(hc(this._dictionary,e)){var t=this._dictionary[e];delete this._dictionary[e],this.events.isEnabled("removeKey")&&this.events.dispatchImmediately("removeKey",{type:"removeKey",target:this,key:e,oldValue:t}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:t})}},e.prototype.insertKeyIfEmpty=function(e,t){return this.hasKey(e)||this.insertKey(e,t()),this.getKey(e)},e.prototype.clear=function(){var e=this;this.events.isEnabled("removed")&&sa(this._dictionary,function(t,i){e.events.dispatchImmediately("removed",{type:"removed",target:e,oldValue:i})}),this._dictionary={},this.events.isEnabled("cleared")&&this.events.dispatchImmediately("cleared",{type:"cleared",target:this})},e.prototype.copyFrom=function(e){var t=this;ga(e.iterator(),function(e){t.setKey(e[0],e[1])})},e.prototype.iterator=function(){return Ej(this._dictionary)},e.prototype[Symbol.iterator]=function(){var e,t,i,r;return Ja(this,function(o){switch(o.label){case 0:for(t in e=[],this._dictionary)e.push(t);i=0,o.label=1;case 1:return i<e.length?(r=e[i],hc(this._dictionary,r)?[4,[r,this._dictionary[r]]]:[3,3]):[3,4];case 2:o.sent(),o.label=3;case 3:return i++,[3,1];case 4:return[2];}})},e.prototype.each=function(e){ga(this.iterator(),function(t){var i=dd(t,2),r=i[0],o=i[1];return e(r,o)})},e.prototype.sortedIterator=function(){return hd(this.iterator(),function(e,t){return tf(e[0],t[0])})},e}();var Dd=function(e){function t(t){var i=e.call(this)||this;return i.template=t,i}return da(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return this._template},set:function(e){e.isTemplate=!0,this._template=e},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e){var t=this;ga(e.iterator(),function(e){t.setKey(e[0],e[1].clone())})},t.prototype.create=function(e){var t=this;return this.insertKeyIfEmpty(e,function(){return t.template.clone()})},t}(Ta);var Nj=function(){function e(){this._storage=new Ta,this.ttl=1e3}return e.prototype.set=function(e,t,r,o){var i=this._storage.insertKeyIfEmpty(e,function(){return new Ta}),$={touched:new Date().getTime(),ttl:aa(o)?o:this.ttl,value:r};i.setKey(t,$)},e.prototype.get=function(e,t,r){if(void 0===r&&(r=void 0),this._storage.hasKey(e)){var o=this._storage.getKey(e);if(o.hasKey(t)){var i=o.getKey(t);return i.ttl&&i.touched+i.ttl<new Date().getTime()&&(i.expired=!0),i.expired?(o.removeKey(t),r):i.value}return r}return r},e.prototype.clear=function(e){e?this._storage.removeKey(e):this._storage.clear()},e}();var Ed=new Nj;var Oj=function(){function t(){var t=this;this.events=new Ac,this.themes=[],this.loadedThemes={},this._uidCount=0,this.registeredClasses={},this._placeholders={},this.invalidSprites={},this.invalidDatas={},this.invalidRawDatas=[],this.invalidDataItems=[],this.invalidDataRange=[],this.invalidPositions={},this.invalidLayouts={},this.baseSprites=[],this.baseSpritesByUid={},this.queue=[],this.deferred=[],this.uid=this.getUniqueId(),this.invalidSprites.noBase=[],this.invalidDatas.noBase=[],this.invalidLayouts.noBase=[],this.invalidPositions.noBase=[],"undefined"!=typeof addEventListener&&(addEventListener("beforeprint",function(){la(t.baseSprites,function(t){var i=t.paper.svg;i.setAttribute("viewBox","0 0 "+i.clientWidth+" "+i.clientHeight)})}),addEventListener("afterprint",function(){la(t.baseSprites,function(t){t.paper.svg.removeAttribute("viewBox")})}))}return t.prototype.getUniqueId=function(){var t=this._uidCount;return this._uidCount+=1,"id-"+t},Object.defineProperty(t.prototype,"map",{get:function(){return this._map||(this._map=new Ta),this._map},enumerable:!0,configurable:!0}),t.prototype.setCache=function(t,i,e){Ed.set(this.uid,t,i,e)},t.prototype.getCache=function(t,i){return void 0===i&&(i=void 0),Ed.get(this.uid,t,i)},t.prototype.dispatch=function(t,i){this.events.isEnabled(t)&&(i?(i.type=t,i.target=i.target||this,this.events.dispatch(t,{type:t,target:this})):this.events.dispatch(t,{type:t,target:this}))},t.prototype.dispatchImmediately=function(t,i){this.events.isEnabled(t)&&(i?(i.type=t,i.target=i.target||this,this.events.dispatchImmediately(t,i)):this.events.dispatchImmediately(t,{type:t,target:this}))},t.prototype.getPlaceholder=function(t){return ba(this._placeholders[t])?this._placeholders[t]:(this._placeholders[t]="__amcharts_"+t+"_"+Mj(8)+"__",this._placeholders[t])},t.prototype.addToInvalidComponents=function(t){t.baseId?Wb(this.invalidDatas[t.baseId],t):Wb(this.invalidDatas.noBase,t)},t.prototype.removeFromInvalidComponents=function(t){t.baseId&&ta(this.invalidDatas[t.baseId],t),ta(this.invalidDatas.noBase,t)},t.prototype.addToInvalidSprites=function(t){t.baseId?ed(this.invalidSprites[t.baseId],t):ed(this.invalidSprites.noBase,t)},t.prototype.removeFromInvalidSprites=function(t){t.baseId&&ta(this.invalidSprites[t.baseId],t),ta(this.invalidSprites.noBase,t)},t.prototype.addToInvalidPositions=function(t){t.baseId?ed(this.invalidPositions[t.baseId],t):ed(this.invalidPositions.noBase,t)},t.prototype.removeFromInvalidPositions=function(t){t.baseId&&ta(this.invalidPositions[t.baseId],t),ta(this.invalidPositions.noBase,t)},t.prototype.addToInvalidLayouts=function(t){t.baseId?ed(this.invalidLayouts[t.baseId],t):ed(this.invalidLayouts.noBase,t)},t.prototype.removeFromInvalidLayouts=function(t){t.baseId&&ta(this.invalidLayouts[t.baseId],t),ta(this.invalidLayouts.noBase,t)},t}();var ca=new Oj;function Pj(t,i){var e=ca.registeredClasses[i];return null!=e&&t instanceof e}var ch=function(){function e(e,t,r){this._array=e,this._start=t,this._end=r}return e.prototype.iterator=function(){var e=this;return function(t){if(e._start!==e._end)if(e._start<e._end)for(var r=e._start;r<e._end&&t(e._array[r]);++r);else for(r=e._start-1;r>=e._end&&t(e._array[r]);--r);}},e.prototype.backwards=function(){return new e(this._array,this._end,this._start)},e.prototype.range=function(t,r){if(t<=r){if(this._start===this._end)return this;if(this._start<this._end){var i=r-t;return t=Math.max(this._start+t,this._start),r=Math.min(t+i,this._end),new e(this._array,t,r)}i=r-t;return t=Math.max(this._start-t,this._end),r=Math.max(t-i,this._end),new e(this._array,t,r)}throw new Error("Start index must be lower than end index")},e}();var c=function(e){function t(t,r,i){var s=e.call(this,[t.events.on("inserted",function(e){var r=e.newValue,i=s._getKey(r),n=0;Pb(t.iterator(),function(e){return e!==r&&(s._getKey(e)===i&&++n,!0)}),s._insert(r,i,n)},void 0,!1),t.events.on("removed",function(e){s._remove(e.oldValue)},void 0,!1)])||this;return s._keys=[],s._groups={},s._getKey=r,s._sort=i,ga(t.iterator(),function(e){s._insert(e,r(e))}),s}return da(t,e),t.prototype._insert=function(e,t,r){if(null==this._groups[t]){this._groups[t]=[];var i=ce(this._keys,this._sort,t),s=i.found,n=i.index;if(s)throw new Error("Key already exists: "+t);fd(this._keys,n,t)}null==r?this._groups[t].push(e):fd(this._groups[t],r,e)},t.prototype._remove=function(e){var t=this._getKey(e),r=this._groups[t];if(null!=r&&(ta(r,e),0===r.length)){delete this._groups[t];var i=ce(this._keys,this._sort,t),s=i.found,n=i.index;if(!s)throw new Error("Key doesn't exist: "+t);gd(this._keys,n)}},t.prototype.iterator=function(){var e=this;return Kj(ah(Nc(this._keys),function(t){return Nc(e._groups[t])}))},t}(Ya);var Sa=function(e){function t(t,r){void 0===r&&(r=!0);var i=this;if(r){var s=t.events.on("removed",function(e){e.oldValue.dispose()},void 0,!1);i=e.call(this,function(){s.dispose(),ga(t.iterator(),function(e){e.dispose()})})||this}else i=e.call(this,function(){ga(t.iterator(),function(e){e.dispose()})})||this;return i}return da(t,e),t}(La);function Fd(e,t){if(!(e>=0&&e<t))throw new Error("Index out of bounds: "+e)}var Fa=function(){function e(e){void 0===e&&(e=[]),this.events=new Ac,this._values=e}return Object.defineProperty(e.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),e.prototype.contains=function(e){return-1!==this._values.indexOf(e)},e.prototype.removeValue=function(e){for(var t=0,r=this._values.length;t<r;)this._values[t]===e?(this.removeIndex(t),--r):++t},e.prototype.indexOf=function(e){return _b(this._values,e)},Object.defineProperty(e.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.hasIndex=function(e){return e>=0&&e<this._values.length},e.prototype.getIndex=function(e){return this._values[e]},e.prototype.setIndex=function(e,t){Fd(e,this._values.length);var r=this._values[e];return r!==t&&(this._values[e]=t,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:e,oldValue:r,newValue:t}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:r}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:t})),r},e.prototype.insertIndex=function(e,t){Fd(e,this._values.length+1),fd(this._values,e,t),this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:e,newValue:t}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:t})},e.prototype._sortQuicksort=function(e,t,r){if(e<t){var i=this._sortPartition(e,t,r);this._sortQuicksort(e,i,r),this._sortQuicksort(i+1,t,r)}},e.prototype._sortPartition=function(e,t,r){for(var i=this._values,s=i[e],n=e-1,o=t+1;;){do{++n}while(r(i[n],s)<0);do{--o}while(r(i[o],s)>0);if(n>=o)return o;this.swap(n,o)}},e.prototype.sort=function(e){this._sortQuicksort(0,this._values.length-1,e)},e.prototype.swap=function(e,t){var r=this._values.length;if(Fd(e,r),Fd(t,r),e!==t){var i=this._values[e],s=this._values[t];this._values[e]=s,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:e,oldValue:i,newValue:s}),this._values[t]=i,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:t,oldValue:s,newValue:i})}},e.prototype.removeIndex=function(e){Fd(e,this._values.length);var t=this._values[e];return gd(this._values,e),this.events.isEnabled("removeIndex")&&this.events.dispatchImmediately("removeIndex",{type:"removeIndex",target:this,index:e,oldValue:t}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:t}),t},e.prototype.moveValue=function(e,t){var r=this.indexOf(e);if(-1!==r){var i=this._values[r];gd(this._values,r),this.events.isEnabled("removeIndex")&&this.events.dispatchImmediately("removeIndex",{type:"removeIndex",target:this,index:r,oldValue:i})}null==t?(t=this._values.length,this._values.push(e)):fd(this._values,t,e),this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:t,newValue:e}),-1===r&&this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:e})},e.prototype.push=function(e){var t=this._values.push(e)-1;return this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:t,newValue:e}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:e}),e},e.prototype.unshift=function(e){this.insertIndex(0,e)},e.prototype.pushAll=function(e){var t=this;la(e,function(e){t.push(e)})},e.prototype.copyFrom=function(e){this.pushAll(e._values)},e.prototype.pop=function(){return this._values.length-1<0?void 0:this.removeIndex(this._values.length-1)},e.prototype.shift=function(){return this._values.length?this.removeIndex(0):void 0},e.prototype.setAll=function(e){var t=this,r=wd(this._values);this._values.length=0,la(e,function(e){t._values.push(e)}),this.events.isEnabled("setAll")&&this.events.dispatchImmediately("setAll",{type:"setAll",target:this,oldArray:r,newArray:this._values}),this.events.isEnabled("removed")&&la(r,function(e){t.events.dispatchImmediately("removed",{type:"removed",target:t,oldValue:e})}),this.events.isEnabled("inserted")&&la(this._values,function(e){t.events.dispatchImmediately("inserted",{type:"inserted",target:t,newValue:e})})},e.prototype.clear=function(){this.setAll([])},e.prototype.iterator=function(){return Nc(this._values)},e.prototype[Symbol.iterator]=function(){var e,t;return Ja(this,function(r){switch(r.label){case 0:e=this._values.length,t=0,r.label=1;case 1:return t<e?[4,this._values[t]]:[3,4];case 2:r.sent(),r.label=3;case 3:return++t,[3,1];case 4:return[2];}})},e.prototype.each=function(e){la(this._values,e)},e.prototype.range=function(e,t){if(e<=t){var r=t-e;return e=Math.max(e,0),t=Math.min(e+r,this._values.length),new ch(this._values,e,t)}throw new Error("Start index must be lower than end index")},e.prototype.backwards=function(){return new ch(this._values,this._values.length,0)},e}();var _a=function(e){function t(t){var r=e.call(this)||this;return r.template=t,r}return da(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return this._template},set:function(e){e.isTemplate=!0,this._template=e},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e){var t=this;ga(e.iterator(),function(e){t.push(e.clone())})},t.prototype.create=function(e){var t=null!=e?new e:this.template.clone();return this.push(t),t},t.prototype.clone=function(){for(var e=new t(this.template),r=this.values,i=r.length,s=0;s<i;++s)e.push(r[s].clone());return e},t}(Fa);var dh=function(){function e(e){this._values=[],this.events=new Ac,null!=e&&this.setAll(e)}return Object.defineProperty(e.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),e.prototype._insert=function(e){return this._values.push(e),this._values.length-1},Object.defineProperty(e.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return _b(this._values,e)},e.prototype.contains=function(e){return-1!==this.indexOf(e)},e.prototype.getIndex=function(e){return this._values[e]},Object.defineProperty(e.prototype,"first",{get:function(){return this._values[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this._values[this._values.length-1]},enumerable:!0,configurable:!0}),e.prototype.insert=function(e){var t=this._insert(e);this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,index:t,newValue:e})},e.prototype.remove=function(e){var t=this.indexOf(e);if(-1!==t){var r=this._values[t];gd(this._values,t),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,index:t,oldValue:r})}},e.prototype.setAll=function(e){var t=this;nj(this._values,function(e,r){t._values.pop(),t.events.isEnabled("removed")&&t.events.dispatchImmediately("removed",{type:"removed",target:t,index:r,oldValue:e})}),la(e,function(e){t.insert(e)})},e.prototype.clear=function(){this.setAll([])},e.prototype.slice=function(t,r){var i=new e;return i._values=this._values.slice(t,r),i},e.prototype.findClosestIndex=function(e,t,r){void 0===r&&(r="any");var i,s,n=-1,o=0;return Pb(this.iterator(),function(a){var p=t(a);if("any"===r){if(p===e)return n=o,!1;var $=Math.abs(e-p);(!ba(s)||s>$)&&(n=o,i=p,s=$)}else"left"===r&&p<e?(!ba(i)||i<p)&&(n=o,i=p):"right"===r&&p>=e&&(!ba(i)||i>=p)&&(n=o,i=p);return++o,!0}),-1===n&&("left"===r?n=0:"right"===r&&(n=this.length-1)),n},e.prototype.iterator=function(){return Nc(this._values)},e.prototype[Symbol.iterator]=function(){var e,t;return Ja(this,function(r){switch(r.label){case 0:e=this._values.length,t=0,r.label=1;case 1:return t<e?[4,this._values[t]]:[3,4];case 2:r.sent(),r.label=3;case 3:return++t,[3,1];case 4:return[2];}})},e.prototype.each=function(e){la(this._values,e)},e}();var uf=function(e){function t(t){var r=e.call(this)||this;return r._ordering=t,r}return da(t,e),t.prototype._insert=function(e){var t=ce(this._values,this._ordering,e).index;return fd(this._values,t,e),t},t.prototype.indexOf=function(e){var t=ce(this._values,this._ordering,e),r=t.found,i=t.index;return r?i:-1},t.prototype.update=function(e){var t=_b(this._values,e);if(-1!==t){var r=this._values.length-1;(0===t||this._ordering(this._values[t-1],e)<0)&&(t===r||this._ordering(e,this._values[t+1])<0)||(gd(this._values,t),this._insert(e))}},t}(dh);var le=function(e){function t(t){var r=e.call(this)||this;return r.template=t,r}return da(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return this._template},set:function(e){e.isTemplate=!0,this._template=e},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e){var t=this;ga(e.iterator(),function(e){t.insert(e.clone())})},t.prototype.slice=function(e,r){var i=new t(this.template);return i._values=this._values.slice(e,r),i},t.prototype.create=function(e){var t=null!=e?new e:this.template.clone();return this.insert(t),t},t}(dh);var eh=function(e){function t(t,r){var i=e.call(this,r)||this;return i.template=t,i}return da(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return this._template},set:function(e){e.isTemplate=!0,this._template=e},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e){var t=this;ga(e.iterator(),function(e){t.insert(e.clone())})},t.prototype.create=function(e){var t=null!=e?new e:this.template.clone();return this.insert(t),t},t}(uf);function ic(r,t){return r===t?0:r<t?-1:1}function vf(r){switch(r){case 0:return 0;case-1:return 1;case 1:return-1;}}function fh(r,e){return 0===r?e:r}var Qj=function(){function t(){this._callbackId=0,this._callbacks=new uf(function(t,r){return fh(ic(t.priority,r.priority),ic(t.id,r.id))})}return t.prototype.addAll=function(t,r,e,i,o){void 0===i&&(i=0),this._callbacks.insert({id:++this._callbackId,key:r,callback:e,priority:i,scope:o,type:t})},t.prototype.isEnabled=function(t,r){return ff(this._callbacks.values,function(e){return e.key===r&&t instanceof e.type})},t.prototype.applyAll=function(t,r,e){var i=this._callbacks.values,o=i.length;if(0==o)return e;for(var a=0;a<o;++a){var $=i[a];$.key===r&&t instanceof $.type&&(e=$.callback.call($.scope,e,t,r))}return e},t}();var wf=new Qj;var Kb=function(){function t(t){this._callbackId=0,this._callbacks=new uf(function(t,r){return fh(ic(t.priority,r.priority),ic(t.id,r.id))}),this._disabled={},this.object=t,this.events=this._callbacks.events}return t.prototype.add=function(t,r,e,i){void 0===e&&(e=0),this._callbacks.insert({id:++this._callbackId,key:t,callback:r,priority:e,scope:i})},t.prototype.has=function(t,r,e,i){return void 0===e&&(e=0),rf(this._callbacks.iterator(),function(o){return o.key===t&&o.callback===r&&o.priority===e&&o.scope===i})},t.prototype.remove=function(t,r){var e=this;la(Cd(this._callbacks.iterator()),function(i){i.key!==t||aa(r)&&r!==i.priority||e._callbacks.remove(i)})},t.prototype.enableKey=function(t){delete this._disabled[t]},t.prototype.disableKey=function(t,r){void 0===r&&(r=1/0),this._disabled[t]=r},t.prototype._hasListenersByType=function(t){return ff(this._callbacks.values,function(r){return r.key===t})},t.prototype.isEnabled=function(t){return null==this._disabled[t]&&(this._hasListenersByType(t)||wf.isEnabled(this.object,t))},t.prototype._shouldDispatch=function(t){var r=this._disabled[t];return!aa(r)||(r<=1?delete this._disabled[t]:--this._disabled[t],!1)},t.prototype.apply=function(t,r){if(this._shouldDispatch(t)){var e=this._callbacks.values,i=e.length;if(i>0)for(var o=0;o<i;++o){var a=e[o];a.key===t&&(r=a.callback.call(a.scope,r,this.object,t))}return r=wf.applyAll(this.object,t,r)}return r},t.prototype.keys=function(){return Cd(ah(this._callbacks.iterator(),function(t){return t.key}))},t.prototype.copyFrom=function(t){var r=this;ga(t._callbacks.iterator(),function(t){r.add(t.key,t.callback,t.priority,t.scope)}),sa(t._disabled,function(t,e){r._disabled[t]=e})},t.prototype.clear=function(){this._callbacks.clear()},t}();var gh={aliceblue:{r:240,g:248,b:255},antiquewhite:{r:250,g:235,b:215},aqua:{r:0,g:255,b:255},aquamarine:{r:127,g:255,b:212},azure:{r:240,g:255,b:255},beige:{r:245,g:245,b:220},bisque:{r:255,g:228,b:196},black:{r:0,g:0,b:0},blanchedalmond:{r:255,g:235,b:205},blue:{r:0,g:0,b:255},blueviolet:{r:138,g:43,b:226},brown:{r:165,g:42,b:42},burlywood:{r:222,g:184,b:135},cadetblue:{r:95,g:158,b:160},chartreuse:{r:127,g:255,b:0},chocolate:{r:210,g:105,b:30},coral:{r:255,g:127,b:80},cornflowerblue:{r:100,g:149,b:237},cornsilk:{r:255,g:248,b:220},crimson:{r:220,g:20,b:60},cyan:{r:0,g:255,b:255},darkblue:{r:0,g:0,b:139},darkcyan:{r:0,g:139,b:139},darkgoldenrod:{r:184,g:134,b:11},darkgray:{r:169,g:169,b:169},darkgrey:{r:169,g:169,b:169},darkgreen:{r:0,g:100,b:0},darkkhaki:{r:189,g:183,b:107},darkmagenta:{r:139,g:0,b:139},darkolivegreen:{r:85,g:107,b:47},darkorange:{r:255,g:140,b:0},darkorchid:{r:153,g:50,b:204},darkred:{r:139,g:0,b:0},darksalmon:{r:233,g:150,b:122},darkseagreen:{r:143,g:188,b:143},darkslateblue:{r:72,g:61,b:139},darkslategray:{r:47,g:79,b:79},darkslategrey:{r:47,g:79,b:79},darkturquoise:{r:0,g:206,b:209},darkviolet:{r:148,g:0,b:211},deeppink:{r:255,g:20,b:147},deepskyblue:{r:0,g:191,b:255},dimgray:{r:105,g:105,b:105},dimgrey:{r:105,g:105,b:105},dodgerblue:{r:30,g:144,b:255},firebrick:{r:178,g:34,b:34},floralwhite:{r:255,g:250,b:240},forestgreen:{r:34,g:139,b:34},fuchsia:{r:255,g:0,b:255},gainsboro:{r:220,g:220,b:220},ghostwhite:{r:248,g:248,b:255},gold:{r:255,g:215,b:0},goldenrod:{r:218,g:165,b:32},gray:{r:128,g:128,b:128},grey:{r:128,g:128,b:128},green:{r:0,g:128,b:0},greenyellow:{r:173,g:255,b:47},honeydew:{r:240,g:255,b:240},hotpink:{r:255,g:105,b:180},indianred:{r:205,g:92,b:92},indigo:{r:75,g:0,b:130},ivory:{r:255,g:255,b:240},khaki:{r:240,g:230,b:140},lavender:{r:230,g:230,b:250},lavenderblush:{r:255,g:240,b:245},lawngreen:{r:124,g:252,b:0},lemonchiffon:{r:255,g:250,b:205},lightblue:{r:173,g:216,b:230},lightcoral:{r:240,g:128,b:128},lightcyan:{r:224,g:255,b:255},lightgoldenrodyellow:{r:250,g:250,b:210},lightgray:{r:211,g:211,b:211},lightgrey:{r:211,g:211,b:211},lightgreen:{r:144,g:238,b:144},lightpink:{r:255,g:182,b:193},lightsalmon:{r:255,g:160,b:122},lightseagreen:{r:32,g:178,b:170},lightskyblue:{r:135,g:206,b:250},lightslategray:{r:119,g:136,b:153},lightslategrey:{r:119,g:136,b:153},lightsteelblue:{r:176,g:196,b:222},lightyellow:{r:255,g:255,b:224},lime:{r:0,g:255,b:0},limegreen:{r:50,g:205,b:50},linen:{r:250,g:240,b:230},magenta:{r:255,g:0,b:255},maroon:{r:128,g:0,b:0},mediumaquamarine:{r:102,g:205,b:170},mediumblue:{r:0,g:0,b:205},mediumorchid:{r:186,g:85,b:211},mediumpurple:{r:147,g:112,b:219},mediumseagreen:{r:60,g:179,b:113},mediumslateblue:{r:123,g:104,b:238},mediumspringgreen:{r:0,g:250,b:154},mediumturquoise:{r:72,g:209,b:204},mediumvioletred:{r:199,g:21,b:133},midnightblue:{r:25,g:25,b:112},mintcream:{r:245,g:255,b:250},mistyrose:{r:255,g:228,b:225},moccasin:{r:255,g:228,b:181},navajowhite:{r:255,g:222,b:173},navy:{r:0,g:0,b:128},oldlace:{r:253,g:245,b:230},olive:{r:128,g:128,b:0},olivedrab:{r:107,g:142,b:35},orange:{r:255,g:165,b:0},orangered:{r:255,g:69,b:0},orchid:{r:218,g:112,b:214},palegoldenrod:{r:238,g:232,b:170},palegreen:{r:152,g:251,b:152},paleturquoise:{r:175,g:238,b:238},palevioletred:{r:219,g:112,b:147},papayawhip:{r:255,g:239,b:213},peachpuff:{r:255,g:218,b:185},peru:{r:205,g:133,b:63},pink:{r:255,g:192,b:203},plum:{r:221,g:160,b:221},powderblue:{r:176,g:224,b:230},purple:{r:128,g:0,b:128},rebeccapurple:{r:102,g:51,b:153},red:{r:255,g:0,b:0},rosybrown:{r:188,g:143,b:143},royalblue:{r:65,g:105,b:225},saddlebrown:{r:139,g:69,b:19},salmon:{r:250,g:128,b:114},sandybrown:{r:244,g:164,b:96},seagreen:{r:46,g:139,b:87},seashell:{r:255,g:245,b:238},sienna:{r:160,g:82,b:45},silver:{r:192,g:192,b:192},skyblue:{r:135,g:206,b:235},slateblue:{r:106,g:90,b:205},slategray:{r:112,g:128,b:144},slategrey:{r:112,g:128,b:144},snow:{r:255,g:250,b:250},springgreen:{r:0,g:255,b:127},steelblue:{r:70,g:130,b:180},tan:{r:210,g:180,b:140},teal:{r:0,g:128,b:128},thistle:{r:216,g:191,b:216},tomato:{r:255,g:99,b:71},turquoise:{r:64,g:224,b:208},violet:{r:238,g:130,b:238},wheat:{r:245,g:222,b:179},white:{r:255,g:255,b:255},whitesmoke:{r:245,g:245,b:245},yellow:{r:255,g:255,b:0},yellowgreen:{r:154,g:205,b:50}};function Rj(r,e){var g;return gh[r]?g=gh[r]:"#"===r.charAt(0)?g=Sj(r):r.match(/^rgba?\(/)&&(g=Uj(r)),g||(g={r:0,g:0,b:0,a:1}),ba(e)&&(g.a=e),g}function Sj(r){r=r.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(r,e,g,o){return e+e+g+g+o+o});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:Tj(r)}function Tj(r){r=r.replace(/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])$/i,function(r,e,g,o,t){return e+e+g+g+o+o+t+t});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),a:parseInt(e[4],16)/256}:void 0}function Uj(r){var e=(r=r.replace(/[ ]/g,"")).match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(e)e.push("1");else if(!(e=r.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i)))return;return{r:parseInt(e[1]),g:parseInt(e[2]),b:parseInt(e[3]),a:parseFloat(e[4])}}function Vj(r){return"#"+xf(r.r.toString(16))+xf(r.g.toString(16))+xf(r.b.toString(16))}function Wj(r){return ba(r.a)&&1!==r.a?"rgba("+r.r+","+r.g+","+r.b+","+r.a+")":"rgb("+r.r+","+r.g+","+r.b+")"}function xf(r){return 1==r.length?"0"+r:""+r}function me(r,e,g){return g=na(g,0,1),r?e?{r:r.r+Math.round((e.r-r.r)*g),g:r.g+Math.round((e.g-r.g)*g),b:r.b+Math.round((e.b-r.b)*g),a:(r.a||1)+Math.round(((e.a||1)-(r.a||1))*g)}:r:e||r}function Xj(r,e){return r?{r:Math.max(0,Math.min(255,r.r+ne(r.r,e))),g:Math.max(0,Math.min(255,r.g+ne(r.g,e))),b:Math.max(0,Math.min(255,r.b+ne(r.b,e))),a:r.a}:r}function ne(r,e){var g=e>0?255-r:r;return Math.round(g*e)}function Yj(r,e){if(r){var g=ne(Math.min(Math.max(r.r,r.g,r.b),230),e);return{r:Math.max(0,Math.min(255,Math.round(r.r+g))),g:Math.max(0,Math.min(255,Math.round(r.g+g))),b:Math.max(0,Math.min(255,Math.round(r.b+g))),a:r.a}}return r}function Zj(r,e){if(null==r||1==e)return r;var g=oe(r);return g.s=e,hh(g)}function hh(r){var e,g,o,t=r.h,a=r.s,b=r.l;if(0==a)e=g=o=b;else{var $=function(r,e,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?r+6*(e-r)*g:g<.5?e:g<2/3?r+(e-r)*(2/3-g)*6:r},n=b<.5?b*(1+a):b+a-b*a,i=2*b-n;e=$(i,n,t+1/3),g=$(i,n,t),o=$(i,n,t-1/3)}return{r:Math.round(255*e),g:Math.round(255*g),b:Math.round(255*o)}}function oe(r){var e=r.r/255,g=r.g/255,o=r.b/255,t=Math.max(e,g,o),a=Math.min(e,g,o),b=0,$=0,n=(t+a)/2;if(t===a)b=$=0;else{var i=t-a;switch($=n>.5?i/(2-t-a):i/(t+a),t){case e:b=(g-o)/i+(g<o?6:0);break;case g:b=(o-e)/i+2;break;case o:b=(e-g)/i+4;}b/=6}return{h:b,s:$,l:n}}function $j(r){return(299*r.r+587*r.g+114*r.b)/1e3>=128}var Ga=function(){function e(e){this._value=e}return Object.defineProperty(e.prototype,"rgb",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hex",{get:function(){return this._value?Vj(this._value):"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rgba",{get:function(){return this._value?Wj(this._value):"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return null!=this._value&&null!=this._value.a?this._value.a:1},set:function(e){this._value&&(this._value.a=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lightColor",{get:function(){return this._lightColor||(this._lightColor=new e({r:255,g:255,b:255})),this._lightColor},set:function(e){this._lightColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"darkColor",{get:function(){return this._darkColor||(this._darkColor=new e({r:0,g:0,b:0})),this._darkColor},set:function(e){this._darkColor=e},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.alpha<1?this.rgba:this.hex},e.prototype.lighten=function(r){return new e(Xj(this.rgb,r))},e.prototype.brighten=function(r){return new e(Yj(this.rgb,r))},e.prototype.saturate=function(r){return new e(Zj(this.rgb,r))},Object.defineProperty(e.prototype,"alternative",{get:function(){if(null!=this.rgb)return $j(this.rgb)?this.darkColor:this.lightColor;throw new Error("Color does not exist")},enumerable:!0,configurable:!0}),e}();function ua(e,r){if(!ba(e))return new Ga(void 0);if("string"==typeof e){var o="_color_"+e+"_"+(r||"1"),t=ca.getCache(o);if(t)return new Ga({r:t.r,g:t.g,b:t.b,a:t.a});var $=Rj(e,r);return ca.setCache(o,$),new Ga($)}return e instanceof Ga?(ba(r)&&(e.alpha=r),e):new Ga(e)}function _j(e){return e instanceof Ga}function ak(e){return ua(e)}function Xb(e){return ba(e)&&!_j(e)?ak(e):e}var Db=function(){function e(){this._disposed=!1,this._disposers=[],this.className="BaseObject"}return e.prototype.debug=function(){},Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid||(this._uid=ca.getUniqueId(),ca.map.setKey(this._uid,this)),this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"map",{get:function(){return this._map||(this._map=new Ta),this._map},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delayedMap",{get:function(){return this._delayedMap||(this._delayedMap=new Ta),this._delayedMap},enumerable:!0,configurable:!0}),e.prototype.addDelayedMap=function(e,t){var r=this.delayedMap;r.hasKey(t)||r.setKey(t,[]),r.getKey(t).push({property:e,target:this})},e.prototype.processDelayedMap=function(){var e=this;this.delayedMap.each(function(t,r){if(e.map.hasKey(t)){var i=e.map.getKey(t);la(r,function(e){e.target[e.property]=i}),e.delayedMap.removeKey(t)}})},e.prototype.applyTheme=function(){var e=this;if(ca){var t=this.getCurrentThemes();t&&la(t,function(t,r){t(e)})}},Object.defineProperty(e.prototype,"themes",{get:function(){return this._themes},set:function(e){this._themes=e},enumerable:!0,configurable:!0}),e.prototype.getCurrentThemes=function(){return this.themes||ca.themes},e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var e=this._disposers;for(this._disposers=null;0!==e.length;){e.shift().dispose()}this.clearCache(),this.clonedFrom&&this.clonedFrom.clones.removeValue(this);var t=this._uid;null!=t&&ca.map.removeKey(t)}},e.prototype.addDisposer=function(e){this._disposers.push(e)},e.prototype.removeDispose=function(e){if(!this._disposed){var t=_b(this._disposers,e);t>-1&&this._disposers.splice(t,1)}e.dispose()},e.prototype.clone=function(e){e||(e="clone-"+ca.getUniqueId());var t=new this.constructor;return t.cloneId=e,t.copyFrom(this),t},Object.defineProperty(e.prototype,"clones",{get:function(){return this._clones||(this._clones=new Fa),this._clones},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){e.clones.push(this),this.clonedFrom=e},Object.defineProperty(e.prototype,"className",{get:function(){return this._className},set:function(e){this._className=e},enumerable:!0,configurable:!0}),e.prototype.setCache=function(e,t,r){Ed.set(this.uid,e,t,r)},e.prototype.getCache=function(e,t){return void 0===t&&(t=void 0),Ed.get(this.uid,e,t)},e.prototype.clearCache=function(){Ed.clear(this.uid)},e.prototype.setTimeout=function(e,t){var r=this,i=setTimeout(function(){r.removeDispose(o),e()},t),o=new La(function(){clearTimeout(i)});return this._disposers.push(o),o},e.prototype.setInterval=function(e,t){var r=this,i=setInterval(function(){r.removeDispose(o),e()},t),o=new La(function(){clearTimeout(i)});return this._disposers.push(o),o},Object.defineProperty(e.prototype,"config",{set:function(e){try{this.processConfig(e)}catch(t){this.raiseCriticalError(t)}},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(t){var r=this;if(t){var i=this;if(sc(t,function(t,o){var s,p=o;if("callback"==t&&"function"==typeof o&&o.call(i),r.hasProperty(t)){if(!Wa(p)||!ba(p.type)||Wa(i[t])&&ba(i[t].className)&&!p.forceCreate&&i[t].className==p.type||r.asIs(t)?s=i[t]:(s=r.createClassInstance(p.type))?i[t]=s:s=i[t],s instanceof Kb)r.processAdapters(s,p);else if(s instanceof Ac)r.processEvents(s,p);else if("locale"==t&&Ca(p))window["am4lang_"+p]&&(i[t]=window["am4lang_"+p]);else if("parent"==t&&Ca(p)){var n=r.map.getKey(p);n?i[t]=n:r.addDelayedMap("parent",p)}else if(r.asIs(t))i[t]=p;else if(r.asFunction(t)&&Ca(p)){if(!ba(ca.registeredClasses[p]))throw Error("Invalid easing function: "+p);i[t]=ca.registeredClasses[p]}else if(p instanceof e)i[t]=p;else if(s instanceof e)s.config=p;else if(s instanceof _a||s instanceof le||s instanceof eh){if(mb(p))s instanceof _a?r.processListTemplate(p,s):r.processOrderedTemplate(p,s);else if(Wa(p))if(p instanceof e)s.template=p;else{var $=void 0;$=ba(p.template)?p.template:p,s.template instanceof e?s.template.config=$:sa($,function(t,i){var o=s.template[t];o instanceof Kb?r.processAdapters(o,i):o instanceof Ac?r.processEvents(o,i):o instanceof Dd?r.processDictionaryTemplate(o,i):s.template[t]instanceof e?s.template[t].config=i:Wa(i)&&ba(i.type)?(o=r.createClassInstance(i.type))?(o instanceof e&&(o.config=i),s.template[t]=o):s.template[t]=i:o instanceof Fa?r.processList(i,o):s.template[t]=r.maybeColorOrPercent(i)}),ba(p.values)&&(s instanceof _a?r.processListTemplate(p.values,s):r.processOrderedTemplate(p.values,s))}}else s instanceof Fa?"children"==t?r.processList(p,s,r):r.processList(p,s):s instanceof Dd?r.processDictionaryTemplate(s,p):s instanceof Ta?r.processDictionary(s,p):s instanceof Ga||s instanceof Da?i[t]=r.maybeColorOrPercent(p):Wa(s)&&Wa(p)?Bd(p,s):(p=r.maybeColorOrPercent(p),i[t]=p);}else r.isReserved(t)||(i[t]=p)},this.configOrder),this.processingErrors.length){var o=this.processingErrors.join("\n");throw this._processingErrors=[],Error(o)}}},e.prototype.maybeColorOrPercent=function(e){if(Ca(e)){if(e.match(/^[\-]?[0-9.]+\%$/))return ia(Ra(e));if(e.match(/^\#[0-9abcdef]{3,}$/i))return ua(e)}return e},e.prototype.processAdapters=function(e,t){var r=this;mb(t)?la(t,function(t,i){e.add(t.key,t.callback,t.priority||0,r)}):Wa(t)&&sa(t,function(t,r){e.has(t,r)||e.add(t,r)})},e.prototype.processEvents=function(e,t){var r=this;Wa(t)?sa(t,function(t,r){e.has(t,r)||e.on(t,r)}):mb(t)&&la(t,function(t,i){e.on(t.type,t.callback,r)})},e.prototype.processDictionaryTemplate=function(t,r){Wa(r)&&sa(r,function(r,i){var o;(o="template"==r?t.template:t.hasKey(r)?t.getKey(r):t.create(r))instanceof e?o.config=i:Wa(o)&&Wa(i)?Bd(i,o):o.setKey(r,i)})},e.prototype.processDictionary=function(e,t){Wa(t)&&sa(t,function(t,r){e.setKey(t,r)})},e.prototype.processListTemplate=function(t,r){var i=this;for(la(t,function(t,o){var s,p=i.getConfigEntryType(t);if(r.hasIndex(o)&&!t.forceCreate)s=r.getIndex(o);else{if(t instanceof e)return void r.push(t);s=p?r.create(p):r.create()}t===s||Wa(t)&&(s instanceof e?s.config=t:Wa(s)&&Wa(t)?Bd(t,s):r.setIndex(r.indexOf(s),t))});t.length>r.length;)r.pop()},e.prototype.processOrderedTemplate=function(t,r){var i=this;la(t,function(t,o){var s,p=i.getConfigEntryType(t);s=p?r.create(p):r.create(),Wa(t)&&(s instanceof e?s.config=t:Wa(s)&&Wa(t)?Bd(t,s):r.insert(t))})},e.prototype.processList=function(t,r,i){var o=this;mb(t)||(t=[t]);var s=r.length;for(la(t,function(t,p){if(Wa(t)){var n=void 0;if(p<s&&!t.forceCreate)n=r.getIndex(p);else{if(t instanceof e)return void r.push(t);n=o.createEntryInstance(t),i?n.parent=i:r.push(n)}n instanceof e?n.config=t:Wa(n)&&Wa(t)&&Bd(t,n)}else r.hasIndex(p)?r.setIndex(p,t):r.push(t)});t.length>r.length;)r.pop()},e.prototype.configOrder=function(e,t){return e==t?0:"language"==e?-1:"language"==t?1:0},e.prototype.asIs=function(e){return-1!=_b(["locale"],e)},e.prototype.asFunction=function(e){return!1},e.prototype.createClassInstance=function(e){if(ba(ca.registeredClasses[e]))return new ca.registeredClasses[e];throw Error("Invalid type: \""+e+"\".")},e.prototype.createEntryInstance=function(e){var t;return ba(e.type)&&(t=this.createClassInstance(e.type)),t||e},e.prototype.getConfigEntryType=function(e){if(ba(e.type)){if(ba(ca.registeredClasses[e.type]))return ca.registeredClasses[e.type];throw Error("Invalid type: \""+e.type+"\".")}},e.prototype.hasProperty=function(e){return e in this},e.prototype.isReserved=function(e){return-1!==["type","forceCreate"].indexOf(e)},Object.defineProperty(e.prototype,"processingErrors",{get:function(){return this._processingErrors||(this._processingErrors=[]),this._processingErrors},enumerable:!0,configurable:!0}),e}();var jc=function(e){function t(){var t=e.call(this)||this;return t.className="BaseObjectEvents",t}return da(t,e),Object.defineProperty(t.prototype,"events",{get:function(){return this._eventDispatcher||(this._eventDispatcher=new Ac,this._disposers.push(this._eventDispatcher)),this._eventDispatcher},enumerable:!0,configurable:!0}),t.prototype.dispatch=function(e,t){this._eventDispatcher&&this.events.isEnabled(e)&&(t?(t.type=e,t.target=t.target||this,this.events.dispatch(e,{type:e,target:this})):this.events.dispatch(e,{type:e,target:this}))},t.prototype.dispatchImmediately=function(e,t){this._eventDispatcher&&this.events.isEnabled(e)&&(t?(t.type=e,t.target=t.target||this,this.events.dispatchImmediately(e,t)):this.events.dispatchImmediately(e,{type:e,target:this}))},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),t._eventDispatcher&&this.events.copyFrom(t._eventDispatcher)},t}(Db);function Fb(r){}function tc(r,t){return sa(r,function(r,e){ba(e)&&(t[r]=e)}),t}function ih(r){return /^[^#]*/.exec(r)[0]}function Gd(){var r="#";if(mk()){var t=document.baseURI;if(t){t=ih(t);var e=ih(location.href);t!==e&&(r=e+r)}}return r}function bk(r,t){return sa(r,function(r,e){t[r]=e}),t}function pe(r){return ba(r)&&""!==r.toString()}function Xa(r,t){return aa(r)?r:null!=r&&aa(r.value)&&aa(t)?t*r.value:0}function qb(r,t,e){var $;return aa(r)?($=r)<0&&($=e?t+$:t-$):null!=r&&aa(r.value)&&($=t*r.value),$}function ck(){return window.devicePixelRatio||1}function qe(r){var t=r.split("");return t[0]=t[0].toUpperCase(),t.join("")}function jh(r){return JSON.stringify(r)}function yf(r){return r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function zf(r,t,e,$){if(r.length<=t)return[r];var o=[];if(e)for(var i=-1,l=r.replace(/([,;:!?\\\/\.]+[\s]+|[\s])/g,Qb+"$1"+Qb).split(Qb),p=0;p<l.length;p++){var n=l[p],a=n.length;if(0!==a){var y;if(a>t){if($&&(n=Bf(n)),y=n.match(new RegExp(".{1,"+t+"}","g"))){if($)for(var s=0;s<y.length;s++)y[s]=Bf(y[s]);o=o.concat(y)}}else-1===i&&(o.push(""),i=0),o[i].length+a+1>t&&""!==o[i]&&(o.push(""),i++),o[i]+=n;i=o.length-1}}else if(y=r.match(new RegExp(".{1,"+t+"}","g"))){if($)for(s=0;s<y.length;s++)y[s]=Bf(y[s]);o=y}return 1==o.length&&e&&o[0].length>t&&(o=[]),o}function Af(r,t,e,$,o){return r.length<=t?r:((t-=e.length)<1&&(t=1),(zf(r,t,$,o)[0]||"")+e)}function kh(r){return r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function dk(r){return r.replace(/[\s\uFEFF\xA0]+$/g,"")}function ek(r){return r.replace(/^[\s\uFEFF\xA0]+/g,"")}function Bf(r){return r.split("").reverse().join("")}function zb(r,t,e){return void 0===t&&(t=0),void 0===e&&(e="0"),"string"!=typeof r&&(r=r.toString()),t>r.length?Array(t-r.length+1).join(e)+r:r}function fk(r){if(void 0===r)return oh;var t=(r=(r=(r=r.toLowerCase().replace(/^\[[^\]]*\]/,"")).replace(/\[[^\]]+\]/,"")).trim()).match(/\/(date|number|duration)$/);return t?t[1]:r===ue?ue:r===ve?ve:r===Jf?Jf:r.match(/[#0]/)?ue:r.match(/[ymwdhnsqaxkzgtei]/)?ve:oh}function re(r){return r.replace(/\/(date|number|duration)$/i,"")}function lh(r){return r?r.replace(/<[^>]*>/g,""):r}function Cf(r){return r?lh((""+r).replace(/[\n\r]+/g,". ")):r}function gk(r){if(yb(r))return"NaN";if(r===1/0)return"Infinity";if(r===-1/0)return"-Infinity";if(0===r&&1/r==-1/0)return"-0";var t=r<0;r=Math.abs(r);var e,$=Va(/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+r)),o=$[1],i=$[2]||"";if(null==$[3])e=""===i?o:o+"."+i;else{var l=+$[3];if(r<1){var p=l-1;e="0."+bh("0",p)+o+i}else{e=0===(p=l-i.length)?o+i:p<0?o+i.slice(0,p)+"."+i.slice(p):o+i+bh("0",p)}}return t?"-"+e:e}function mh(r){if(xd(r))return new Date(r);if(aa(r))return new Date(r);var t=Number(r);return aa(t)?new Date(t):new Date(r)}function Df(r){if(xd(r))return r.getTime();if(aa(r))return r;if(Ca(r)){var t=Number(r);return aa(t)?t:void 0}}function Ef(r,t){void 0===t&&(t=!1);var e=new Date(r.getFullYear(),0,0),$=r.getTime()-e.getTime()+60*(e.getTimezoneOffset()-r.getTimezoneOffset())*1e3;return Math.floor($/864e5)}function Hd(r,t){void 0===t&&(t=!1);var e=Ef(r,t)-1,$=Math.floor((e-(r.getDay()||7)+10)/7);return 0===$?$=53:53===$&&($=1),$}function hk(r,t){void 0===t&&(t=!1);var e=Hd(new Date(r.getFullYear(),r.getMonth(),1),t),$=Hd(r,t);return 1==$&&($=53),$-e+1}function ik(r,t,e,$){void 0===e&&(e=1),void 0===$&&($=!1);var o=new Date(t,0,4,0,0,0,0);return $&&o.setUTCFullYear(t),7*r+e-((o.getDay()||7)+3)}function se(r,t){return r>12?r-=12:0===r&&(r=12),ba(t)?r+(t-1):r}function te(r,t,e,$){if(void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===$&&($=!1),$)return t?"Coordinated Universal Time":"UTC";var o=r.toLocaleString("UTC"),i=r.toLocaleString("UTC",{timeZoneName:t?"long":"short"}).substr(o.length);return!1===e&&(i=i.replace(/ (standard|daylight|summer|winter) /i," ")),i}function Ff(r,t,e){return r>e?e:r<t?t:r}function Gf(r,t,e){var $=e-t;return r>e?r=t+(r-$*Math.floor(r/$)):r<t&&(r=t+(r-$*Math.floor(r/$))),r}function ac(r,t){var e=r.x,$=r.y,o=[];if(t){for(;ba(t.parent);)o.push(t),t=t.parent;o.reverse();for(var i=0;i<o.length;i++){var l=o[i],p=l.rotation,n=e-l.pixelX-l.ex,a=$-l.pixelY-l.ey;l.dx&&(e-=l.dx),l.dy&&($-=l.dy);var y=l.scale;l.group&&(y=l.group.scale),e=(ka(-p)*n-ja(-p)*a)/y-l.pixelPaddingLeft,$=(ka(-p)*a+ja(-p)*n)/y-l.pixelPaddingTop}}return{x:e,y:$}}function Yb(r,t){var e=r.x,$=r.y;if(t)for(;ba(t.parent);){var o=t.rotation;e+=t.pixelPaddingLeft+t.ex,$+=t.pixelPaddingTop+t.ey;var i=t.scale;t.group&&(i=t.group.scale);var l=t.pixelX+(e*ka(o)-$*ja(o))*i,p=t.pixelY+(e*ja(o)+$*ka(o))*i;t.dx&&(l+=t.dx),t.dy&&(p+=t.dy),e=l,$=p,t=t.parent}return{x:e,y:$}}function Hb(r,t,e){return ac(Yb(r,t),e)}function Hf(r,t){var e=Yb(r,t),$=Yb({x:r.x+r.width,y:r.y+r.height},t);return{x:e.x,y:e.y,width:$.x-e.x,height:$.y-e.y}}function Bc(r,t,e){try{var $=t.getBoundingClientRect();return aa(e)||(e=1),{x:(r.x-$.left)/e,y:(r.y-$.top)/e}}catch(o){return r}}function nh(r,t){try{var e=t.getBoundingClientRect();return{x:r.x+e.left,y:r.y+e.top}}catch($){return r}}function id(r,t){return t&&t.htmlContainer?ac(Bc(r,Va(t.htmlContainer),t.svgContainer.cssScale),t):r}function If(r,t){return t&&t.htmlContainer?nh(Yb(r,t),Va(t.htmlContainer)):r}function jk(r){var t=getComputedStyle(r),e=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),$=parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth);return r.clientWidth-e-$}function kk(r){var t=getComputedStyle(r),e=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),$=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth);return r.clientHeight-e-$}function lk(r){var t=(""+r).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}function mk(){return /apple/i.test(navigator.vendor)}function nk(){return /MSIE |Trident\//.test(navigator.userAgent)}var oh="string";var ue="number";var ve="date";var Jf="duration";var Qb="__\xA7\xA7\xA7__";var jd="__\xA7\xA7\xA7\xA7__";var ok=/^([a-zA-Z][a-zA-Z0-9\+\.\-]*:)?(?:(\/\/)([^\@]+\@)?([^\/\?\#\:]*)(\:[0-9]+)?)?([^\?\#]*)(\?[^\#]*)?(\#.*)?$/;function ph(r){var t=ok.exec(r);return{protocol:t&&t[1]||"",separator:t&&t[2]||"",authority:t&&t[3]||"",domain:t&&t[4]||"",port:t&&t[5]||"",path:t&&t[6]||"",query:t&&t[7]||"",hash:t&&t[8]||""}}function qh(r){return r.protocol+r.separator+r.authority+r.domain+r.port+r.path+r.query+r.hash}function rh(r){return""===r.protocol&&""===r.separator&&""===r.authority&&""===r.domain&&""===r.port}function Kf(r,t){var e=ph(r),$=ph(t);if(rh(e))throw new Error("Left URL is not absolute");if(rh($)){if(""!==$.path)if("/"===$.path[0])e.path=$.path;else{var o=e.path.split(/\//),i=$.path.split(/\//);if(0===o.length?0!==i.length&&o.push(""):o.length>1&&o.pop(),pj(o,i),e.path=o.join("/"),""!==e.path&&"/"!==e.path[0])throw new Error("URL path must start with /")}return e.query=$.query,e.hash=$.hash,qh(e)}return qh($)}function Id(){return!!window.MSInputMethodContext&&!!document.documentMode}function sh($){return+$}function pk($){return $*$}function qk($){return $*(2-$)}function rk($){return(($*=2)<=1?$*$:--$*(2-$)+1)/2}function th($,e){return Math.pow($,e)}function uh($,e){return 1-Math.pow(1-$,e)}function vh($,e){return(($*=2)<=1?Math.pow($,e):2-Math.pow(2-$,e))/2}function sk($){return th($,3)}function Lf($){return uh($,3)}function tk($){return vh($,3)}function uk($){return Math.pow(2,10*$-10)}function vk($){return 1-Math.pow(2,-10*$)}function wk($){return(($*=2)<=1?Math.pow(2,10*$-10):2-Math.pow(2,10-10*$))/2}function xk($){return 1-Math.cos($*Pg)}function wh($){return Math.sin($*Pg)}function yk($){return(1-Math.cos(de*$))/2}function xh($){return $*$*$}function Qc($){return--$*$*$+1}function zk($){return(($*=2)<=1?$*$*$:($-=2)*$*$+2)/2}function Ak($){return 1-Math.sqrt(1-$*$)}function Bk($){return Math.sqrt(1- --$*$)}function Ck($){return(($*=2)<=1?1-Math.sqrt(1-$*$):Math.sqrt(1-($-=2)*$)+1)/2}ca.registeredClasses["ease.linear"]=sh,ca.registeredClasses["ease.quadIn"]=pk,ca.registeredClasses["ease.quadOut"]=qk,ca.registeredClasses["ease.quadInOut"]=rk,ca.registeredClasses["ease.polyIn"]=th,ca.registeredClasses["ease.polyOut"]=uh,ca.registeredClasses["ease.polyInOut"]=vh,ca.registeredClasses["ease.polyIn3"]=sk,ca.registeredClasses["ease.polyOut3"]=Lf,ca.registeredClasses["ease.polyInOut3"]=tk,ca.registeredClasses["ease.expIn"]=uk,ca.registeredClasses["ease.expOut"]=vk,ca.registeredClasses["ease.expInOut"]=wk,ca.registeredClasses["ease.sinIn"]=xk,ca.registeredClasses["ease.sinOut"]=wh,ca.registeredClasses["ease.sinInOut"]=yk,ca.registeredClasses["ease.cubicIn"]=xh,ca.registeredClasses["ease.cubicOut"]=Qc,ca.registeredClasses["ease.cubicInOut"]=zk,ca.registeredClasses["ease.circleIn"]=Ak,ca.registeredClasses["ease.circleOut"]=Bk,ca.registeredClasses["ease.circleInOut"]=Ck;var Mf=4/11,Dk=6/11,Ek=8/11,Fk=.75,Gk=9/11,Hk=10/11,Ik=.9375,Jk=21/22,Kk=63/64,we=1/Mf/Mf;function Lk($){return 1-xe(1-$)}function xe($){return($=+$)<Mf?we*$*$:$<Ek?we*($-=Dk)*$+Fk:$<Hk?we*($-=Gk)*$+Ik:we*($-=Jk)*$+Kk}function Mk($){return(($*=2)<=1?1-xe(1-$):xe($-1)+1)/2}ca.registeredClasses["ease.bounceIn"]=Lk,ca.registeredClasses["ease.bounceOut"]=xe,ca.registeredClasses["ease.bounceInOut"]=Mk;var Nk=2*Math.PI,Jd=1,Kd=.3/Nk,ye=Math.asin(1/Jd)*Kd;function Ok($){return Jd*Math.pow(2,10*--$)*Math.sin((ye-$)/Kd)}function Pk($){return 1-Jd*Math.pow(2,-10*($=+$))*Math.sin(($+ye)/Kd)}function Qk($){return(($=2*$-1)<0?Jd*Math.pow(2,10*$)*Math.sin((ye-$)/Kd):2-Jd*Math.pow(2,-10*$)*Math.sin((ye+$)/Kd))/2}ca.registeredClasses["ease.elasticIn"]=Ok,ca.registeredClasses["ease.elasticOut"]=Pk,ca.registeredClasses["ease.elasticInOut"]=Qk;var ze=function(t){function e(){var e=t.call(this)||this;return e.transitionDuration=0,e.transitionEasing=Qc,e.properties={},e.propertyFields={},e.filters=new Fa,e.isTemplate=!1,e.className="SpriteState",e._disposers.push(new Sa(e.filters)),e.applyTheme(),e}return da(e,t),Object.defineProperty(e.prototype,"adapter",{get:function(){var t=this;return this._adapterO||(this._adapterO=new Kb(this),this._adapterO.events.on("inserted",function(e){t[e.newValue.key]=t[e.newValue.key]},void 0,!1),this._adapterO.events.on("removed",function(e){t[e.newValue.key]=t[e.newValue.key]},void 0,!1)),this._adapterO},enumerable:!0,configurable:!0}),e.prototype.getPropertyValue=function(t){var e=this.properties[t],r=this.sprite;if(r){var i=this.propertyFields[t];if(ba(i)&&(r.dataItem&&(e=r.dataItem.dataContext[i]),null==e&&(e="__unset")),ba(e))this._adapterO&&(e=this._adapterO.apply(t,e));else{var p=r.getPropertyValue(t);(e=this._adapterO?this._adapterO.apply(t,p):p)==p&&(e=void 0)}}return e},e.prototype.copyFrom=function(t){t&&t!=this&&(this.transitionDuration=t.transitionDuration,this.transitionEasing=t.transitionEasing,tc(t.properties,this.properties),tc(t.propertyFields,this.propertyFields),this.filters.copyFrom(t.filters),t._adapterO&&this.adapter.copyFrom(t._adapterO))},Object.defineProperty(e.prototype,"allValues",{get:function(){var t=this,e={};if(sa(this.properties,function(r,i){e[r]=t.getPropertyValue(r)}),this._adapterO){var r=this._adapterO.keys();sa(r,function(r,i){var p=t.getPropertyValue(i);e[i]=p})}var i=this.propertyFields;return sa(i,function(r){var i=t.getPropertyValue(r);e[r]=i}),e},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.properties={},this.filters.clear()},e.prototype.processConfig=function(e){ba(e)&&ba(e.properties)&&sa(e.properties,function(t,r){Ca(r)&&(r.match(/^[0-9.\-]+\%$/)?e.properties[t]=ia(Ra(r)):r.match(/^\#[0-9abcdef]{3,}$/i)&&(e.properties[t]=Xb(r)))}),t.prototype.processConfig.call(this,e)},e.prototype.asFunction=function(e){return"transitionEasing"==e||t.prototype.asIs.call(this,e)},e}(Db);ca.registeredClasses.SpriteState=ze;var Rk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._interactionEvents=new Ta,t}return da(t,e),t.prototype._dispatchSpriteEvent=function(e){if(!this.target.disabled&&!this.target.isTemplate&&this.target.events.isEnabled(e.type)){var t=qf(e,{target:this.target});this.target.events.dispatchImmediately(t.type,t)}},t.prototype._dispatchSpritePointEvent=function(e){if(!this.target.disabled&&!this.target.isTemplate&&this.target.events.isEnabled(e.type)){var t=qf(e,{target:this.target,spritePoint:e.point?id(e.point,this.target):void 0,svgPoint:this.target.getSvgPoint(e.point)});this.target.events.dispatchImmediately(t.type,t)}},t.prototype._addInteractionObjectEvent=function(e,t,s,a){var i=this,r=a+"-"+e;return this._interactionEvents.insertKeyIfEmpty(r,function(){var c=i.target.interactions.events.on(e,t,s,a);return new ie(function(){i._interactionEvents.removeKey(r),c.dispose()})}).increment()},t.prototype._on=function(t,s,a,i,r,c){var h=e.prototype._on.call(this,t,s,a,i,r,c),n=[h.disposer];switch(s){case"hit":case"track":case"doublehit":case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":n.push(this._addInteractionObjectEvent(s,this._dispatchSpritePointEvent,this,r));break;case"rightclick":case"down":case"up":case"drag":case"dragged":case"dragstart":case"dragstop":case"over":case"out":case"swipe":case"swipeleft":case"swiperight":case"resize":case"focus":case"blur":case"toggled":n.push(this._addInteractionObjectEvent(s,this._dispatchSpriteEvent,this,r));}switch(s){case"hit":case"doublehit":case"rightclick":case"down":case"up":this.target.clickable=!0;break;case"toggled":this.target.togglable=!0;break;case"drag":case"dragstart":case"dragstop":this.target.draggable=!0;break;case"track":this.target.trackable=!0;break;case"resize":this.target.resizable=!0;break;case"swipe":case"swipeleft":case"swiperight":this.target.swipeable=!0;break;case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":this.target.wheelable=!0;break;case"over":this.target.hoverable=!0;case"out":this.target.hoverable=!0;break;case"focus":case"blur":this.target.focusable=!0;}return h.disposer=new Ya(n),h},t}(Zg);function yh(t,e,i){return e+(i-e)*t}function Sk(t,e,i){return new Da(yh(t,e.percent,i.percent))}function Tk(t,e,i){var r=new Ga(me(e.rgb,i.rgb,t));return e.alpha!=i.alpha&&(r.alpha=e.alpha+(i.alpha-e.alpha)*t),r}function zh(t,e){return e+t.charAt(0).toUpperCase()+t.substr(1)}var Uk=function(){function t(){}return t.opacity=1,t.strokeOpacity=1,t.strokeWidth=1,t.fillOpacity=1,t.fill=ua("#000000"),t.stroke=ua("#000000"),t.focusable=void 0,t.tabindex=0,t}();var za={verbose:!0,commercialLicense:!1,classNamePrefix:"amcharts-",autoSetClassName:!1,minPolylineStep:.5,onlyShowOnViewport:!1,queue:!1,autoDispose:!1,licenses:[],suppressErrors:!1,suppressWarnings:!1,animationsEnabled:!0,nonce:"",deferredDelay:100,disableHoverOnTransform:"never",pixelPerfectPrecision:0};var kd=function(){function t(t){this._disposer=new La(function(){for(;0!==t.length;)t[0].dispose()})}return t.prototype.isDisposed=function(){return this._disposer.isDisposed()},t.prototype.dispose=function(){this._disposer.dispose()},t}();var bc=function(t){function e(e,i,r,o){var s=t.call(this)||this;return s.duration=0,s.easing=sh,s.progress=0,s._loop=0,s._pause=!1,s._delayTimeout=null,s._time=0,s._isFinished=!1,s.className="Animation",!1===za.animationsEnabled&&(r=0),s.object=e,s.animationOptions=Lg(i),s.duration=r,o&&(s.easing=o),s.applyTheme(),s}return da(e,t),e.prototype.debug=function(){},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.pause()},e.prototype.delay=function(t){var e=this;if(t>0){this.pause(),Wb(this.object.animations,this);var i=setTimeout(function(){e._delayTimeout=null,e.start()},t);this._delayTimeout=new La(function(){clearTimeout(i)})}return this},e.prototype._start=function(){this._isFinished=!1,this._delayTimeout&&(this.removeDispose(this._delayTimeout),this._delayTimeout=null),this.stopSameAnimations(),this._pause=!1,Wb(Aa.animations,this),Wb(this.object.animations,this),Aa.requestFrame()},e.prototype.start=function(){this._start(),this._startTime=Date.now(),this._time=0,this.staticOptions=[];for(var t=this.animationOptions.length-1;t>=0;t--){var e=this.animationOptions[t];if(ba(e.from)||(e.childObject?e.from=e.childObject[e.property]:(e.from=this.object[e.property],ba(e.from)||(e.from=Uk[e.property]))),e.from==e.to)ta(this.animationOptions,e);else if(!ba(e.from)||!(e.from instanceof Da)&&e.to instanceof Da||e.from instanceof Da&&!(e.to instanceof Da))this.staticOptions.push(e),ta(this.animationOptions,e);else if(aa(e.to)){if(e.updateMethod=yh,e.from instanceof Da){var i=this.object[zh(e.property,"pixel")];isNaN(i)?(this.staticOptions.push(e),ta(this.animationOptions,e)):e.from=i}else isNaN(e.from)&&(this.staticOptions.push(e),ta(this.animationOptions,e));}else if(e.to instanceof Ga)e.from?e.updateMethod=Tk:(this.staticOptions.push(e),ta(this.animationOptions,e));else if(e.to instanceof Da){if(e.updateMethod=Sk,!isNaN(e.from)){i=this.object[zh(e.property,"relative")];isNaN(i)||(e.from=ia(100*i))}}else this.staticOptions.push(e),ta(this.animationOptions,e)}if(this.applyStaticOptions(),this.events.isEnabled("animationstarted")){var r={type:"animationstarted",target:this,progress:this.progress};this.events.dispatchImmediately("animationstarted",r)}return this.update(),0===this.duration&&this.end(),this},e.prototype.loop=function(t){return aa(t)||(t=1/0),this._loop=t,this},e.prototype.pause=function(){return this._pause=!0,this._delayTimeout&&(this.removeDispose(this._delayTimeout),this._delayTimeout=null),ta(Aa.animations,this),ta(this.object.animations,this),this},e.prototype.resume=function(){return this._start(),this._startTime=Date.now()-this._time,this},e.prototype.end=function(){if(0==this._loop&&this.pause(),this.setProgress(1),this.applyStaticOptions(),this.events.isEnabled("animationended")){var t={type:"animationended",target:this,progress:this.progress};this.events.dispatchImmediately("animationended",t)}return this._loop>0?(this._loop--,this.start()):(this.stop(),this._isFinished=!0),this},e.prototype.kill=function(){this.pause(),this._isFinished=!0},e.prototype.isFinished=function(){return this._isFinished},e.prototype.applyStaticOptions=function(){var t=this;la(this.staticOptions,function(e){e.childObject?e.childObject[e.property]=1==t.progress?e.to:e.from:t.object[e.property]=1==t.progress?e.to:e.from})},e.prototype.stop=function(t){if(this.pause(),!t&&this.events.isEnabled("animationstopped")){var e={type:"animationstopped",target:this,progress:this.progress};this.events.dispatchImmediately("animationstopped",e)}return this},e.prototype.setProgress=function(t){var e=this;if(this._time=this.duration*t,la(this.animationOptions,function(i){if(i.updateMethod&&ba(i.from)){var r=i.updateMethod(t,i.from,i.to);i.childObject?i.childObject[i.property]=r:e.object[i.property]=r}}),this.progress=t,this.events.isEnabled("animationprogress")){var i={type:"animationprogress",target:this,progress:this.progress};this.events.dispatchImmediately("animationprogress",i)}Aa.requestFrame()},e.prototype.update=function(){if(!this._pause){var t=void 0;this._time=na(Date.now()-this._startTime,0,this.duration);var e=this._time/this.duration;t=this.easing(e),(0==this.duration||!aa(t)||e>=1)&&(t=1),this.setProgress(t),1==ha(this._time/this.duration,6)&&this.end()}return this},Object.defineProperty(e.prototype,"delayed",{get:function(){return!!this._delayTimeout},enumerable:!0,configurable:!0}),e.prototype.stopSameAnimations=function(){var t=this;la(wd(this.object.animations),function(e){if(e!==t&&!e.delayed){var i=[];la(t.animationOptions,function(t){la(e.animationOptions,function(r){t.property==r.property&&t.childObject==r.childObject&&(i.push(r),0==e.animationOptions.length&&e.kill())})}),la(i,function(t){ta(e.animationOptions,t)})}})},e.prototype.asFunction=function(e){return"easing"==e||t.prototype.asIs.call(this,e)},e}(jc);var Ae="http://www.w3.org/2000/svg";var Ah="http://www.w3.org/2000/xmlns/";var Bh,Nf="http://www.w3.org/1999/xlink";function Za(e,t,r,o){return e.addEventListener(t,r,o||!1),new La(function(){e.removeEventListener(t,r,o||!1)})}function Ch(e){if(Ca(e)){var t=document.getElementById(e);if(null==t&&(t=document.getElementsByClassName(e)[0]),t instanceof HTMLElement)return t}else if(e instanceof HTMLElement)return e}function Of(e,t){if(e)if(e.classList)e.classList.add(t);else{var r=e.getAttribute("class");r?e.setAttribute("class",r.split(" ").filter(function(e){return e!==t}).join(" ")+" "+t):e.setAttribute("class",t)}}function Pf(e,t){if(e)if(e.classList)e.classList.remove(t);else{var r=e.getAttribute("class");r&&e.setAttribute("class",r.split(" ").filter(function(e){return e!==t}).join(" "))}}function Dh(e,t,r){e.style[t]=r}function Qf(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}function Be(){if(document.activeElement&&document.activeElement!=document.body)if(document.activeElement.blur)document.activeElement.blur();else{var e=document.createElement("button");e.style.position="fixed",e.style.top="0px",e.style.left="-10000px",document.body.appendChild(e),e.focus(),e.blur(),document.body.removeChild(e)}}function Eh(e,t){for(var r=t;;){if(e===r)return!0;if(null==r.parentNode){if(null==r.host)return!1;r=r.host}else r=r.parentNode}}function Rf(e){for(var t=e;;){if(null==t.parentNode)return null!=t.host?t:null;t=t.parentNode}}function Fh(e){for(var t=e.ownerDocument,r=e;;){if(null==r.parentNode)return r===t||null!=r.host?r:null;r=r.parentNode}}function Vk(e){return"function"==typeof e.composedPath?e.composedPath()[0]:e.target}function Wk(e){Bj(function(){try{var t=e.getBoundingClientRect(),r=t.left-Math.round(t.left),o=t.top-Math.round(t.top);0!==r&&Yg(function(){e.style.left=r+"px"}),0!==o&&Yg(function(){e.style.top=o+"px"})}catch(n){}})}function Xk(e){if(null==e){if(!ba(Bh))(t=document.createElement("style")).type="text/css",""!=za.nonce&&t.setAttribute("nonce",za.nonce),document.head.appendChild(t),Bh=t.sheet;return Bh}var t;return(t=document.createElement("style")).type="text/css",""!=za.nonce&&t.setAttribute("nonce",za.nonce),e.appendChild(t),t.sheet}function Yk(e,t){var r=e.cssRules.length;return e.insertRule(t+"{}",r),e.cssRules[r]}var Qa=function(e){function t(t,r,o){var n=this,$=Xk(t);return(n=e.call(this,function(){var e=_b($.cssRules,n._rule);if(-1===e)throw new Error("Could not dispose StyleRule");$.deleteRule(e)})||this)._rule=Yk($,r),sa(o,function(e,t){n.setStyle(e,t)}),n}return da(t,e),Object.defineProperty(t.prototype,"selector",{get:function(){return this._rule.selectorText},set:function(e){this._rule.selectorText=e},enumerable:!0,configurable:!0}),t.prototype._setVendorPrefixName=function(e,t){var r=this._rule.style;r.setProperty("-webkit-"+e,t,""),r.setProperty("-moz-"+e,t,""),r.setProperty("-ms-"+e,t,""),r.setProperty("-o-"+e,t,""),r.setProperty(e,t,"")},t.prototype.setStyle=function(e,t){"transition"===e?this._setVendorPrefixName(e,t):this._rule.style.setProperty(e,t,"")},t}(La);var Zk=0,d=function(e){function t(t,r,o){var n=this,$=ba(o)?o:"__style_"+ ++Zk+"__";return(n=e.call(this,t,"."+$,r)||this)._className=$,n}return da(t,e),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},set:function(e){this._className=e,this.selector="."+e},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this._className},t}(Qa);function $k(e){if("loading"!==document.readyState)e();else{var t=function(){"loading"!==document.readyState&&(document.removeEventListener("readystatechange",t),e())};document.addEventListener("readystatechange",t)}}function Ce(e){var t=Qf(e,"font-family");if(t)return t;var r=e.parentElement||e.parentNode;return r?Ce(r):void 0}function De(e){var t=Qf(e,"font-size");if(t)return t;var r=e.parentElement||e.parentNode;return r?De(r):void 0}function Sf(e,t){var r=e.getBoundingClientRect(),o=mb(t)?t:t?[t]:[];if(o.length){for(var n=0;n<o.length;n++){var $=o[n];if(!Sf($))return!1;var d=$.getBoundingClientRect();if(r.top>=0&&r.left>=0&&r.top<=d.top+d.height&&r.left<=d.left+d.width)return!0}return!1}return r.top>=0&&r.left>=0&&r.top<=(window.innerHeight||document.documentElement.clientHeight)&&r.left<=(window.innerWidth||document.documentElement.clientWidth)}var Ee=function(){function t(t){this._isDisposed=!1,this._x=0,this._y=0,this._rotationY=0,this._rotationX=0,this._rotation=0,this._scale=1,this.node="string"==typeof t?document.createElementNS(Ae,t):t}return t.prototype.removeNode=function(){this.node&&this.node.parentNode&&this.node.parentNode.removeChild(this.node)},Object.defineProperty(t.prototype,"transformString",{get:function(){if(this.node)return this._transformString},enumerable:!0,configurable:!0}),t.prototype.transform=function(){var t="translate("+this._x+","+this._y+")";if(1!=this._scale&&(t+=(t?" ":"")+"scale("+this._scale+")"),0!=this._rotation){var e="rotate("+this._rotation+")";this._rotationX&&this._rotationY&&(e="rotate("+this._rotation+" "+this._rotationX+" "+this._rotationY+")"),t+=(t?" ":"")+e}this._transformString=t,this.node.setAttribute("transform",t)},t.prototype.getBBox=function(){var t={width:0,height:0,x:0,y:0};if(this.node&&this.node.parentNode)try{var e=this.node.getBBox();t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height}catch(o){}return t},t.prototype.moveTo=function(t){if(t){var e=t.x,o=t.y;this._x==e&&this._y==o||(this._x=e,this._y=o,this.transform())}},Object.defineProperty(t.prototype,"content",{get:function(){return this.node.innerHTML||""},set:function(t){this.node.innerHTML=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.node.textContent||""},set:function(t){this.node.textContent=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!=t&&(this._x=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!=t&&(this._y=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!=t&&(this._rotation=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationX",{get:function(){return this._rotationX},set:function(t){this._rotationX!=t&&(this._rotationX=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationY",{get:function(){return this._rotationY},set:function(t){this._rotationY!=t&&(this._rotationY=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale!=t&&(this._scale=t,this.transform())},enumerable:!0,configurable:!0}),t.prototype.removeAttr=function(t){this.node.removeAttribute(t)},t.prototype.attr=function(t){var e=this;return sa(t,function(t,o){ba(o)?e.node.setAttribute(t,o):e.node.removeAttribute(t)}),this},t.prototype.getAttr=function(t){return this.node.getAttribute(t)},t.prototype.attrNS=function(t,e,o){return this.node.setAttributeNS(t,e,o),this},t.prototype.getAttrNS=function(t,e){return this.node.getAttributeNS(t,e)},t.prototype.removeStyle=function(t){this.node.style[t]=null,delete this.node.style[t]},t.prototype.getStyle=function(t){return this.node.style[t]},t.prototype.addStyle=function(t){var e=this;return sa(t,function(t,o){ba(o)?e.node.style[t]=o:e.removeStyle(t)}),this},t.prototype.addClass=function(t){Of(this.node,t)},t.prototype.removeClass=function(t){Pf(this.node,t)},t.prototype.setClass=function(t){this.node.setAttribute("class",t)},t.prototype.removeChildNodes=function(){for(;this.node.childNodes.length>0;)this.node.removeChild(this.node.firstChild)},t.prototype.isDisposed=function(){return this._isDisposed},t.prototype.dispose=function(){this.removeNode()},t}();var _k=function(e){function o(o){return e.call(this,o)||this}return da(o,e),o.prototype.add=function(e){e&&this.node.appendChild(e.node)},o.prototype.addToBack=function(e){if(e){var o=this.node.childNodes[0];o?o!=e.node&&this.node.insertBefore(e.node,o):this.node.appendChild(e.node)}},o.prototype.removeElement=function(e){if(e)try{e.node&&e.node.parentNode==this.node&&this.node.removeChild(e.node)}catch(o){}},o.prototype.hasChild=function(e){for(var o=0;o<this.node.childNodes.length;o++)if(this.node.childNodes[o]==e.node)return!0;return!1},Object.defineProperty(o.prototype,"content",{get:function(){return this.node.innerHTML},set:function(e){this.node.innerHTML=e},enumerable:!0,configurable:!0}),o.prototype.removeChildren=function(){if(this.node.childNodes)for(;this.node.childNodes.length>0;){var e=this.node.firstChild;e&&e.parentNode&&e.parentNode.removeChild(e)}},o}(Ee);var Ia=function(o){function r(){var r=o.call(this)||this;return r._purposes={stroke:ua("#e5e5e5"),fill:ua("#f3f3f3"),primaryButton:ua("#6794dc"),primaryButtonHover:ua("#6771dc"),primaryButtonDown:ua("#68dc75"),primaryButtonActive:ua("#68dc75"),primaryButtonText:ua("#FFFFFF"),primaryButtonStroke:ua("#FFFFFF"),secondaryButton:ua("#d9d9d9"),secondaryButtonHover:ua("#d9d9d9").brighten(-.25),secondaryButtonDown:ua("#d9d9d9").brighten(-.35),secondaryButtonActive:ua("#d9d9d9").brighten(.35),secondaryButtonText:ua("#000000"),secondaryButtonStroke:ua("#FFFFFF"),grid:ua("#000000"),background:ua("#ffffff"),alternativeBackground:ua("#000000"),text:ua("#000000"),alternativeText:ua("#FFFFFF"),disabledBackground:ua("#999999"),positive:ua("#67dc75"),negative:ua("#dc6788")},r.className="InterfaceColorSet",r.applyTheme(),r}return da(r,o),r.prototype.debug=function(){},r.prototype.getFor=function(o){return this._purposes[o]},r.prototype.setFor=function(o,r){this._purposes[o]=r},r}(Db);ca.registeredClasses.InterfaceColorSet=Ia;var Gh=new Ta,al=function(e,t){t||(t="ampopup");var i=new Ia,r=i.getFor("text"),o=i.getFor("background");o.alpha=.8;var l=i.getFor("alternativeBackground");return l.alpha=.05,Gh.insertKeyIfEmpty(t,function(){var i=new Ya([new Qa(e,"."+t,{overflow:"visible",position:"absolute",top:"0",left:"0","z-index":"2000"}),new Qa(e,"."+t+"-curtain",{width:"100%",height:"100%",position:"absolute",top:"0",left:"0","z-index":"2001","background-color":o.hex,opacity:"0.5"}),new Qa(e,"."+t+"-header",{display:"block",width:"100%","min-height":"1.8em",background:l.rgba}),new Qa(e,"."+t+"-title",{"font-weight":"bold","font-size":"110%",padding:"0.5em 1.2em 0.5em 1em"}),new Qa(e,"."+t+"-content",{background:o.hex,"background-color":o.rgba,color:r.hex,display:"inline-block",position:"absolute",top:"0",left:"0","max-width":"90%","max-height":"90%",overflow:"auto","z-index":"2002"}),new Qa(e,"."+t+"-inside",{padding:"1em"}),new Qa(e,"."+t+"-close",{display:"block",position:"absolute",top:"0.3em",right:"0.3em","background-color":"rgb(100, 100, 100)",background:"rgba(100, 100, 100, 0.1) url(data:image/svg+xml;charset=utf-8;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmVyc2lvbj0iMSIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ0NS4yIDEwOS4ybC00Mi40LTQyLjRMMjU2IDIxMy42IDEwOS4yIDY2LjhsLTQyLjQgNDIuNEwyMTMuNiAyNTYgNjYuOCA0MDIuOGw0Mi40IDQyLjRMMjU2IDI5OC40bDE0Ni44IDE0Ni44IDQyLjQtNDIuNEwyOTguNCAyNTYiLz48L3N2Zz4=) no-repeat center","background-size":"80%",width:"1.2em",height:"1.2em",cursor:"pointer"})]);return new ie(function(){Gh.removeKey(t),i.dispose()})}).increment()};var bl=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._domEvents={},t}return da(t,e),t.prototype._addDOMEvent=function(e,t,s,a){var r=this;if(!this._domEvents[e]){var i=function(e){s.call(a,t,e)};this.target.element.addEventListener(e,i,!1),this._domEvents[e]=new ie(function(){delete r._domEvents[e],r.target.element.removeEventListener(e,i,!1)})}return this._domEvents[e].increment()},t.prototype._dispatchKeyboardEvent=function(e,t){this.target.events.isEnabled(e)&&this.target.events.dispatchImmediately(e,{type:e,target:this.target,event:t})},t.prototype._on=function(t,s,a,r,i,c){var n=e.prototype._on.call(this,t,s,a,r,i,c),o=[n.disposer];switch(s){case"hit":case"doublehit":case"rightclick":case"down":case"up":this.target.clickable=!0;break;case"drag":case"dragstart":case"dragstop":this.target.draggable=!0;break;case"track":this.target.trackable=!0;break;case"resize":this.target.resizable=!0;break;case"swipe":case"swipeleft":case"swiperight":this.target.swipeable=!0;break;case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":this.target.wheelable=!0;break;case"over":case"out":this.target.hoverable=!0;break;case"focus":case"blur":case"focusin":case"focusout":this.target.focusable=!0;break;case"keydown":case"keyup":case"keypress":case"input":o.push(this._addDOMEvent(s,s,this._dispatchKeyboardEvent,this));}return n.disposer=new Ya(o),n},t}(Zg);var cl=function(e){function t(t){var i=e.call(this)||this;return i._eventDispatcher=new bl(i),i.eventDisposers=new Ta,i.replacedStyles=new Ta,i._clickable=!1,i._contextMenuDisabled=!1,i._hoverable=!1,i._trackable=!1,i._draggable=!1,i._swipeable=!1,i._resizable=!1,i._wheelable=!1,i._inert=!1,i._isHover=!1,i.isRealHover=!1,i._isHoverByTouch=!1,i._isDown=!1,i._isFocused=!1,i._isTouchProtected=!1,i._inertiaOptions=new Ta,i.inertias=new Ta,i._hitOptions={},i._hoverOptions={},i._swipeOptions={},i._keyboardOptions={},i._mouseOptions={},i._cursorOptions={defaultStyle:[{property:"cursor",value:"default"}]},i._disposers.push(i._eventDispatcher),i._element=t,i.className="InteractionObject",i._disposers.push(new Pc(i.inertias)),i._disposers.push(new Pc(i.eventDisposers)),i.applyTheme(),i}return da(t,e),Object.defineProperty(t.prototype,"events",{get:function(){return this._eventDispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHover",{get:function(){return this._isHover},set:function(e){this.isHover!=e&&(this._isHover=e,e?va().overObjects.moveValue(this):(this.isRealHover=!1,va().overObjects.removeValue(this)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHoverByTouch",{get:function(){return this._isHoverByTouch},set:function(e){this.isHoverByTouch!=e&&(this._isHoverByTouch=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overPointers",{get:function(){return this._overPointers||(this._overPointers=new Fa),this._overPointers},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDown",{get:function(){return this._isDown},set:function(e){this.isDown!=e&&(this._isDown=e,e?va().downObjects.moveValue(this):va().downObjects.removeValue(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"downPointers",{get:function(){return this._downPointers||(this._downPointers=new Fa),this._downPointers},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFocused",{get:function(){return this._isFocused},set:function(e){this.isFocused!=e&&(this._isFocused=e,va().focusedObject=e?this:void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isTouchProtected",{get:function(){return this._isTouchProtected},set:function(e){this._isTouchProtected!=e&&(this._isTouchProtected=e,e?va().unprepElement(this):(this.draggable||this.swipeable||this.trackable||this.resizable)&&va().prepElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clickable",{get:function(){return this._clickable},set:function(e){this._clickable!==e&&(this._clickable=e,va().processClickable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contextMenuDisabled",{get:function(){return this._contextMenuDisabled},set:function(e){this._contextMenuDisabled!==e&&(this._contextMenuDisabled=e,va().processContextMenu(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hoverable",{get:function(){return this._hoverable},set:function(e){this._hoverable!==e&&(this._hoverable=e,va().processHoverable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trackable",{get:function(){return this._trackable},set:function(e){this._trackable!==e&&(this._trackable=e,va().processTrackable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"draggable",{get:function(){return this._draggable},set:function(e){this._draggable!==e&&(this._draggable=e,va().processDraggable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"swipeable",{get:function(){return this._swipeable},set:function(e){this._swipeable!==e&&(this._swipeable=e,va().processSwipeable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resizable",{get:function(){return this._resizable},set:function(e){this._resizable!==e&&(this._resizable=e,va().processResizable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wheelable",{get:function(){return this._wheelable},set:function(e){this._wheelable!==e&&(this._wheelable=e,va().processWheelable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inert",{get:function(){return this._inert},set:function(e){this._inert!==e&&(this._inert=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusable",{get:function(){return this._focusable},set:function(e){this._focusable!==e&&(this._focusable=e,this._focusable&&-1==this.tabindex&&(this._tabindex=1),va().processFocusable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabindex",{get:function(){return jf(this._tabindex,-1)},set:function(e){this._tabindex!==e&&(this._tabindex=e,e>-1&&(this.focusable=!0),va().processFocusable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalPosition",{get:function(){return this._originalPosition||{x:0,y:0}},set:function(e){this._originalPosition=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalScale",{get:function(){return jf(this._originalScale,1)},set:function(e){this._originalScale!==e&&(this._originalScale=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalAngle",{get:function(){return jf(this._originalAngle,0)},set:function(e){this._originalAngle!==e&&(this._originalAngle=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inertiaOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("inertiaOptions",this._inertiaOptions):this._inertiaOptions},set:function(e){this._inertiaOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hitOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("hitOptions",this._hitOptions):this._hitOptions},set:function(e){this._hitOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hoverOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("hoverOptions",this._hoverOptions):this._hoverOptions},set:function(e){this._hoverOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"swipeOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("swipeOptions",this._swipeOptions):this._swipeOptions},set:function(e){this._swipeOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyboardOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("keyboardOptions",this._keyboardOptions):this._keyboardOptions},set:function(e){this._keyboardOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mouseOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("mouseOptions",this._mouseOptions):this._mouseOptions},set:function(e){this._mouseOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursorOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("cursorOptions",this._cursorOptions):this._cursorOptions},set:function(e){this._cursorOptions=e},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.inertiaOptions=t.inertiaOptions,this.hitOptions=t.hitOptions,this.hoverOptions=t.hoverOptions,this.swipeOptions=t.swipeOptions,this.keyboardOptions=t.keyboardOptions,this.cursorOptions=t.cursorOptions,this.contextMenuDisabled=t.contextMenuDisabled,va().applyCursorOverStyle(this)},t.prototype.setEventDisposer=function(e,t,i){var r=this.eventDisposers.getKey(e);t?null==r&&this.eventDisposers.setKey(e,i()):null!=r&&(r.dispose(),this.eventDisposers.removeKey(e))},t.prototype.dispose=function(){e.prototype.dispose.call(this);var t=va();t.overObjects.removeValue(this),t.downObjects.removeValue(this),t.trackedObjects.removeValue(this),t.transformedObjects.removeValue(this),this.isHover&&this.wheelable&&t.unlockWheel(),t.focusedObject===this&&(t.focusedObject=void 0)},t}(jc);var dl=function(){function t(t,e){this._disposed=!1,this.directionX=0,this.directionY=0,this.interaction=t,this.keyboardEvent=e,this._startedOn=new Date().getTime(),va().processDragStart(t),Aa.animations.push(this),this.update()}return t.prototype.update=function(){var t=this.interaction,e=va().getKeyboardOption(t,"speed"),i=va().getKeyboardOption(t,"accelleration"),r=va().getKeyboardOption(t,"accellerationDelay"),o={x:0,y:0};this.keyboardEvent.shiftKey?(e*=.5,i=1):this.keyboardEvent.ctrlKey&&(e*=2);var n=new Date().getTime()-this._startedOn,a=n-r;if(i>0&&a>0){var s=n/r;n=r,o.x+=this.directionX*(e*i*s*a),o.y+=this.directionY*(e*i*s*a)}o.x+=this.directionX*(e*n),o.y+=this.directionY*(e*n),va().handleTransformMove(t,o,{x:0,y:0},this.keyboardEvent,!0,!1)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){this._disposed||(va().processDragStop(this.interaction),ta(Aa.animations,this))},t}();var el=function(t){function e(e,i,r,n){var o=t.call(this)||this;return o.animations=[],o.className="Inertia",o.interaction=e,o.type=i,o.point=r,o.startPoint=n,o._disposers.push(new kd(o.animations)),o}return da(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.point.x},set:function(t){aa(t)&&(this.point.x=t,this.handleMove())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.point.y},set:function(t){aa(t)&&(this.point.y=t,this.handleMove())},enumerable:!0,configurable:!0}),e.prototype.handleMove=function(){if(this.interaction.events.isEnabled("drag")){var t={type:"drag",target:this.interaction,shift:{x:this.x-this.startPoint.x,y:this.y-this.startPoint.y},startPoint:this.startPoint,point:{x:this.x,y:this.y},touch:!1};this.interaction.events.dispatchImmediately("drag",t)}},e.prototype.done=function(){this.interaction.inertias.removeKey(this.type),"move"===this.type&&va().processDragStop(this.interaction),this.dispose()},e}(Db);var fl=function(){function e(){}return e.prototype.getEventKey=function(e){var r;switch(e.keyCode||e.which){case 38:r="up";break;case 40:r="down";break;case 37:r="left";break;case 39:r="right";break;case 13:r="enter";break;case 27:r="esc";break;case 36:r="home";break;case 35:r="end";break;case 9:r="tab";break;case 17:r="ctrl";break;case 18:r="alt";break;case 16:r="shift";break;case 32:r="space";break;case 36:r="home";break;case 35:r="end";break;case 33:r="pgup";break;case 34:r="pgdn";break;case 45:r="ins";break;case 46:r="del";break;case 107:r="plus";break;case 109:r="minus";break;default:r="other";}return r},e.prototype.isKey=function(e,r){var a=this.getEventKey(e);return Ca(r)&&(r=[r]),-1!==r.indexOf(a)},e.prototype.shiftKey=function(e){return e.shiftKey},e.prototype.ctrlKey=function(e){return e.ctrlKey},e.prototype.altKey=function(e){return e.altKey},e.prototype.metaKey=function(e){return e.metaKey},e}();var kc=new fl;var gl={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6};function Hh(e){switch(e){case"year":return;case"month":return"year";case"week":case"day":return"month";case"hour":return"day";case"minute":return"hour";case"second":return"minute";case"millisecond":return"second";}}function cb(e,t){return ba(t)||(t=1),gl[e]*t}function hl(){return new Date}function lc(){return hl().getTime()}function ld(e){return new Date(e.getTime())}function Tf(e,t,a,r){e=new Date(e.getTime()),t=new Date(t.getTime());var n=0,s=0;r||"millisecond"==a||(n=e.getTimezoneOffset(),e.setUTCMinutes(e.getUTCMinutes()-n),s=t.getTimezoneOffset(),t.setUTCMinutes(t.getUTCMinutes()-s));var o=!1;switch(a){case"year":e.getUTCFullYear()!=t.getUTCFullYear()&&(o=!0);break;case"month":e.getUTCFullYear()!=t.getUTCFullYear()?o=!0:e.getUTCMonth()!=t.getUTCMonth()&&(o=!0);break;case"day":e.getUTCMonth()!=t.getUTCMonth()?o=!0:e.getUTCDate()!=t.getUTCDate()&&(o=!0);break;case"hour":e.getUTCHours()!=t.getUTCHours()&&(o=!0);break;case"minute":e.getUTCMinutes()!=t.getUTCMinutes()&&(o=!0);break;case"second":e.getUTCSeconds()!=t.getUTCSeconds()&&(o=!0);break;case"millisecond":e.getTime()!=t.getTime()&&(o=!0);}if(o)return!0;var i=Hh(a);return!!i&&(e.setUTCMinutes(e.getUTCMinutes()+n),t.setUTCMinutes(t.getUTCMinutes()+s),Tf(e,t,i,r))}function Eb(e,t,a,r){var n=0;switch(r||"millisecond"==t||(n=e.getTimezoneOffset(),e.setUTCMinutes(e.getUTCMinutes()-n)),t){case"day":var s=e.getUTCDate();e.setUTCDate(s+a);break;case"second":var o=e.getUTCSeconds();e.setUTCSeconds(o+a);break;case"millisecond":var i=e.getUTCMilliseconds();e.setUTCMilliseconds(i+a);break;case"hour":var $=e.getUTCHours();e.setUTCHours($+a);break;case"minute":var u=e.getUTCMinutes();e.setUTCMinutes(u+a);break;case"year":var T=e.getUTCFullYear();e.setUTCFullYear(T+a);break;case"month":var c=e.getUTCMonth();e.setUTCMonth(c+a);break;case"week":var U=e.getUTCDate();e.setUTCDate(U+7*a);}if(!r&&"millisecond"!=t&&(e.setUTCMinutes(e.getUTCMinutes()+n),"day"==t||"week"==t||"month"==t||"year"==t)){var g=e.getTimezoneOffset();if(g!=n){var C=g-n;e.setUTCMinutes(e.getUTCMinutes()+C),e.getTimezoneOffset()!=g&&e.setUTCMinutes(e.getUTCMinutes()-C)}}return e}function rb(e,t,a,r,n,s,o,i){void 0===o&&(o=0),aa(a)||(a=1);var $=0;switch(i&&-1!=["day","month","week","year"].indexOf(t)&&(e=Fe(e,i)),n||"millisecond"==t||($=e.getTimezoneOffset(),e.setUTCMinutes(e.getUTCMinutes()-$)),t){case"day":var u=e.getUTCDate();if(a>1){if(s){s=rb(s,"day",1);var T=e.getTime()-s.getTime(),c=Math.floor(T/cb("day")/a),U=cb("day",c*a);e.setTime(s.getTime()+U-$*cb("minute"))}}else e.setUTCDate(u);e.setUTCHours(0,0,0,0);break;case"second":var g=e.getUTCSeconds();a>1&&(g=Math.floor(g/a)*a),e.setUTCSeconds(g,0);break;case"millisecond":if(1==a)return e;var C=e.getUTCMilliseconds();C=Math.floor(C/a)*a,e.setUTCMilliseconds(C);break;case"hour":var m=e.getUTCHours();a>1&&(m=Math.floor(m/a)*a),e.setUTCHours(m,o,0,0);break;case"minute":var l=e.getUTCMinutes();C=e.getUTCMilliseconds(),a>1&&(l=Math.floor(l/a)*a),e.setUTCMinutes(l,0,0);break;case"month":var p=e.getUTCMonth();a>1&&(p=Math.floor(p/a)*a),e.setUTCMonth(p,1),e.setUTCHours(0,o,0,0);break;case"year":var N=e.getUTCFullYear();a>1&&(N=Math.floor(N/a)*a),e.setUTCFullYear(N,0,1),e.setUTCHours(0,o,0,0);break;case"week":var M=e.getUTCDate(),d=e.getUTCDay();aa(r)||(r=1),M=d>=r?M-d+r:M-(7+d)+r,e.setUTCDate(M),e.setUTCHours(0,o,0,0);}if(!n&&"millisecond"!=t&&(e.setUTCMinutes(e.getUTCMinutes()+$),"day"==t||"week"==t||"month"==t||"year"==t)){var x=e.getTimezoneOffset();if(x!=$){var R=x-$;e.setUTCMinutes(e.getUTCMinutes()+R)}}return e}function Fe(e,t){return new Date(e.toLocaleString("en-US",{timeZone:t}))}function il(e){var t=new Date;return t.setHours(0,0,0,0),Fe(t,e).getMinutes()}var jl=function(e){function t(){var o=e.call(this)||this;return o._globalEventsAdded=!1,o._pointerEvents={pointerdown:"mousedown",pointerup:"mouseup",pointermove:"mousemove",pointercancel:"mouseup",pointerover:"mouseover",pointerout:"mouseout",wheel:"wheel"},o._usePointerEventsOnly=!1,o._useTouchEventsOnly=!1,o._addHoverEvents=!0,o._passiveSupported=!1,o._delayedEvents={out:[]},o.overObjects=new Fa,o.downObjects=new Fa,o.trackedObjects=new Fa,o.transformedObjects=new Fa,o.pointers=new Ta,o.inertiaOptions=new Ta,o.hitOptions={doubleHitTime:300,hitTolerance:10,noFocus:!0},o.hoverOptions={touchOutBehavior:"leave",touchOutDelay:1e3},o.swipeOptions={time:500,verticalThreshold:75,horizontalThreshold:30},o.keyboardOptions={speed:.1,accelleration:1.2,accellerationDelay:2e3},o.mouseOptions={sensitivity:1},o.className="Interaction",o.body=o.getInteraction(document.body),o._disposers.push(o.body),window.hasOwnProperty("PointerEvent")?(o._pointerEvents.pointerdown="pointerdown",o._pointerEvents.pointerup="pointerup",o._pointerEvents.pointermove="pointermove",o._pointerEvents.pointercancel="pointercancel",o._pointerEvents.pointerover="pointerover",o._pointerEvents.pointerout="pointerout"):window.hasOwnProperty("MSPointerEvent")?(o._pointerEvents.pointerdown="MSPointerDown",o._pointerEvents.pointerup="MSPointerUp",o._pointerEvents.pointermove="MSPointerMove",o._pointerEvents.pointercancel="MSPointerUp",o._pointerEvents.pointerover="MSPointerOver",o._pointerEvents.pointerout="MSPointerOut"):"undefined"!=typeof matchMedia&&matchMedia("(pointer:fine)").matches?"ontouchstart"in window&&(o._addHoverEvents=!1,o._useTouchEventsOnly=!0):window.navigator.userAgent.match(/MSIE /)?o._usePointerEventsOnly=!0:o.fullFF()?o._usePointerEventsOnly=!0:o._useTouchEventsOnly=!0,"onwheel"in document.createElement("div")?o._pointerEvents.wheel="wheel":ba(document.onmousewheel)&&(o._pointerEvents.wheel="mousewheel"),o.inertiaOptions.setKey("move",{time:100,duration:500,factor:1,easing:Lf}),o.inertiaOptions.setKey("resize",{time:100,duration:500,factor:1,easing:Lf}),o._passiveSupported=t.passiveSupported,o.applyTheme(),o}return da(t,e),t.prototype.fullFF=function(){return window.navigator.userAgent.match(/Firefox/)&&!window.navigator.userAgent.match(/Android/)},t.prototype.debug=function(){},t.prototype.addGlobalEvents=function(){var e=this;this._globalEventsAdded||(this._useTouchEventsOnly||(this._disposers.push(Za(document,this._pointerEvents.pointerdown,function(t){e.handleGlobalPointerDown(t)})),this._disposers.push(Za(document,this._pointerEvents.pointermove,function(t){e.handleGlobalPointerMove(t)})),this._disposers.push(Za(document,this._pointerEvents.pointerup,function(t){e.handleGlobalPointerUp(t)})),this._disposers.push(Za(document,this._pointerEvents.pointercancel,function(t){e.handleGlobalPointerUp(t,!0)})),this._disposers.push(Za(document,"mouseenter",function(t){ba(t.relatedTarget)||0!=t.buttons&&0!=t.which||e.handleDocumentLeave(t)}))),this._usePointerEventsOnly||(this._disposers.push(Za(document,"touchstart",function(t){e.handleGlobalTouchStart(t)})),this._disposers.push(Za(document,"touchmove",function(t){e.handleGlobalTouchMove(t)})),this._disposers.push(Za(document,"touchend",function(t){e.handleGlobalTouchEnd(t)}))),this._disposers.push(Za(document,"keydown",function(t){e.handleGlobalKeyDown(t)})),this._disposers.push(Za(document,"keyup",function(t){e.handleGlobalKeyUp(t)})),this._globalEventsAdded=!0)},t.prototype.processClickable=function(e){this.processTouchable(e)},t.prototype.processContextMenu=function(e){e.contextMenuDisabled?e.eventDisposers.hasKey("contextMenuDisabled")||e.eventDisposers.setKey("contextMenuDisabled",Za(e.element,"contextmenu",function(e){e.preventDefault()})):e.eventDisposers.hasKey("contextMenuDisabled")&&e.eventDisposers.getKey("contextMenuDisabled").dispose()},t.prototype.processHoverable=function(e){var t=this;if(e.hoverable||e.trackable)this.addGlobalEvents(),this.applyCursorOverStyle(e),!e.eventDisposers.hasKey("hoverable")&&this._addHoverEvents&&e.eventDisposers.setKey("hoverable",new Ya([Za(e.element,this._pointerEvents.pointerout,function(o){return t.handlePointerOut(e,o)}),Za(e.element,this._pointerEvents.pointerover,function(o){return t.handlePointerOver(e,o)})])),e.trackable;else{var o=e.eventDisposers.getKey("hoverable");null!=o&&(o.dispose(),e.eventDisposers.removeKey("hoverable"))}this.processTouchable(e)},t.prototype.processMovable=function(e){(e.draggable||e.swipeable||e.trackable||e.resizable)&&(this.isGlobalElement(e)||e.isTouchProtected||this.prepElement(e),this.applyCursorOverStyle(e)),this.processTouchable(e)},t.prototype.processTrackable=function(e){this.processHoverable(e),this.processMovable(e),e.trackable?this.trackedObjects.moveValue(e):this.trackedObjects.removeValue(e)},t.prototype.processDraggable=function(e){this.processMovable(e)},t.prototype.processSwipeable=function(e){this.processMovable(e)},t.prototype.processResizable=function(e){this.processMovable(e)},t.prototype.processWheelable=function(e){var t=this;if(e.wheelable)e.eventDisposers.hasKey("wheelable")||e.eventDisposers.setKey("wheelable",new Ya([Za(e.element,this._pointerEvents.wheel,function(o){return t.handleMouseWheel(e,o)},!!this._passiveSupported&&{passive:!1}),e.events.on("out",function(o){e.wheelable&&t.unlockWheel()}),e.events.on("over",function(o){e.wheelable&&t.lockWheel()})]));else{var o=e.eventDisposers.getKey("wheelable");null!=o&&(o.dispose(),e.eventDisposers.removeKey("wheelable"))}},t.prototype.processFocusable=function(e){var t=this;if(!0===e.focusable&&e.tabindex>-1&&!this._useTouchEventsOnly)e.eventDisposers.hasKey("focusable")||e.eventDisposers.setKey("focusable",new Ya([Za(e.element,"focus",function(o){return t.handleFocus(e,o)}),Za(e.element,"blur",function(o){return t.handleBlur(e,o)}),Za(e.element,this._pointerEvents.pointerdown,function(o){return t.handleFocusBlur(e,o)}),Za(e.element,"touchstart",function(o){return t.handleFocusBlur(e,o)},!!this._passiveSupported&&{passive:!1})]));else{var o=e.eventDisposers.getKey("focusable");null!=o&&(o.dispose(),e.eventDisposers.removeKey("focusable"))}},t.prototype.processTouchable=function(e){var t=this;if(e.clickable||e.hoverable||e.trackable||e.draggable||e.swipeable||e.resizable)this.addGlobalEvents(),e.eventDisposers.hasKey("touchable")||(this._useTouchEventsOnly||this._usePointerEventsOnly?this._useTouchEventsOnly?this._usePointerEventsOnly||e.eventDisposers.setKey("touchable",Za(e.element,"touchstart",function(o){return t.handleTouchDown(e,o)},!!this._passiveSupported&&{passive:!1})):e.eventDisposers.setKey("touchable",Za(e.element,this._pointerEvents.pointerdown,function(o){return t.handlePointerDown(e,o)})):e.eventDisposers.setKey("touchable",new Ya([Za(e.element,this._pointerEvents.pointerdown,function(o){return t.handlePointerDown(e,o)}),Za(e.element,"touchstart",function(o){return t.handleTouchDown(e,o)},!!this._passiveSupported&&{passive:!1})])));else{var o=e.eventDisposers.getKey("touchable");null!=o&&(o.dispose(),e.eventDisposers.removeKey("touchable"))}},t.prototype.handleFocus=function(e,t){if(e.focusable){if(e.isFocused=!0,e.events.isEnabled("focus")&&!Aa.isPaused){var o={type:"focus",target:e,event:t};e.events.dispatchImmediately("focus",o)}}else t.preventDefault()},t.prototype.handleFocusBlur=function(e,t){!1!==e.focusable&&this.getHitOption(e,"noFocus")&&e.events.once("focus",function(){e.events.disableType("blur"),Be(),e.sprite&&e.sprite.handleBlur(),e.events.enableType("blur")})},t.prototype.handleBlur=function(e,t){if(e.focusable){if(e.isFocused=!1,e.events.isEnabled("blur")&&!Aa.isPaused){var o={type:"blur",target:e,event:t};e.events.dispatchImmediately("blur",o)}}else t.preventDefault()},t.prototype.handleGlobalKeyDown=function(e){if(this.focusedObject)if(kc.isKey(e,"esc"))Be();else if(this.focusedObject.draggable&&kc.isKey(e,["up","down","left","right"])){e.preventDefault();var t=this.focusedObject;if(t.eventDisposers.hasKey("interactionKeyboardObject"))return;var o=new dl(t,e);switch(t.eventDisposers.setKey("interactionKeyboardObject",o),kc.getEventKey(e)){case"up":o.directionY=-1;break;case"down":o.directionY=1;break;case"left":o.directionX=-1;break;case"right":o.directionX=1;}}},t.prototype.handleGlobalKeyUp=function(e){if(this.focusedObject){var t=this.focusedObject.eventDisposers.getKey("interactionKeyboardObject");null!=t&&(e.preventDefault(),t.dispose(),this.focusedObject.eventDisposers.removeKey("interactionKeyboardObject")),kc.isKey(e,"enter")&&this.focusedObject.sprite&&!this.focusedObject.sprite.events.isEnabled("toggled")&&(this.focusedObject.sprite.events.isEnabled("hit")?this.focusedObject.dispatchImmediately("hit"):"hit"==this.focusedObject.sprite.showTooltipOn&&this.focusedObject.dispatchImmediately("up"))}},t.prototype.handleGlobalPointerMove=function(e){var t=this.getPointer(e);if(t.point=this.getPointerPoint(e),this.events.isEnabled("track")&&!Aa.isPaused){var o={type:"track",target:this,event:e,pointer:t,touch:t.touch};this.events.dispatchImmediately("track",o)}this.addBreadCrumb(t,t.point),this.handleGlobalMove(t,e)},t.prototype.handleGlobalPointerDown=function(e){this.processDelayed();var t=this.getPointer(e);if(this.events.isEnabled("down")&&!Aa.isPaused){var o={type:"down",target:this,event:e,pointer:t,touch:t.touch};this.events.dispatchImmediately("down",o)}},t.prototype.preventTouchAction=function(e){e.defaultPrevented||e.preventDefault()},t.prototype.handleGlobalPointerUp=function(e,t){void 0===t&&(t=!1);var o=this.getPointer(e);if(this.events.isEnabled("up")&&!Aa.isPaused){var i={type:"up",target:this,event:e,pointer:o,touch:o.touch};this.events.dispatchImmediately("up",i)}this.handleGlobalUp(o,e,t)},t.prototype.handleGlobalTouchMove=function(e){for(var t=0;t<e.changedTouches.length;t++){var o=this.getPointer(e.changedTouches[t]);if(o.point=this.getPointerPoint(e.changedTouches[t]),this.events.isEnabled("track")&&!Aa.isPaused){var i={type:"track",target:this,event:e,pointer:o,touch:o.touch};this.events.dispatchImmediately("track",i)}this.addBreadCrumb(o,o.point),this.handleGlobalMove(o,e)}},t.prototype.handleGlobalTouchStart=function(e){this.processDelayed();for(var t=0;t<e.changedTouches.length;t++){var o=this.getPointer(e.changedTouches[t]);if(!this._usePointerEventsOnly&&this.events.isEnabled("down")&&!Aa.isPaused){var i={type:"down",target:this,event:e,pointer:o,touch:o.touch};this.events.dispatchImmediately("down",i)}}},t.prototype.handleGlobalTouchEnd=function(e){for(var t=0;t<e.changedTouches.length;t++){var o=this.getPointer(e.changedTouches[t]);if(this.events.isEnabled("up")&&!Aa.isPaused){var i={type:"up",target:this,event:e,pointer:o,touch:o.touch};this.events.dispatchImmediately("up",i)}this.handleGlobalUp(o,e)}},t.prototype.handlePointerDown=function(e,t){var o=this.getPointer(t);(o.touch||1==t.which||3==t.which)&&(o.button=t.which,this.resetPointer(o,t),this.handleDown(e,o,t))},t.prototype.handlePointerOver=function(e,t){var o=this.getPointer(t);this.handleOver(e,o,t)},t.prototype.handlePointerOut=function(e,t){var o=this.getPointer(t);this.handleOut(e,o,t)},t.prototype.handleMouseWheel=function(e,t){var o=this.getPointer(t);o.point=this.getPointerPoint(t);var i=0,n=0,r=1;if(1==t.deltaMode&&(r=50),r*=this.getMouseOption(e,"sensitivity"),!(t instanceof WheelEvent))throw new Error("Invalid event type");i=Math.round(-1*t.wheelDeltaX||t.deltaX)*r,n=Math.round(-1*t.wheelDeltaY||t.deltaY)*r,this.handleWheel(e,o,i,n,t)},t.prototype.handleTouchDown=function(e,t){for(var o=0;o<t.changedTouches.length;o++){var i=this.getPointer(t.changedTouches[o]);this.maybePreventDefault(e,t,i),this.resetPointer(i,t.changedTouches[o]),this.handleDown(e,i,t)}},t.prototype.handleHit=function(e,t,o){var i=lc();if(e.lastHit&&e.lastHit>=i-this.getHitOption(e,"doubleHitTime")){if(i-e.lastHit<100)return;if(e.lastHit=void 0,e.lastHitPointer=void 0,e.events.isEnabled("doublehit")&&!Aa.isPaused){var n={type:"doublehit",target:e,point:t.point,event:o,touch:t.touch};e.events.dispatchImmediately("doublehit",n)}}else if(e.lastHit=i,e.lastHitPointer=t,3===t.button){if(e.events.isEnabled("rightclick")&&!Aa.isPaused){n={type:"rightclick",target:e,event:o};e.events.dispatchImmediately("rightclick",n)}}else if(e.events.isEnabled("hit")&&!Aa.isPaused){n={type:"hit",target:e,event:o,point:t.point,touch:t.touch};e.events.dispatchImmediately("hit",n)}},t.prototype.handleOver=function(e,t,o,i){if(void 0===i&&(i=!1),e.hoverable){var n=!1;if(this.shouldCancelHovers(t)&&this.areTransformed()&&this.moved(t,this.getHitOption(e,"hitTolerance"))&&(n=!0,this.cancelAllHovers(o)),this.processDelayed(),e.overPointers.moveValue(t),!e.isRealHover&&(n||(e.isHover=!0,e.isRealHover=!0,this.overObjects.moveValue(e)),this.handleTrack(this.body,t,o,!0),e.events.isEnabled("over")&&!Aa.isPaused&&!n)){var r={type:"over",target:e,event:o,pointer:t,touch:t.touch};e.events.dispatchImmediately("over",r)}}},t.prototype.handleOut=function(e,t,o,i,n){var r=this;if(void 0===i&&(i=!1),void 0===n&&(n=!1),e.hoverable&&(e.overPointers.removeValue(t),e.isHover&&(!e.hasDelayedOut||n))){if(i&&e.overPointers.length)return;if(t.touch&&!n&&!this.old(t)){var s=this.getHoverOption(e,"touchOutBehavior");if("leave"==s)return this._delayedEvents.out.push({type:"out",io:e,pointer:t,event:o,keepUntil:lc()+500}),void(e.hasDelayedOut=!0);if("delay"==s&&this.getHoverOption(e,"touchOutDelay"))return void this._delayedEvents.out.push({type:"out",io:e,pointer:t,event:o,keepUntil:lc()+500,timeout:this.setTimeout(function(){r.handleOut(e,t,o,!0)},this.getHoverOption(e,"touchOutDelay"))})}if(e.isHover=!1,this.overObjects.removeValue(e),!e.isDisposed()&&e.events.isEnabled("out")&&!Aa.isPaused){var a={type:"out",target:e,event:o,pointer:t,touch:t.touch};e.events.dispatchImmediately("out",a)}e.overPointers.clear(),e.hasDelayedOut=!1}},t.prototype.processDelayed=function(){for(var e;e=this._delayedEvents.out.pop();)e.timeout&&e.timeout.dispose(),this.handleOut(e.io,e.pointer,e.event,!1,!0)},t.prototype.handleDown=function(e,t,o){if(this.maybePreventDefault(e,o,t),e.inert&&this.stopInertia(e),this.handleOver(e,t,o,!0),e.downPointers.moveValue(t),this.applyCursorDownStyle(e,t),e.isDown||(!1!==e.focusable&&this.getHitOption(e,"noFocus")&&this.focusedObject&&Be(),e.isDown=!0,this.downObjects.moveValue(e),e.draggable&&this.processDragStart(e,t,o),e.resizable&&this.processResizeStart(e,t,o)),e.events.isEnabled("down")&&!Aa.isPaused){var i={type:"down",target:e,event:o,pointer:t,touch:t.touch};e.events.dispatchImmediately("down",i)}},t.prototype.handleGlobalUp=function(e,t,o){var i=this;void 0===o&&(o=!1);var n=this.downObjects.values.slice();n.sort(function(e,t){if(e&&t){var o=e.element.compareDocumentPosition(t.element);return o&Node.DOCUMENT_POSITION_CONTAINED_BY?1:o&Node.DOCUMENT_POSITION_CONTAINS?-1:0}return 0}),la(n,function(n){n&&n.downPointers.contains(e)&&i.handleUp(n,e,t,o)})},t.prototype.handleDocumentLeave=function(e){var t=this;ga(this.downObjects.backwards().iterator(),function(o){o.downPointers.each(function(i){t.handleUp(o,i,e)})})},t.prototype.handleUp=function(e,t,o,i){if(void 0===i&&(i=!1),this.restoreCursorDownStyle(e,t),e.downPointers.removeValue(t),(t.touch||this._useTouchEventsOnly)&&this.handleOut(e,t,o,!0),e.isDown){if(0==e.downPointers.length&&(e.isDown=!1,this.downObjects.removeValue(e)),e.events.isEnabled("up")&&!Aa.isPaused){var n={type:"up",target:e,event:o,pointer:t,touch:t.touch};e.events.dispatchImmediately("up",n)}i||(e.swipeable&&this.swiped(e,t)?this.handleSwipe(e,t,o):(e.clickable&&!this.moved(t,this.getHitOption(e,"hitTolerance"))&&this.handleHit(e,t,o),e.inert&&this.moved(t,this.getHitOption(e,"hitTolerance"))?this.handleInertia(e,t):e.draggable&&this.processDragStop(e,t,o),e.resizable&&this.processResizeStop(e,t,o)))}},t.prototype.maybePreventDefault=function(e,t,o){!ba(t)||!(e.draggable||e.swipeable||e.trackable||e.resizable)||this.isGlobalElement(e)||!1===t.cancelable||e.isTouchProtected&&o&&o.touch||t.preventDefault()},t.prototype.cancelAllHovers=function(e){var t=this;ga(this.overObjects.backwards().iterator(),function(o){if(o){var i=o.overPointers.getIndex(0);t.handleOut(o,i,e,!0,!0)}})},t.prototype.shouldCancelHovers=function(e){return"always"==za.disableHoverOnTransform||"touch"==za.disableHoverOnTransform&&e.touch},t.prototype.handleGlobalMove=function(e,t){var o=this;if(!e.touch){var i=Vk(e.lastEvent);ga(this.overObjects.backwards().iterator(),function(n){if(n&&n.overPointers.contains(e)&&n.hoverable){var r=!1;n.element&&e.lastEvent&&Eh(n.element,i)||(r=!0),r&&o.handleOut(n,e,t,!0)}})}ga(this.transformedObjects.backwards().iterator(),function(i){!i.downPointers.contains(e)||i.swipeable&&o.swiping(i,e)||!i.draggable&&!i.resizable||o.handleTransform(i,t)}),ga(this.trackedObjects.backwards().iterator(),function(i){i.overPointers.contains(e)||o.handleTrack(i,e,t)})},t.prototype.handleTrack=function(e,t,o,i){if(void 0===i&&(i=!1),(i||this.moved(t,0))&&e.events.isEnabled("track")&&!Aa.isPaused){var n={type:"track",target:e,event:o,point:t.point,pointer:t,touch:t.touch};e.events.dispatchImmediately("track",n)}},t.prototype.handleSwipe=function(e,t,o){if(e.events.isEnabled("swipe")&&!Aa.isPaused){var i={type:"swipe",target:e,event:o,touch:t.touch};e.events.dispatchImmediately("swipe",i)}if(t.startPoint.x<t.point.x){if(e.events.isEnabled("swiperight")&&!Aa.isPaused){i={type:"swiperight",target:e,event:o,touch:t.touch};e.events.dispatchImmediately("swiperight",i)}}else if(e.events.isEnabled("swipeleft")&&!Aa.isPaused){i={type:"swipeleft",target:e,event:o,touch:t.touch};e.events.dispatchImmediately("swipeleft",i)}},t.prototype.handleWheel=function(e,t,o,i,n){var r={x:o,y:i};e.events.isEnabled("wheel")&&!Aa.isPaused&&e.events.dispatchImmediately("wheel",{type:"wheel",target:e,event:n,point:t.point,shift:r}),o<0?e.events.isEnabled("wheelleft")&&!Aa.isPaused&&e.events.dispatchImmediately("wheelleft",{type:"wheelleft",target:e,event:n,point:t.point,shift:r}):o>0?e.events.isEnabled("swiperight")&&!Aa.isPaused&&e.events.dispatchImmediately("wheelright",{type:"wheelright",target:e,event:n,point:t.point,shift:r}):i<0?e.events.isEnabled("wheelup")&&!Aa.isPaused&&e.events.dispatchImmediately("wheelup",{type:"wheelup",target:e,event:n,point:t.point,shift:r}):i>0&&e.events.isEnabled("wheeldown")&&!Aa.isPaused&&e.events.dispatchImmediately("wheeldown",{type:"wheeldown",target:e,event:n,point:t.point,shift:r})},t.prototype.handleInertia=function(e,t){e.draggable&&0===e.downPointers.length&&this.handleMoveInertia(e,t),e.resizable&&e.downPointers.length>1&&this.handleResizeInertia(e,t)},t.prototype.handleMoveInertia=function(e,t){var o=e,i={x:t.point.x,y:t.point.y},n={x:t.startPoint.x,y:t.startPoint.y},r=new el(o,"move",i,n),s=this.getTrailPoint(t,lc()-this.getInertiaOption(e,"move","time"));if(void 0!==s){var a=this.getInertiaOption(e,"move","factor"),p=[{to:t.point.x+(t.point.x-s.point.x)*a,property:"x"},{to:t.point.y+(t.point.y-s.point.y)*a,property:"y"}],l=new bc(r,p,this.getInertiaOption(e,"move","duration"),this.getInertiaOption(e,"move","easing")).start();this._disposers.push(l.events.on("animationended",function(e){r.done()})),e.inertias.setKey("move",r)}else this.processDragStop(e,t,t.lastUpEvent)},t.prototype.handleResizeInertia=function(e,t){},t.prototype.handleTransform=function(e,t){var o,i,n,r=e.downPointers.getIndex(0),s=null,a=null;r&&(s=r.point,a=r.startPoint),n=i={x:e.originalPosition.x,y:e.originalPosition.y};for(var p=!0,l=1;l<e.downPointers.length;l++){var h=e.downPointers.getIndex(l);if(a.x!=h.startPoint.x&&a.y!=h.startPoint.y){p=!1,i=(o=h).point,n=o.startPoint;break}}var c=r&&this.moved(r,0);if(e.draggable&&r&&r.dragStartEvents&&r.dragStartEvents.length&&c&&e.events.isEnabled("dragstart")&&!Aa.isPaused&&e.events.dispatchImmediately("dragstart",r.dragStartEvents.shift()),p&&e.draggable)this.handleTransformMove(e,s,a,t,c,r.touch),this.shouldCancelHovers(r)&&this.moved(r,this.getHitOption(e,"hitTolerance"))&&this.cancelAllHovers(t);else{var u=o&&this.moved(o,0);(this.shouldCancelHovers(r)&&this.moved(r,this.getHitOption(e,"hitTolerance"))||this.shouldCancelHovers(o)&&this.moved(o,this.getHitOption(e,"hitTolerance")))&&this.cancelAllHovers(t),e.draggable&&e.resizable?(this.handleTransformMove(e,s,a,t,c&&u,r.touch),this.handleTransformResize(e,s,a,i,n,t,c&&u,r.touch)):(e.draggable&&this.handleTransformMove(e,s,a,t,c,r.touch),!e.resizable||p&&!t.ctrlKey||this.handleTransformResize(e,s,a,i,n,t,c&&u,r.touch))}},t.prototype.handleTransformMove=function(e,t,o,i,n,r){if(n&&e.events.isEnabled("drag")&&!Aa.isPaused&&(!e.isTouchProtected||!r)){var s={type:"drag",target:e,event:i,shift:{x:t.x-o.x,y:t.y-o.y},startPoint:o,point:t,touch:r};e.events.dispatchImmediately("drag",s)}},t.prototype.handleTransformResize=function(e,t,o,i,n,r,s,a){if(e.events.isEnabled("resize")&&!Aa.isPaused&&(!e.isTouchProtected||!a)){var p={type:"resize",target:e,event:r,scale:yj(t,o,i,n),startPoint1:o,point1:t,startPoint2:n,point2:i,touch:a};e.events.dispatchImmediately("resize",p)}},t.prototype.processDragStart=function(e,t,o){this.transformedObjects.moveValue(e),this.shouldCancelHovers(t)&&this.cancelAllHovers(o);var i={type:"dragstart",target:e,event:o,touch:!!t&&t.touch};t&&(t.dragTarget=e),t&&t.dragStartEvents?t.dragStartEvents.push(i):Aa.isPaused||e.dispatchImmediately("dragstart",i)},t.prototype.processDragStop=function(e,t,o){if(t||(t=this.getDragPointer(e)),t&&(t.dragTarget=void 0),this.transformedObjects.removeValue(e),(!t||this.moved(t,0))&&e.events.isEnabled("dragstop")&&!Aa.isPaused){var i={type:"dragstop",target:e,touch:!!t&&t.touch};e.events.dispatchImmediately("dragstop",i)}},t.prototype.processResizeStart=function(e,t,o){this.transformedObjects.moveValue(e)},t.prototype.processResizeStop=function(e,t,o){this.transformedObjects.removeValue(e)},t.prototype.dragStart=function(e,t){t||(t=this.getDragPointer(e)),t&&this.handleDown(e,t,t.lastDownEvent)},t.prototype.dragStop=function(e,t,o){t||(t=this.getDragPointer(e)),t&&!o&&this.handleGlobalUp(t,t.lastUpEvent,o)},t.prototype.getDragPointer=function(e){return e?e.downPointers.getIndex(0):this.transformedObjects.length?this.getDragPointer(this.transformedObjects.getIndex(0)):void 0},t.prototype.getPointerId=function(e){return(ba(e.identifier)?""+e.identifier:ba(e.pointerId)?""+e.pointerId:"m").replace("-","")},t.prototype.getPointerPoint=function(e){return{x:e.clientX,y:e.clientY}},t.prototype.getPointer=function(e){var t,o=this.getPointerId(e),i=this.getPointerPoint(e);return this.pointers.hasKey(o)?(t=this.pointers.getKey(o)).touch=this.isPointerTouch(e):(t={id:o,touch:this.isPointerTouch(e),startPoint:i,startTime:lc(),point:i,track:[],swipeCanceled:!1,dragStartEvents:[]},this.addBreadCrumb(t,i),this.pointers.setKey(o,t)),t.lastEvent=e,this.lastPointer=t,t},t.prototype.isPointerTouch=function(e){if("undefined"!=typeof Touch&&e instanceof Touch)return!0;if("undefined"!=typeof PointerEvent&&e instanceof PointerEvent&&ba(e.pointerType))switch(e.pointerType){case"touch":case"pen":case 2:return!0;case"mouse":case 4:return!1;default:return!(e instanceof MouseEvent);}else if(ba(e.type)&&e.type.match(/^mouse/))return!1;return!0},t.prototype.resetPointer=function(e,t){var o=this.getPointerPoint(t);e.startTime=lc(),e.startPoint={x:o.x,y:o.y},e.point={x:o.x,y:o.y},e.track=[],e.swipeCanceled=!1},t.prototype.addBreadCrumb=function(e,t){e.track.push({timestamp:lc(),point:t})},t.prototype.lockDocument=function(){this.prepElement(this.body)},t.prototype.unlockDocument=function(){0==this.transformedObjects.length&&this.restoreAllStyles(this.body)},t.prototype.lockElement=function(e){this.prepElement(e)},t.prototype.unlockElement=function(e){this.restoreAllStyles(e)},t.prototype.lockWheel=function(){window.addEventListener(this._pointerEvents.wheel,this.wheelLockEvent,!!this._passiveSupported&&{passive:!1})},t.prototype.unlockWheel=function(){window.removeEventListener(this._pointerEvents.wheel,this.wheelLockEvent)},t.prototype.isLocalElement=function(e,t,o){var i=this.getCache("local_pointer_"+e.id);if(ba(i))return i;var n=Fh(t)||document;if(n.elementFromPoint){var r=n.elementFromPoint(e.point.x,e.point.y),s=r&&Eh(t,r);return this.setCache("local_pointer_"+e.id+"_"+o,s,100),s}return!1},t.prototype.wheelLockEvent=function(e){return e.preventDefault(),!1},t.prototype.prepElement=function(e){var t=e.element;if(t){for(var o=["touchAction","webkitTouchAction","MozTouchAction","MSTouchAction","msTouchAction","oTouchAction","userSelect","webkitUserSelect","MozUserSelect","MSUserSelect","msUserSelect","oUserSelect","touchSelect","webkitTouchSelect","MozTouchSelect","MSTouchSelect","msTouchSelect","oTouchSelect","touchCallout","webkitTouchCallout","MozTouchCallout","MSTouchCallout","msTouchCallout","oTouchCallout","contentZooming","webkitContentZooming","MozContentZooming","MSContentZooming","msContentZooming","oContentZooming","userDrag","webkitUserDrag","MozUserDrag","MSUserDrag","msUserDrag","oUserDrag"],i=0;i<o.length;i++)o[i]in t.style&&this.setTemporaryStyle(e,o[i],"none");this.setTemporaryStyle(e,"tapHighlightColor","rgba(0, 0, 0, 0)")}},t.prototype.unprepElement=function(e){var t=e.element;if(t){for(var o=["touchAction","webkitTouchAction","MozTouchAction","MSTouchAction","msTouchAction","oTouchAction","userSelect","webkitUserSelect","MozUserSelect","MSUserSelect","msUserSelect","oUserSelect","touchSelect","webkitTouchSelect","MozTouchSelect","MSTouchSelect","msTouchSelect","oTouchSelect","touchCallout","webkitTouchCallout","MozTouchCallout","MSTouchCallout","msTouchCallout","oTouchCallout","contentZooming","webkitContentZooming","MozContentZooming","MSContentZooming","msContentZooming","oContentZooming","userDrag","webkitUserDrag","MozUserDrag","MSUserDrag","msUserDrag","oUserDrag"],i=0;i<o.length;i++)o[i]in t.style&&this.restoreStyle(e,o[i]);this.restoreStyle(e,"tapHighlightColor")}},t.prototype.getHitOption=function(e,t){var o=e.hitOptions[t];return void 0===o&&(o=this.hitOptions[t]),o},t.prototype.getHoverOption=function(e,t){var o=e.hoverOptions[t];return void 0===o&&(o=this.hoverOptions[t]),o},t.prototype.getSwipeOption=function(e,t){var o=e.swipeOptions[t];return void 0===o&&(o=this.swipeOptions[t]),o},t.prototype.getKeyboardOption=function(e,t){var o=e.keyboardOptions[t];return void 0===o&&(o=this.keyboardOptions[t]),o},t.prototype.getMouseOption=function(e,t){var o=e.mouseOptions[t];return void 0===o&&(o=this.mouseOptions[t]),o},t.prototype.getInertiaOption=function(e,t,o){var i=e.inertiaOptions.getKey(t);return i&&ba(i[o])?i[o]:this.inertiaOptions.getKey(t)[o]},t.prototype.stopInertia=function(e){for(var t,o=["move","resize"],i=0;i<o.length;i++)if(t=o[i],e.inertias.hasKey(t)){var n=e.inertias.getKey(t);if(n){n.dispose();continue}}},t.prototype.swiping=function(e,t){var o=lc();return!(t.swipeCanceled||!e.swipeable)&&Math.abs(t.startPoint.y-t.point.y)<this.getSwipeOption(e,"verticalThreshold")&&t.startTime>o-this.getSwipeOption(e,"time")},t.prototype.swiped=function(e,t){var o=lc();return!t.swipeCanceled&&Math.abs(t.startPoint.x-t.point.x)>this.getSwipeOption(e,"horizontalThreshold")&&Math.abs(t.startPoint.y-t.point.y)<this.getSwipeOption(e,"verticalThreshold")&&t.startTime>o-this.getSwipeOption(e,"time")},t.prototype.applyCursorOverStyle=function(e){var t=e.cursorOptions;if(ba(t.overStyle))for(var o=0;o<t.overStyle.length;o++)Dh(e.element,t.overStyle[o].property,t.overStyle[o].value)},t.prototype.applyCursorDownStyle=function(e,t){if(!t.touch){var o=e.cursorOptions.downStyle;if(e.downPointers.contains(t)&&ba(o))for(var i=0;i<o.length;i++)this.setTemporaryStyle(this.body,o[i].property,o[i].value),this.setTemporaryStyle(e,o[i].property,o[i].value)}},t.prototype.restoreCursorDownStyle=function(e,t){if(!t.touch){var o=e.cursorOptions.downStyle;if(e.downPointers.contains(t)&&ba(o))for(var i=0;i<o.length;i++)this.restoreStyle(this.body,o[i].property),this.restoreStyle(e,o[i].property)}},t.prototype.setGlobalStyle=function(e){for(var t=va().body,o=mb(e)?e:[e],i=0;i<o.length;i++)this.setTemporaryStyle(t,o[i].property,o[i].value)},t.prototype.restoreGlobalStyle=function(e){for(var t=va().body,o=mb(e)?e:[e],i=0;i<o.length;i++)this.restoreStyle(t,o[i].property)},t.prototype.isGlobalElement=function(e){return document.body===e.element},t.prototype.moved=function(e,t,o){void 0===o&&(o=300);var i=this.getShift(e);return Math.abs(i.x)>t||Math.abs(i.y)>t},t.prototype.old=function(e,t){return void 0===t&&(t=300),lc()-e.startTime>t},t.prototype.getShift=function(e){return{x:e.startPoint.x-e.point.x,y:e.startPoint.y-e.point.y}},t.prototype.getTrailPoint=function(e,t){for(var o,i=0;i<e.track.length;i++)if(e.track[i].timestamp>=t){o=e.track[i];break}return o},t.prototype.pointerExists=function(e,t){var o=!1;return e.each(function(e){e!=t&&(o=e.point.x==t.point.x&&e.point.y==t.point.y)}),o},t.prototype.getInteraction=function(e){return new cl(e)},t.prototype.setTemporaryStyle=function(e,t,o){var i=e.element;ba(i.style[t])&&!e.replacedStyles.hasKey(t)&&e.replacedStyles.setKey(t,i.style[t]),Dh(i,t,o)},t.prototype.restoreStyle=function(e,t){e.replacedStyles.hasKey(t)?(e.element.style[t]=e.replacedStyles.getKey(t),e.replacedStyles.removeKey(t)):delete e.element.style[t]},t.prototype.restoreAllStyles=function(e){ga(e.replacedStyles.iterator(),function(t){var o=t[0],i=t[1];e.element.style[o]=i,e.replacedStyles.removeKey(o)})},t.prototype.dispose=function(){this.isDisposed()||(e.prototype.dispose.call(this),this.restoreAllStyles(this.body),this.unlockWheel())},t.prototype.log=function(e,t,o){if(t.changedTouches)for(var i=0;i<t.changedTouches.length;i++)this.logTouch(e,t.type,t.changedTouches[i]);else{var n="";if(t.pointerType)switch(t.pointerType){case 2:n="touch";break;case 4:n="mouse";break;default:n=t.pointerType;}else n="undefined"!=typeof TouchEvent&&t instanceof TouchEvent?"touch":t.type.match(/^mouse/)?"mouse":"???";var r="";r=ba(t.identifier)?t.identifier:ba(t.pointerId)?t.pointerId:"???",o?console.log(e+" ("+o.uid+")  "+t.type+"  "+n+"  "+r):console.log(e+"  "+t.type+"  "+n+"  "+r)}},t.prototype.areTransformed=function(e){var t=this.transformedObjects.length;if(e)for(var o=mb(e)?e:[e],i=0;i<o.length;i++)this.transformedObjects.contains(o[i])&&t--;return t>0},t.prototype.logTouch=function(e,t,o){console.log(e+"  "+t+"  touch  "+o.identifier)},Object.defineProperty(t,"passiveSupported",{get:function(){var e=this;if(null==this._passiveSupported)try{var t=Object.defineProperty({},"passive",{get:function(){e._passiveSupported=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(o){this._passiveSupported=!1}return this._passiveSupported},enumerable:!0,configurable:!0}),t}(jc);var Ih=null;function va(){return null==Ih&&(Ih=new jl),Ih}var Jh=function(e){function t(){var t=e.call(this)||this;return t.adapter=new Kb(t),t._elements={},t._IOs={},t._content="",t._title="",t._classPrefix="ampopup",t._defaultStyles=!0,t._showCurtain=!1,t._draggable=!0,t._align="center",t._dynamicResize=!0,t._verticalAlign="middle",t._shift={x:0,y:0},t._tempShift={x:0,y:0},t._readerTitle="",t._closable=!0,t._cssLoaded=!1,t._fitTo="window",t.isTemplate=!1,t._sized=!1,t.className="Popup",t}return da(t,e),t.prototype.open=function(){this.container&&(this._elements.wrapper&&this.container.appendChild(this._elements.wrapper),this._elements.curtain&&(this.container.appendChild(this._elements.curtain),this.showCurtain=this.showCurtain),this.positionElement(),this.dispatchImmediately("opened"))},t.prototype.close=function(){this._elements.wrapper&&this._elements.wrapper.parentElement&&this._elements.wrapper.parentElement.removeChild(this._elements.wrapper),this._elements.curtain&&this._elements.curtain.parentElement&&this._elements.curtain.parentElement.removeChild(this._elements.curtain),this.dispatchImmediately("closed"),this.releasePointers()},t.prototype.dispose=function(){this.close(),e.prototype.dispose.call(this)},t.prototype.positionElement=function(e){var t=this;void 0===e&&(e=!0),this._elements.wrapper&&setTimeout(function(){if(t._elements.wrapper){if(e||!t._sized){t._elements.wrapper.style.opacity="0.01",t._elements.wrapper.style.left="0",t._elements.wrapper.style.top="0",t._elements.wrapper.style.margin="0 0 0 0",t._elements.wrapper.style.width="",t._elements.wrapper.style.height="";var i=t._elements.wrapper.getBoundingClientRect();t._elements.wrapper.style.width=i.width+"px",t._elements.wrapper.style.height=i.height+"px",t._sized=!0}if(t.dynamicResize)for(var s=t._elements.wrapper.getElementsByTagName("img"),r=0;r<s.length;r++){var n=s[r];if(!n.complete){n.addEventListener("load",function(){t.positionElement(!0)});break}}setTimeout(function(){if(t._elements.wrapper){var i;switch(!e&&t._sized||!t._bbox?(i=t._elements.wrapper.getBoundingClientRect(),t._elements.wrapper.style.opacity=""):i=t._bbox,t.align){case"left":t._elements.wrapper.style.left="0",t._elements.wrapper.style.right="auto",t._elements.wrapper.style.marginLeft=t.toStyle(t._shift.x+t._tempShift.x);break;case"center":t._elements.wrapper.style.left="50%",t._elements.wrapper.style.right="auto",t._elements.wrapper.style.marginLeft=t.toStyle(Math.round(-i.width/2)+(t._shift.x+t._tempShift.x));break;case"right":t._elements.wrapper.style.left="auto",t._elements.wrapper.style.right="0",t._elements.wrapper.style.marginLeft=t.toStyle(t._shift.x+t._tempShift.x);break;default:t._elements.wrapper.style.left=t.toStyle(t.left)||"auto",t._elements.wrapper.style.right=t.toStyle(t.right)||"auto",t._elements.wrapper.style.marginLeft=t.toStyle(t._shift.x+t._tempShift.x);}switch(t.verticalAlign){case"top":t._elements.wrapper.style.top="0",t._elements.wrapper.style.bottom="auto",t._elements.wrapper.style.marginTop=t.toStyle(t._shift.y+t._tempShift.y);break;case"middle":t._elements.wrapper.style.top="50%",t._elements.wrapper.style.bottom="auto",t._elements.wrapper.style.marginTop=t.toStyle(Math.round(-i.height/2)+(t._shift.y+t._tempShift.y));break;case"bottom":t._elements.wrapper.style.top="auto",t._elements.wrapper.style.bottom="0",t._elements.wrapper.style.marginTop=t.toStyle(t._shift.y+t._tempShift.y);break;default:t._elements.wrapper.style.top=t.toStyle(t.top)||"auto",t._elements.wrapper.style.bottom=t.toStyle(t.bottom)||"auto",t._elements.wrapper.style.marginTop=t.toStyle(t._shift.y+t._tempShift.y);}}},1)}},1)},t.prototype.setupDragging=function(){var e=this;this.draggable?(this._IOs.header.events.has("drag")||this._IOs.header.events.on("drag",function(t){e._tempShift.x=t.shift.x,e._tempShift.y=t.shift.y,e.positionElement(!1)}),this._IOs.header.events.has("dragstop")||this._IOs.header.events.on("dragstop",function(t){e._shift.x+=e._tempShift.x,e._shift.y+=e._tempShift.y,e._tempShift.x=0,e._tempShift.y=0,e.positionElement(!1)})):this._IOs.header&&(va().unprepElement(this._IOs.header),this._IOs.header.events.has("drag")&&this._IOs.header.events.off("drag"),this._IOs.header.events.has("dragstop")&&this._IOs.header.events.off("dragstop"))},t.prototype.toStyle=function(e){return ba(e)?aa(e)?e+"px":e.toString():null},Object.defineProperty(t.prototype,"classPrefix",{get:function(){return this.adapter.apply("classPrefix",this._classPrefix)},set:function(e){this._classPrefix=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classPrefixRaw",{get:function(){return this._classPrefix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this.adapter.apply("content",this._content)},set:function(e){this._content!=e&&(this._content=e,this._elements.content||this.createContentElement(),this._elements.content.innerHTML=e,this.positionElement())},enumerable:!0,configurable:!0}),t.prototype.getClassNames=function(){return this.adapter.apply("classNames",{wrapperClass:this.classPrefix+"",headerClass:this.classPrefix+"-header",titleClass:this.classPrefix+"-title",contentClass:this.classPrefix+"-content",insideClass:this.classPrefix+"-inside",curtainClass:this.classPrefix+"-curtain",closeClass:this.classPrefix+"-close"})},t.prototype.createContentElement=function(){if(!this._elements.wrapper){var e=this.getClassNames(),t=document.createElement("div");t.className=e.contentClass,t.style.opacity="0.01";var i=document.createElement("a");i.className=e.closeClass;var s=document.createElement("div");s.className=e.headerClass;var r=document.createElement("div");r.innerHTML=this.title,r.className=e.titleClass,this.title||(r.style.display="none");var n=document.createElement("div");n.className=e.insideClass,n.innerHTML=this.content,this._IOs.wrapper=va().getInteraction(t),this._IOs.header=va().getInteraction(s),this._disposers.push(this._IOs.wrapper),this._IOs.wrapper.events.on("over",this.disablePointers,this),this._IOs.wrapper.events.on("out",this.releasePointers,this),this._IOs.close=va().getInteraction(i),this._disposers.push(this._IOs.close),i.style.visibility="hidden",t.setAttribute("role","dialog"),s.appendChild(i),s.appendChild(r),t.appendChild(s),t.appendChild(n),this.container.appendChild(t),this._elements.wrapper=t,this._elements.header=s,this._elements.content=n,this._elements.title=r,this._elements.close=i,this.defaultStyles&&this.loadDefaultCSS(),this.createCurtainElement(),this.applyEvents(),this.applyReaderSettings(),this.setupDragging()}},Object.defineProperty(t.prototype,"title",{get:function(){return this.adapter.apply("title",this._title)},set:function(e){this._title!=e&&(this._title=e,this._elements.content||this.createContentElement(),this._elements.title.innerHTML=e,this.positionElement(),this.applyReaderSettings())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerTitle",{get:function(){return this.adapter.apply("readerTitle",""!=this._readerTitle?this._readerTitle:this.title)},set:function(e){this._readerTitle!=e&&(this._readerTitle=e,this.applyReaderSettings())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closable",{get:function(){return this.adapter.apply("closable",this._closable)},set:function(e){e!==this._closable&&(this._closable=e,this.applyEvents())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fitTo",{get:function(){return this.adapter.apply("fitTo",this._fitTo)},set:function(e){e!=this._fitTo&&(this._fitTo=e,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultStyles",{get:function(){return this.adapter.apply("defaultStyles",this._defaultStyles)},set:function(e){this._defaultStyles!=e&&(this._defaultStyles=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showCurtain",{get:function(){return this.adapter.apply("showCurtain",this._showCurtain)},set:function(e){this._showCurtain!=e&&(this._showCurtain=e,this._elements.curtain&&(this._elements.curtain.style.display=e?"block":"none"))},enumerable:!0,configurable:!0}),t.prototype.createCurtainElement=function(){var e=this.getClassNames(),t=document.createElement("div");t.className=e.curtainClass,this.container.appendChild(t),this._IOs.curtain=va().getInteraction(t),this._disposers.push(this._IOs.curtain),this._IOs.curtain.events.on("over",this.disablePointers,this),this._IOs.curtain.events.on("out",this.releasePointers,this),t.style.display=this.showCurtain?"block":"none",this._elements.curtain=t},Object.defineProperty(t.prototype,"draggable",{get:function(){return this.adapter.apply("draggable",this._draggable)},set:function(e){this._draggable!=e&&(this._draggable=e,this.setupDragging())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dynamicResize",{get:function(){return this.adapter.apply("dynamicResize",this._dynamicResize)},set:function(e){this._dynamicResize!=e&&(this._dynamicResize=e,this.positionElement(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this.adapter.apply("align",this._align)},set:function(e){this._align!=e&&(this._align=e,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalAlign",{get:function(){return this.adapter.apply("verticalAlign",this._verticalAlign)},set:function(e){this._verticalAlign!=e&&(this._verticalAlign=e,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.adapter.apply("left",this._left)},set:function(e){this.left!=e&&(this._left=e,this._align="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.adapter.apply("right",this._right)},set:function(e){this.right!=e&&(this._right=e,this._align="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.adapter.apply("top",this._top)},set:function(e){this.top!=e&&(this._top=e,this._verticalAlign="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.adapter.apply("bottom",this._bottom)},set:function(e){this.bottom!=e&&(this._bottom=e,this._verticalAlign="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),t.prototype.loadDefaultCSS=function(){this._cssLoaded||(this._disposers.push(al(Rf(this.container),this.classPrefix)),sa(this._elements,function(e,t){t.style.display=""}),this._cssLoaded=!0)},t.prototype.applyEvents=function(){var e=this;if(this._IOs.close)if(this.closable){this._IOs.close.element.style.visibility="visible";var t=[va().body.events.on("keyup",function(t){kc.isKey(t.event,"esc")&&e.closable&&e.close()}),this._IOs.close.events.on("hit",function(t){e.close()})];t.push(this._IOs.curtain.events.on("hit",function(t){e.showCurtain&&e.closable&&e.close()})),this._disposers.push(new Ya(t))}else this._IOs.close.element.style.visibility="hidden"},t.prototype.disablePointers=function(){this.sprite&&(this._spriteInteractionsEnabled=this.sprite.interactionsEnabled,this.sprite.interactionsEnabled=!1)},t.prototype.releasePointers=function(){ba(this._spriteInteractionsEnabled)&&(this.sprite.interactionsEnabled=this._spriteInteractionsEnabled,this._spriteInteractionsEnabled=void 0)},t.prototype.applyReaderSettings=function(){this.elements.wrapper.setAttribute("aria-label",this.readerTitle)},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.container=t.container,this.sprite=t.sprite,this.classPrefix=t.classPrefixRaw,this.content=t.content,this.title=t.title,this.readerTitle=t.readerTitle,this.defaultStyles=t.defaultStyles,this.showCurtain=t.showCurtain,this.align=t.align,this.verticalAlign=t.verticalAlign,this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.adapter.copyFrom(t.adapter)},t}(jc);var Kh=function(r){function $(){var $=r.call(this)||this;return $.adapter=new Kb($),$.className="Modal",$.showCurtain=!0,$.draggable=!1,$}return da($,r),$}(Jh);function kl(){for(var o=[],$=0;$<arguments.length;$++)o[$]=arguments[$];za.verbose&&console&&console.log.apply(console,Lc(o))}function Uf(){for(var o=[],$=0;$<arguments.length;$++)o[$]=arguments[$];za.suppressWarnings||console&&console.warn.apply(console,Lc(o))}var ll=function(){function e(){var e=this;this._targets=[],this._observer=new ResizeObserver(function(t){la(t,function(t){la(e._targets,function(e){e.target===t.target&&e.callback()})})})}return e.prototype.addTarget=function(e,t){this._observer.observe(e,{box:"content-box"}),this._targets.push({target:e,callback:t})},e.prototype.removeTarget=function(e){this._observer.unobserve(e),Ng(this._targets,function(t){return t.target!==e})},e}(),ml=function(){function e(){this._targets=[]}return e.prototype.addTarget=function(t,r){var n=this;if(0===this._targets.length){var i=null,o=function(){var t=Date.now();(null===i||t>i+e.delay)&&(i=t,la(n._targets,function(e){var t=e.target.getBoundingClientRect();t.width===e.size.width&&t.height===e.size.height||(e.size=t,e.callback())})),n._timer=requestAnimationFrame(o)};this._timer=requestAnimationFrame(o)}var s=t.getBoundingClientRect();this._targets.push({target:t,callback:r,size:s})},e.prototype.removeTarget=function(e){Ng(this._targets,function(t){return t.target!==e}),0===this._targets.length&&cancelAnimationFrame(this._timer)},e.delay=200,e}(),Lh=null;function nl(){return null===Lh&&(Lh="undefined"!=typeof ResizeObserver?new ll:new ml),Lh}var ol=function(){function e(e,t){this._disposed=!1,this._sensor=nl(),this._element=e,this._sensor.addTarget(e,t)}return e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._sensor.removeTarget(this._element))},Object.defineProperty(e.prototype,"sensor",{get:function(){return this._sensor},enumerable:!0,configurable:!0}),e.prototype.reset=function(){Uf("resizeSensor.reset() is no longer needed and can be removed")},e}();var Vf=[];var Mh=function(){function e(e,t){var i=this;this._disposed=!1,this.autoResize=!0,this.nonExportableSprites=[],this._disposers=[],this.cssScale=1,this._printing=!1,this.htmlElement=e,t||(this._printing=!1,this.initSensor(),this._disposers.push(Za(window,"beforeprint",function(){i._printing=!0})),this._disposers.push(Za(window,"afterprint",function(){i._printing=!1}))),Vf.push(this);var r=document.createElement("div"),o=r.style;o.width="100%",o.height="100%",o.position="relative",e.appendChild(r),this.SVGContainer=r}return e.prototype.initSensor=function(){var e=this;this.resizeSensor&&this.resizeSensor.dispose();this.resizeSensor=new ol(this.htmlElement,function(){e.autoResize&&!e._printing&&e.measure()}),this._disposers.push(this.resizeSensor)},e.prototype.measure=function(){var e=jk(this.htmlElement),t=kk(this.htmlElement),i=this.container;i&&(this.width==e&&this.height==t||(this.width=e,this.height=t,e>0&&(i.maxWidth=e),t>0&&(i.maxHeight=t),Wk(this.SVGContainer)),i.maxWidth||(i.maxWidth=0),i.maxHeight||(i.maxHeight=0),this.cssScale=1,this.checkTransform(this.htmlElement))},Object.defineProperty(e.prototype,"container",{get:function(){return this._container},set:function(e){this._container=e,this.measure()},enumerable:!0,configurable:!0}),e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){this._disposed||ta(Vf,this),la(this._disposers,function(e){e.dispose()})},Object.defineProperty(e.prototype,"hideOverflow",{set:function(e){this.SVGContainer.style.overflow=e?"hidden":""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modal",{get:function(){return ba(this._modal)||(this._modal=new Kh,this._modal.container=this.SVGContainer,this._disposers.push(this._modal)),this._modal},enumerable:!0,configurable:!0}),e.prototype.openModal=function(e,t){this.closeModal();var i=this.modal;return i.content=e,i.readerTitle=t||"",i.title=t||"",i.open(),i},e.prototype.closeModal=function(){this._modal&&this.modal.close()},Object.defineProperty(e.prototype,"popups",{get:function(){if(!ba(this._popups)){var e=new Jh;e.container=this.SVGContainer,this._popups=new _a(e),this._disposers.push(new Sa(this._popups)),this._disposers.push(this._popups.template)}return this._popups},enumerable:!0,configurable:!0}),e.prototype.openPopup=function(e,t){var i=this.popups.create();return i.content=e,ba(t)&&(i.title=t),i.open(),i},e.prototype.closeAllPopups=function(){this.popups.each(function(e){e.close()})},Object.defineProperty(e.prototype,"readerAlertElement",{get:function(){if(!ba(this._readerAlertElement)){var e=document.createElement("div");e.setAttribute("role","alert"),e.style.zIndex="-100000",e.style.opacity="0",e.style.position="absolute",e.style.top="0",this.SVGContainer.appendChild(e),this._readerAlertElement=e}return this._readerAlertElement},enumerable:!0,configurable:!0}),e.prototype.readerAlert=function(e){this.readerAlertElement.innerHTML=e},e.prototype.checkTransform=function(e){if(window.getComputedStyle){if(e&&e.style){var t=window.getComputedStyle(e,null);if(t){var i=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");if(i&&"none"!==i){var r=i.split("(")[1].split(")")[0].split(","),o=Number(r[0]),s=Number(r[1]),n=Math.sqrt(o*o+s*s);isNaN(n)||(this.cssScale*=n)}}}e.parentNode&&e.parentNode instanceof HTMLElement&&this.checkTransform(e.parentNode)}},e}();var Nh=function(){function e(e,t){this.container=e,this.id=t;var r=document.createElementNS(Ae,"svg");r.setAttribute("version","1.1"),r.setAttributeNS(Ah,"xmlns",Ae),r.setAttributeNS(Ah,"xmlns:xlink",Nf),r.setAttribute("role","group"),this.container.appendChild(r),this.defs=document.createElementNS(Ae,"defs"),r.appendChild(this.defs),r.style.width="100%",r.style.height="100%",r.style.overflow="visible",this.svg=r}return e.prototype.add=function(e){return new Ee(e)},e.prototype.addGroup=function(e){return new _k(e)},e.prototype.append=function(e){e&&this.svg.appendChild(e.node)},e.prototype.appendDef=function(e){e&&this.defs.appendChild(e.node)},e.prototype.foreignObject=function(){return new Ee("foreignObject")},e.prototype.supportsForeignObject=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Extensibility","1.1")},e}();var Oh=null;function Ld(){if(null===Oh){var e=document.createElement("div");e.hidden=!0,document.body.appendChild(e);var t=new Mh(e,!0);Oh=new Nh(t.SVGContainer,"ghost")}return Oh}var md=function(e){function t(){var t=e.call(this)||this;t._elements=new Fa,t.properties={},t.className="Pattern",t.width=10,t.height=10,t.x=0,t.y=0,t.patternUnits="userSpaceOnUse";var r=new Ia;return t.backgroundFill=r.getFor("background"),t.backgroundOpacity=0,t.fillOpacity=1,t.fill=r.getFor("alternativeBackground"),t.stroke=r.getFor("alternativeBackground"),t.strokeOpacity=1,t.strokeWidth=1,t.shapeRendering="crispEdges",t.rotation=0,t.element=t.paper.addGroup("pattern"),t.id="pattern-"+ca.getUniqueId(),t.element.attr({id:t.id}),t._disposers.push(t.element),t._disposers.push(new Sa(t._elements)),t.patternUnits=t.patternUnits,t.width=t.width,t.height=t.height,t.applyTheme(),t}return da(t,e),t.prototype.draw=function(){var e=this,t=this.element;if(t){t.removeChildNodes();var r=this.paper.add("rect");r.attr({width:this.width,height:this.height,"shape-rendering":"crispEdges",fill:this.backgroundFill.hex,"fill-opacity":this.backgroundOpacity,stroke:this.backgroundFill.hex,"stroke-opacity":0}),t.add(r),t.attr({x:this.x,y:this.y,width:this.width,height:this.height,stroke:this.stroke.hex,fill:this.fill.hex,"fill-opacity":this.fillOpacity,"stroke-opacity":this.strokeOpacity,"stroke-width":this.strokeWidth,"shape-rendering":this.shapeRendering,patternUnits:this.patternUnits,"stroke-dasharray":this.strokeDasharray}),ga(this._elements.iterator(),function(t){t.rotation=e.rotation,t.rotationX=e.properties.rotationX,t.rotationY=e.properties.rotationY,e.element.add(t)})}},t.prototype.animate=function(e,t,r){return new bc(this,e,t,r).start()},t.prototype.addElement=function(e){this._elements.push(e),this._disposers.push(e)},t.prototype.removeElement=function(e){this._elements.removeValue(e),this.removeDispose(e)},Object.defineProperty(t.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillOpacity",{get:function(){return this.properties.fillOpacity},set:function(e){this.properties.fillOpacity=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this.properties.fill},set:function(e){this.properties.fill=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundFill",{get:function(){return this.properties.backgroundFill},set:function(e){this.properties.backgroundFill=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundOpacity",{get:function(){return this.properties.backgroundOpacity},set:function(e){this.properties.backgroundOpacity=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this.properties.stroke},set:function(e){this.properties.stroke=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeOpacity",{get:function(){return this.properties.strokeOpacity},set:function(e){this.properties.strokeOpacity=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this.properties.strokeWidth},set:function(e){this.properties.strokeWidth=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shapeRendering",{get:function(){return this.properties.shapeRendering},set:function(e){this.properties.shapeRendering=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.properties.rotation},set:function(e){this.properties.rotation=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"patternUnits",{get:function(){return this.properties.patternUnits},set:function(e){this.properties.patternUnits=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.properties.width},set:function(e){this.properties.width=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.properties.height},set:function(e){this.properties.height=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.properties.x},set:function(e){this.properties.x=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.properties.y},set:function(e){this.properties.y=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paper",{get:function(){return this._paper?this._paper:Ld()},set:function(e){this._paper!=e&&(this._paper=e,this.draw(),e.appendDef(this.element))},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){var r=this;e.prototype.copyFrom.call(this,t),sa(t.properties,function(e,t){r[e]=t})},Object.defineProperty(t.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new kd(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeDasharray",{get:function(){return this.properties.strokeDashArray},set:function(e){this.properties.strokeDashArray=e,this.draw()},enumerable:!0,configurable:!0}),t.prototype.processConfig=function(t){if(t&&ba(t.elements)&&mb(t.elements))for(var r=0,i=t.elements.length;r<i;r++){var o=t.elements[r];if(ba(o.type)){var n=this.createEntryInstance(o);n instanceof Db&&(n.config=o),this.addElement(ba(o.typeProperty)?n[o.typeProperty]:n.element)}}e.prototype.processConfig.call(this,t)},t}(Db);ca.registeredClasses.Pattern=md;var Zb=function(t){function e(){var e=t.call(this)||this;return e._stops=new Fa,e._rotation=0,e.className="LinearGradient",e._stops.events.on("setIndex",e.validate,e),e._stops.events.on("inserted",e.validate,e),e.element=e.paper.addGroup("linearGradient"),e.id="gradient-"+ca.getUniqueId(),e.element.attr({id:e.id}),e._disposers.push(e.element),e.applyTheme(),e}return da(e,t),e.prototype.validate=function(){var t=this,e=(this._rotation+90)*ee,r=Math.round(50+50*Math.sin(e+Math.PI))+"%",i=Math.round(50+50*Math.cos(e))+"%",o=Math.round(50+50*Math.sin(e))+"%",a=Math.round(50+50*Math.cos(e+Math.PI))+"%",p=this.element;p.removeChildNodes(),p.attr({x1:r,x2:o,y1:i,y2:a}),ga(Oc(this._stops.iterator()),function(e){var r=e[0],i=e[1],o=i.offset;aa(o)||(o=r/(t._stops.length-1));var a=t.paper.add("stop");ba(i.color)&&a.attr({"stop-color":i.color.toString()}),aa(i.opacity)&&a.attr({"stop-opacity":i.opacity}),aa(o)&&a.attr({offset:o}),p.add(a)})},e.prototype.clear=function(){this._stops.clear()},e.prototype.addColor=function(t,e,r){this._stops.push({color:t,opacity:e,offset:r})},Object.defineProperty(e.prototype,"stops",{get:function(){return this._stops},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paper",{get:function(){return this._paper?this._paper:Ld()},set:function(t){this._paper!=t&&(this._paper=t,this.validate(),t.appendDef(this.element))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t,this.validate()},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.stops.copyFrom(e.stops),this._rotation=e.rotation},Object.defineProperty(e.prototype,"gradientUnits",{set:function(t){this.element.attr({gradientUnits:t})},enumerable:!0,configurable:!0}),e}(Db);ca.registeredClasses.LinearGradient=Zb;var Cc=function(t){function e(){var e=t.call(this)||this;return e._stops=new Fa,e.element=e.paper.addGroup("radialGradient"),e.id="gradient-"+ca.getUniqueId(),e.element.attr({id:e.id}),e._disposers.push(e.element),e.applyTheme(),e}return da(e,t),e.prototype.draw=function(){var t,e=this,r=this.element;aa(this.cx)&&((t=this.cx)instanceof Da&&(t=t.percent+"%"),r.attr({cx:t}));aa(this.cy)&&((t=this.cy)instanceof Da&&(t=t.percent+"%"),r.attr({cy:t}));this.fx&&((t=this.fx)instanceof Da&&(t=t.percent+"%"),r.attr({fx:t}));this.fy&&((t=this.fy)instanceof Da&&(t=t.percent+"%"),r.attr({fy:t}));r.removeChildNodes(),ga(Oc(this._stops.iterator()),function(t){var i=t[0],o=t[1],p=o.offset;aa(p)||(p=i/(e._stops.length-1));var s=e.paper.add("stop");ba(o.color)&&s.attr({"stop-color":o.color.toString()}),aa(o.opacity)&&s.attr({"stop-opacity":o.opacity}),aa(p)&&s.attr({offset:p}),r.add(s)})},e.prototype.addColor=function(t,e,r){this._stops.push({color:t,opacity:e,offset:r}),this.draw()},Object.defineProperty(e.prototype,"paper",{get:function(){return this._paper?this._paper:Ld()},set:function(t){this._paper!=t&&(this._paper=t,this.draw(),t.appendDef(this.element))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cx",{get:function(){return this._cx},set:function(t){this._cx=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cy",{get:function(){return this._cy},set:function(t){this._cy=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fx",{get:function(){return this._fx},set:function(t){this._fx=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fy",{get:function(){return this._fy},set:function(t){this._fy=t,this.draw()},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.stops.copyFrom(e.stops),this.cx=e.cx,this.cy=e.cy,this.fx=e.fx,this.fy=e.fy},Object.defineProperty(e.prototype,"stops",{get:function(){return this._stops},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._stops.clear()},e}(Db);ca.registeredClasses.RadialGradient=Cc;var tb=function(){function r(){}return r.grab=[{property:"cursor",value:"move"},{property:"cursor",value:"grab"},{property:"cursor",value:"-webkit-grab"}],r.grabbing=[{property:"cursor",value:"move"},{property:"cursor",value:"grabbing"},{property:"cursor",value:"-webkit-grabbing"}],r.pointer=[{property:"cursor",value:"pointer"}],r.default=[{property:"cursor",value:"default"}],r.horizontalResize=[{property:"cursor",value:"ew-resize"}],r.verticalResize=[{property:"cursor",value:"ns-resize"}],r.notAllowed=[{property:"cursor",value:"not-allowed"}],r.text=[{property:"cursor",value:"text"}],r}();var Ph={_decimalSeparator:".",_thousandSeparator:",",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"\u03BC",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_second:"HH:mm:ss",_date_minute:"HH:mm",_date_hour:"HH:mm",_date_day:"MMM dd",_date_week:"ww",_date_month:"MMM",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(e){var _="th";if(e<11||e>13)switch(e%10){case 1:_="st";break;case 2:_="nd";break;case 3:_="rd";}return _},"Zoom Out":"",Play:"",Stop:"",Legend:"","Click, tap or press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER or use arrow keys to navigate":"","Click, tap or press ENTER to open":"","Click, tap or press ENTER to print.":"","Click, tap or press ENTER to export as %1.":"","To save the image, right-click this link and choose \"Save picture as...\"":"","To save the image, right-click thumbnail on the left and choose \"Save picture as...\"":"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:""};var Dc=function(t){function e(){var e=t.call(this)||this;return e.adapter=new Kb(e),e._locale=Ph,e._defaultLocale=Ph,e.className="Language",ba(za.defaultLocale)&&(e.locale=za.defaultLocale),e.applyTheme(),e}return da(e,t),e.prototype.getLocale=function(t){return null==t&&(t=this._locale),this.adapter.apply("locale",{locale:t}).locale},e.prototype.translate=function(t,e){for(var a=[],r=2;r<arguments.length;r++)a[r-2]=arguments[r];e=this.getLocale(e);var l=t,n=this.getTranslations(e)[t];if(null===n)n="";else if(ba(n))n&&(l=n);else if(e!==this._defaultLocale)return this.translate.apply(this,Lc([t,this._defaultLocale],a));if(a.length)for(var o=a.length,i=0;i<o;++i)l=l.split("%"+(i+1)).join(a[i]);return this.adapter.apply("translate",{translation:l,locale:e}).translation},e.prototype.translateAny=function(t,e){for(var a=[],r=2;r<arguments.length;r++)a[r-2]=arguments[r];return this.translate.apply(this,Lc([t,e],a))},e.prototype.setTranslationAny=function(t,e,a){(a||this.locale)[t]=e},e.prototype.translateEmpty=function(t,e){for(var a=[],r=2;r<arguments.length;r++)a[r-2]=arguments[r];var l=this.translate.apply(this,Lc([t,e],a));return l==t?"":l},e.prototype.translateFunc=function(t,e){e=this.getLocale(e);var a=this.getTranslations(e)[t];return null!=a?a:e!==this._defaultLocale?this.translateFunc(t,this._defaultLocale):function(){return""}},e.prototype.translateAll=function(t,e){var a=this;return this.isDefault()?t:vd(t,function(t){return a.translate(t,e)})},e.prototype.isDefault=function(){return this._defaultLocale===this._locale},Object.defineProperty(e.prototype,"locale",{get:function(){return this._locale},set:function(t){if(this._locale!=t&&(this._locale=t,this.events.isEnabled("localechanged"))){var e={type:"localechanged",locale:t,target:this};this.events.dispatchImmediately("localechanged",e)}},enumerable:!0,configurable:!0}),e.prototype.getTranslations=function(t){return this.adapter.apply("translations",{translations:t,locale:t}).translations},e}(jc);var Qh,Rh=function(e){function t(){var t=e.call(this)||this;return t.adapter=new Kb(t),t.className="TextFormatter",t.applyTheme(),t}return da(t,e),t.prototype.debug=function(){},t.prototype.format=function(e,t){ba(t)||(t="svg");var r="",a=(e=this.escape(e)).match(/\[([^\]]*?)\]/gm);if(!a)return this.wrap(e,"",t);for(var p=e.split(/\[[^\[\]]*\]/),o=0,l=p.length;o<l;o++){var i=p[o];if(""!==i){i=this.adapter.apply("chunk",i);var $="";o>0&&($=a[o-1].replace("[","").replace("]","")),r+=this.wrap(i,$,t)}}return r=this.unescape(r),this.cleanUp(r)},t.prototype.escape=function(e){return e.replace(/\[\[/g,ca.getPlaceholder("1")).replace(/([^\/]{1})\]\]/g,"$1"+ca.getPlaceholder("2")).replace(/\]\]/g,ca.getPlaceholder("2")).replace(/\{\{/g,ca.getPlaceholder("3")).replace(/\}\}/g,ca.getPlaceholder("4")).replace(/\'\'/g,ca.getPlaceholder("5"))},t.prototype.unescape=function(e){return e.replace(new RegExp(ca.getPlaceholder("1"),"g"),"[[").replace(new RegExp(ca.getPlaceholder("2"),"g"),"]]").replace(new RegExp(ca.getPlaceholder("3"),"g"),"{{").replace(new RegExp(ca.getPlaceholder("4"),"g"),"}}").replace(new RegExp(ca.getPlaceholder("5"),"g"),"'")},t.prototype.cleanUp=function(e){return e.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/\'\'/g,"'")},t.prototype.wrap=function(e,t,r){switch(""!==t&&"/"!==t||(t=""),r){case"html":return this.wrapHtml(e,this.translateStyleShortcuts(t));default:return this.wrapSvg(e,this.translateStyleShortcuts(t));}},t.prototype.wrapSvg=function(e,t){return""===t?"<tspan>"+e+"</tspan>":"<tspan style='"+t+"'>"+e+"</tspan>"},t.prototype.getSvgElement=function(e,t){var r=new Ee("tspan");return r.textContent=e,t&&r.node.setAttribute("style",t),r},t.prototype.wrapHtml=function(e,t){return""===t?"<span>"+e+"</span>":"<span style='"+this.styleSvgToHtml(t)+"'>"+e+"</span>"},t.prototype.getHtmlElement=function(e,t){var r=document.createElement("span");return r.innerHTML=e,t&&r.setAttribute("style",t),r},t.prototype.styleSvgToHtml=function(e){return e=e.replace(/fill:/,"color:")},t.prototype.translateStyleShortcuts=function(e){if(""==e||"[ ]"==e)return"";var t=ca.getCache("translateStyleShortcuts_"+e);if(t)return t;var r=e.match(/('[^']*')|("[^"]*")/gi);if(r)for(var a=0;a<r.length;a++)e=e.replace(r[a],r[a].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));var p=e.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w]+)|(\/)/gi);if(!p)return e;for(a=0;a<p.length;a++)p[a].match(/^bold$/i)?p[a]="font-weight:"+p[a]:"/"==p[a]?p[a]="":p[a].match(/:/)?p[a]=p[a].replace(/\+/g," "):p[a]="fill:"+p[a];var o=p.join(";");return ca.setCache("translateStyleShortcuts_"+e,o),o},t.prototype.chunk=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var a=[];e=this.escape(e);for(var p=t?e.split("'"):[e],o=0;o<p.length;o++){var l=p[o];if(""!==l)if(o%2==0)for(var i=(l=(l=l.replace(/\]\[/g,"]"+Qb+"[")).replace(/\[\]/g,"[ ]")).split(/[\[\]]+/),$=0;$<i.length;$++){(n=this.cleanUp(this.unescape(i[$])))!==Qb&&""!==n&&($%2==0?a.push({type:"value",text:this.adapter.apply("chunk",n)}):a.push({type:r?"value":"format",text:"["+n+"]"}))}else for(i=l.split(/[\[\]]+/),$=0;$<i.length;$++){var n;""!==(n=this.cleanUp(this.unescape(i[$])))&&($%2==0?a.push({type:"text",text:n}):this.isImage(n)?a.push({type:"image",text:"["+n+"]"}):a.push({type:"format",text:"["+n+"]"}))}}return a},t.prototype.isImage=function(e){return!!e.match(/img[ ]?:/)},t}(Db);function uc(){return null==Qh&&(Qh=new Rh),Qh}ca.registeredClasses.TextFormatter=Rh;var Wf=function(e){function t(){var t=e.call(this)||this;return t._negativeBase=0,t._numberFormat="#,###.#####",t._outputFormat="svg",t._smallNumberThreshold=1,t.className="NumberFormatter",t.applyTheme(),t}return da(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this.language&&this.language.dispose()},Object.defineProperty(t.prototype,"language",{get:function(){return this._language||(this.sprite?this._language=this.sprite.language:this._language=new Dc),this._language},set:function(e){this._language=e},enumerable:!0,configurable:!0}),t.prototype.format=function(e,t,r){var a;(void 0===t||Ca(t)&&"number"===t.toLowerCase())&&(t=this._numberFormat);var i=Number(e);if(Wa(t))try{return this.intlLocales?new Intl.NumberFormat(this.intlLocales,t).format(i):new Intl.NumberFormat(void 0,t).format(i)}catch(l){return"Invalid"}else{t=re(t);var s=this.parseFormat(t,this.language),n=void 0;n=i>this._negativeBase?s.positive:i<this._negativeBase?s.negative:s.zero,ba(r)&&!n.mod&&((n=Gj(n)).decimals.active=0==i?0:r),a=n.template.split(Qb).join(this.applyFormat(i,n))}return a},t.prototype.parseFormat=function(e,t){var r=this,a=this.getCache(e);if(ba(a))return a;var i={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:t.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:t.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:t.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:t.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:t.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:t.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1}},s=(e=e.replace("||",jd)).split("|");return i.positive.source=s[0],void 0===s[2]?i.zero=i.positive:i.zero.source=s[2],void 0===s[1]?i.negative=i.positive:i.negative.source=s[1],sa(i,function(e,t){if(!t.parsed)if(void 0===r.getCache(t.source)){var a=t.source;"number"===a.toLowerCase()&&(a=Ca(r._numberFormat)?r._numberFormat:"#,###.#####");for(var s=uc().chunk(a,!0),n=0;n<s.length;n++){var l=s[n];if(l.text=l.text.replace(jd,"|"),"value"===l.type){var u=l.text.match(/[#0.,]+[ ]?[abesABES%!]?[abesABES‰!]?/);if(u)if(null===u||""===u[0])t.template+=l.text;else{var o=u[0].match(/[abesABES%‰!]{2}|[abesABES%‰]{1}$/);o&&(t.mod=o[0].toLowerCase(),t.modSpacing=!!u[0].match(/[ ]{1}[abesABES%‰!]{1}$/));var f=u[0].split(".");if(""===f[0]);else{t.thousands.active=(f[0].match(/0/g)||[]).length,t.thousands.passive=(f[0].match(/\#/g)||[]).length+t.thousands.active;var m=f[0].split(",");1===m.length||(t.thousands.interval=Va(m.pop()).length,0===t.thousands.interval&&(t.thousands.interval=-1))}void 0===f[1]||(t.decimals.active=(f[1].match(/0/g)||[]).length,t.decimals.passive=(f[1].match(/\#/g)||[]).length+t.decimals.active),t.template+=l.text.split(u[0]).join(Qb)}}else t.template+=l.text}r.setCache(t.source,t),t.parsed=!0}else i[e]=r.getCache(t.source)}),this.setCache(e,i),i},t.prototype.applyFormat=function(e,t){var r=e<0;e=Math.abs(e);var a="",i="",s=t.mod?t.mod.split(""):[];if(-1!==s.indexOf("b")){var n=this.applyPrefix(e,this.bytePrefixes,-1!==s.indexOf("!"));e=n[0],a=n[1],i=n[2],t.modSpacing&&(i=" "+i)}else if(-1!==s.indexOf("a")){var l=this.applyPrefix(e,e<this.smallNumberThreshold?this.smallNumberPrefixes:this.bigNumberPrefixes,-1!==s.indexOf("!"));e=l[0],a=l[1],i=l[2],t.modSpacing&&(i=" "+i)}else if(-1!==s.indexOf("%")){var u=Ea(e.toString().length+2,21);e*=100,e=parseFloat(e.toPrecision(u)),i="%"}else if(-1!==s.indexOf("\u2030")){u=Ea(e.toString().length+3,21);e*=1e3,e=parseFloat(e.toPrecision(u)),i="\u2030"}if(-1!==s.indexOf("e")){var o=void 0;o=t.decimals.passive>=0?e.toExponential(t.decimals.passive).split("e"):e.toExponential().split("e"),e=Number(o[0]),i="e"+o[1],t.modSpacing&&(i=" "+i)}else if(0===t.decimals.passive)e=Math.round(e);else if(t.decimals.passive>0){var f=Math.pow(10,t.decimals.passive);e=Math.round(e*f)/f}var m="",p=gk(e).split("."),g=p[0];if(g.length<t.thousands.active&&(g=Array(t.thousands.active-g.length+1).join("0")+g),t.thousands.interval>0){for(var h=[],b=g.split("").reverse().join(""),c=0,$=g.length;c<=$;c+=t.thousands.interval){var _=b.substr(c,t.thousands.interval).split("").reverse().join("");""!==_&&h.unshift(_)}g=h.join(t.thousands.separator)}m+=g,1===p.length&&p.push("");var v=p[1];return v.length<t.decimals.active&&(v+=Array(t.decimals.active-v.length+1).join("0")),""!==v&&(m+=t.decimals.separator+v),""===m&&(m="0"),0!==e&&r&&-1===s.indexOf("s")&&(m="-"+m),a&&(m=a+m),i&&(m+=i),m},t.prototype.applyPrefix=function(e,t,r){void 0===r&&(r=!1);for(var a=e,i="",s="",n=!1,l=1,u=0,o=t.length;u<o;u++)t[u].number<=e&&(0===t[u].number?a=0:(a=e/t[u].number,l=t[u].number),i=t[u].prefix,s=t[u].suffix,n=!0);return!n&&r&&t.length&&0!=e&&(a=e/t[0].number,i=t[0].prefix,s=t[0].suffix,n=!0),n&&(a=parseFloat(a.toPrecision(Ea(l.toString().length+Math.floor(a).toString().replace(/[^0-9]*/g,"").length,21)))),[a,i,s]},t.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},Object.defineProperty(t.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(e){this._numberFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"intlLocales",{get:function(){return this._intlLocales},set:function(e){this._intlLocales=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"negativeBase",{get:function(){return this._negativeBase},set:function(e){this._negativeBase=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bigNumberPrefixes",{get:function(){return ba(this._bigNumberPrefixes)||(this._bigNumberPrefixes=[{number:1e3,suffix:this.language.translate("_big_number_suffix_3")},{number:1e6,suffix:this.language.translate("_big_number_suffix_6")},{number:1e9,suffix:this.language.translate("_big_number_suffix_9")},{number:1e12,suffix:this.language.translate("_big_number_suffix_12")},{number:1e15,suffix:this.language.translate("_big_number_suffix_15")},{number:1e18,suffix:this.language.translate("_big_number_suffix_18")},{number:1e21,suffix:this.language.translate("_big_number_suffix_21")},{number:1e24,suffix:this.language.translate("_big_number_suffix_24")}]),this._bigNumberPrefixes},set:function(e){this._bigNumberPrefixes=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"smallNumberPrefixes",{get:function(){return ba(this._smallNumberPrefixes)||(this._smallNumberPrefixes=[{number:1e-24,suffix:this.language.translate("_small_number_suffix_24")},{number:1e-21,suffix:this.language.translate("_small_number_suffix_21")},{number:1e-18,suffix:this.language.translate("_small_number_suffix_18")},{number:1e-15,suffix:this.language.translate("_small_number_suffix_15")},{number:1e-12,suffix:this.language.translate("_small_number_suffix_12")},{number:1e-9,suffix:this.language.translate("_small_number_suffix_9")},{number:1e-6,suffix:this.language.translate("_small_number_suffix_6")},{number:.001,suffix:this.language.translate("_small_number_suffix_3")}]),this._smallNumberPrefixes},set:function(e){this._smallNumberPrefixes=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"smallNumberThreshold",{get:function(){return this._smallNumberThreshold},set:function(e){this._smallNumberThreshold=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bytePrefixes",{get:function(){return ba(this._bytePrefixes)||(this._bytePrefixes=[{number:1,suffix:this.language.translate("_byte_suffix_B")},{number:1024,suffix:this.language.translate("_byte_suffix_KB")},{number:1048576,suffix:this.language.translate("_byte_suffix_MB")},{number:1073741824,suffix:this.language.translate("_byte_suffix_GB")},{number:1099511627776,suffix:this.language.translate("_byte_suffix_TB")},{number:0x4000000000000,suffix:this.language.translate("_byte_suffix_PB")}]),this._bytePrefixes},set:function(e){this._bytePrefixes=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(e){this._outputFormat=e.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),t.prototype.escape=function(e){return e.replace("||",jd)},t.prototype.unescape=function(e){return e.replace(jd,"|")},t}(Db);ca.registeredClasses.NumberFormatter=Wf;var Md=function(e){function t(){var t=e.call(this)||this;return t._dateFormat="yyyy-MM-dd",t._inputDateFormat="yyyy-MM-dd",t._utc=!1,t.timezoneMinutes=0,t._firstDayOfWeek=1,t.months=["January","February","March","April","May","June","July","August","September","October","November","December"],t.monthsShort=["Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t.weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t.weekdaysShort=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t._outputFormat="svg",t.capitalize=!0,t.className="DateFormatter",t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"language",{get:function(){return this._language},set:function(e){this._language=e,this.dateFormat=this._language.translate("_date")},enumerable:!0,configurable:!0}),t.prototype.format=function(e,t){var a,r;if(this.language||(this.sprite?this.language=this.sprite.language:this.language=new Dc),void 0!==t&&""!==t||(t=this._dateFormat),r=Ca(e)?this.parse(e):mh(e),Wa(t))try{return this.intlLocales?new Intl.DateTimeFormat(this.intlLocales,t).format(r):new Intl.DateTimeFormat(void 0,t).format(r)}catch(i){return"Invalid"}else{t=re(t);var s=this.parseFormat(t);if(ba(this.timezoneOffset)?r.setMinutes(r.getMinutes()+r.getTimezoneOffset()-this.timezoneOffset):ba(this.timezone)&&(r=Fe(r,this.timezone)),!aa(r.getTime()))return this.language.translate("Invalid date");a=this.applyFormat(r,s,this.language),this.capitalize&&(a=a.replace(/^.{1}/,a.substr(0,1).toUpperCase()))}return a},t.prototype.parseFormat=function(e){var t=this.getCache(e);if(ba(t))return t;for(var a={template:"",parts:[]},r=uc().chunk(e,!0),s=0;s<r.length;s++){var i=r[s];if("value"===i.type){i.text.match(/^date$/i)&&Ca(this._dateFormat)&&(i.text=this._dateFormat);var n=i.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);if(n)for(var o=0;o<n.length;o++)a.parts.push(n[o]),i.text=i.text.replace(n[o],Qb)}a.template+=i.text}return this.setCache(e,a),a},t.prototype.applyFormat=function(e,t,a){var r,s,i,n,o,c,u,$,m=t.template,p=e.getTimezoneOffset(),h=e.getTime();this.utc?(r=e.getUTCFullYear(),s=e.getUTCMonth(),i=e.getUTCDay(),n=e.getUTCDate(),o=e.getUTCHours(),c=e.getUTCMinutes(),u=e.getUTCSeconds(),$=e.getUTCMilliseconds()):(r=e.getFullYear(),s=e.getMonth(),i=e.getDay(),n=e.getDate(),o=e.getHours(),c=e.getMinutes(),u=e.getSeconds(),$=e.getMilliseconds());for(var l=0,g=t.parts.length;l<g;l++){var y="";switch(t.parts[l]){case"G":y=a.translate(r<0?"_era_bc":"_era_ad");break;case"yyyy":y=Math.abs(r).toString(),r<0&&(y+=a.translate("_era_bc"));break;case"yyy":case"yy":case"y":y=Math.abs(r).toString().substr(-t.parts[l].length),r<0&&(y+=a.translate("_era_bc"));break;case"YYYY":case"YYY":case"YY":case"Y":var d=r;1==Hd(e)&&i>4&&d--,y="YYYY"==t.parts[l]?Math.abs(d).toString():Math.abs(d).toString().substr(-t.parts[l].length),d<0&&(y+=a.translate("_era_bc"));break;case"u":break;case"q":y=""+Math.ceil((e.getMonth()+1)/3);break;case"MMMMM":y=a.translate(this.months[s]).substr(0,1);break;case"MMMM":y=a.translate(this.months[s]);break;case"MMM":y=a.translate(this.monthsShort[s]);break;case"MM":y=zb(s+1,2,"0");break;case"M":y=(s+1).toString();break;case"ww":y=zb(Hd(e,this.utc),2,"0");break;case"w":y=Hd(e,this.utc).toString();break;case"W":y=hk(e,this.utc).toString();break;case"dd":y=zb(n,2,"0");break;case"d":y=n.toString();break;case"DD":case"DDD":y=zb(Ef(e,this.utc).toString(),t.parts[l].length,"0");break;case"D":y=Ef(e,this.utc).toString();break;case"F":case"g":break;case"t":y=a.translateFunc("_dateOrd").call(this,n);break;case"E":y=(i||7).toString();break;case"EE":y=zb((i||7).toString(),2,"0");break;case"EEE":case"eee":y=a.translate(this.weekdaysShort[i]);break;case"EEEE":case"eeee":y=a.translate(this.weekdays[i]);break;case"EEEEE":case"eeeee":y=a.translate(this.weekdays[i]).substr(0,1);break;case"e":case"ee":y=(i-this.firstDayOfWeek+1).toString(),"ee"==t.parts[l]&&(y=zb(y,2,"0"));break;case"a":y=o>=12?a.translate("PM"):a.translate("AM");break;case"aa":y=o>=12?a.translate("P.M."):a.translate("A.M.");break;case"aaa":y=o>=12?a.translate("P"):a.translate("A");break;case"h":y=se(o).toString();break;case"hh":y=zb(se(o),2,"0");break;case"H":y=o.toString();break;case"HH":y=zb(o,2,"0");break;case"K":y=se(o,0).toString();break;case"KK":y=zb(se(o,0),2,"0");break;case"k":y=(o+1).toString();break;case"kk":y=zb(o+1,2,"0");break;case"m":y=c.toString();break;case"mm":y=zb(c,2,"0");break;case"s":y=u.toString();break;case"ss":y=zb(u,2,"0");break;case"S":case"SS":case"SSS":y=Math.round($/1e3*Math.pow(10,t.parts[l].length)).toString();break;case"x":y=h.toString();break;case"n":case"nn":case"nnn":y=zb($,t.parts[l].length,"0");break;case"z":y=te(e,!1,!1,this.utc);break;case"zz":y=te(e,!0,!1,this.utc);break;case"zzz":y=te(e,!1,!0,this.utc);break;case"zzzz":y=te(e,!0,!0,this.utc);break;case"Z":case"ZZ":var b=Math.abs(p)/60,f=Math.floor(b),E=60*b-60*f;this.utc&&(f=0,E=0),"Z"==t.parts[l]?(y="GMT",y+=p>0?"-":"+",y+=zb(f,2)+":"+zb(E,2)):(y=p>0?"-":"+",y+=zb(f,2)+zb(E,2));break;case"i":y=e.toISOString();break;case"I":y=e.toUTCString();}m=m.replace(Qb,y)}return m},t.prototype.parse=function(e,t){if(ba(t)||(t=this.inputDateFormat),e instanceof Date)return e;if("number"==typeof e)return new Date(e);var a;"string"!=typeof e&&(e=e.toString()),this.language||(this.sprite?this.language=this.sprite.language:this.language=new Dc);var r="";t=(t=re(t)).substr(0,e.length);for(var s=this.parseFormat(t),i={year:-1,year3:-1,year2:-1,year1:-1,month:-1,monthShort:-1,monthLong:-1,weekdayShort:-1,weekdayLong:-1,day:-1,yearDay:-1,week:-1,hourBase0:-1,hour12Base0:-1,hourBase1:-1,hour12Base1:-1,minute:-1,second:-1,millisecond:-1,millisecondDigits:-1,am:-1,zone:-1,timestamp:-1,iso:-1},n={year:1970,month:0,day:1,hour:0,minute:0,second:0,millisecond:0,timestamp:null,offset:0,utc:this.utc},o=0,c=0,u=0;u<s.parts.length;u++){switch(c=u+o+1,s.parts[u]){case"yyyy":case"YYYY":r+="([0-9]{4})",i.year=c;break;case"yyy":case"YYY":r+="([0-9]{3})",i.year3=c;break;case"yy":case"YY":r+="([0-9]{2})",i.year2=c;break;case"y":case"Y":r+="([0-9]{1})",i.year1=c;break;case"MMMM":r+="("+this.getStringList(this.months).join("|")+")",i.monthLong=c;break;case"MMM":r+="("+this.getStringList(this.monthsShort).join("|")+")",i.monthShort=c;break;case"MM":case"M":r+="([0-9]{2}|[0-9]{1})",i.month=c;break;case"ww":case"w":r+="([0-9]{2}|[0-9]{1})",i.week=c;break;case"dd":case"d":r+="([0-9]{2}|[0-9]{1})",i.day=c;break;case"DDD":case"DD":case"D":r+="([0-9]{3}|[0-9]{2}|[0-9]{1})",i.yearDay=c;break;case"dddd":r+="("+this.getStringList(this.weekdays).join("|")+")",i.weekdayLong=c;break;case"ddd":r+="("+this.getStringList(this.weekdaysShort).join("|")+")",i.weekdayShort=c;break;case"aaa":case"aa":case"a":r+="("+this.getStringList(["AM","PM","A.M.","P.M.","A","P"]).join("|")+")",i.am=c;break;case"hh":case"h":r+="([0-9]{2}|[0-9]{1})",i.hour12Base1=c;break;case"HH":case"H":r+="([0-9]{2}|[0-9]{1})",i.hourBase0=c;break;case"KK":case"K":r+="([0-9]{2}|[0-9]{1})",i.hour12Base0=c;break;case"kk":case"k":r+="([0-9]{2}|[0-9]{1})",i.hourBase1=c;break;case"mm":case"m":r+="([0-9]{2}|[0-9]{1})",i.minute=c;break;case"ss":case"s":r+="([0-9]{2}|[0-9]{1})",i.second=c;break;case"SSS":case"SS":case"S":r+="([0-9]{3}|[0-9]{2}|[0-9]{1})",i.millisecond=c,i.millisecondDigits=s.parts[u].length;break;case"nnn":case"nn":case"n":r+="([0-9]{3}|[0-9]{2}|[0-9]{1})",i.millisecond=c;break;case"x":r+="([0-9]{1,})",i.timestamp=c;break;case"Z":r+="GMT([-+]+[0-9]{2}:[0-9]{2})",i.zone=c;break;case"ZZ":r+="([\\-+]+[0-9]{2}[0-9]{2})",i.zone=c;break;case"i":r+="([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2}).?([0-9]{0,3})([zZ]|[+-][0-9]{2}:?[0-9]{2}|$)",i.iso=c,o+=7;break;case"G":case"YYYY":case"YYY":case"YY":case"Y":case"MMMMM":case"W":case"EEEEE":case"EEEE":case"EEE":case"EE":case"E":case"eeeee":case"eeee":case"eee":case"ee":case"e":case"zzzz":case"zzz":case"zz":case"z":case"t":o--;}r+="[^0-9]*"}var $=new RegExp(r),m=e.match($);if(m){if(i.year>-1&&(n.year=parseInt(m[i.year])),i.year3>-1){var p=parseInt(m[i.year3]);p+=1e3,n.year=p}if(i.year2>-1){p=parseInt(m[i.year2]);p+=p>50?1e3:2e3,n.year=p}if(i.year1>-1){p=parseInt(m[i.year1]);p=10*Math.floor(new Date().getFullYear()/10)+p,n.year=p}if(i.monthLong>-1&&(n.month=this.resolveMonth(m[i.monthLong])),i.monthShort>-1&&(n.month=this.resolveShortMonth(m[i.monthShort])),i.month>-1&&(n.month=parseInt(m[i.month])-1),i.week>-1&&-1===i.day&&(n.month=0,n.day=ik(parseInt(m[i.week]),n.year,1,this.utc)),i.day>-1&&(n.day=parseInt(m[i.day])),i.yearDay>-1&&(n.month=0,n.day=parseInt(m[i.yearDay])),i.hourBase0>-1&&(n.hour=parseInt(m[i.hourBase0])),i.hourBase1>-1&&(n.hour=parseInt(m[i.hourBase1])-1),i.hour12Base0>-1)11==(p=parseInt(m[i.hour12Base0]))&&(p=0),i.am>-1&&!this.isAm(m[i.am])&&(p+=12),n.hour=p;if(i.hour12Base1>-1)12==(p=parseInt(m[i.hour12Base1]))&&(p=0),i.am>-1&&!this.isAm(m[i.am])&&(p+=12),n.hour=p;if(i.minute>-1&&(n.minute=parseInt(m[i.minute])),i.second>-1&&(n.second=parseInt(m[i.second])),i.millisecond>-1){p=parseInt(m[i.millisecond]);2==i.millisecondDigits?p*=10:1==i.millisecondDigits&&(p*=100),n.millisecond=p}if(i.timestamp>-1){n.timestamp=parseInt(m[i.timestamp]);var h=new Date(n.timestamp);n.year=h.getUTCFullYear(),n.month=h.getUTCMonth(),n.day=h.getUTCDate(),n.hour=h.getUTCHours(),n.minute=h.getUTCMinutes(),n.second=h.getUTCSeconds(),n.millisecond=h.getUTCMilliseconds()}i.zone>-1&&(n.offset=this.resolveTimezoneOffset(new Date(n.year,n.month,n.day),m[i.zone])),i.iso>-1&&(n.year=Ra(m[i.iso+0]),n.month=Ra(m[i.iso+1])-1,n.day=Ra(m[i.iso+2]),n.hour=Ra(m[i.iso+3]),n.minute=Ra(m[i.iso+4]),n.second=Ra(m[i.iso+5]),n.millisecond=Ra(m[i.iso+6]),"Z"==m[i.iso+7]||"z"==m[i.iso+7]?n.utc=!0:""!=m[i.iso+7]&&(n.offset=this.resolveTimezoneOffset(new Date(n.year,n.month,n.day),m[i.iso+7]))),a=n.utc?new Date(Date.UTC(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond)):new Date(n.year,n.month,n.day,n.hour,n.minute+n.offset,n.second,n.millisecond)}else a=new Date(e);return a},t.prototype.resolveTimezoneOffset=function(e,t){if(t.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)){var a=Va(t.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)),r=a[1],s=a[2],i=a[3],n=60*parseInt(s)+parseInt(i);return"+"==r&&(n*=-1),n-(e||new Date).getTimezoneOffset()}return 0},t.prototype.resolveMonth=function(e){var t=this.months.indexOf(e);return t>-1?t:this.language&&!this.language.isDefault()&&(t=this.language.translateAll(this.months).indexOf(e))>-1?t:0},t.prototype.resolveShortMonth=function(e){var t=this.monthsShort.indexOf(e);return t>-1?t:(t=this.months.indexOf(e))>-1?t:this.language&&!this.language.isDefault()&&(t=this.language.translateAll(this.monthsShort).indexOf(e))>-1?t:0},t.prototype.isAm=function(e){return this.getStringList(["AM","A.M.","A"]).indexOf(e.toUpperCase())>-1},t.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},t.prototype.getStringList=function(e){for(var t=[],a=0;a<e.length;a++)this.language?t.push(yf(this.language.translate(e[a]))):t.push(yf(e[a]));return t},Object.defineProperty(t.prototype,"dateFormat",{get:function(){return this._dateFormat},set:function(e){this._dateFormat=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDateFormat",{get:function(){return this._inputDateFormat},set:function(e){this._inputDateFormat=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"intlLocales",{get:function(){return this._intlLocales},set:function(e){this._intlLocales=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"utc",{get:function(){return this._utc},set:function(e){this._utc=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timezoneOffset",{get:function(){return this._timezoneOffset},set:function(e){this._timezoneOffset!=e&&(this._timezoneOffset=e,this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timezone",{get:function(){return this._timezone},set:function(e){this._timezone!=e&&(this._timezone=e,this.timezoneMinutes=il(e),this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstDayOfWeek",{get:function(){return this._firstDayOfWeek},set:function(e){this._firstDayOfWeek=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(e){this._outputFormat=e.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),t}(Db);ca.registeredClasses.DateFormatter=Md;var Xf=function(t){function e(){var e=t.call(this)||this;return e._negativeBase=0,e._baseUnit="second",e._outputFormat="svg",e._unitValues={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6},e._unitAliases={Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"},e.className="DurationFormatter",e.applyTheme(),e}return da(e,t),e.prototype.format=function(t,e,a){this.language||(this.sprite?this.language=this.sprite.language:this.language=new Dc);var r=a||this._baseUnit;void 0!==e&&""!==e||(e=ba(this.durationFormat)?this.durationFormat:this.getFormat(Ra(t),null,r)),e=re(e);var i,n=this.parseFormat(e,r),s=Number(t);i=s>this._negativeBase?n.positive:s<this._negativeBase?n.negative:n.zero;var o=this.applyFormat(s,i);return""!==i.color&&("svg"===this._outputFormat?o="<tspan fill='"+i.color+"'>"+o+"</tspan>":"html"===this._outputFormat&&(o="<span style='color: "+i.color+";'>"+o+"</span>")),o},e.prototype.parseFormat=function(t,e){var a=this,r=this.getCache(t);if(ba(r))return r;var i=e||this._baseUnit,n={positive:{color:"",template:"",parts:[],source:"",baseUnit:i,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:i,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:i,parsed:!1,absolute:!1}},s=(t=t.replace("||",jd)).split("|");return n.positive.source=s[0],void 0===s[2]?n.zero=n.positive:n.zero.source=s[2],void 0===s[1]?n.negative=n.positive:n.negative.source=s[1],sa(n,function(t,e){if(!e.parsed)if(void 0===a.getCache(e.source)){var r,i=e.source;(r=e.source.match(/^\[([^\]]*)\]/))&&r.length&&""!==r[0]&&(i=e.source.substr(r[0].length),e.color=r[1]);for(var s=uc().chunk(i,!0),o=0;o<s.length;o++){var u=s[o];if(u.text=u.text.replace(jd,"|"),"value"===u.type){u.text.match(/[yYMdDwhHKkmsSn]+a/)&&(e.absolute=!0,u.text=u.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));var l=u.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(l)for(var h=0;h<l.length;h++)ba(l[h])||(l[h]=a._unitAliases[l[h]]),e.parts.push(l[h]),u.text=u.text.replace(l[h],Qb)}e.template+=u.text}a.setCache(e.source,e),e.parsed=!0}else n[t]=a.getCache(e.source)}),this.setCache(t,n),n},e.prototype.applyFormat=function(t,e){var a=!e.absolute&&t<this._negativeBase;t=Math.abs(t);for(var r=this.toTimeStamp(t,e.baseUnit),i=e.template,n=0,s=e.parts.length;n<s;n++){var o=e.parts[n],u=this.toTimeUnit(o.substr(0,1)),l=o.length,h=Math.floor(r/this._unitValues[u]);i=i.replace(Qb,zb(h,l,"0")),r-=h*this._unitValues[u]}return a&&(i="-"+i),i},e.prototype.toTimeStamp=function(t,e){return t*this._unitValues[e]},e.prototype.toTimeUnit=function(t){switch(t){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";}},e.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},Object.defineProperty(e.prototype,"baseUnit",{get:function(){return this._baseUnit},set:function(t){this._baseUnit=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(t){this._outputFormat=t.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),e.prototype.getFormat=function(t,e,a){if(ba(this.durationFormat))return this.durationFormat;if(a||(a=this.baseUnit),ba(e)&&t!=e){t=Math.abs(t),e=Math.abs(e);var r=this.getValueUnit(wa(t,e),a);return this.durationFormats[a][r]}var i=this.getValueUnit(t,a);return this.durationFormats[a][i]},e.prototype.getValueUnit=function(t,e){var a;e||(e=this.baseUnit);var r=this.getMilliseconds(t,e);return _g(this._unitValues,function(t,i){if(t==e||a){if(r/i<=1)return a||(a=t),!1;a=t}return!0}),a},e.prototype.getMilliseconds=function(t,e){return e||(e=this.baseUnit),t*this._unitValues[e]},Object.defineProperty(e.prototype,"durationFormat",{get:function(){return this._durationFormat},set:function(t){this._durationFormat!=t&&(this._durationFormat=t,this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationFormats",{get:function(){return this._durationFormats||(this._durationFormats={millisecond:{millisecond:this.language.translate("_duration_millisecond"),second:this.language.translate("_duration_millisecond_second"),minute:this.language.translate("_duration_millisecond_minute"),hour:this.language.translate("_duration_millisecond_hour"),day:this.language.translate("_duration_millisecond_day"),week:this.language.translate("_duration_millisecond_week"),month:this.language.translate("_duration_millisecond_month"),year:this.language.translate("_duration_millisecond_year")},second:{second:this.language.translate("_duration_second"),minute:this.language.translate("_duration_second_minute"),hour:this.language.translate("_duration_second_hour"),day:this.language.translate("_duration_second_day"),week:this.language.translate("_duration_second_week"),month:this.language.translate("_duration_second_month"),year:this.language.translate("_duration_second_year")},minute:{minute:this.language.translate("_duration_minute"),hour:this.language.translate("_duration_minute_hour"),day:this.language.translate("_duration_minute_day"),week:this.language.translate("_duration_minute_week"),month:this.language.translate("_duration_minute_month"),year:this.language.translate("_duration_minute_year")},hour:{hour:this.language.translate("_duration_hour"),day:this.language.translate("_duration_hour_day"),week:this.language.translate("_duration_hour_week"),month:this.language.translate("_duration_hour_month"),year:this.language.translate("_duration_hour_year")},day:{day:this.language.translate("_duration_day"),week:this.language.translate("_duration_day_week"),month:this.language.translate("_duration_day_month"),year:this.language.translate("_duration_day_year")},week:{week:this.language.translate("_duration_week"),month:this.language.translate("_duration_week_month"),year:this.language.translate("_duration_week_year")},month:{month:this.language.translate("_duration_month"),year:this.language.translate("_duration_month_year")},year:{year:this.language.translate("_duration_year")}}),this._durationFormats},set:function(t){this._durationFormats=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),e}(Db);ca.registeredClasses.DurationFormatter=Xf;var Yf,Sh,pl,ql,rl=false;function sl(){return Sh||(Sh=wl()),Sh}var Th=new Ta,tl=function(e,t){var i=t||"amexport",o=new Ia;return Th.insertKeyIfEmpty(i,function(){var t=new Ya([new Qa(e,"."+i+"-menu *",{"box-sizing":"border-box"}),new Qa(e,"."+i+"-menu-level-0",{position:"absolute",top:"5px",right:"5px"}),new Qa(e,"."+i+"-menu-level-0."+i+"-left",{right:"auto",left:"5px"}),new Qa(e,"."+i+"-menu-level-0."+i+"-right",{right:"5px",left:"auto"}),new Qa(e,"."+i+"-menu-level-0."+i+"-top",{top:"5px",bottom:"auto"}),new Qa(e,"."+i+"-menu-level-0."+i+"-bottom",{top:"auto",bottom:"5px"}),new Qa(e,"."+i+"-item."+i+"-item-level-0",{opacity:"0.3",width:"30px","min-height":"30px",transition:"all 100ms ease-in-out"}),new Qa(e,"div:hover ."+i+"-item."+i+"-item-level-0, ."+i+"-item."+i+"-item-level-0.active",{opacity:"0.9"}),new Qa(e,"."+i+"-item."+i+"-item-level-0 > a",{padding:"0","text-align":"center",overflow:"hidden"}),new Qa(e,"."+i+"-item."+i+"-item-level-0:before",{display:"block"}),new Qa(e,"."+i+"-item",{position:"relative",display:"block",opacity:"0","z-index":"1","border-radius":"3px","background-color":o.getFor("secondaryButton").hex,padding:"0",margin:"1px 1px 0 0",color:o.getFor("secondaryButton").alternative.hex,transition:"all 100ms ease-in-out, opacity 0.5s ease 0.5s"}),new Qa(e,"."+i+"-left ."+i+"-item",{margin:"1px 0 0 1px"}),new Qa(e,"."+i+"-item:hover, ."+i+"-item.active",{background:o.getFor("secondaryButtonHover").hex,color:o.getFor("secondaryButtonText").hex}),new Qa(e,"."+i+"-item > ."+i+"-menu",{position:"absolute",top:"-1px",right:"0","margin-right":"100%"}),new Qa(e,"."+i+"-left ."+i+"-item > ."+i+"-menu",{left:"0",right:"auto","margin-left":"100%","margin-right":"auto"}),new Qa(e,"."+i+"-right ."+i+"-item > ."+i+"-menu",{left:"auto",right:"0","margin-left":"auto","margin-right":"100%"}),new Qa(e,"."+i+"-top ."+i+"-item > ."+i+"-menu",{top:"-1px",bottom:"auto"}),new Qa(e,"."+i+"-bottom ."+i+"-item > ."+i+"-menu",{top:"auto",bottom:"0"}),new Qa(e,"."+i+"-item > ."+i+"-menu",{display:"none"}),new Qa(e,"."+i+"-item:hover > ."+i+"-menu, ."+i+"-item.active > ."+i+"-menu",{display:"block"}),new Qa(e,"."+i+"-item:hover > ."+i+"-menu > ."+i+"-item, ."+i+"-item.active > ."+i+"-menu > ."+i+"-item",{opacity:"1"}),new Qa(e,"."+i+"-menu",{display:"block","list-style":"none",margin:"0",padding:"0"}),new Qa(e,"."+i+"-label",{display:"block",cursor:"default",padding:"0.5em 1em"}),new Qa(e,"."+i+"-icon",{display:"block",cursor:"default",padding:"0.2em 0.4em",width:"1.2em",height:"1.2em","min-width":"32px","min-height":"32px",margin:"auto auto","border-radius":"3px"}),new Qa(e,"."+i+"-item-level-0 > ."+i+"-icon",{padding:"0.1em 0.2em"}),new Qa(e,"."+i+"-clickable",{cursor:"pointer"})]);return new ie(function(){Th.removeKey(i),t.dispose()})}).increment()};var Uh=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._validateDisposer=null,t}return da(t,e),t.prototype.invalidate=function(){null===this._validateDisposer&&(this._validateDisposer=ca.events.on("exitframe",this.validate,this))},t.prototype.validate=function(){null!==this._validateDisposer&&(this._validateDisposer.dispose(),this._validateDisposer=null)},t.prototype.dispose=function(){null!==this._validateDisposer&&(this._validateDisposer.dispose(),this._validateDisposer=null),e.prototype.dispose.call(this)},t}(jc);var ul=function(e){function t(){var t=e.call(this)||this;return t.adapter=new Kb(t),t.closeDelay=1e3,t.closeOnClick=!0,t._language=new nb,t._menuTag="ul",t._itemTag="li",t._labelTag="a",t._iconTag="img",t._classPrefix="amexport",t._defaultStyles=!0,t._align="right",t._verticalAlign="top",t._tabindex=0,t._ignoreNextClose=!1,t._items=[{label:"...",menu:[{label:"Image",menu:[{type:"png",label:"PNG"},{type:"jpg",label:"JPG"},{type:"svg",label:"SVG"},{type:"pdf",label:"PDF"}]},{label:"Data",menu:[{type:"json",label:"JSON"},{type:"csv",label:"CSV"},{type:"xlsx",label:"XLSX"},{type:"html",label:"HTML"},{type:"pdfdata",label:"PDF"}]},{label:"Print",type:"print"}]}],t.className="ExportMenu",t._disposers.push(t._language),t.invalidate(),t.applyTheme(),t}return da(t,e),t.prototype.validate=function(){this.draw(),e.prototype.validate.call(this)},t.prototype.draw=function(){var e=this;this._element?(this._element.innerHTML="",this._element.className=this.getMenuItemClass(0)):this._element=this.createMenuElement(0),this.defaultStyles&&(this._element.style.display="none"),Va(this._container).appendChild(this._element);for(var t=this.adapter.apply("items",{items:this._items}).items,n=t.length,i=0;i<n;i++)this.drawBranch(this._element,t[i],0);this._element=this.adapter.apply("menuElement",{menuElement:this._element}).menuElement,this._disposers.push(va().body.events.on("down",function(t){t.pointer.touch||(e._ignoreNextClose=!1),e.close()})),this._disposers.push(va().body.events.on("keydown",function(t){var n=kc.getEventKey(t.event);switch(n){case"esc":e.close();break;case"up":case"down":case"left":case"right":e._currentSelection&&t.event.preventDefault(),e.moveSelection(n);}})),this.defaultStyles&&this.loadDefaultCSS()},t.prototype.drawBranch=function(e,t,n){var i=this;if(!0!==(t=this.adapter.apply("branch",{branch:t,level:n}).branch).unsupported){t.ascendants||(t.ascendants=new Fa);var a,s=t.type,r=this.createItemElement(n,s);t.icon?((a=this.createIconElement(n,s)).src=t.icon,(t.label||t.title)&&(a.title=t.title||t.label)):t.svg?(a=this.createSvgElement(n,s,t.svg),(t.label||t.title)&&(a.title=t.title||t.label)):((a=this.createLabelElement(n,s)).innerHTML=t.label?this.language.translate(t.label):"",t.title&&(a.title=t.title));var l=this.getReaderLabel(t,a.innerHTML);a.setAttribute("aria-label",l),r.appendChild(a),t.interactions=va().getInteraction(r),t.element=r,this.typeClickable(s)&&(t.interactions.events.on("hit",function(e){if(i.events.isEnabled("hit")){var n={type:"hit",event:e.event,target:i,branch:t};i.events.dispatchImmediately("hit",n)}}),t.interactions.events.on("keyup",function(e){if(kc.isKey(e.event,"enter")&&i.events.isEnabled("enter")){var n={type:"enter",event:e.event,target:i,branch:t};i.events.dispatchImmediately("enter",n)}}));var o=this.getSubMenu(t);null!=o&&(t.interactions.events.on("keyup",function(e){kc.isKey(e.event,"enter")&&(i.selectBranch(o[0]),i.setFocus(o[0]))}),t.interactions.events.on("hit",function(e){i.selectBranch(t)})),t.interactions.events.on("over",function(e){if(e.pointer.touch&&(i._ignoreNextClose=!0),i.selectBranch(t),i.events.isEnabled("over")){var n={type:"over",event:e.event,target:i,branch:t};i.events.dispatchImmediately("over",n)}}),t.interactions.events.on("out",function(e){if(e.pointer.touch||i.delayUnselectBranch(t),i.events.isEnabled("out")){var n={type:"out",event:e.event,target:i,branch:t};i.events.dispatchImmediately("out",n)}}),t.interactions.events.on("focus",function(e){i.selectBranch(t)}),t.interactions.events.on("blur",function(e){i.delayUnselectBranch(t)});var c=n+1;if(t.menu){var u=this.createMenuElement(c);t.submenuElement=u;for(var p=t.menu.length,h=0;h<p;h++){var m=new Fa;t.menu[h].ascendants=m,t.ascendants.length&&m.copyFrom(t.ascendants),m.push(t),this.drawBranch(u,t.menu[h],c)}if(""==u.innerHTML)return;r.appendChild(u)}t.hidden&&this.hideBranch(t),t.id&&r.setAttribute("id",t.id),t.color&&(r.style.backgroundColor=t.color.hex),e.appendChild(r)}},t.prototype.createMenuElement=function(e){var t=document.createElement(this.menuTag);return t.className=this.getMenuItemClass(e),0===e?t.setAttribute("role","menubar"):t.setAttribute("role","menu"),t},t.prototype.getMenuItemClass=function(e){var t=this.classPrefix+"-menu "+this.classPrefix+"-menu-level-"+e;return 0===e&&(t+=" "+this.classPrefix+"-menu-root "+this.classPrefix+"-"+this.align+" "+this.classPrefix+"-"+this.verticalAlign),this.adapter.apply("menuClass",{className:t,level:e}).className},t.prototype.createItemElement=function(e,t){var n=document.createElement(this.itemTag),i=this.classPrefix+"-item "+this.classPrefix+"-item-level-"+e+" "+this.classPrefix+"-item-"+(t||"blank");return n.className=this.adapter.apply("itemClass",{className:i,level:e,type:t}).className,n.setAttribute("role","menuitem"),n.setAttribute("tabindex",this.tabindex.toString()),n},t.prototype.createLabelElement=function(e,t){var n=document.createElement(this.labelTag),i=this.classPrefix+"-label "+this.classPrefix+"-label-level-"+e+" "+this.classPrefix+"-item-"+(t||"blank");return this.typeClickable(t)&&(i+=" "+this.classPrefix+"-clickable"),n.className=this.adapter.apply("labelClass",{className:i,level:e,type:t}).className,n},t.prototype.createIconElement=function(e,t){var n=document.createElement(this.iconTag),i=this.classPrefix+"-icon "+this.classPrefix+"-icon-level-"+e+" "+this.classPrefix+"-item-"+(t||"blank");return this.typeClickable(t)&&(i+=" "+this.classPrefix+"-clickable"),n.className=this.adapter.apply("labelClass",{className:i,level:e,type:t}).className,n.setAttribute("tabindex",this.tabindex.toString()),n.setAttribute("role","menuitem"),n},t.prototype.createSvgElement=function(e,t,n){var i=new DOMParser().parseFromString(n,"image/svg+xml").documentElement,a=this.classPrefix+"-icon "+this.classPrefix+"-icon-level-"+e+" "+this.classPrefix+"-item-"+(t||"blank");return this.typeClickable(t)&&(a+=" "+this.classPrefix+"-clickable"),i.setAttribute("class",this.adapter.apply("labelClass",{className:a,level:e,type:t}).className),i.setAttribute("tabindex",this.tabindex.toString()),i.setAttribute("role","menuitem"),i},t.prototype.dispose=function(){this._disposed||(e.prototype.dispose.call(this),this._element&&this._element.parentNode&&this._element.parentNode.removeChild(this._element))},t.prototype.typeClickable=function(e){return ba(e)},t.prototype.hasSubMenu=function(e){return!(!e.menu||!e.menu.length)},t.prototype.getSubMenu=function(e){if(e.menu&&e.menu.length)return e.menu},t.prototype.getReaderLabel=function(e,t){return t=lh(t),0==e.ascendants.length?(t="..."==t?this.language.translate("Export"):t,t+=" ["+this.language.translate("Press ENTER or use arrow keys to navigate")+"]"):this.hasSubMenu(e)?t+=" ["+this.language.translate("Click, tap or press ENTER to open")+"]":"print"==e.type?t=this.language.translate("Click, tap or press ENTER to print."):this.typeClickable(e.type)&&(t=this.language.translate("Click, tap or press ENTER to export as %1.",void 0,t)),this.adapter.apply("rederLabel",{label:t,branch:e}).label},Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(e){this._container=e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this._items},set:function(e){this._items=e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tag",{set:function(e){this._menuTag=e,this._itemTag="ul"==e?"li":"div",this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"menuTag",{get:function(){return this.adapter.apply("menuTag",{tag:this._menuTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemTag",{get:function(){return this.adapter.apply("itemTag",{tag:this._itemTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelTag",{get:function(){return this.adapter.apply("labelTag",{tag:this._labelTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconTag",{get:function(){return this.adapter.apply("iconTag",{tag:this._iconTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this.adapter.apply("align",{align:this._align}).align},set:function(e){this._align=e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalAlign",{get:function(){return this.adapter.apply("verticalAlign",{verticalAlign:this._verticalAlign}).verticalAlign},set:function(e){this._verticalAlign=e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classPrefix",{get:function(){return this.adapter.apply("classPrefix",{classPrefix:this._classPrefix}).classPrefix},set:function(e){this._classPrefix=e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultStyles",{get:function(){return this.adapter.apply("defaultStyles",{defaultStyles:this._defaultStyles}).defaultStyles},set:function(e){this._defaultStyles!=e&&(this._defaultStyles=e,e&&this.loadDefaultCSS()),this.invalidate()},enumerable:!0,configurable:!0}),t.prototype.loadDefaultCSS=function(){this._disposers.push(tl(Rf(this.container),this.classPrefix)),this._element&&(this._element.style.display="")},Object.defineProperty(t.prototype,"tabindex",{get:function(){return this.adapter.apply("tabindex",{tabindex:this._tabindex}).tabindex},set:function(e){this._tabindex=e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"language",{get:function(){var e=this,t=this._language.get();return null==t&&(t=new Dc,this._language.set(t,t.events.on("localechanged",function(t){e.invalidate()}))),t},set:function(e){var t=this;this._language.set(e,e.events.on("localechanged",function(e){t.invalidate()})),this.invalidate()},enumerable:!0,configurable:!0}),t.prototype.close=function(){var e=this;if(this._ignoreNextClose)this._ignoreNextClose=!1;else{if(this.closeOnClick&&(this._element.style.pointerEvents="none",setTimeout(function(){e._element.style.pointerEvents="auto"},100)),this._currentSelection&&(this.setBlur(this._currentSelection),this._currentSelection=void 0),this._element)for(var t=this._element.getElementsByClassName("active"),n=t.length-1;n>=0;n--)t[n]&&Pf(t[n],"active");this.events.dispatchImmediately("closed",{type:"closed",target:this})}},t.prototype.selectBranch=function(e){var t=this;if(e.closeTimeout&&(this.removeDispose(e.closeTimeout),e.closeTimeout=void 0),Of(e.element,"active"),e.submenuElement&&e.submenuElement.setAttribute("aria-expanded","true"),this._currentSelection&&this._currentSelection!==e&&this._currentSelection.ascendants&&ga(Jj(Nc([this._currentSelection]),this._currentSelection.ascendants.iterator()),function(n){e.ascendants.contains(n)||e===n||t.unselectBranch(n,!0)}),ga(e.ascendants.iterator(),function(e){e.closeTimeout&&(t.removeDispose(e.closeTimeout),e.closeTimeout=void 0),Of(e.element,"active")}),this._currentSelection=e,this.events.isEnabled("branchselected")){var n={type:"branchselected",target:this,branch:e};this.events.dispatchImmediately("branchselected",n)}},t.prototype.unselectBranch=function(e,t){if(Pf(e.element,"active"),e.submenuElement&&e.submenuElement.removeAttribute("aria-expanded"),this._currentSelection==e&&(this._currentSelection=void 0),this.events.isEnabled("branchunselected")){var n={type:"branchunselected",target:this,branch:e};this.events.dispatchImmediately("branchunselected",n)}},t.prototype.delayUnselectBranch=function(e,t){var n=this;e.closeTimeout&&(this.removeDispose(e.closeTimeout),e.closeTimeout=void 0),e.closeTimeout=this.setTimeout(function(){n.unselectBranch(e,t)},this.closeDelay),!0!==t&&e.ascendants&&ga(e.ascendants.iterator(),function(e){n.delayUnselectBranch(e,!0)})},t.prototype.moveSelection=function(e){if(this._currentSelection){var t;if("up"==e)t=this.getPrevSibling(this._currentSelection);else if("down"==e)t=this.getNextSibling(this._currentSelection);else if("left"==e&&"right"==this.align||"right"==e&&"left"==this.align){var n=this.getSubMenu(this._currentSelection);null!=n&&(t=n[0])}else("right"==e&&"right"==this.align||"left"==e&&"left"==this.align)&&(t=this.getParentItem(this._currentSelection));t&&t!==this._currentSelection&&(this.selectBranch(t),this.setFocus(t),this._currentSelection=t)}},t.prototype.getSiblings=function(e){var t=this.getParentItem(e);return t&&t.menu?t.menu:[]},t.prototype.getParentItem=function(e){return e.ascendants&&e.ascendants.length?e.ascendants.getIndex(e.ascendants.length-1):void 0},t.prototype.getNextSibling=function(e){var t=this.getSiblings(e);if(t.length>1){var n=t.indexOf(e)+1;return t[n=t.length==n?0:n].unsupported?this.getNextSibling(t[n]):t[n]}return e},t.prototype.getPrevSibling=function(e){var t=this.getSiblings(e);if(t.length>1){var n=t.indexOf(e)-1;return t[n=-1==n?t.length-1:n].unsupported?this.getPrevSibling(t[n]):t[n]}return e},t.prototype.setFocus=function(e){if(e.interactions)try{e.interactions.element.focus()}catch(t){}},t.prototype.setBlur=function(e){if(e.interactions)try{e.interactions.element.blur()}catch(t){}},t.prototype.hideBranch=function(e){e.element.style.display="none"},t.prototype.showBranch=function(e){e.element.style.display=""},Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),t}(Uh);function Ge(e,r,t){return new Promise(function(o,n){var s=ba(t)&&"blob"==t.responseType,p=new XMLHttpRequest;if(p.onload=function(){if(200===p.status){var e,t=void 0;if(s)return void vl(e=p.response).then(function(t){var n={xhr:p,error:!1,response:t,blob:e,type:p.getResponseHeader("Content-Type"),target:r};o(n)});t=p.responseText||p.response;var a={xhr:p,error:!1,response:t,blob:e,type:p.getResponseHeader("Content-Type"),target:r};o(a)}else n({xhr:p,error:!0,type:p.getResponseHeader("Content-Type"),target:r})},p.onerror=function(){n({xhr:p,error:!0,type:p.getResponseHeader("Content-Type"),target:r})},p.open("GET",e,!0),t&&t.withCredentials&&(p.withCredentials=!0),ba(t)){if(ba(t.requestHeaders))for(var a=0;a<t.requestHeaders.length;a++){var i=t.requestHeaders[a];p.setRequestHeader(i.key,i.value)}ba(t.responseType)&&(p.responseType=t.responseType)}p.send()})}function vl(e){return new Promise(function(r,t){var o=new FileReader;o.onload=function(e){r(o.result)},o.onerror=function(e){t(e)},o.readAsText(e)})}function wl(){try{throw new Error}catch($){var e=(""+$.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(e)return Vh(e[0])}return"/"}function Vh(e){return(""+e).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}function xl(){if(rl)return;rl=true;Yf={};Sh=null;pl=sl;Yf.getBundleURL=pl;ql=Vh;Yf.getBaseURL=ql}var nd,yl,Wh,zl,Al,He,Bl=false;function Cl(r){Array.isArray(r)||(r=[r]);var e=r[r.length-1];try{return Promise.resolve(require(e))}catch($){if("MODULE_NOT_FOUND"===$.code)return new Zf(function($,t){Xh(r.slice(0,-1)).then(function(){return require(e)}).then($,t)});throw $}}function Xh(r){return Promise.all(r.map(El))}function Dl(r,e){Wh[r]=e}function El(r){var e;if(Array.isArray(r)&&(e=r[1],r=r[0]),He[r])return He[r];var $=(r.substring(r.lastIndexOf(".")+1,r.length)||r).toLowerCase(),t=Wh[$];return t?He[r]=t(yl()+r).then(function(r){return r&&require.register(e,r),r}).catch(function(e){throw delete He[r],e}):void 0}function Zf(r){this.executor=r,this.promise=null}function Nd(){if(Bl)return;Bl=true;nd={};yl=(xl(),Yf).getBundleURL;Wh={};zl=Xh;(nd=nd=Cl).load=zl;Al=Dl;nd.register=Al;He={};Zf.prototype.then=function(r,e){return null===this.promise&&(this.promise=new Promise(this.executor)),this.promise.then(r,e)},Zf.prototype.catch=function(r){return null===this.promise&&(this.promise=new Promise(this.executor)),this.promise.catch(r)}}var Fl={};Fl=function(n){return new Promise(function(e,o){var r=document.createElement("script");r.async=!0,r.type="text/javascript",r.charset="utf-8",r.src=n,r.onerror=function(n){r.onerror=r.onload=null,o(n)},r.onload=function(){r.onerror=r.onload=null,e()},document.getElementsByTagName("head")[0].appendChild(r)})};(Nd(),nd).register("js",Fl);var Yh,e=arguments[0];function Gl(){return Pa(this,void 0,void 0,function(){var t,e,r,a;return Ja(this,function(i){switch(i.label){case 0:return[4,Promise.all([(Nd(),nd)([["pdfmake.8e51f00d.js","Z5ar"],"Z5ar"]),(Nd(),nd)([["vfs_fonts.9b31228b.js","Z337"],"Z337"])])];case 1:return t=i.sent(),e=t[0],r=t[1],(a=window).pdfMake=a.pdfMake||{},a.pdfMake.vfs=r.default,e.vfs=r.default,[2,e];}})})}var Zh=/src: ([^;]+);/;function Hl(){return null!=window.navigator.msSaveOrOpenBlob}function Il(t){return new Promise(function(e,r){var a=new FileReader;a.onload=function(t){e(a.result)},a.onerror=function(t){r(t)},a.readAsDataURL(t)})}function Jl(t){return Pa(this,void 0,void 0,function(){var e;return Ja(this,function(r){switch(r.label){case 0:e=t.sheet,r.label=1;case 1:return r.trys.push([1,2,,4]),[2,e.cssRules];case 2:return r.sent(),[4,new Promise(function(r,a){t.addEventListener("load",function(){r(e.cssRules)},!0),t.addEventListener("error",function(t){a(t)},!0),setTimeout(function(){a(new Error("Timeout while waiting for <style> to load"))},1e4)})];case 3:return[2,r.sent()];case 4:return[2];}})})}function $h(t,e,r){return Pa(this,void 0,void 0,function(){var a,i,o,n;return Ja(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,Ge(e)];case 1:return a=s.sent(),[3,3];case 2:return i=s.sent(),console.error("Failed to load stylesheet",e,i),[2];case 3:(o=t.createElement("style")).textContent=a.response,t.head.appendChild(o),s.label=4;case 4:return s.trys.push([4,,7,8]),[4,Jl(o)];case 5:return n=s.sent(),[4,_h(t,e,n,r)];case 6:return s.sent(),[3,8];case 7:return t.head.removeChild(o),[7];case 8:return[2];}})})}function _h(t,e,r,a){return Pa(this,void 0,void 0,function(){var i,o,n,s,p;return Ja(this,function(l){switch(l.label){case 0:for(i=[],o=r.length,n=0;n<o;n++)(s=r[n]).type===CSSRule.IMPORT_RULE?(p=s.href)&&(p=Kf(e,p),i.push($h(t,p,a))):a(e,s);return i.length?[4,Promise.all(i)]:[3,2];case 1:l.sent(),l.label=2;case 2:return[2];}})})}function Kl(t){return Pa(this,void 0,void 0,function(){var e,r;return Ja(this,function(a){switch(a.label){case 0:(e=document.createElement("iframe")).src="about:blank",e.setAttribute("title",""),document.head.appendChild(e),a.label=1;case 1:return a.trys.push([1,,3,4]),r=e.contentDocument,[4,Promise.all(vd(document.styleSheets,function(e){var a=e.href;return null==a?_h(r,location.href,e.cssRules,t):(a=Kf(location.href,a),$h(r,a,t))}))];case 2:return a.sent(),[3,4];case 3:return document.head.removeChild(e),[7];case 4:return[2];}})})}var Ll=function(t){function e(e){var r=t.call(this)||this;return r.adapter=new Kb(r),r._formatOptions=new Ta,r._extraSprites=[],r._validateSprites=[],r.dataFieldsOrder=[],r._dynamicDataFields=!0,r._removedObjects=new Fa,r._hiddenObjects=[],r._objectsAlreadyHidden=!1,r._filePrefix="amCharts",r.useWebFonts=!0,r.useRetina=!0,r.useSimplifiedExport=!0,r.timeoutDelay=2e3,r._exportRunning=!1,r._prevHasData=!1,r._container=e,r.className="Export",r._formatOptions.setKey("png",{}),r._formatOptions.setKey("jpg",{quality:.8}),r._formatOptions.setKey("gif",{}),r._formatOptions.setKey("svg",{}),r._formatOptions.setKey("pdf",{fontSize:14,imageFormat:"png",align:"left",addURL:!0,addColumnNames:!0}),r._formatOptions.setKey("json",{indent:2,useLocale:!0}),r._formatOptions.setKey("csv",{addColumnNames:!0,emptyAs:""}),r._formatOptions.setKey("xlsx",{addColumnNames:!0,useLocale:!0,emptyAs:""}),r._formatOptions.setKey("html",{addColumnNames:!0,emptyAs:""}),r._formatOptions.setKey("pdfdata",{fontSize:14,imageFormat:"png",addURL:!0,addColumnNames:!0,emptyAs:""}),r._formatOptions.setKey("print",{delay:500,printMethod:"iframe"}),r.adapter.add("options",function(t){var e=r._formatOptions.getKey(t.type);return t.options?t.options=qf(e,t.options):t.options=e,t}),r.applyTheme(),r.dispatchImmediately("inited"),r}return da(e,t),Object.defineProperty(e.prototype,"menu",{get:function(){return this._menu},set:function(t){var e=this;this._menu&&this.removeDispose(this._menu),this._menu=t,this._menu.container=this.container,this._menu.language=this._language,this._menu.adapter.add("branch",function(t){return t.branch.unsupported=!e.typeSupported(t.branch.type),t}),this._menu.events.on("hit",function(t){e.export(t.branch.type,t.branch.options),e.menu.close()}),this._menu.events.on("enter",function(t){e.export(t.branch.type,t.branch.options),e.menu.close()}),this._menu.events.on("over",function(t){e._disablePointers()}),this._menu.events.on("out",function(t){setTimeout(function(){e._releasePointers()},10)}),this.dispatchImmediately("menucreated"),this._menu.adapter.add("classPrefix",function(t){return t.classPrefix=za.classNamePrefix+t.classPrefix,t}),this._disposers.push(this._menu)},enumerable:!0,configurable:!0}),e.prototype.typeSupported=function(t){var e=!0,r=this.getFormatOptions(t);return ba(r)&&r.disabled?e=!1:"pdf"===t||("xlsx"===t?e=!!this._hasData():("print"!=t||window.print)&&(-1===["json","csv","html","pdfdata"].indexOf(t)||this._hasData())||(e=!1)),this.adapter.apply("supported",{supported:e,type:t}).supported},e.prototype._hasData=function(){return this.data&&this.data.length},e.prototype._getFunction=function(t){switch(t){case"png":case"gif":case"jpg":return this.getImage;case"svg":return this.getSVG;case"pdf":case"pdfdata":return this.getPDF;case"xlsx":return this.getExcel;case"csv":return this.getCSV;case"json":return this.getJSON;case"html":return this.getHTML;case"print":return this.getPrint;default:return this.unsupported;}},e.prototype.export=function(t,e){return Pa(this,void 0,void 0,function(){var r,a,i,o,n,s=this;return Ja(this,function(p){switch(p.label){case 0:return"custom"==t?(this.handleCustom(e),[2,!0]):(this._exportRunning=!0,this.events.isEnabled("exportstarted")&&(r={type:"exportstarted",target:this,format:t,options:e},this.events.dispatchImmediately("exportstarted",r)),this.showPreloader(),this.timeoutDelay&&(this.hideTimeout(),this._timeoutTimeout=this.setTimeout(function(){if(s.events.isEnabled("exporttimedout")){var r={type:"exporttimedout",target:s,format:t,options:e};s.events.dispatchImmediately("exporttimedout",r)}s.showTimeout()},this.timeoutDelay)),this.hideNonExportableSprites(),a=this._getFunction(t),e=this.adapter.apply("options",{options:e,type:t}).options,[4,(a=this.adapter.apply("exportFunction",{func:a,type:t,options:e}).func).call(this,t,e)]);case 1:return i=p.sent(),this._exportRunning=!1,this._releasePointers(),this.restoreNonExportableSprites(),i?(this.events.isEnabled("exportfinished")&&(o={type:"exportfinished",target:this,format:t,options:e},this.events.dispatchImmediately("exportfinished",o)),this.hidePreloader(),this.hideTimeout(),this.menu&&this.menu.close(),"print"===t?[2,this.print(i,e,this.adapter.apply("title",{title:this.title,options:e}).title)]:"pdfdata"==t?[2,this.download(i,this.filePrefix+".pdf")]:[2,this.download(i,this.filePrefix+"."+t)]):(this.events.isEnabled("error")&&(n={type:"error",target:this,format:t,options:e},this.events.dispatchImmediately("error",n)),[2,!1]);}})})},e.prototype.unsupported=function(t,e){return Pa(this,void 0,void 0,function(){return Ja(this,function(t){return[2,""]})})},e.prototype.handleCustom=function(t){ba(t)&&ba(t.callback)&&t.callback.call(t.callbackTarget||this,t)},e.prototype.getPrint=function(t,e){return Pa(this,void 0,void 0,function(){return Ja(this,function(t){return[2,this.getImage("png",e)]})})},e.prototype.getFontFamilies=function(){return Pa(this,void 0,void 0,function(){var t,e,r,a,i=this;return Ja(this,function(o){switch(o.label){case 0:return t=this.getDOMURL(),e=[],r=[],[4,Kl(function(a,o){if(o.type===CSSRule.FONT_FACE_RULE){var n=o.cssText,s=Zh.exec(n);if(null!==s){var p=s[1].split(/ *, */).map(function(r){return Pa(i,void 0,void 0,function(){var i,o,n,s,p,l;return Ja(this,function(d){switch(d.label){case 0:return null!==(i=/^url\(["']?([^"'\)]+)["']?\)([^,]*)$/.exec(r))?[3,1]:[2,r];case 1:o=i[2],n=Kf(a,i[1]),d.label=2;case 2:return d.trys.push([2,7,,8]),[4,Ge(n,void 0,{responseType:"blob"})];case 3:return s=d.sent(),Hl()?(p=t.createObjectURL(s.blob),e.push(p),[3,6]):[3,4];case 4:return[4,Il(s.blob)];case 5:p=d.sent(),d.label=6;case 6:return[2,"url(\""+p+"\")"+o];case 7:return l=d.sent(),console.error("Failed to load font",n,l),[2,null];case 8:return[2];}})})});r.push(Promise.all(p).then(function(t){return 0===(t=t.filter(function(t){return null!=t})).length?"":n.replace(Zh,"src: "+t.join(", ")+";")}))}}})];case 1:return o.sent(),[4,Promise.all(r)];case 2:return a=o.sent(),[2,{blobs:e,cssText:a.filter(function(t){return!!t}).join("\n")}];}})})},e.prototype.getImage=function(t,e,r){return Pa(this,void 0,void 0,function(){var a,i,o,n,s;return Ja(this,function(p){switch(p.label){case 0:return(a=this._objectsAlreadyHidden)||this.hideNonExportableSprites(),ba(e)||(e=this.getFormatOptions(t)),[4,this.awaitValidSprites()];case 1:return p.sent(),[4,this.simplifiedImageExport()];case 2:if(!p.sent())return[3,10];i=void 0,p.label=3;case 3:return p.trys.push([3,7,,9]),[4,this.getCanvas(e)];case 4:return i=p.sent(),!1===r?[3,6]:[4,this.addExtras(i,e)];case 5:i=p.sent(),p.label=6;case 6:return o=i.toDataURL(this.getContentType(t),e.quality),this.disposeCanvas(i),a||this.restoreNonExportableSprites(),[2,o];case 7:return n=p.sent(),console.error(n.message+"\n"+n.stack),Uf("Simple export failed, falling back to advanced export"),i&&this.disposeCanvas(i),[4,this.getImageAdvanced(t,e,r)];case 8:return s=p.sent(),a||this.restoreNonExportableSprites(),[2,s];case 9:return[3,12];case 10:return[4,this.getImageAdvanced(t,e,r)];case 11:return s=p.sent(),a||this.restoreNonExportableSprites(),[2,s];case 12:return[2];}})})},e.prototype.addExtras=function(t,e,r){return Pa(this,void 0,void 0,function(){var a,i,o,n,s,p,l,d,u,c,h,m,$,f,g=this;return Ja(this,function(F){switch(F.label){case 0:return this.extraSprites.length?(a=0,i=0,o=t.width,n=t.height,s=0,p=0,[4,Promise.all(vd(this.extraSprites,function(t){return Pa(g,void 0,void 0,function(){var l,d,u,c;return Ja(this,function(h){switch(h.label){case 0:return(l=t instanceof xa?{sprite:t,position:"bottom"}:t).position=l.position||"bottom",l.marginTop=l.marginTop||0,l.marginRight=l.marginRight||0,l.marginBottom=l.marginBottom||0,l.marginLeft=l.marginLeft||0,r?[4,l.sprite.exporting.getCanvasAdvanced(e)]:[3,2];case 1:return d=h.sent(),[3,4];case 2:return[4,l.sprite.exporting.getCanvas(e)];case 3:d=h.sent(),h.label=4;case 4:return u=d.width+l.marginLeft+l.marginRight,c=d.height+l.marginTop+l.marginBottom,"top"==l.position?(o=l.crop?n:wa(o,u),i+=c):"right"==l.position?(n=l.crop?n:wa(n,c),s+=u):"left"==l.position?(n=l.crop?n:wa(n,c),a+=u):"bottom"===l.position&&(o=l.crop?n:wa(o,u),p+=c),[2,{canvas:d,position:l.position,left:l.marginLeft,top:l.marginTop,width:u,height:c}];}})})}))]):[3,2];case 1:return l=F.sent(),(d=this.getDisposableCanvas()).width=a+o+s,d.height=i+n+p,u=d.getContext("2d"),(c=this.backgroundColor||this.findBackgroundColor(this.sprite.dom))&&(u.fillStyle=c.toString(),u.fillRect(0,0,d.width,d.height)),$=(h=a)+o,f=(m=i)+n,la(l,function(t){"top"==t.position?(m-=t.height,u.drawImage(t.canvas,a+t.left,m+t.top)):"right"==t.position?(u.drawImage(t.canvas,$+t.left,i+t.top),$+=t.width):"left"==t.position?(h-=t.width,u.drawImage(t.canvas,h+t.left,i+t.top)):"bottom"===t.position&&(u.drawImage(t.canvas,a+t.left,f+t.top),f+=t.height),g.disposeCanvas(t.canvas)}),u.drawImage(t,a,i),[2,d];case 2:return[2,t];}})})},e.prototype.getCanvas=function(t){return Pa(this,void 0,void 0,function(){var e,r,a,i,o,n,s,p,l,d,u,c,h,m,$,f,g;return Ja(this,function(F){switch(F.label){case 0:ba(t)||(t={}),e=this.backgroundColor||this.findBackgroundColor(this.sprite.dom),r=this.getDOMURL(),a=null,i=null,F.label=1;case 1:return F.trys.push([1,,4,5]),n=this.sprite.pixelWidth,s=this.sprite.pixelHeight,p=Ce(this.sprite.dom),l=De(this.sprite.dom),d=t.scale||1,u=this.getPixelRatio(t),d=this.getAdjustedScale(n*u,s*u,d,t),(o=this.getDisposableCanvas()).style.width=n*d+"px",o.style.height=s*d+"px",o.width=n*d,o.height=s*d,c=o.getContext("2d"),e&&(c.fillStyle=e.toString(),c.fillRect(0,0,n*d,s*d)),h=[],this.useWebFonts&&h.push(this.getFontFamilies().then(function(t){return i=t.blobs,t.cssText})),h.push(this.imagesToDataURI(this.sprite.dom,t)),h.push(this.prepForeignObjects(this.sprite.dom,t)),[4,Promise.all(h)];case 2:return m=F.sent(),$=this.normalizeSVG("<style>"+m[0]+"</style>"+this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),t,n,s,d,p,l),f=new Blob([$],{type:"image/svg+xml"}),a=r.createObjectURL(f),[4,this.loadNewImage(a,n*d*u,s*d*u,"anonymous")];case 3:return g=F.sent(),c.drawImage(g,0,0),[3,5];case 4:return null!==a&&r.revokeObjectURL(a),null!==i&&la(i,function(t){r.revokeObjectURL(t)}),this.restoreRemovedObjects(),[7];case 5:return[2,o];}})})},e.prototype.getCanvasAdvanced=function(t){return Pa(this,void 0,void 0,function(){var e,r,a,i,o,n,s,p,l,d,u;return Ja(this,function(c){switch(c.label){case 0:return ba(t)||(t={}),[4,this.imagesToDataURI(this.sprite.dom,t)];case 1:return c.sent(),e=this.backgroundColor||this.findBackgroundColor(this.sprite.dom),[4,this.canvg];case 2:return r=c.sent(),a=this.sprite.pixelWidth,i=this.sprite.pixelHeight,o=Ce(this.sprite.dom),n=De(this.sprite.dom),s=t.scale||1,p=this.getPixelRatio(t),s=this.getAdjustedScale(a*p,i*p,s,t),l=this.normalizeSVG(this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),t,a,i,s,o,n,e),(d=this.getDisposableCanvas()).style.width=a*p*s+"px",d.style.height=i*p*s+"px",d.width=a*p*s,d.height=i*p*s,u={useCORS:!0},1!=p&&(u.ignoreDimensions=!0,u.scaleWidth=a*p*s,u.scaleHeight=i*p*s),[4,r.fromString(d.getContext("2d"),l,u).render()];case 3:return c.sent(),[2,d];}})})},e.prototype.getImageAdvanced=function(t,e,r){return Pa(this,void 0,void 0,function(){var a,i,o;return Ja(this,function(n){switch(n.label){case 0:return(a=this._objectsAlreadyHidden)||this.hideNonExportableSprites(),ba(e)||(e=this.getFormatOptions(t)),[4,this.getCanvasAdvanced(e)];case 1:return i=n.sent(),!1===r?[3,3]:[4,this.addExtras(i,e,!0)];case 2:i=n.sent(),n.label=3;case 3:return o=i.toDataURL(this.getContentType(t),e.quality),this.disposeCanvas(i),a||this.restoreNonExportableSprites(),[2,o];}})})},e.prototype.getDisposableCanvas=function(){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="-10000px",document.body.appendChild(t),t},e.prototype.disposeCanvas=function(t){document.body.removeChild(t)},e.prototype.getPixelRatio=function(t){return this.useRetina?ck():1},e.prototype.getAdjustedScale=function(t,e,r,a){if(!a)return r;var i,o,n=t*r,s=t*r;return a.maxWidth&&n>a.maxWidth&&(i=a.maxWidth/t),a.maxHeight&&s>a.maxHeight&&(o=a.maxHeight/e),i||o?Ea(i,o):(a.minWidth&&n<a.minWidth&&(i=a.minWidth/t),a.minHeight&&s<a.minHeight&&(o=a.minHeight/e),i||o?wa(i,o):r)},e.prototype.imagesToDataURI=function(t,r){return Pa(this,void 0,void 0,function(){var a,i,o,n,s,p;return Ja(this,function(l){switch(l.label){case 0:if(!(a=t.querySelectorAll("image")).length)return[3,2];for(i=[],o=a.length,n=0;n<o;n++)s=a[n],(p=s.getAttributeNS(e.XLINK,"href"))&&(-1!==p.indexOf("data:image")||(-1!==p.indexOf(".svg")?i.push(this.svgToDataURI(s,r)):i.push(this.imageToDataURI(s,r))));return[4,Promise.all(i)];case 1:return l.sent(),[2];case 2:return[2];}})})},e.prototype.prepForeignObjects=function(t,e){return Pa(this,void 0,void 0,function(){var e,r,a;return Ja(this,function(i){if((e=t.querySelectorAll("foreignObject")).length)for(r=e.length,a=0;a<r;a++)this.temporarilyRemoveObject(e[a]);return[2]})})},e.prototype.imageToDataURI=function(t,r){return Pa(this,void 0,void 0,function(){var a,i,o;return Ja(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.loadNewImage(t.getAttributeNS(e.XLINK,"href"),null,null,"anonymous")];case 1:a=n.sent(),(i=document.createElement("canvas")).width=a.width,i.height=a.height,i.getContext("2d").drawImage(a,0,0);try{return o=i.toDataURL(),t.setAttribute("href",o),[2,o]}catch(s){return!1!==r.keepTainted&&this.temporarilyRemoveObject(t),[2,void 0]}return[3,3];case 2:return n.sent(),r&&!1===r.keepTainted||this.temporarilyRemoveObject(t),[2,void 0];case 3:return[2];}})})},e.prototype.svgToDataURI=function(t,r){return Pa(this,void 0,void 0,function(){var a,i,o,n;return Ja(this,function(s){switch(s.label){case 0:a=t.getAttributeNS(e.XLINK,"href"),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,Ge(a)];case 2:return i=s.sent(),o=this.adapter.apply("charset",{charset:"base64",type:"svg",options:r}).charset,n=this.adapter.apply("svgToDataURI",{data:"data:"+this.getContentType("svg")+";"+o+","+btoa(i.response),options:r}).data,t.setAttributeNS(e.XLINK,"href",n),[2,n];case 3:return s.sent(),r&&!1===r.keepTainted||this.temporarilyRemoveObject(t),[2,void 0];case 4:return[2];}})})},e.prototype.temporarilyRemoveObject=function(t,e){var r=t.parentElement||t.parentNode;e||(e=this.sprite.paper.add("g").node),r.insertBefore(e,t),t.textContent,r.removeChild(t),this._removedObjects.push({element:t,placeholder:e})},e.prototype.restoreRemovedObjects=function(){for(var t;t=this._removedObjects.pop();){(t.placeholder.parentElement||t.placeholder.parentNode).insertBefore(t.element,t.placeholder)}},e.prototype.simplifiedImageExport=function(){return Pa(this,void 0,void 0,function(){var t,e,r,a,i,o,n;return Ja(this,function(s){switch(s.label){case 0:if(!1===this.useSimplifiedExport)return[2,!1];if(!1===(t=ca.getCache("simplifiedImageExport"))||!0===t)return[2,t];s.label=1;case 1:s.trys.push([1,6,,7]),(e=document.createElement("canvas")).width=1,e.height=1,r=e.getContext("2d"),a=this.getDOMURL(),i=new Blob([this.normalizeSVG("<g></g>",{},1,1)],{type:"image/svg+xml"}),o=a.createObjectURL(i),n=void 0,s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.loadNewImage(o,1,1)];case 3:return n=s.sent(),[3,5];case 4:return s.sent(),[2,!1];case 5:r.drawImage(n,0,0),a.revokeObjectURL(o);try{return ca.setCache("simplifiedImageExport",!0),[2,!0]}catch(p){return ca.setCache("simplifiedImageExport",!1),[2,!1]}return[3,7];case 6:return s.sent(),ca.setCache("simplifiedImageExport",!1),[2,!1];case 7:return[2];}})})},e.prototype.loadNewImage=function(t,e,r,a){return new Promise(function(i,o){var n;function s(){if(a){var e=n.src;n.onerror=function(){o(new Error("Loading image \""+t+"\" failed"))},n.removeAttribute("crossorigin"),n.src="",n.src=e}else o(new Error("Loading image \""+t+"\" failed"))}n=e&&r?new Image(e,r):new Image,a&&n.setAttribute("crossOrigin",a),n.onload=function(){i(n)},n.onabort=s,n.onerror=s,n.src=t})},e.prototype.getDOMURL=function(){return self.URL||self.webkitURL||self},e.prototype.getSVG=function(t,e,r){return void 0===r&&(r=!0),Pa(this,void 0,void 0,function(){var a,i,o,n,s,p,l,d,u,c;return Ja(this,function(h){switch(h.label){case 0:return(a=this._objectsAlreadyHidden)||this.hideNonExportableSprites(),ba(e)||(e=this.getFormatOptions("svg")),[4,this.awaitValidSprites()];case 1:return h.sent(),i=this.sprite.pixelWidth,o=this.sprite.pixelHeight,n=Ce(this.sprite.dom),s=De(this.sprite.dom),p=e.scale||1,l=this.getPixelRatio(e),p=this.getAdjustedScale(i*l,o*l,p,e),d=this.normalizeSVG(this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),e,i,o,p,n,s),u=this.adapter.apply("charset",{charset:"charset=utf-8",type:"svg",options:e}).charset,c=this.adapter.apply("getSVG",{data:r?"data:"+this.getContentType(t)+";"+u+","+encodeURIComponent(d):d,options:e}).data,a||this.restoreNonExportableSprites(),[2,c];}})})},e.prototype.normalizeSVG=function(t,e,r,a,i,o,n,s){var p="";r&&(p+="width=\""+Math.round(r*(i||1))+"px\" "),a&&(p+="height=\""+Math.round(a*(i||1))+"px\" ");var l="";o&&(l+="font-family: "+o.replace(/"/g,"")+";"),n&&(l+="font-size: "+n+";"),i&&(p+="viewBox=\"0 0 "+r+" "+a+"\" ");var d=[],u=t.match(/<foreignObject[\s\S]*<\/foreignObject>/gi);if(u)for(var c=0;c<u.length;c++)t=t.replace(u[c],Qb),d.push(u[c]);t.match(/<svg/)?""!==p&&(t=(t=(t=t.replace(/(<svg[^>]*)width="[^"]*"/,"$1")).replace(/(<svg[^>]*)height="[^"]*"/,"$1")).replace(/(<svg)/,"$1"+p)):t="<?xml version=\"1.0\" encoding=\"utf-8\"?><svg "+p+" style=\""+l+"\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">"+t+"</svg>",s&&(t=t.replace(/(<svg[^>]*>)/,"$1<rect width=\"100%\" height=\"100%\" fill=\""+s.rgba+"\"/>")),nk()&&(t=t.replace(/<feColorMatrix [^\/>]*\/>/gi,""));var h=new RegExp("url\\("+yf(Gd()),"g");if(t=(t=t.replace(h,"url(#")).replace(/url\(&quot;([^)]*)&quot;\)/gm,"url($1)"),d.length)for(c=0;c<d.length;c++)t=t.replace(Qb,d[c]);return t=this.adapter.apply("normalizeSVG",{data:t,options:e}).data},e.prototype.serializeElement=function(t){return new XMLSerializer().serializeToString(t)},e.prototype.getPDF=function(t,e){return Pa(this,void 0,void 0,function(){function r(t){var e={};e.normal=t.normal.path,h[t.normal.path]=t.normal.bytes,t.bold?(e.bold=t.bold.path,h[t.bold.path]=t.bold.bytes):e.bold=t.normal.path,t.italics?(e.italics=t.italics.path,h[t.italics.path]=t.italics.bytes):e.italics=t.normal.path,t.bolditalics?(e.bolditalics=t.bolditalics.path,h[t.bolditalics.path]=t.bolditalics.bytes):e.bolditalics=t.normal.path,c[t.name]=e}var a,i,o,n,s,p,l,d,u,c,h;return Ja(this,function(m){switch(m.label){case 0:return[4,this.getImage(e.imageFormat||"png",e)];case 1:return a=m.sent(),[4,this.pdfmake];case 2:return i=m.sent(),o=[30,30,30,30],n={pageSize:e.pageSize||"A4",pageOrientation:e.pageOrientation||"portrait",pageMargins:e.pageMargins||o,defaultStyle:{font:e.font?e.font.name:void 0},content:[]},s=this.adapter.apply("title",{title:this.title,options:e}).title,p=0,s&&(n.content.push({text:s,fontSize:e.fontSize||14,bold:!0,margin:[0,0,0,15]}),p+=50),e.addURL&&(n.content.push({text:this.language.translate("Saved from")+": "+document.location.href,fontSize:e.fontSize,margin:[0,0,0,15]}),p+=50),"pdfdata"!=t&&n.content.push({image:a,alignment:e.align||"left",fit:this.getPageSizeFit(n.pageSize,n.pageMargins,p)}),"pdfdata"==t||e.addData?(d=(l=n.content).push,u={},[4,this.getPDFData("pdf",e)]):[3,4];case 3:d.apply(l,[(u.table=m.sent(),u.fontSize=e.fontSize||14,u)]),m.label=4;case 4:return n=this.adapter.apply("pdfmakeDocument",{doc:n,options:e}).doc,c=null,h=null,e.font&&(c={},h={},r(e.font),e.extraFonts&&la(e.extraFonts,r)),[4,new Promise(function(t,e){i.createPdf(n,null,c,h).getDataUrl(function(e){t(e)})})];case 5:return[2,m.sent()];}})})},e.prototype.getPDFData=function(t,e){return Pa(this,void 0,void 0,function(){var t,r,a,i,o,n,s=this;return Ja(this,function(p){if(t={body:[]},r=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"pdf"}).dataFields,a=this.data,e.pivot)i=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"pdfdata"}).dataFieldsOrder,sc(r,function(r,i){var o=[];e.addColumnNames&&o.push(i);for(var n=a.length,p=0;p<n;p++){var l=a[p][r];o.push(s.convertToSpecialFormat(r,l,e,!0))}t.body.push(s.getPDFDataRow(o,e,void 0,!0))},function(t,e){var r=i.indexOf(t),a=i.indexOf(e);return r>a?1:r<a?-1:0});else for(e.addColumnNames&&(t.body.push(this.getPDFDataRow(r,e,void 0,!0)),t.headerRows=1),o=a.length,n=0;n<o;n++)t.body.push(this.getPDFDataRow(a[n],e,r));return[2,this.adapter.apply("pdfmakeTable",{table:t,options:e}).table]})})},e.prototype.getPDFDataRow=function(t,e,r,a){var i=this;void 0===a&&(a=!1);var o=[];r||(r=t);var n=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"pdfdata"}).dataFieldsOrder;return sc(r,function(r,n){var s=i.convertEmptyValue(r,t[r],e),p=a?s:i.convertToSpecialFormat(r,s,e);p=""+p,o.push(p)},function(t,e){var r=n.indexOf(t),a=n.indexOf(e);return r>a?1:r<a?-1:0}),o},e.prototype.getPageSizeFit=function(t,e,r){void 0===r&&(r=0);var a=[0,0,0,0];"number"==typeof e?a=[e,e,e,e]:2==e.length?a=[e[0],e[1],e[0],e[1]]:4==e.length&&(a=e);var i={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],EXECUTIVE:[521.86,756],FOLIO:[612,936],LEGAL:[612,1008],LETTER:[612,792],TABLOID:[792,1224]}[t];return i[0]-=a[0]+a[2],i[1]-=a[1]+a[3]+r,i},e.prototype.getExcel=function(t,e){return Pa(this,void 0,void 0,function(){var r,a,i,o,n,s,p,l,d,u=this;return Ja(this,function(c){switch(c.label){case 0:return ba(e)||(e=this.getFormatOptions("xlsx")),[4,this.xlsx];case 1:if(r=c.sent(),a=this.adapter.apply("xlsxWorkbookOptions",{options:{bookType:"xlsx",bookSST:!1,type:"base64"}}).options,i=this.normalizeExcelSheetName(this.adapter.apply("xlsxSheetName",{name:this.title||this.language.translate("Data")}).name),o={SheetNames:[i],Sheets:{}},n=[],s=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"xslx"}).dataFields,e.pivot)p=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"xlsx"}).dataFieldsOrder,sc(s,function(t,r){var a=[];e.addColumnNames&&a.push(r);for(var i=u.data.length,o=0;o<i;o++){var s=u.data[o][t];a.push(u.convertToSpecialFormat(t,s,e,!0))}n.push(u.getExcelRow(a,e,void 0,!0))},function(t,e){var r=p.indexOf(t),a=p.indexOf(e);return r>a?1:r<a?-1:0});else for(e.addColumnNames&&n.push(this.getExcelRow(s,e,void 0,!0)),l=this.data.length,d=0;d<l;d++)n.push(this.getExcelRow(this.data[d],e,s));return o.Sheets[i]=r.utils.aoa_to_sheet(n),o=this.adapter.apply("xlsxWorkbook",{workbook:o,options:e}).workbook,[2,this.adapter.apply("getExcel",{data:"data:"+this.getContentType(t)+";base64,"+r.write(o,a),options:e}).data];}})})},e.prototype.normalizeExcelSheetName=function(t){return t=t.replace(/([:\\\/?*\[\]]+)/g," "),Af(t,31,"...",!0)},e.prototype.getExcelRow=function(t,e,r,a){var i=this;void 0===a&&(a=!1);var o=[];r||(r=t);var n=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"xlsx"}).dataFieldsOrder;return sc(r,function(r,n){var s=i.convertEmptyValue(r,t[r],e),p=a?s:i.convertToSpecialFormat(r,s,e,!0);o.push(p)},function(t,e){var r=n.indexOf(t),a=n.indexOf(e);return r>a?1:r<a?-1:0}),o},e.prototype.getCSV=function(t,e,r){return void 0===r&&(r=!0),Pa(this,void 0,void 0,function(){var a,i,o,n,s,p,l,d,u,c=this;return Ja(this,function(h){if(ba(e)||(e=this.getFormatOptions("csv")),a="",i=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"csv"}).dataFields,o="",n=this.data,e.pivot)s=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"csv"}).dataFieldsOrder,sc(i,function(t,r){var i=[];e.addColumnNames&&i.push(r);for(var s=n.length,p=0;p<s;p++){var l=n[p][t];i.push(c.convertToSpecialFormat(t,l,e,!0))}a+=o+c.getCSVRow(i,e,void 0,!0),o="\n"},function(t,e){var r=s.indexOf(t),a=s.indexOf(e);return r>a?-1:r<a?1:0});else{for(p=n.length,l=0;l<p;l++)d=this.getCSVRow(n[l],e,i),e.reverse?a=d+o+a:a+=o+d,o="\n";e.addColumnNames&&(a=this.getCSVRow(i,e,void 0,!0)+o+a)}return u=this.adapter.apply("charset",{charset:"charset=utf-8",type:t,options:e}).charset,[2,this.adapter.apply("getCSV",{data:r?"data:"+this.getContentType(t)+";"+u+","+encodeURIComponent(a):a,options:e}).data]})})},e.prototype.getCSVRow=function(t,e,r,a){var i=this;void 0===a&&(a=!1);var o=e.separator||",",n=[];r||(r=t);var s=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"csv"}).dataFieldsOrder;return sc(r,function(r,s){var p=i.convertEmptyValue(r,t[r],e),l=a?p:i.convertToSpecialFormat(r,p,e);l=(l=""+l).replace(/"/g,"\"\""),(e.forceQuotes||l.search(new RegExp("\"|\n|"+o,"g"))>=0)&&(l="\""+l+"\""),n.push(l)},function(t,e){var r=s.indexOf(t),a=s.indexOf(e);return r>a?1:r<a?-1:0}),n.join(o)},e.prototype.getHTML=function(t,e,r){return void 0===r&&(r=!0),Pa(this,void 0,void 0,function(){var a,i,o,n,s,p,l,d=this;return Ja(this,function(u){if(ba(e)||(e=this.getFormatOptions("html")),a="<table>",e.tableClass&&(a="<table class=\""+e.tableClass+"\">"),i=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"html"}).dataFields,o=this.data,e.pivot)n=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"html"}).dataFieldsOrder,a+="\n<tbody>",sc(i,function(t,r){var i=[];e.addColumnNames&&i.push(r);for(var n=o.length,s=0;s<n;s++){var p=o[s][t];i.push(d.convertToSpecialFormat(t,p,e,!0))}a+="\n"+d.getHTMLRow(i,e,void 0,!0)},function(t,e){var r=n.indexOf(t),a=n.indexOf(e);return r>a?-1:r<a?1:0}),a+="\n</tbody>";else{for(e.addColumnNames&&(a+="\n<thead>\n"+this.getHTMLRow(i,e,void 0,!0,!0)+"\n</thead>"),a+="\n<tbody>",s=o.length,p=0;p<s;p++)a+="\n"+this.getHTMLRow(o[p],e,i);a+="\n</tbody>"}return a+="\n</table>",l=this.adapter.apply("charset",{charset:"charset=utf-8",type:t,options:e}).charset,[2,this.adapter.apply("getHTML",{data:r?"data:"+this.getContentType(t)+";"+l+","+encodeURIComponent(a):a,options:e}).data]})})},e.prototype.getHTMLRow=function(t,e,r,a,i){var o=this;void 0===a&&(a=!1),void 0===i&&(i=!1);var n="\t<tr>";e.rowClass&&(n="\t<tr class=\""+e.rowClass+"\">"),r||(r=t);var s=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"html"}).dataFieldsOrder,p=i?"th":"td",l=!0;return sc(r,function(r,i){var s=o.convertEmptyValue(r,t[r],e),d=a?s:o.convertToSpecialFormat(r,s,e);d=(d=""+d).replace(/[\u00A0-\u9999<>\&]/gim,function(t){return"&#"+t.charCodeAt(0)+";"});var u=p;e.pivot&&l&&(u="th"),e.cellClass?n+="\n\t\t<"+u+" class=\""+e.cellClass+"\">"+d+"</"+u+">":n+="\n\t\t<"+u+">"+d+"</"+u+">",l=!1},function(t,e){var r=s.indexOf(t),a=s.indexOf(e);return r>a?1:r<a?-1:0}),n+="\n\t</tr>"},e.prototype.getJSON=function(t,e,r){return void 0===r&&(r=!0),Pa(this,void 0,void 0,function(){var a,i,o,n,s,p,l,d,u=this;return Ja(this,function(c){if(ba(e)||(e=this.getFormatOptions("json")),i=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"csv"}).dataFields,this._dynamicDataFields)a=this.data;else for(a=[],o=this.data,n=function(t,r){var n=o[r];if("object"==typeof n){var s={};sa(n,function(t,r){ba(i[t])&&(s[i[t]]=u.convertToSpecialFormat(t,r,e))}),a.push(s)}},s=o.length,p=0;p<s;p++)n(0,p);return l=JSON.stringify(a,function(t,r){return"object"==typeof r&&sa(r,function(t,a){r[t]=u.convertToSpecialFormat(t,a,e)}),r},e.indent),d=this.adapter.apply("charset",{charset:"charset=utf-8",type:t,options:e}).charset,[2,this.adapter.apply("getJSON",{data:r?"data:"+this.getContentType(t)+";"+d+","+encodeURIComponent(l):l,options:e}).data]})})},e.prototype.convertToSpecialFormat=function(t,e,r,a){if("number"==typeof e)if(this.isDateField(t))e=new Date(e);else{if(this.isDurationField(t))return this.durationFormatter.format(e,this.durationFormat);if(this.isNumberField(t)&&this.numberFormat)return this.numberFormatter.format(e,this.numberFormat)}return e instanceof Date?r.useTimestamps?e=e.getTime():r.useLocale?a||(e=e.toLocaleString()):e=this.dateFormatter.format(e,this.dateFormat):Ca(e)&&this.isDateField(t)&&this.dateFormat&&(e=this.dateFormatter.format(this.dateFormatter.parse(e),this.dateFormat)),e},e.prototype.convertEmptyValue=function(t,e,r){return ba(e)?e:r.emptyAs},e.prototype.download=function(t,e){return Pa(this,void 0,void 0,function(){var r,a,i,o,n,s,p,l,d,u,c,h,m,$,f;return Ja(this,function(g){if(this.msBlobDownloadSupport()){if(h=t.split(";"),m=h.shift().replace(/data:/,""),t=decodeURIComponent(h.join(";").replace(/^[^,]*,/,"")),-1!=["image/svg+xml","application/json","text/csv"].indexOf(m))return r=new Blob([t],{type:m}),window.navigator.msSaveBlob(r,e),[2,!0];try{i=atob(t),t=i}catch(F){return[2,!1]}for(s=new Array(t.length),p=0;p<t.length;++p)l=t.charCodeAt(p),s[p]=l;d=new Blob([new Uint8Array(s)],{type:m}),window.navigator.msSaveBlob(d,e)}else if(this.blobDownloadSupport()){if((a=document.createElement("a")).download=e,document.body.appendChild(a),h=t.split(";"),m=h.shift().replace(/data:/,""),t=decodeURIComponent(h.join(";").replace(/^[^,]*,/,"")),-1!=["image/svg+xml","application/json","text/csv","text/html"].indexOf(m))return o=new Blob([t],{type:m}),n=window.URL.createObjectURL(o),a.href=n,a.download=e,a.click(),setTimeout(function(){document.body.removeChild(a),window.URL.revokeObjectURL(n)},100),[2,!0];try{i=atob(t),t=i}catch(F){return[2,!1]}for(s=new Array(t.length),p=0;p<t.length;++p)l=t.charCodeAt(p),s[p]=l;d=new Blob([new Uint8Array(s)],{type:m}),u=window.URL.createObjectURL(d),a.href=u,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),setTimeout(function(){window.URL.revokeObjectURL(u)},100)}else this.linkDownloadSupport()?((c=document.createElement("a")).download=e,c.href=t,document.body.appendChild(c),c.click(),document.body.removeChild(c)):this.legacyIE()?4===(h=t.match(/^data:(.*);[ ]*([^,]*),(.*)$/)).length&&("base64"==h[2]?h[1].match(/^image\//)&&this.showModal("<img src=\""+t+"\" style=\"float: left; max-width: 50%; max-height: 80%; margin: 0 1em 0.5em 0; border: 1px solid #eee;\" /><p>"+this.language.translate("To save the image, right-click thumbnail on the left and choose \"Save picture as...\"")+"</p><p style=\"text-align: center;\"><small>"+this.language.translate("(Press ESC to close this message)")+"</small></p>",this.language.translate("Image Export Complete")):(m=void 0,e.match(/\.svg$/)?m="image/svg+xml":(m="text/plain",e+=".txt"),($=document.createElement("iframe")).width="1px",$.height="1px",$.style.display="none",document.body.appendChild($),(f=$.contentDocument).open(m,"replace"),f.write(decodeURIComponent(h[3])),f.close(),f.execCommand("SaveAs",!0,e),document.body.removeChild($))):window.location.href=t;return[2,!0]})})},e.prototype.downloadSupport=function(){return this.linkDownloadSupport()||this.msBlobDownloadSupport()},e.prototype.linkDownloadSupport=function(){var t=ca.getCache("linkDownloadSupport");if(!1===t||!0===t)return t;var e=void 0!==document.createElement("a").download;return ca.setCache("linkDownloadSupport",e),e},e.prototype.blobDownloadSupport=function(){return ba(window.Blob)},e.prototype.msBlobDownloadSupport=function(){return ba(window.navigator.msSaveOrOpenBlob)},e.prototype.legacyIE=function(){var t=document.createElement("div");return t.innerHTML="<!--[if lt IE 10]><i></i><![endif]-->",1==t.getElementsByTagName("i").length},e.prototype.print=function(t,e,r){return Pa(this,void 0,void 0,function(){return Ja(this,function(a){return"css"==e.printMethod?[2,this.printViaCSS(t,e,r)]:[2,this.printViaIframe(t,e,r)]})})},e.prototype.printViaCSS=function(t,e,r){return Pa(this,void 0,void 0,function(){var a,i,o,n;return Ja(this,function(s){return a=document.documentElement.scrollTop||document.body.scrollTop,i=new Qa(Rf(this.container),"body > *",{display:"none",position:"fixed",visibility:"hidden",opacity:"0",clipPath:"polygon(0px 0px,0px 0px,0px 0px,0px 0px);"}),r&&document&&document.title&&(o=document.title,document.title=r),(n=new Image).src=t,n.style.maxWidth="100%",n.style.display="block",n.style.position="relative",n.style.visibility="visible",n.style.opacity="1",n.style.clipPath="none",document.body.appendChild(n),this.setTimeout(function(){window.print()},50),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&e.delay<1e3?e.delay=1e3:e.delay<100&&(e.delay=100),this.setTimeout(function(){document.body.removeChild(n),i.dispose(),o&&(document.title=document.title),document.documentElement.scrollTop=document.body.scrollTop=a},e.delay||500),[2,!0]})})},e.prototype.printViaIframe=function(t,e,r){return Pa(this,void 0,void 0,function(){var a,i;return Ja(this,function(o){return(a=document.createElement("iframe")).style.visibility="hidden",document.body.appendChild(a),a.contentWindow.document.open(),a.contentWindow.document.close(),(i=new Image).src=t,i.style.maxWidth="100%",i.style.height="auto",r&&(a.contentWindow.document.title=r),a.contentWindow.document.body.appendChild(i),a.load=function(){a.contentWindow.document.body.appendChild(i)},this.setTimeout(function(){try{a.contentWindow.document.execCommand("print",!1,null)||a.contentWindow.print()}catch(t){a.contentWindow.print()}},e.delay||50),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&e.delay<1e3?e.delay=1e3:e.delay<100&&(e.delay=100),this.setTimeout(function(){document.body.removeChild(a)},e.delay+50||100),[2,!0]})})},e.prototype.findBackgroundColor=function(t){var e=1,r=Qf(t,"background-color");if((r.match(/[^,]*,[^,]*,[^,]*,[ ]?0/)||"transparent"==r)&&(e=0),0==e){var a=t.parentElement;return a?this.findBackgroundColor(a):ua("#fff")}return ua(r,e)},Object.defineProperty(e.prototype,"container",{get:function(){return this.adapter.apply("container",{container:this._container}).container},set:function(t){this._container=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sprite",{get:function(){return this.adapter.apply("sprite",{sprite:this._sprite}).sprite},set:function(t){this._sprite=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extraSprites",{get:function(){return this.adapter.apply("extraSprites",{extraSprites:this._extraSprites}).extraSprites},set:function(t){this._extraSprites=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validateSprites",{get:function(){return this.adapter.apply("validateSprites",{validateSprites:this._validateSprites}).validateSprites},set:function(t){this._validateSprites=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.adapter.apply("data",{data:this._data}).data},set:function(t){this._data=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataFields",{get:function(){return this._dataFields||this.generateDataFields(),this.adapter.apply("dataFields",{dataFields:this._dataFields}).dataFields},set:function(t){this._dataFields=t,this._dynamicDataFields=!1},enumerable:!0,configurable:!0}),e.prototype.handleDataUpdated=function(){this._dynamicDataFields&&(this._dataFields=void 0);var t=this.data.length>0;this._prevHasData!=t&&(this._prevHasData=t,this.menu&&this.menu.invalidate())},Object.defineProperty(e.prototype,"dateFormatter",{get:function(){return this._dateFormatter||(this._dateFormatter=new Md,this._dateFormatter.language=this.language),this.adapter.apply("dateFormatter",{dateFormatter:this._dateFormatter}).dateFormatter},set:function(t){this._dateFormatter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateFormat",{get:function(){return this.adapter.apply("dateFormat",{dateFormat:this._dateFormat}).dateFormat},set:function(t){this._dateFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateFields",{get:function(){return this._dateFields||(this._dateFields=new Fa),this.adapter.apply("dateFields",{dateFields:this._dateFields}).dateFields},set:function(t){this._dateFields=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormatter",{get:function(){return this._numberFormatter||(this._numberFormatter=new Wf,this._numberFormatter.language=this.language),this.adapter.apply("numberFormatter",{numberFormatter:this._numberFormatter}).numberFormatter},set:function(t){this._numberFormatter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this.adapter.apply("numberFormat",{numberFormat:this._numberFormat}).numberFormat},set:function(t){this._numberFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFields",{get:function(){return this._numberFields||(this._numberFields=new Fa),this.adapter.apply("numberFields",{numberFields:this._numberFields}).numberFields},set:function(t){this._numberFields=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationFormatter",{get:function(){return this._durationFormatter||(this._durationFormatter=new Xf,this._durationFormatter.language=this.language),this.adapter.apply("durationFormatter",{durationFormatter:this._durationFormatter}).durationFormatter},set:function(t){this._durationFormatter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationFormat",{get:function(){return this.adapter.apply("durationFormat",{durationFormat:this._durationFormat}).durationFormat},set:function(t){this._durationFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationFields",{get:function(){return this._durationFields||(this._durationFields=new Fa),this.adapter.apply("durationFields",{durationFields:this._durationFields}).durationFields},set:function(t){this._durationFields=t},enumerable:!0,configurable:!0}),e.prototype.generateDataFields=function(){var t=this;this._dataFields={},this.data.length&&la(this.data,function(e){sa(e,function(e,r){ba(t._dataFields[e])||(t._dataFields[e]=t.adapter.apply("dataFieldName",{name:e,field:e}).name)})})},e.prototype.isDateField=function(t){return this.adapter.apply("isDateField",{isDateField:this.dateFields.contains(t),field:t}).isDateField},e.prototype.isNumberField=function(t){return this.adapter.apply("isNumberField",{isNumberField:this.numberFields.contains(t),field:t}).isNumberField},e.prototype.isDurationField=function(t){return this.adapter.apply("isDurationField",{isDurationField:this.durationFields.contains(t),field:t}).isDurationField},e.prototype.getContentType=function(t){var e="";switch(t){case"png":case"gif":e="image/"+t;break;case"jpg":e="image/jpeg";break;case"svg":e="image/svg+xml";break;case"csv":e="text/csv";break;case"json":e="application/json";break;case"html":e="text/html";break;case"pdf":case"pdfdata":e="application/pdf";break;case"xlsx":e="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";}return this.adapter.apply("contentType",{contentType:e,type:t}).contentType},Object.defineProperty(e.prototype,"filePrefix",{get:function(){return this.adapter.apply("filePrefix",{filePrefix:this._filePrefix}).filePrefix},set:function(t){this._filePrefix=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this.adapter.apply("backgroundColor",{backgroundColor:this._backgroundColor}).backgroundColor},set:function(t){this._backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.adapter.apply("title",{title:this._title}).title},set:function(t){this._title=t},enumerable:!0,configurable:!0}),e.prototype.showPreloader=function(){var t=this.preloader;t&&(t.progress=.5,t.label.text="...")},e.prototype.hidePreloader=function(){var t=this.preloader;t&&(t.progress=1)},Object.defineProperty(e.prototype,"preloader",{get:function(){return this._sprite&&this._sprite.parent&&this._sprite.parent.preloader?this._sprite.parent.preloader:void 0},enumerable:!0,configurable:!0}),e.prototype.showTimeout=function(){this.showModal(this.adapter.apply("timeoutMessage",{message:this.language.translate("Export operation took longer than expected. Something might have gone wrong.")}).message)},e.prototype.hideTimeout=function(){this._timeoutTimeout&&(this.removeDispose(this._timeoutTimeout),this._timeoutTimeout=null),this.hideModal()},Object.defineProperty(e.prototype,"language",{get:function(){return this._language||(this._language=new Dc),this._language},set:function(t){this._language=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modal",{get:function(){return this._modal||(this._modal=new Kh,this._modal.adapter.add("classPrefix",function(t){return t=za.classNamePrefix+t})),this._modal},enumerable:!0,configurable:!0}),e.prototype.showModal=function(t,e){this.hideModal(),this.hidePreloader();var r=this.modal;r.container=this.sprite.svgContainer.SVGContainer,r.content=t,r.readerTitle=e,r.open()},e.prototype.hideModal=function(){this._modal&&this.modal.close()},e.prototype._canvg=function(){return Pa(this,void 0,void 0,function(){var t;return Ja(this,function(e){switch(e.label){case 0:return[4,(Nd(),nd)([["canvg.3d9b9647.js","enCv"],"enCv"])];case 1:return null!=(t=e.sent()).default?[2,t.default]:[2,t];}})})},Object.defineProperty(e.prototype,"canvg",{get:function(){return this._canvg()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pdfmake",{get:function(){return null==Yh&&(Yh=Gl()),Yh},enumerable:!0,configurable:!0}),e.prototype._xlsx=function(){return Pa(this,void 0,void 0,function(){return Ja(this,function(t){switch(t.label){case 0:return[4,(Nd(),nd)([["xlsx.a4f46591.js","yEtU"],"yEtU"])];case 1:return[2,t.sent()];}})})},Object.defineProperty(e.prototype,"xlsx",{get:function(){return this._xlsx()},enumerable:!0,configurable:!0}),e.prototype.setFormatOptions=function(t,e){this._formatOptions.setKey(t,e)},e.prototype.getFormatOptions=function(t){return this._formatOptions.getKey(t)},Object.defineProperty(e.prototype,"formatOptions",{get:function(){return this._formatOptions},enumerable:!0,configurable:!0}),e.prototype._disablePointers=function(){ba(this._spriteInteractionsEnabled)||(this._spriteInteractionsEnabled=this.sprite.interactionsEnabled),this.sprite.interactionsEnabled=!1},e.prototype._releasePointers=function(){ba(this._spriteInteractionsEnabled)&&!this._exportRunning&&(this.sprite.interactionsEnabled=this._spriteInteractionsEnabled)},e.prototype.hideNonExportableSprites=function(){var t=this;if(!this._objectsAlreadyHidden){var e=this.sprite.svgContainer;e&&la(e.nonExportableSprites,function(e){e.isHidden||e.isHiding||!e.visible||t._hiddenObjects.push(e),e.hide(0)}),this._objectsAlreadyHidden=!0}},e.prototype.restoreNonExportableSprites=function(){this._objectsAlreadyHidden&&(la(this._hiddenObjects,function(t){t.show(0)}),this._hiddenObjects=[],this._objectsAlreadyHidden=!1)},e.prototype.awaitValidSprites=function(){return Pa(this,void 0,void 0,function(){var t;return Ja(this,function(e){switch(e.label){case 0:return t=[],this.validateSprites.length&&la(this.validateSprites,function(e,r){e.invalid&&t.push(new Promise(function(t,r){e.events.once("validated",function(e){t()})}))}),t.length?[4,Promise.all(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2];}})})},e.prototype.processConfig=function(e){ca.registeredClasses.ExportMenu=ul,e&&ba(e.menu)&&!ba(e.menu.type)&&(e.menu.type="ExportMenu"),t.prototype.processConfig.call(this,e)},e.XLINK="http://www.w3.org/1999/xlink",e}(Uh);var db=["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin"];var xa=function(t){function e(){var e=t.call(this)||this;return e.properties={},e._eventDispatcher=new Rk(e),e._bindings={},e._isTemplate=!1,e._isPath=!1,e._inited=!1,e._ready=!1,e.isHiding=!1,e._isHidden=!1,e.isShowing=!1,e.isStandaloneInstance=!1,e._isActive=!1,e._mask=new nb,e._positionPrecision=3,e._language=new nb,e._exporting=new nb,e._exportable=!0,e._bbox={x:0,y:0,width:0,height:0},e.invalid=!1,e.positionInvalid=!1,e.propertyFields={},e.applyOnClones=!1,e._measuredWidthSelf=0,e._measuredHeightSelf=0,e.maxLeft=0,e.maxRight=0,e.maxTop=0,e.maxBottom=0,e.maxLeftSelf=0,e.maxRightSelf=0,e.maxTopSelf=0,e.maxBottomSelf=0,e._isDragged=!1,e._isResized=!1,e._disabled=!1,e._internalDisabled=!1,e._updateDisabled=!1,e._internalDefaultsApplied=!1,e.rollOutDelay=0,e.isBaseSprite=!1,e.shouldClone=!0,e.appeared=!1,e.ex=0,e.ey=0,e.dragWhileResize=!1,e.measureFailed=!1,e.preventShow=!1,e.cloneTooltip=!0,e.className="Sprite",e._disposers.push(e._eventDispatcher),Fb(e.uid),e.group=e.paper.addGroup("g"),e.setPropertyValue("scale",1),e.setPropertyValue("rotation",0),e.setPropertyValue("align","none"),e.setPropertyValue("valign","none"),e.setPropertyValue("pixelPerfect",!1),e.setPropertyValue("visible",!0),e.setPropertyValue("tooltipPosition","fixed"),e.setPropertyValue("verticalCenter","none"),e.setPropertyValue("horizontalCenter","none"),e.setPropertyValue("tooltipX",ia(50)),e.setPropertyValue("tooltipX",ia(50)),e.setPropertyValue("marginTop",0),e.setPropertyValue("marginBottom",0),e.setPropertyValue("marginLeft",0),e.setPropertyValue("marginRight",0),e.setPropertyValue("dx",0),e.setPropertyValue("dy",0),e.setPropertyValue("paddingTop",0),e.setPropertyValue("paddingBottom",0),e.setPropertyValue("paddingRight",0),e.setPropertyValue("paddingLeft",0),e.setPropertyValue("togglable",!1),e.setPropertyValue("hidden",!1),e.setPropertyValue("urlTarget","_self"),e.setPropertyValue("alwaysShowTooltip",!1),e.setPropertyValue("showTooltipOn","hover"),e._prevMeasuredWidth=0,e._prevMeasuredHeight=0,e._measuredWidth=0,e._measuredHeight=0,e._isMeasured=!0,e.invalidate(),e.applyTheme(),e._disposers.push(e.events),e._disposers.push(e.group),e._disposers.push(e._mask),e._disposers.push(e._language),e._disposers.push(e._exporting),e._disposers.push(new La(function(){sa(e._bindings,function(t,e){e.dispose()})})),e.setPropertyValue("interactionsEnabled",!0),e}return da(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return this._eventDispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adapter",{get:function(){return this._adapterO||(this._adapterO=new Kb(this)),this._adapterO},enumerable:!0,configurable:!0}),e.prototype.applyTheme=function(){t.prototype.applyTheme.call(this),za.autoSetClassName&&this.setClassName()},e.prototype.getCurrentThemes=function(){var t=this._themes;if(t)return t;var e=this._parent;return e?e.getCurrentThemes():ca.themes},e.prototype.applyInternalDefaults=function(){this._internalDefaultsApplied=!0},e.prototype.invalidate=function(){this.disabled||this._isTemplate||this.__disabled||this.invalid||(this.invalid=!0,ca.addToInvalidSprites(this),Aa.requestFrame())},e.prototype.validate=function(){this.dispatchImmediately("beforevalidated"),this._internalDefaultsApplied||this.applyInternalDefaults(),this.beforeDraw(),this.draw(),this.invalid=!1,ca.removeFromInvalidSprites(this),this.afterDraw()},e.prototype.invalidatePosition=function(){this.disabled||this._isTemplate||this.positionInvalid||(this.positionInvalid=!0,ca.addToInvalidPositions(this),Aa.requestFrame())},e.prototype.validatePosition=function(){var t=this.pixelX,e=this.pixelY,i=this.dx,r=this.dy,o=t+i,s=e+r;this._updateDisabled&&(this._internalDisabled?this.group.attr({display:"none"}):this.disabled||this.removeSVGAttribute("display"),this._updateDisabled=!1);var n=this.measure(),a=this.group.transformString;this.group.moveTo({x:o,y:s}),this.group.rotation=this.rotation,this.nonScaling?this.group.scale=this.scale/this.globalScale:this.group.scale=this.scale,(a!=this.group.transformString||n)&&(null==a?this.dispatch("transformed"):this.dispatchImmediately("transformed"),this.dispatch("positionchanged"),"hit"!=this.showTooltipOn&&"always"!=this.showTooltipOn||this.updateTooltipPosition()),t+i==o&&e+r==s&&(ca.removeFromInvalidPositions(this),this.positionInvalid=!1);var p=this._maskRectangle;p&&this._clipElement.moveTo({x:p.x-t,y:p.y-e})},e.prototype.beforeDraw=function(){},e.prototype.draw=function(){},e.prototype.afterDraw=function(){var t,e;if((this.isMeasured||"none"!==this.horizontalCenter||"none"!==this.verticalCenter)&&this.measureElement(),this._inited)this.dispatch("validated");else{if(this._adapterO)try{for(var i=be(this._adapterO.keys()),r=i.next();!r.done;r=i.next()){var o=r.value;switch(o){case"mask":case"fill":case"opacity":case"fillOpacity":case"stroke":case"strokeOpacity":case"strokeWidth":case"shapeRendering":case"strokeDasharray":case"strokeDashoffset":case"strokeLinecap":case"strokeLinejoin":case"textDecoration":case"fontSize":case"fontFamily":case"fontWeight":this[o]=this[o];}}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}this.applyFilters(),this.visible=this.visible,this.interactionsEnabled=this.getPropertyValue("interactionsEnabled"),this._inited=!0,this.showOnInit||(this.appeared=!0),this.hidden&&this.hide(0),this.applyMask(),this.dispatch("validated"),this.dispatch("inited"),this.dispatchReady()}"always"==this.showTooltipOn&&(!this.visible||this.disabled||this.__disabled?this.hideTooltip(0):this.showTooltip())},e.prototype.dispatchReady=function(){this.isReady()||(this._ready=!0,this.dispatch("ready"))},e.prototype.reinit=function(){this._inited=!1,this.setState(this.defaultState),this.invalidate()},e.prototype.handleGlobalScale=function(){this.dispatch("globalscalechanged"),this.nonScalingStroke&&(this.strokeWidth=this.strokeWidth),this.nonScaling&&this.validatePosition(),this.updateFilterScale()},e.prototype.updateFilterScale=function(){var t=this;ga(this.filters.iterator(),function(e){e.scale=t.globalScale})},e.prototype.removeFromInvalids=function(){ca.removeFromInvalidSprites(this),ca.removeFromInvalidPositions(this)},e.prototype.copyFrom=function(e){var i=this;t.prototype.copyFrom.call(this,e),this.isMeasured=e.isMeasured,this.states.copyFrom(e.states),e.filters.length>0&&e.filters.each(function(t){i.filters.push(t.clone())}),e._adapterO&&this.adapter.copyFrom(e._adapterO),e._interaction&&this.interactions.copyFrom(e.interactions),e._plugins&&this.plugins.copyFrom(e.plugins),this.configField=e.configField,this.applyOnClones=e.applyOnClones,this.disabled=e.disabled,this.virtualParent=e.virtualParent,this.exportable=e.exportable,e._tooltip&&(this._tooltip?this._tooltip.copyFrom(e.tooltip):e.cloneTooltip?this.tooltip=e.tooltip.clone():this._tooltip=e.tooltip),this._showSystemTooltip=e.showSystemTooltip,tc(e.propertyFields,this.propertyFields),tc(e.properties,this),e.fillModifier&&(this.fillModifier=e.fillModifier.clone()),e.strokeModifier&&(this.strokeModifier=e.strokeModifier.clone())},e.prototype.dispose=function(){if(!this.isDisposed()){if("always"==this.showTooltipOn&&this.tooltip&&this.tooltip.hide(),this.dispatchImmediately("beforedisposed"),this.isBaseSprite){if(this.htmlContainer)for(;this.htmlContainer.childNodes.length>0;)this.htmlContainer.removeChild(this.htmlContainer.firstChild);this.isBaseSprite=!1}if(t.prototype.dispose.call(this),this._adapterO&&this._adapterO.clear(),this.applyOnClones&&this._clones)for(var e=this._clones.length-1;e>=0;e--){this._clones.getIndex(e).dispose()}this._svgContainer&&this._svgContainer.dispose(),this._interactionDisposer&&(this._interactionDisposer.dispose(),this._interactionDisposer=void 0),this._urlDisposer&&this._urlDisposer.dispose(),this.removeFromInvalids(),this.element&&this.element.dispose(),this.group&&this.group.dispose(),this._numberFormatter&&this._numberFormatter.dispose(),this._focusFilter&&this._focusFilter.dispose();var i=this.stroke;!i||i instanceof Ga||!i.dispose||this.clonedFrom&&this.clonedFrom.stroke==i||i.dispose();var r=this.fill;if(!r||r instanceof Ga||!r.dispose||this.clonedFrom&&this.clonedFrom.fill==r||r.dispose(),ba(this.id)&&this.map.removeKey(this.id),this.parent=void 0,this._filters)for(;this._filters.length>0;){var o=this._filters.getIndex(0);o.dispose(),this._filters.removeValue(o)}this._alwaysShowDisposers=void 0}},Object.defineProperty(e.prototype,"isTemplate",{get:function(){return this._isTemplate},set:function(t){t=Ua(t),this._isTemplate!=t&&(this._isTemplate=t,this instanceof oa&&ga(this.children.iterator(),function(e){e.isTemplate=t}),t?(this.parent=this._parent,this.removeFromInvalids()):this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSystemTooltip",{get:function(){return ba(this._showSystemTooltip)?this._showSystemTooltip:this.virtualParent?this.virtualParent.showSystemTooltip:!!this._parent&&this._parent.showSystemTooltip},set:function(t){t=Ua(t),this._showSystemTooltip!=t&&(this._showSystemTooltip=t,this.applyAccessibility())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topParent",{get:function(){return this._topParent?this._topParent:this._parent?this._parent.topParent:void 0},set:function(t){this._topParent=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},set:function(t){if(!this._isTemplate){Fb(this.paper);var e=this._parent;e!=t&&(e&&e.children.removeValue(this),this._parent=t,t?(this.topParent=t.topParent,t.isTemplate&&(this.isTemplate=!0),this.baseId=t.baseId,t.children.push(this),this._tooltip&&!this._tooltipContainer&&(this._tooltip.parent=t.tooltipContainer),this._dataItem||(this.dataItem=t.dataItem),this.handleAlwaysShowTooltip(),this.dataItem&&this.applyAccessibility(),this.dispatchImmediately("parentset")):this.topParent=void 0)}},enumerable:!0,configurable:!0}),e.prototype.handleAlwaysShow=function(){this.showTooltip()},e.prototype.handleAlwaysShowTooltip=function(){var t=this,e=this._alwaysShowDisposers;if(e&&la(e,function(t){t.dispose()}),this._alwaysShowDisposers=[],"always"==this.showTooltipOn)for(;null!=t;){var i=t.events.on("visibilitychanged",this.handleAlwaysShow,this,!1);this.addDisposer(i),this._alwaysShowDisposers.push(i),t=t.parent}},Object.defineProperty(e.prototype,"virtualParent",{get:function(){return this._virtualParent},set:function(t){this._virtualParent=t,this.dataItem&&this.applyAccessibility()},enumerable:!0,configurable:!0}),e.prototype.appendDefs=function(){this.filterElement&&this.paper.appendDef(this.filterElement);var t=this.fill;t&&t.element&&this.paper.appendDef(t.element);var e=this.stroke;if(e&&e.element&&this.paper.appendDef(e.element),this.fillModifier&&this.fill instanceof Ga){var i=this.fillModifier.modify(this.fill);i&&i.element&&this.paper.appendDef(i.element)}if(this.strokeModifier&&this.stroke instanceof Ga){var r=this.strokeModifier.modify(this.stroke);r&&r.element&&this.paper.appendDef(r.element)}this._clipPath&&this.paper.appendDef(this._clipPath),!1===this._exportable&&(this.exportable=!1)},Object.defineProperty(e.prototype,"map",{get:function(){var t=this.topParent;return t?t.map:(this._map||(this._map=new Ta),this._map)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delayedMap",{get:function(){var t=this.topParent;return t?t.delayedMap:(this._delayedMap||(this._delayedMap=new Ta),this._delayedMap)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(t){if(this._id!=t){if(this._id=t,this.map.hasKey(t))throw Error("Duplicate id ("+t+") used on multiple objects.");this.map.setKey(t,this),za.autoSetClassName&&this.setClassName()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dom",{get:function(){return this.group.node},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paper",{get:function(){if(this._paper)return this._paper;var t=this._parent;return t?t.paper:Ld()},set:function(t){this.setPaper(t)},enumerable:!0,configurable:!0}),e.prototype.setPaper=function(t){return this._paper!=t&&(this._paper=t,this.appendDefs(),!0)},Object.defineProperty(e.prototype,"htmlContainer",{get:function(){if(this._htmlContainer)return this._htmlContainer;var t=this._parent;return t?t.htmlContainer:void 0},set:function(t){this._htmlContainer=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleElement",{get:function(){return this._titleElement||(this._titleElement=this.paper.add("title"),this.group.add(this._titleElement)),this._titleElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptionElement",{get:function(){return this._descriptionElement||(this._descriptionElement=this.paper.add("desc"),this.group.add(this._descriptionElement)),this._descriptionElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters||(this._filters=new Fa,this._disposers.push(this._filters.events.onAll(this.applyFilters,this)),this._disposers.push(new Sa(this._filters))),this._filters},enumerable:!0,configurable:!0}),e.prototype.setSVGAttributes=function(){this.fill=this.fill,this.opacity=this.opacity,this.fillOpacity=this.fillOpacity,this.stroke=this.stroke,this.strokeOpacity=this.strokeOpacity,this.shapeRendering=this.shapeRendering,this.strokeDasharray=this.strokeDasharray,this.strokeDashoffset=this.strokeDashoffset,this.strokeLinecap=this.strokeLinecap,this.strokeLinejoin=this.strokeLinejoin,this.focusable=this.focusable,this.tabindex=this.tabindex,this.role=this.role},e.prototype.setSVGAttribute=function(t){this.group.attr(t)},e.prototype.removeSVGAttribute=function(t){this.group.removeAttr(t)},e.prototype.setClassName=function(){var t=this.className,e=za.classNamePrefix;this.element&&this.element.addClass(e+t),this.group.addClass(e+t+"-group"),ba(this.id)&&this.group.addClass(e+this.id),this.userClassName&&this.group.addClass(this.userClassName)},e.prototype.uidAttr=function(){return this.setSVGAttribute({id:this.uid}),this.uid},e.prototype.updateClipPath=function(){var t=this._clipElement;t&&t.moveTo({x:this.mask.pixelX,y:this.mask.pixelY})},e.prototype.createClipPath=function(){if(!this._clipPath){this._clipPath=this.paper.addGroup("clipPath"),this.paper.appendDef(this._clipPath),this._disposers.push(this._clipPath);var t=ca.getUniqueId();this._clipPath.attr({id:t}),this.group.attr({"clip-path":"url(\""+Gd()+t+"\")"})}},e.prototype.applyMask=function(){var t=this.mask;if(this._clipPath&&t)if(t instanceof oa){this._clipElement.attr({width:wa(0,t.pixelWidth),height:wa(0,t.pixelHeight)});var e=Hb({x:t.pixelX,y:t.pixelY},t.parent,this);this._clipPath.x=e.x,this._clipPath.y=e.y}else t.element&&t.element!=this._clipElement&&(this._clipElement=t.element,this._clipPath.add(this._clipElement)),this._clipPath.scale=t.scale,this._clipPath.x=t.pixelX,this._clipPath.y=t.pixelY,this._clipPath.rotation=t.rotation},e.prototype.applyFilters=function(){var t=this;if(this._filters&&this._filters.length>0){var e=100,i=100;this.filterElement?this.filterElement.removeChildNodes():(this.filterElement=this.paper.addGroup("filter"),this._disposers.push(this.filterElement)),this.paper.appendDef(this.filterElement);var r="filter-"+this.uid;this.filterElement.attr({id:r}),ga(this.filters.iterator(),function(r){r.sprite=t,r.paper=t.paper,t.filterElement.attr({filterUnits:r.filterUnits}),r.appendPrimitives(t.filterElement),r.width>e&&(e=r.width),r.height>i&&(i=r.height),r.scale=t.globalScale});var o=e+"%",s=i+"%";this.filterElement.attr({width:o,height:s,x:-(e-100)/2+"%",y:-(i-100)/2+"%"}),this.group.attr({filter:"url(\""+Gd()+r+"\")"})}else this.filterElement&&(this.group.removeAttr("filter"),this.filterElement.removeChildNodes())},e.prototype.removeClipPath=function(){this._clipPath&&(this.removeDispose(this._clipPath),this._clipPath=void 0)},e.prototype.setElement=function(t){this.element=t,this.setSVGAttributes(),this.applyAccessibility()},Object.defineProperty(e.prototype,"element",{get:function(){return this._element},set:function(t){this.removeElement(),this._element=t,this.group.add(t),t.node instanceof SVGPathElement&&(this._isPath=!0),this.invalid||this.validate(),za.autoSetClassName&&this.setClassName()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"svgContainer",{get:function(){return this._svgContainer?this._svgContainer:this._parent?this._parent.svgContainer:void 0},set:function(t){this._svgContainer=t},enumerable:!0,configurable:!0}),e.prototype.measureElement=function(){if(this.element)if(this.definedBBox)this._bbox=this.definedBBox;else{var t=this.element.getBBox();this._bbox={x:t.x,y:t.y,width:t.width,height:t.height}}},e.prototype.updateCenter=function(){if(this.element){var t=this.element.transformString,e=this.bbox,i=0,r=0,o=e.x,s=e.y,n=e.width,a=e.height,p=this.pixelPaddingLeft,h=this.pixelPaddingRight,l=this.pixelPaddingTop,u=this.pixelPaddingBottom,c=wa(n+p+h,this.pixelWidth),d=wa(a+l+u,this.pixelHeight),m=e.x,$=e.x+c,f=e.y,y=e.y+d,g=this.horizontalCenter,b=this.verticalCenter;switch(g){case"none":i=o+p;break;case"left":i=p;break;case"middle":i=p-(n+h+p)/2;break;case"right":i=-h-n;}switch(b){case"none":r=s+l;break;case"top":r=l;break;case"middle":r=l-(a+u+l)/2;break;case"bottom":r=-u-a;}this._measuredHeight=d,this._measuredWidth=c;var v=ha(i-o,this._positionPrecision,!0),P=ha(r-s,this._positionPrecision,!0);this.ex=v-p,this.ey=P-l,this.maxLeft=m+v-p,this.maxRight=$+v-p,this.maxTop=f+P-l,this.maxBottom=y+P-l,this.pixelPerfect&&0==za.pixelPerfectPrecision&&(v-=.5,P-=.5),this.element.moveTo({x:v,y:P}),t!=this.element.transformString&&this.dispatchImmediately("transformed")}},e.prototype.measure=function(){this.updateCenter();var t=this._measuredWidth,e=this._measuredHeight,i=this.maxLeft,r=this.maxRight,o=this.maxTop,s=this.maxBottom;this._measuredWidthSelf=t,this._measuredHeightSelf=e;var n=this._positionPrecision;if(this.maxLeftSelf=this.maxLeft,this.maxRightSelf=this.maxRight,this.maxTopSelf=this.maxTop,this.maxBottomSelf=this.maxBottom,0!==this.rotation||1!==this.scale||this.nonScaling){this.nonScalingStroke&&(this.strokeWidth=this.strokeWidth);var a=this.paper.svg,p=a.createSVGMatrix(),h=this.rotation,l=this.scale;this.nonScaling&&(l=this.scale/this.globalScale),p.a=ka(h)*l,p.c=-ja(h)*l,p.e=0,p.b=ja(h)*l,p.d=ka(h)*l,p.f=0;var u=a.createSVGPoint();u.x=i,u.y=o;var c=a.createSVGPoint();c.x=r,c.y=o;var d=a.createSVGPoint();d.x=r,d.y=s;var m=a.createSVGPoint();m.x=i,m.y=s;var $=u.matrixTransform(p),f=c.matrixTransform(p),y=d.matrixTransform(p),g=m.matrixTransform(p);i=Math.min($.x,f.x,y.x,g.x),r=Math.max($.x,f.x,y.x,g.x),o=Math.min($.y,f.y,y.y,g.y),t=r-i,e=(s=Math.max($.y,f.y,y.y,g.y))-o,this.maxLeft=ha(i,n,!0),this.maxRight=ha(r,n,!0),this.maxTop=ha(o,n,!0),this.maxBottom=ha(s,n,!0)}return this._measuredWidth=ha(t,n,!0),this._measuredHeight=ha(e,n,!0),(this._measuredWidth!=this._prevMeasuredWidth||this._measuredHeight!=this._prevMeasuredHeight)&&(this._prevMeasuredHeight=this._measuredHeight,this._prevMeasuredWidth=this._measuredWidth,this.dispatch("sizechanged"),(this.isHover||"hit"==this.showTooltipOn||"always"==this.showTooltipOn)&&this.tooltip&&this.tooltip.visible&&(ba(this.tooltipText)||ba(this.tooltipHTML))&&this.updateTooltipPosition(),!0)},e.prototype.insertBefore=function(t){var e=this._parent;if(e){var i=e.children.indexOf(t);-1!==i&&(e.children.moveValue(this,i),e.sortChildren())}return this},e.prototype.insertAfter=function(t){var e=this._parent;if(e){var i=e.children.indexOf(t);-1!==i&&(e.children.moveValue(this,i+1),e.sortChildren())}return this},e.prototype.removeElement=function(){this._element&&(this.removeDispose(this._element),this._element=void 0)},e.prototype.getRelativeX=function(t){return t instanceof Da?t.value:this._parent?t/this._parent.innerWidth:0},e.prototype.getRelativeY=function(t){return t instanceof Da?t.value:this._parent?t/this._parent.innerHeight:0},e.prototype.getPixelX=function(t){var e=0;if(aa(t))e=t;else if(t instanceof Da){var i=t.value;this._parent&&(e=ha(this._parent.innerWidth*i,this._positionPrecision,!0))}return e},e.prototype.getPixelY=function(t){var e=0;if(aa(t))e=t;else if(t instanceof Da){var i=t.value;this._parent&&(e=ha(this._parent.innerHeight*i,this._positionPrecision,!0))}return e},e.prototype.moveTo=function(t,e,i,r){this.isDragged&&!r||(t&&(aa(t.x)&&this.setPropertyValue("x",ha(t.x,this._positionPrecision,!0)),aa(t.y)&&this.setPropertyValue("y",ha(t.y,this._positionPrecision,!0))),aa(e)&&(this.rotation=e),aa(i)&&(this.scale=i),this.invalidatePosition())},Object.defineProperty(e.prototype,"mask",{get:function(){return this._adapterO?this._adapterO.apply("mask",this._mask.get()):this._mask.get()},set:function(t){var e=this;this._mask.get()!==t&&(t?(this.createClipPath(),t instanceof oa?this._clipElement=this.paper.add("rect"):(t.isMeasured=!1,t.element&&(this._clipElement=t.element)),this._clipElement&&this._clipPath.add(this._clipElement),this._mask.set(t,new Ya([t.events.on("maxsizechanged",function(){e.inited&&e.applyMask()},void 0,!1),t.events.on("validated",this.applyMask,this,!1),t.events.on("positionchanged",this.applyMask,this,!1)])),this.applyMask()):(this._mask.reset(),this.group.removeAttr("clip-path"),this.removeClipPath()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maskRectangle",{get:function(){return this._maskRectangle},set:function(t){t?(this.createClipPath(),this._clipElement||(this._clipElement=this.paper.add("rect"),this._clipPath.add(this._clipElement)),this._clipElement.attr({width:t.width,height:t.height})):(this.removeClipPath(),this._clipElement=void 0),this._maskRectangle=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMeasured",{get:function(){return this._isMeasured},set:function(t){(t=Ua(t))||(this._measuredWidth=0,this._measuredHeight=0),this._isMeasured!=t&&(this._isMeasured=t,this.invalidatePosition())},enumerable:!0,configurable:!0}),e.prototype.hitTest=function(t){this.invalid&&this.validate(),t.invalid&&t.validate();var e=this.pixelX+this.maxLeft,i=this.pixelY+this.maxTop,r=e+this.maxRight,o=i+this.maxBottom,s=t.pixelX+t.maxLeft,n=t.pixelY+t.maxTop,a=s+t.maxRight,p=n+t.maxBottom;return!(s>r||a<e||n>o||p<i)},Object.defineProperty(e.prototype,"inited",{get:function(){return this._inited},enumerable:!0,configurable:!0}),e.prototype.isReady=function(){return this._ready},Object.defineProperty(e.prototype,"states",{get:function(){if(!this._states){var t=new ze;this._states=new Dd(t),this._disposers.push(this._states.events.on("insertKey",this.processState,this,!1)),this._disposers.push(this._states.events.on("setKey",this.processState,this,!1)),this._disposers.push(new Pc(this._states)),this._disposers.push(t)}return this._states},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hiddenState",{get:function(){if(!this.states.getKey("hidden")){var t=this.states.create("hidden");t.properties.opacity=0,t.properties.visible=!1}return this.states.getKey("hidden")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultState",{get:function(){this.states.getKey("default")||(this.states.create("default").properties.opacity=1);return this.states.getKey("default")},enumerable:!0,configurable:!0}),e.prototype.processState=function(t){var e=t.newValue;if(e.sprite=this,e.name=t.key,(this.states.hasKey("hover")||"hover"==this.showTooltipOn&&(ba(this.tooltipHTML)||ba(this.tooltipText)))&&(this.hoverable=!0),(this.states.hasKey("down")||"hover"==this.showTooltipOn&&(ba(this.tooltipHTML)||ba(this.tooltipText)))&&(this.clickable=!0),this.states.hasKey("focus")&&(this.focusable=!0),this.applyOnClones)for(var i=this.clones.values,r=i.length,o=0;o<r;++o){var s=i[o];s.isDisposed()||s.states.setKey(e.name,e)}},Object.defineProperty(e.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new kd(this._animations))),this._animations},enumerable:!0,configurable:!0}),e.prototype.getSvgPoint=function(t){try{var e=this.htmlContainer.getBoundingClientRect();return{x:t.x-e.left,y:t.y-e.top}}catch(i){return t}},e.prototype.animate=function(t,e,i){return new bc(this,t,e,i).start()},e.prototype.setState=function(t,e,i){var r;if(t instanceof ze)this.states.setKey(t.name,t),r=t;else if(!(r=this.states.getKey(t)))return;if("hover"==r.name){if(this.isHidden)return;this.isHover=!0}return"hidden"==r.name?this.isHiding=!0:this.visible||this.setVisibility(r.properties.visible||this.defaultState.properties.visible),"active"==r.name&&(this.isActive=!0),aa(e)||(e=r.transitionDuration),ba(i)||(i=r.transitionEasing),this.transitTo(r,e,i)},e.prototype.applyCurrentState=function(t){var e=this.setState(this.defaultState,t);return this.isHover&&(e=this.setState("hover",t)),this.isDown&&this.interactions.downPointers.length&&(e=this.setState("down",t)),this.isFocused=this.isFocused,this.isActive&&(e=this.setState("active",t),this.isHover&&this.states.hasKey("hoverActive")&&(e=this.setState("hoverActive",t))),e},e.prototype.transitTo=function(t,e,i){var r,o=this,s=[],n=t.allValues;if(sa(n,function(t,e){var i=o[t];if(e!=i&&null==o.defaultState.properties[t]&&(o.defaultState.properties[t]=i),"__unset"!=e){var r={from:i,to:e,property:t};s.push(r)}}),s.length>0&&((r=this.animate(s,e,i))&&!r.isFinished()?this._disposers.push(r.events.on("animationended",function(){o.dispatchImmediately("transitionended")})):this.dispatchImmediately("transitionended")),t.filters.length>0){var a=[];ga(t.filters.iterator(),function(t){var r=t.clone();a.push(r);var s=[];ga(o.filters.iterator(),function(t){t.className==r.className&&(rf(o.defaultState.filters.iterator(),function(t){return t.className===r.className})||o.defaultState.filters.push(t),sa(r.properties,function(e,i){var r=t.properties[e];r!=i&&s.push({property:e,from:r,to:i})}))}),r.animate(s,e,i)}),this.filters.clear(),this.filters.pushAll(a)}return r},e.prototype.isInTransition=function(){return this.animations.length>0},Object.defineProperty(e.prototype,"isHover",{get:function(){return!!this.isInteractive()&&this.interactions.isHover},set:function(t){(t=Ua(t))!==this.isHover&&this.isInteractive()&&(this.interactions.isHover=t,t?this.handleOver():(this.interactions.isRealHover=!1,this.handleOut()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDragged",{get:function(){return this._isDragged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isResized",{get:function(){return this._isResized},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDown",{get:function(){return!!this.isInteractive()&&this.interactions.isDown},set:function(t){t=Ua(t),this.isInteractive()&&this.isDown!=t&&(this.interactions.isDown=t,t?this.handleDown():this.handleUp())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFocused",{get:function(){return!!this.isInteractive()&&this.interactions.isFocused},set:function(t){t=Ua(t),this.focusable&&this.isFocused!=t&&this.isInteractive()&&(this.interactions.isFocused=t,!0===t?this.handleFocus():this.handleBlur())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},set:function(t){this.setActive(t)},enumerable:!0,configurable:!0}),e.prototype.setActive=function(t){t=Ua(t),this._isActive!==t&&(this._isActive=t,t&&this.states.hasKey("active")?(this.setState("active"),this.isHover&&this.states.hasKey("hoverActive")&&this.setState("hoverActive")):this.applyCurrentState(),this.dispatchImmediately("toggled"))},Object.defineProperty(e.prototype,"disabled",{get:function(){var t=this.getPropertyValue("disabled");return ba(t)?t:this.virtualParent?this.virtualParent.disabled:!!this._parent&&this._parent.disabled},set:function(t){this.setDisabled(t)},enumerable:!0,configurable:!0}),e.prototype.setDisabled=function(t){if(t=Ua(t),this.getPropertyValue("disabled")!=t){if(this.setPropertyValue("disabled",t,!0),t)this.parent=this._parent,this.removeFromInvalids(),this.group.attr({display:"none"}),this.dispatch("disabled");else{if(this._parent){var e=this._parent.element;e.hasChild(this.group)||e.add(this.group)}this instanceof oa?(this.deepInvalidate(),this._background&&this._background.invalidate()):this.invalidate(),this.__disabled||this.removeSVGAttribute("display"),this.dispatch("enabled")}return this.dispatch("transformed"),Aa.requestFrame(),!0}return!1},Object.defineProperty(e.prototype,"__disabled",{get:function(){return this._internalDisabled},set:function(t){this._internalDisabled!=t&&(this._internalDisabled=t,this._updateDisabled=!0,this.invalidatePosition(),t||this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormatter",{get:function(){return this._numberFormatter?this._numberFormatter:this.virtualParent?this.virtualParent.numberFormatter:this._parent?this._parent.numberFormatter:(this._numberFormatter=new Wf,this._numberFormatter.language=this.language,this.numberFormatter)},set:function(t){this._numberFormatter=t,this._numberFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateFormatter",{get:function(){return this._dateFormatter?this._dateFormatter:this.virtualParent?this.virtualParent.dateFormatter:this._parent?this._parent.dateFormatter:(this._dateFormatter=new Md,this._dateFormatter.language=this.language,this.dateFormatter)},set:function(t){this._dateFormatter=t,this._dateFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationFormatter",{get:function(){return this._durationFormatter?this._durationFormatter:this.virtualParent?this.virtualParent.durationFormatter:this._parent?this._parent.durationFormatter:(this._durationFormatter=new Xf,this._durationFormatter.language=this.language,this.durationFormatter)},set:function(t){this._durationFormatter=t,this._durationFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){var t=this._language.get();return t||(this.virtualParent?this.virtualParent.language:this._parent?this._parent.language:(t=new Dc,this.language=t,t))},set:function(t){var e=this;this._language.get()!==t&&this._language.set(t,t.events.on("localechanged",function(t){if(e._numberFormatter&&(e._numberFormatter.language=e.language),e._dateFormatter&&(e._dateFormatter.language=e.language),e._durationFormatter&&(e._durationFormatter.language=e.language),e._exporting.get()){var i=e._exporting.get();i.numberFormatter.language=e.language,i.dateFormatter.language=e.language,i.durationFormatter.language=e.language,i.language=e.language}e instanceof oa&&e.deepInvalidate()}))},enumerable:!0,configurable:!0}),e.prototype.populateString=function(t,e){if(ba(t)){t=hf(t);var i=(t=uc().escape(t)).match(/\{([^}]+)\}/g),r=void 0;if(i)for(r=0;r<i.length;r++){var o=i[r].replace(/\{([^}]+)\}/,"$1"),s=this.getTagValue(o,"",e);ba(s)||(s=""),t=t.split(i[r]).join(s)}t=uc().unescape(t)}else t="";return this._adapterO?this._adapterO.apply("populateString",t):t},e.prototype.getTagValue=function(t,e,i){var r;ba(i)||(i=this.dataItem);for(var o,s=[],n=/([^.]+)\(([^)]*)\)|([^.]+)/g;null!==(o=n.exec(t));)if(o[3])s.push({prop:o[3]});else{var a=[];if(""!=kh(o[2]))for(var p=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g,h=void 0;null!==(h=p.exec(o[2]));)a.push(h[1]||h[2]||h[3]);s.push({method:o[1],params:a})}if(i){r=this.getTagValueFromObject(s,i.values),ba(r)&&!Wa(r)||(r=this.getTagValueFromObject(s,i));var l=i.dataContext;!ba(r)&&l&&(r=this.getTagValueFromObject(s,i.dataContext),ba(r)||(r=this.getTagValueFromObject([{prop:t}],l)),!ba(r)&&l.dataContext&&(r=this.getTagValueFromObject(s,l.dataContext))),!ba(r)&&i.component&&i.component.dataItem!==i&&(r=i.component.getTagValue(t,e))}return ba(r)||(r=this.getTagValueFromObject(s,this.populateStringFrom||this)),!ba(r)&&this._parent&&(r=this._parent.getTagValue(t,e)),r},e.prototype.getTagValueFromObject=function(t,e,i){for(var r=e,o=!1,s=0,n=t.length;s<n;s++){var a=t[s];if(a.prop){if(r=r[a.prop],!ba(r))return}else switch(a.method){case"formatNumber":var p=Df(r);ba(p)&&(r=this.numberFormatter.format(p,i||a.params[0]||void 0),o=!0);break;case"formatDate":var h=void 0;if(h=Ca(r)?this.dateFormatter.parse(r):mh(r),!xd(h)||yb(h.getTime()))return;ba(h)&&(r=this.dateFormatter.format(h,i||a.params[0]||void 0),o=!0);break;case"formatDuration":var l=Df(r);ba(l)&&(r=this.durationFormatter.format(l,i||a.params[0]||void 0,a.params[1]||void 0),o=!0);break;case"urlEncode":case"encodeURIComponent":r=encodeURIComponent(r);break;default:r[a.method]&&r[a.method].apply(this,a.params);}}if(!o){var u=[{method:"",params:i}];if(ba(i)){var c=fk(i);c===ue?u[0].method="formatNumber":c===ve?u[0].method="formatDate":c===Jf&&(u[0].method="formatDuration")}else aa(r)?(u[0].method="formatNumber",u[0].params=""):xd(r)&&(u[0].method="formatDate",u[0].params="");u[0].method&&(r=this.getTagValueFromObject(u,r))}return r},Object.defineProperty(e.prototype,"dataItem",{get:function(){if(!this._dataItem){if(this.virtualParent)return this.virtualParent.dataItem;if(this._parent)return this._parent.dataItem}return this._dataItem},set:function(t){this.setDataItem(t)},enumerable:!0,configurable:!0}),e.prototype.setDataItem=function(t){var e=this;if(this._dataItem!=t){if(this._dataItem=t,t){if(this.configField){var i=t.dataContext;i&&(this.config=i[this.configField],!this.config&&i.dataContext&&(this.config=i.dataContext[this.configField]))}var r=t.dataContext;if(r){var o=r.dataContext;sa(this.propertyFields,function(t,i){if(ba(r[i]))e[t]=r[i];else if(o){var s=o[i];if(ba(s))e[t]=s}})}}this.invalidate()}},e.prototype.getPropertyValue=function(t){var e=this.properties[t];return this._isTemplate||(this._adapterO&&(e=this._adapterO.apply(t,e)),e=wf.applyAll(this,t,e)),e},e.prototype.setColorProperty=function(t,e,i){var r=this.properties[t];return!(e instanceof Ga&&r instanceof Ga&&e.toString()==r.toString())&&this.setPropertyValue(t,e,i)},e.prototype.setPercentProperty=function(t,e,i,r,o,s){if(e=rj(e),aa(e))return aa(o)&&(e=ha(e,o,s)),this.setPropertyValue(t,e,i,r);var n=this.properties[t];return!(e instanceof Da&&n instanceof Da&&e.value==n.value)&&this.setPropertyValue(t,e,i,r)},e.prototype.setPropertyValue=function(t,e,i,r){if(this.properties[t]!==e&&!this.isDisposed()){if(this.properties[t]=e,this.events.isEnabled("propertychanged")){var o={type:"propertychanged",target:this,property:t};this.events.dispatchImmediately("propertychanged",o)}if(i&&this.invalidate(),r&&this.invalidatePosition(),this.applyOnClones)for(var s=this.clones.values,n=s.length,a=0;a<n;++a){var p=s[a];p.isDisposed()||(p[t]=e)}return!0}return!1},e.prototype.bind=function(t,e,i,r){var o=this;void 0===i&&(i=t),ba(this._bindings[t])&&this._bindings[t].dispose(),this[t]=e[i],this._bindings[t]=e.events.on("propertychanged",function(s){if(s.property===i){var n=e[i];r&&(n=r(n)),o[t]=n}})},e.prototype.observe=function(t,e,i,r){var o=this;return new Ya(vd(Lg(t),function(t){return o.events.on("propertychanged",function(r){r.property===t&&e.call(i,r)},i,r)}))},e.prototype.applyAccessibility=function(){var t=this.readerTitle,e=this.readerDescription,i=this.role,r=this.readerHidden,o=this.readerChecked,s=this.readerControls,n=this.readerLive,a=this.readerOrientation,p=this.readerValueNow,h=this.readerValueText,l=[],u=[],c=this.readerLabelledBy;c&&l.push(c);var d=this.readerDescribedBy;if(d&&u.push(d),t){if(l.length||this.showSystemTooltip){var m=this.titleElement,$=this.uid+"-title";m.node.textContent!=t&&(m.node.textContent=t,m.attr({id:$})),l.push($)}else this._titleElement&&(this.group.removeElement(this._titleElement),this._titleElement=void 0),this.setSVGAttribute({"aria-label":t});}else this.removeSVGAttribute("aria-label"),this._titleElement&&(this.group.removeElement(this._titleElement),this._titleElement=void 0);if(e){var f=this.descriptionElement,y=this.uid+"-description";f.node.textContent!=e&&(f.node.textContent=e,f.attr({id:y})),u.push(y)}else this._descriptionElement&&(this.group.removeElement(this._descriptionElement),this._descriptionElement=void 0);l.length?this.setSVGAttribute({"aria-labelledby":l.join(" ")}):this.removeSVGAttribute("aria-labelledby"),u.length?this.setSVGAttribute({"aria-describedby":u.join(" ")}):this.removeSVGAttribute("aria-describedby"),i?this.setSVGAttribute({role:i}):this.removeSVGAttribute("role"),r?this.setSVGAttribute({"aria-hidden":"true"}):this.removeSVGAttribute("aria-hidden"),o?this.setSVGAttribute({"aria-checked":"true"}):!1===o?this.setSVGAttribute({"aria-checked":"false"}):this.removeSVGAttribute("aria-checked"),s?this.setSVGAttribute({"aria-controls":s}):this.removeSVGAttribute("aria-controls"),n?this.setSVGAttribute({"aria-live":n}):this.removeSVGAttribute("aria-live"),a?this.setSVGAttribute({"aria-orientation":a}):this.removeSVGAttribute("aria-orientation"),p?this.setSVGAttribute({"aria-valuenow":p}):this.removeSVGAttribute("aria-valuenow"),h?this.setSVGAttribute({"aria-valuetext":h}):this.removeSVGAttribute("aria-valuetext")},Object.defineProperty(e.prototype,"readerTitle",{get:function(){var t=this.getPropertyValue("readerTitle");return ba(t)&&this.dataItem?this.populateString(t):t},set:function(t){t=wb(t),this.setPropertyValue("readerTitle",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerDescription",{get:function(){var t=this.getPropertyValue("readerDescription");return ba(t)&&this.dataItem?this.populateString(t):this.getPropertyValue("readerDescription")},set:function(t){t=wb(t),this.setPropertyValue("readerDescription",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"role",{get:function(){return this.getPropertyValue("role")},set:function(t){t=wb(t),this.setPropertyValue("role",t)&&(this.applyAccessibility(),"slider"==t&&(this.setSVGAttribute({"aria-valuemin":"0"}),this.setSVGAttribute({"aria-valuemax":"100"})))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerHidden",{get:function(){return this.getPropertyValue("readerHidden")},set:function(t){t=Ua(t),this.setPropertyValue("readerHidden",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerChecked",{get:function(){return this.getPropertyValue("readerChecked")},set:function(t){t=Ua(t),this.setPropertyValue("readerChecked",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerControls",{get:function(){return this.getPropertyValue("readerControls")},set:function(t){t=wb(t),this.setPropertyValue("readerControls",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerLive",{get:function(){return this.getPropertyValue("readerLive")},set:function(t){t=wb(t),this.setPropertyValue("readerLive",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerLabelledBy",{get:function(){return this.getPropertyValue("readerLabelledBy")},set:function(t){t=wb(t),this.setPropertyValue("readerLabelledBy",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerDescribedBy",{get:function(){return this.getPropertyValue("readerDescribedBy")},set:function(t){t=wb(t),this.setPropertyValue("readerDescribedBy",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerOrientation",{get:function(){return this.getPropertyValue("readerOrientation")},set:function(t){t=wb(t),this.setPropertyValue("readerOrientation",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerValueNow",{get:function(){return this.getPropertyValue("readerValueNow")},set:function(t){t=wb(t),this.setPropertyValue("readerValueNow",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerValueText",{get:function(){return this.getPropertyValue("readerValueText")},set:function(t){t=wb(t),this.setPropertyValue("readerValueText",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyboardOptions",{get:function(){if(!this.interactions.keyboardOptions){if(this.virtualParent)return this.virtualParent.keyboardOptions;if(this._parent)return this._parent.keyboardOptions}return this.interactions.keyboardOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseOptions",{get:function(){if(!this.interactions.mouseOptions){if(this.virtualParent)return this.virtualParent.mouseOptions;if(this._parent)return this._parent.mouseOptions}return this.interactions.mouseOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interactions",{get:function(){if(!this._interaction){var t=va().getInteraction(this.dom);this._interaction=t,this._interaction.clickable=this.clickable,this._interaction.hoverable=this.hoverable,this._interaction.trackable=this.trackable,this._interaction.draggable=this.draggable,this._interaction.swipeable=this.swipeable,this._interaction.resizable=this.resizable,this._interaction.wheelable=this.wheelable,this._interaction.contextMenuDisabled=this.contextMenuDisabled,this._interaction.inert=this.inert,this._interaction.sprite=this,this._disposers.push(this._interaction)}return this._interaction},enumerable:!0,configurable:!0}),e.prototype.isInteractive=function(){return!!this._interaction},Object.defineProperty(e.prototype,"focusable",{get:function(){return this.getPropertyValue("focusable")},set:function(t){var e=this;t=Ua(t),this.setPropertyValue("focusable",t)&&(t||this.isInteractive())&&(this.interactions.focusable=t,t?(this.setSVGAttribute({focusable:t}),this._tabindex||(this.tabindex=0)):(this.removeSVGAttribute("focusable"),this.tabindex=void 0),this.interactions.setEventDisposer("sprite-focusable",t,function(){return new Ya([e.events.on("blur",e.handleBlur,e,!1),e.events.on("focus",e.handleFocus,e,!1)])}))},enumerable:!0,configurable:!0}),e.prototype.handleFocus=function(t){this.focusable&&(this.topParent&&(this.topParent.hasFocused=!0,this.topParent.focusedElement=this),this.focusFilter&&this.filters.push(this.focusFilter),this.hoverOnFocus&&(this.isHover=!0,this.handleOver()))},e.prototype.handleBlur=function(t){this.focusable&&(this.topParent&&(this.topParent.hasFocused=!1,this.topParent.focusedElement=void 0),this.focusFilter&&this.filters.removeValue(this.focusFilter),this.hoverOnFocus&&(this.isHover=!1,this.handleOut()))},Object.defineProperty(e.prototype,"focusFilter",{get:function(){var t=this._focusFilter;return t||(this.virtualParent?this.virtualParent.focusFilter:this._parent?this._parent.focusFilter:void 0)},set:function(t){this._focusFilter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoverOnFocus",{get:function(){return this.getPropertyValue("hoverOnFocus")},set:function(t){t!==this.hoverOnFocus&&this.setPropertyValue("hoverOnFocus",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabindex",{get:function(){var t=this._tabindex;return null!=t?t:this.virtualParent?this.virtualParent.tabindex:this._parent?this._parent.tabindex:void 0},set:function(t){t=Ra(t),this.setPropertyValue("tabindex",t)&&aa(t)&&(this.interactions.tabindex=t,this.setSVGAttribute({tabindex:t}),this._tabindex=t,this.focusable=t>-1||void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inertiaOptions",{get:function(){return!this.interactions.inertiaOptions&&this._parent?this._parent.inertiaOptions:this.interactions.inertiaOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"draggable",{get:function(){return this.getPropertyValue("draggable")},set:function(t){var e=this;t=Ua(t),this.setPropertyValue("draggable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.draggable=t,this.interactions.setEventDisposer("sprite-draggable",t,function(){return new Ya([e.events.on("down",e.handleDown,e,!1),e.events.on("dragstart",e.handleDragStart,e,!1),e.events.on("drag",e.handleDragMove,e,!1),e.events.on("dragstop",e.handleDragStop,e,!1)])}))},enumerable:!0,configurable:!0}),e.prototype.handleDragStart=function(t){this.interactions.isTouchProtected&&t.touch||(this.interactions.originalPosition={x:this.pixelX,y:this.pixelY},this._isDragged=!0,this.hideTooltip(0))},e.prototype.dragStart=function(t){this._isDragged=!0,va().dragStart(this.interactions,t)},e.prototype.handleDragStop=function(t){this.interactions.isTouchProtected&&t.touch||(this._isDragged=!1,this.showTooltip(),this.interactions.originalPosition=void 0)},e.prototype.dragStop=function(t,e){this._isDragged=!1,va().dragStop(this.interactions,t,e)},e.prototype.handleDragMove=function(t){if(!this.interactions.isTouchProtected||!t.touch){var e=this.interactions.originalPosition;if(e&&this._isDragged){var i=this._parent.globalScale*this.svgContainer.cssScale;this.moveTo({x:e.x+t.shift.x/i,y:e.y+t.shift.y/i},void 0,void 0,!0)}this.dispatchImmediately("dragged",t)}},Object.defineProperty(e.prototype,"inert",{get:function(){return this.getPropertyValue("inert")},set:function(t){t=Ua(t),this.setPropertyValue("inert",t)&&(t||this.isInteractive())&&(this.interactions.inert=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoverOptions",{get:function(){if(!this.interactions.hoverOptions){if(this.virtualParent)return this.virtualParent.hoverOptions;if(this._parent)return this._parent.hoverOptions}return this.interactions.hoverOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoverable",{get:function(){return this.getPropertyValue("hoverable")},set:function(t){var e=this;t=Ua(t),this.setPropertyValue("hoverable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.hoverable=t,this.interactions.setEventDisposer("sprite-hoverable",t,function(){return new Ya([e.events.on("over",e.handleOver,e,!1),e.events.on("out",e.handleOut,e,!1)])}))},enumerable:!0,configurable:!0}),e.prototype.handleOver=function(t){if(this._outTimeout&&this._outTimeout.dispose(),this.isHover){this.states.hasKey("hover")&&(this.isHidden||this.applyCurrentState());var e=void 0;t&&t.pointer&&(e=Bc(t.pointer.point,this.svgContainer.SVGContainer,this.svgContainer.cssScale)),"hover"==this.showTooltipOn&&this.showTooltip(e)}else"hover"==this.showTooltipOn&&this.hideTooltip(),!this.isHidden&&this.states.hasKey("hover")&&this.applyCurrentState()},e.prototype.handleOut=function(t){var e=this;this.tooltip&&this.tooltip.targetSprite==this&&this.tooltip.keepTargetHover?this._outTimeout=this.setTimeout(function(){e.tooltip.isHover||(e.tooltip.targetSprite==e&&e.hideTooltip(),e._outTimeout=e.setTimeout(e.handleOutReal.bind(e),e.rollOutDelay))},10):("hover"==this.showTooltipOn&&this.hideTooltip(),this._outTimeout=this.setTimeout(this.handleOutReal.bind(this),this.rollOutDelay))},e.prototype.handleOutReal=function(){this.isHidden||this.isHiding||!this.states.hasKey("hover")||this.applyCurrentState()},Object.defineProperty(e.prototype,"hitOptions",{get:function(){if(!this.interactions.hitOptions){if(this.virtualParent)return this.virtualParent.hitOptions;if(this._parent)return this._parent.hitOptions}return this.interactions.hitOptions},enumerable:!0,configurable:!0}),e.prototype.handleDown=function(t){1===this.interactions.downPointers.length&&(this.interactions.originalPosition={x:this.pixelX,y:this.pixelY},this.interactions.originalAngle=this.rotation,this.interactions.originalScale=this.scale,this.states.hasKey("down")&&this.setState("down"))},e.prototype.handleUp=function(t){var e=this;this._isResized=!1,this.states.hasKey("down")&&this.applyCurrentState(),"hit"==this.showTooltipOn&&(this.updateTooltipPosition(t.pointer?t.pointer.point:void 0),this._disposers.push(ca.events.once("exitframe",function(){e.showTooltip()})),this._disposers.push(va().body.events.once("down",function(t){e.hideTooltip()})))},Object.defineProperty(e.prototype,"clickable",{get:function(){return this.getPropertyValue("clickable")},set:function(t){var e=this;t=Ua(t),this.setPropertyValue("clickable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.clickable=t,this.interactions.setEventDisposer("sprite-clickable",t,function(){return new Ya([e.events.on("down",e.handleDown,e,!1),e.events.on("up",e.handleUp,e,!1)])}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"togglable",{get:function(){return this.getPropertyValue("togglable")},set:function(t){var e=this;t=Ua(t),this.setPropertyValue("togglable",t)&&(t||this.isInteractive())&&this.interactions.setEventDisposer("sprite-togglable",t,function(){return e.events.on("hit",e.handleToggle,e,!1)})},enumerable:!0,configurable:!0}),e.prototype.handleToggle=function(t){this.isActive=!this.isActive},Object.defineProperty(e.prototype,"contextMenuDisabled",{get:function(){return this.getPropertyValue("contextMenuDisabled")},set:function(t){t=Ua(t),this.setPropertyValue("contextMenuDisabled",t)&&(this.interactions.contextMenuDisabled=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this.getPropertyValue("url")},set:function(t){this.setPropertyValue("url",t)&&(this._urlDisposer&&this._urlDisposer.dispose(),pe(t)&&(this._urlDisposer=this.events.on("hit",this.urlHandler,this,!1),this.clickable=!0,this.cursorOverStyle=tb.pointer))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseId",{get:function(){return!this._baseId&&this._parent&&(this.baseId=this._parent.baseId),this._baseId},set:function(t){this.setBaseId(t)},enumerable:!0,configurable:!0}),e.prototype.setBaseId=function(t){t!=this._baseId&&(this.invalid&&(this.invalid=!1,ca.removeFromInvalidSprites(this),this.invalidate()),this._baseId=t)},Object.defineProperty(e.prototype,"baseSprite",{get:function(){return this.isBaseSprite?this:this._parent?this._parent.baseSprite:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"urlTarget",{get:function(){return this.getPropertyValue("urlTarget")},set:function(t){this.setPropertyValue("urlTarget",t)},enumerable:!0,configurable:!0}),e.prototype.urlHandler=function(t){if(pe(this.url)){var e=this.populateString(this.url);"_self"===this.urlTarget?window.location.href=e:window.open(e,this.urlTarget)}},Object.defineProperty(e.prototype,"swipeOptions",{get:function(){if(!this.interactions.swipeOptions){if(this.virtualParent)return this.virtualParent.swipeOptions;if(this._parent)return this._parent.swipeOptions}return this.interactions.swipeOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"swipeable",{get:function(){return this.getPropertyValue("swipeable")},set:function(t){t=Ua(t),this.setPropertyValue("swipeable",t)&&(this.applyCursorStyle(),(t||this.isInteractive())&&(this.interactions.swipeable=t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trackable",{get:function(){return this.getPropertyValue("trackable")},set:function(t){t=Ua(t),this.setPropertyValue("trackable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.trackable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wheelable",{get:function(){return this.getPropertyValue("wheelable")},set:function(t){this.setPropertyValue("wheelable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.wheelable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return this.getPropertyValue("resizable")},set:function(t){var e=this;t=Ua(t),this.setPropertyValue("resizable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.resizable=t,this.interactions.setEventDisposer("sprite-resizable",t,function(){return new Ya([e.events.on("down",e.handleDown,e,!1),e.events.on("resize",e.handleResize,e,!1)])}))},enumerable:!0,configurable:!0}),e.prototype.handleResize=function(t){if((!this.interactions.isTouchProtected||!t.touch)&&(this._isResized=!0,this.scale=this.interactions.originalScale*t.scale,this.validatePosition(),this.draggable||this.dragWhileResize)){this._isDragged=!1;var e=Bc(t.point1,this.htmlContainer,this.svgContainer.cssScale),i=Bc(t.point2,this.htmlContainer,this.svgContainer.cssScale),r=ge(e,i),o=id(t.startPoint1,this._parent),s=id(t.startPoint2,this._parent),n=this.interactions.originalPosition,a=this.interactions.originalScale;if(n){var p={x:(o.x-n.x)/a,y:(o.y-n.y)/a},h={x:(s.x-n.x)/a,y:(s.y-n.y)/a},l=ge(p,h),u=ac(r,this._parent);this.moveTo({x:u.x-l.x*this.scale,y:u.y-l.y*this.scale},void 0,void 0,!0)}}},Object.defineProperty(e.prototype,"cursorOptions",{get:function(){if(!this.interactions.cursorOptions){if(this.virtualParent)return this.virtualParent.cursorOptions;if(this._parent)return this._parent.cursorOptions}return this.interactions.cursorOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorOverStyle",{set:function(t){this.cursorOptions.overStyle||(this.interactions.cursorOptions={defaultStyle:this.cursorOptions.defaultStyle}),this.cursorOptions.overStyle=t,va().applyCursorOverStyle(this.interactions)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorDownStyle",{set:function(t){this.cursorOptions.downStyle=t},enumerable:!0,configurable:!0}),e.prototype.applyCursorStyle=function(){},Object.defineProperty(e.prototype,"interactionsEnabled",{get:function(){return!1!==this.getPropertyValue("interactionsEnabled")&&(this.virtualParent?this.virtualParent.interactionsEnabled:!this._parent||this._parent.interactionsEnabled)},set:function(t){if(t=Ua(t),this.setPropertyValue("interactionsEnabled",t)){var e=null;t?this.group.node.style.pointerEvents="":e="none",this.group.node.style.pointerEvents=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exporting",{get:function(){return this.getExporting()},set:function(t){this._exporting.set(t,t)},enumerable:!0,configurable:!0}),e.prototype.getExporting=function(){var t=this._exporting.get();return t||(!this.isStandaloneInstance&&this._parent?this._parent.exporting:((t=new Ll(this.svgContainer.SVGContainer)).sprite=this,t.language=this.language,t.numberFormatter=this.numberFormatter,t.dateFormatter=this.dateFormatter,t.durationFormatter=this.durationFormatter,this._exporting.set(t,t),t))},Object.defineProperty(e.prototype,"exportable",{get:function(){return this._exportable},set:function(t){var e=this.svgContainer;this._exportable=t,e&&(t?ta(e.nonExportableSprites,this):-1==_b(e.nonExportableSprites,this)&&e.nonExportableSprites.push(this))},enumerable:!0,configurable:!0}),e.prototype.modalPrefix=function(t){return t=za.classNamePrefix+t},Object.defineProperty(e.prototype,"modal",{get:function(){var t=this.svgContainer;if(t){var e=t.modal;return e.adapter.has("classPrefix",this.modalPrefix)||e.adapter.add("classPrefix",this.modalPrefix),e}},enumerable:!0,configurable:!0}),e.prototype.openModal=function(t,e){var i=this.svgContainer;if(i)return i.openModal(t,e)},e.prototype.closeModal=function(){var t=this.svgContainer;t&&t.closeModal()},Object.defineProperty(e.prototype,"popups",{get:function(){var t=this.svgContainer;if(t){var e=t.popups;return e.template.sprite=this,e.template.adapter.has("classPrefix",this.modalPrefix)||e.template.adapter.add("classPrefix",this.modalPrefix),e}},enumerable:!0,configurable:!0}),e.prototype.openPopup=function(t,e){var i=this.svgContainer;if(i)return i.openPopup(t,e)},e.prototype.closeAllPopups=function(){var t=this.svgContainer;t&&t.closeAllPopups()},Object.defineProperty(e.prototype,"x",{get:function(){return this.getPropertyValue("x")},set:function(t){this.isDragged||this.setPercentProperty("x",t,!1,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelX",{get:function(){var t=na(this.getPixelX(this.x),this.minX,this.maxX);return this._adapterO?this._adapterO.apply("pixelX",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeX",{get:function(){return this._adapterO?this._adapterO.apply("relativeX",this.getRelativeX(this.x)):this.getRelativeX(this.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minX",{get:function(){return this.getPropertyValue("minX")},set:function(t){aa(t)&&(t=ha(t,this._positionPrecision,!0),this.setPropertyValue("minX",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxX",{get:function(){return this.getPropertyValue("maxX")},set:function(t){aa(t)&&(t=ha(t,this._positionPrecision,!0),this.setPropertyValue("maxX",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.getPropertyValue("y")},set:function(t){this.isDragged||this.setPercentProperty("y",t,!1,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelY",{get:function(){var t=na(this.getPixelY(this.y),this.minY,this.maxY);return this._adapterO?this._adapterO.apply("pixelY",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeY",{get:function(){return this._adapterO?this._adapterO.apply("relativeY",this.getRelativeX(this.y)):this.getRelativeX(this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minY",{get:function(){return this.getPropertyValue("minY")},set:function(t){aa(t)&&(t=ha(t,this._positionPrecision,!0),this.setPropertyValue("minY",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxY",{get:function(){return this.getPropertyValue("maxY")},set:function(t){aa(t)&&(t=ha(t,this._positionPrecision,!0),this.setPropertyValue("maxY",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dx",{get:function(){return this.getPropertyValue("dx")},set:function(t){aa(t)&&(t=ha(t,this._positionPrecision,!0),this.setPropertyValue("dx",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dy",{get:function(){return this.getPropertyValue("dy")},set:function(t){aa(t)&&(t=ha(t,this._positionPrecision,!0),this.setPropertyValue("dy",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.getPropertyValue("rotation")},set:function(t){t=Ra(t),aa(t)||(t=0),this.setPropertyValue("rotation",t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this.getPropertyValue("align")},set:function(t){t=wb(t),this.setPropertyValue("align",t)&&this._parent&&this._parent.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valign",{get:function(){return this.getPropertyValue("valign")},set:function(t){t=wb(t),this.setPropertyValue("valign",t)&&this._parent&&this._parent.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalCenter",{get:function(){return this.getPropertyValue("horizontalCenter")},set:function(t){t=wb(t),this.setPropertyValue("horizontalCenter",t)&&this.updateCenter()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalCenter",{get:function(){return this.getPropertyValue("verticalCenter")},set:function(t){t=wb(t),this.setPropertyValue("verticalCenter",t)&&this.updateCenter()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){var t=this.getPropertyValue("maxWidth");if(!aa(t)&&this._parent){var e=this._parent.maxWidth;return"absolute"!=this._parent.layout&&"none"!=this.align&&null!=this.align&&(e=e-this.pixelMarginLeft-this.pixelMarginRight),e}return t},set:function(t){this.setMaxWidth(t)},enumerable:!0,configurable:!0}),e.prototype.setMaxWidth=function(t){var e=this.maxWidth,i=this.maxHeight;if(this.setPropertyValue("maxWidth",t)){aa(this.relativeWidth)&&this.invalidate();var r={type:"maxsizechanged",target:this,previousWidth:e,previousHeight:i};this.dispatchImmediately("maxsizechanged",r)}},Object.defineProperty(e.prototype,"maxHeight",{get:function(){var t=this.getPropertyValue("maxHeight");if(!aa(t)&&this._parent){var e=this._parent.maxHeight;return"absolute"!=this._parent.layout&&"none"!=this.valign&&null!=this.valign&&(e=e-this.pixelMarginTop-this.pixelMarginBottom),e}return t},set:function(t){this.setMaxHeight(t)},enumerable:!0,configurable:!0}),e.prototype.setMaxHeight=function(t){var e=this.maxWidth,i=this.maxHeight;if(this.setPropertyValue("maxHeight",t)){aa(this.relativeHeight)&&this.invalidate();var r={type:"maxsizechanged",target:this,previousWidth:e,previousHeight:i};this.dispatchImmediately("maxsizechanged",r)}},Object.defineProperty(e.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth")},set:function(t){this.setPropertyValue("minWidth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minHeight",{get:function(){return this.getPropertyValue("minHeight")},set:function(t){this.setPropertyValue("minHeight",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.getPropertyValue("width")},set:function(t){this.setPercentProperty("width",t,!0,!1,this._positionPrecision,!0)&&(this.percentWidth=void 0,this.relativeWidth=void 0,t instanceof Da?(this.percentWidth=t.percent,aa(this._pixelWidth)&&(this.maxWidth=void 0),this._pixelWidth=void 0):(this._pixelWidth=Number(t),this.maxWidth=this._pixelWidth),this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.getPropertyValue("height")},set:function(t){this.setPercentProperty("height",t,!0,!1,this._positionPrecision,!0)&&(this.percentHeight=void 0,this._relativeHeight=void 0,t instanceof Da?(this.percentHeight=t.percent,aa(this._pixelHeight)&&(this.maxHeight=void 0),this._pixelHeight=void 0):(this._pixelHeight=Number(t),this.maxHeight=this._pixelHeight),this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelWidth",{get:function(){var t;t=aa(this.percentWidth)?this.maxWidth:aa(this._pixelWidth)?this._pixelWidth:0;var e=this.minWidth;null!=e&&t<e&&(t=e);var i=ha(t,this._positionPrecision,!0);return this._adapterO?this._adapterO.apply("pixelWidth",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelHeight",{get:function(){var t;t=aa(this.percentHeight)?this.maxHeight:aa(this._pixelHeight)?this._pixelHeight:0;var e=this.minHeight;null!=e&&t<e&&(t=e);var i=ha(t,this._positionPrecision,!0);return this._adapterO?this._adapterO.apply("pixelHeight",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeWidth",{get:function(){var t=this._relativeWidth;if(aa(t))return this._adapterO?this._adapterO.apply("relativeWidth",t):t},set:function(t){this._relativeWidth!=t&&(this._relativeWidth=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeHeight",{get:function(){var t=this._relativeHeight;if(aa(t))return this._adapterO?this._adapterO.apply("relativeHeight",t):t},set:function(t){this._relativeHeight!=t&&(this._relativeHeight=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"measuredWidth",{get:function(){return this.disabled||this.__disabled?0:this._adapterO?this._adapterO.apply("measuredWidth",this._measuredWidth):this._measuredWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"measuredHeight",{get:function(){return this.disabled||this.__disabled?0:this._adapterO?this._adapterO.apply("measuredHeight",this._measuredHeight):this._measuredHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outerWidth",{get:function(){var t=this.pixelWidth+this.pixelMarginRight+this.pixelMarginLeft;return this._adapterO?this._adapterO.apply("outerWidth",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outerHeight",{get:function(){var t=this.pixelHeight+this.pixelMarginTop+this.pixelMarginBottom;return this._adapterO?this._adapterO.apply("outerHeight",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerWidth",{get:function(){var t=Math.max(0,this.pixelWidth-this.pixelPaddingRight-this.pixelPaddingLeft);return this._adapterO?this._adapterO.apply("innerWidth",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerHeight",{get:function(){var t=Math.max(0,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom);return this._adapterO?this._adapterO.apply("innerHeight",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalScale",{get:function(){var t=this.scale;return this._parent&&(t*=this._parent.globalScale),this._adapterO?this._adapterO.apply("globalScale",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.getPropertyValue("scale")},set:function(t){(t=Ra(t))<0&&(t=0),t!=this.getPropertyValue("scale")&&(this.setPropertyValue("scale",t,!1,!0),this.handleGlobalScale())},enumerable:!0,configurable:!0}),e.prototype.margin=function(t,e,i,r){return this.marginTop=t,this.marginRight=e,this.marginBottom=i,this.marginLeft=r,this},Object.defineProperty(e.prototype,"marginLeft",{get:function(){return this.getPropertyValue("marginLeft")},set:function(t){this.setPercentProperty("marginLeft",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marginRight",{get:function(){return this.getPropertyValue("marginRight")},set:function(t){this.setPercentProperty("marginRight",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marginTop",{get:function(){return this.getPropertyValue("marginTop")},set:function(t){this.setPercentProperty("marginTop",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marginBottom",{get:function(){return this.getPropertyValue("marginBottom")},set:function(t){this.setPercentProperty("marginBottom",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelMarginRight",{get:function(){var t=this.getPixelX(this.marginRight);return this._adapterO?this._adapterO.apply("pixelMarginRight",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeMarginRight",{get:function(){var t=this.getRelativeX(this.marginRight);return this._adapterO?this._adapterO.apply("relativeMarginRight",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelMarginLeft",{get:function(){var t=this.getPixelX(this.marginLeft);return this._adapterO?this._adapterO.apply("pixelMarginLeft",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeMarginLeft",{get:function(){var t=this.getRelativeX(this.marginLeft);return this._adapterO?this._adapterO.apply("relativeMarginLeft",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelMarginTop",{get:function(){var t=this.getPixelY(this.marginTop);return this._adapterO?this._adapterO.apply("pixelMarginTop",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeMarginTop",{get:function(){var t=this.getRelativeY(this.marginTop);return this._adapterO?this._adapterO.apply("relativeMarginTop",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelMarginBottom",{get:function(){var t=this.getPixelY(this.marginBottom);return this._adapterO?this._adapterO.apply("pixelMarginBottom",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeMarginBottom",{get:function(){var t=this.getRelativeY(this.marginBottom);return this._adapterO?this._adapterO.apply("relativeMarginBottom",t):t},enumerable:!0,configurable:!0}),e.prototype.padding=function(t,e,i,r){return this.paddingTop=t,this.paddingRight=e,this.paddingBottom=i,this.paddingLeft=r,this},Object.defineProperty(e.prototype,"paddingLeft",{get:function(){return this.getPropertyValue("paddingLeft")},set:function(t){this.setPercentProperty("paddingLeft",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingRight",{get:function(){return this.getPropertyValue("paddingRight")},set:function(t){this.setPercentProperty("paddingRight",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingTop",{get:function(){return this.getPropertyValue("paddingTop")},set:function(t){this.setPercentProperty("paddingTop",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingBottom",{get:function(){return this.getPropertyValue("paddingBottom")},set:function(t){this.setPercentProperty("paddingBottom",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelPaddingRight",{get:function(){return this.getPixelX(this.paddingRight)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePaddingRight",{get:function(){return this.getRelativeX(this.paddingRight)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelPaddingLeft",{get:function(){return this.getPixelX(this.paddingLeft)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePaddingLeft",{get:function(){return this.getRelativeX(this.paddingLeft)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelPaddingTop",{get:function(){return this.getPixelY(this.paddingTop)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePaddingTop",{get:function(){return this.getRelativeY(this.paddingTop)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelPaddingBottom",{get:function(){return this.getPixelY(this.paddingBottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePaddingBottom",{get:function(){return this.getRelativeY(this.paddingBottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.getPropertyValue("path")},set:function(t){this.setPath(t)},enumerable:!0,configurable:!0}),e.prototype.setPath=function(t){return!!this.setPropertyValue("path",t)&&(this._adapterO&&(t=this._adapterO.apply("path",t)),this._isPath||(this.element&&(!this.element.node||this.element.node instanceof SVGPathElement)||(this.element=this.paper.add("path")),this._isPath=!0),ba(t)?this.element.attr({d:t}):this.element.removeAttr("d"),this.invalidatePosition(),this.inited||this.events.once("inited",this.validatePosition,this,!1),!0)},Object.defineProperty(e.prototype,"fillModifier",{get:function(){return this.getPropertyValue("fillModifier")},set:function(t){this.setPropertyValue("fillModifier",t)&&this.setFill(this.fill)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeModifier",{get:function(){return this.getPropertyValue("strokeModifier")},set:function(t){this.setPropertyValue("strokeModifier",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillOpacity",{get:function(){return this.getPropertyValue("fillOpacity")},set:function(t){t=kf(t,0,1),this.setPropertyValue("fillOpacity",t)&&this.setSVGAttribute({"fill-opacity":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this.getPropertyValue("fill")},set:function(t){this.setFill(t)},enumerable:!0,configurable:!0}),e.prototype.setFill=function(t){if((!Wa(t)||"r"in t)&&(t=Xb(t)),this.setColorProperty("fill",t)||this.fillModifier)if(t instanceof Ga&&this.fillModifier&&(t=this.fillModifier.modify(t)),this.realFill=t,t instanceof Ga)this.setSVGAttribute({fill:t.toString()});else if(ba(t)){if(t instanceof md||t instanceof Zb||t instanceof Cc){var e=t;e.paper=this.paper,this.setSVGAttribute({fill:"url(\""+Gd()+e.id+"\")"})}}else this.removeSVGAttribute("fill")},Object.defineProperty(e.prototype,"opacity",{get:function(){return this.getPropertyValue("opacity")},set:function(t){t=kf(t,0,1),this.setPropertyValue("opacity",t)&&this.setSVGAttribute({opacity:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this.getPropertyValue("stroke")},set:function(t){this.setStroke(t)},enumerable:!0,configurable:!0}),e.prototype.setStroke=function(t){if((!Wa(t)||"r"in t)&&(t=Xb(t)),this.setColorProperty("stroke",t)||this.strokeModifier)if(t instanceof Ga&&this.strokeModifier&&(t=this.strokeModifier.modify(t)),this.realStroke=t,t instanceof Ga)"none"==t.hex?this.removeSVGAttribute("stroke"):this.setSVGAttribute({stroke:t.toString()});else if(ba(t)){if(t instanceof md||t instanceof Zb||t instanceof Cc){var e=t;e.paper=this.paper,this.setSVGAttribute({stroke:"url(\""+Gd()+e.id+"\")"})}}else this.removeSVGAttribute("stroke")},Object.defineProperty(e.prototype,"strokeOpacity",{get:function(){return this.getPropertyValue("strokeOpacity")},set:function(t){t=kf(t,0,1),this.setPropertyValue("strokeOpacity",t)&&this.setSVGAttribute({"stroke-opacity":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonScalingStroke",{get:function(){return this.getPropertyValue("nonScalingStroke")},set:function(t){t=Ua(t),this.setPropertyValue("nonScalingStroke",t)&&(this.strokeWidth=this.strokeWidth)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonScaling",{get:function(){return this.getPropertyValue("nonScaling")},set:function(t){t=Ua(t),this.setPropertyValue("nonScaling",t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeWidth",{get:function(){return this.getPropertyValue("strokeWidth")},set:function(t){t=Ra(t),this.setPropertyValue("strokeWidth",t,!0),this.nonScalingStroke&&(aa(t)||(t=1),t/=this.globalScale),this.setSVGAttribute({"stroke-width":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeDasharray",{get:function(){return this.getPropertyValue("strokeDasharray")},set:function(t){t=wb(t),this.setPropertyValue("strokeDasharray",t)&&this.setSVGAttribute({"stroke-dasharray":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeDashoffset",{get:function(){return this.getPropertyValue("strokeDashoffset")},set:function(t){t=Ra(t),this.setPropertyValue("strokeDashoffset",t)&&this.setSVGAttribute({"stroke-dashoffset":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeLinecap",{get:function(){return this.getPropertyValue("strokeLinecap")},set:function(t){this.setPropertyValue("strokeLinecap",t)&&this.setSVGAttribute({"stroke-linecap":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeLinejoin",{get:function(){return this.getPropertyValue("strokeLinejoin")},set:function(t){this.setPropertyValue("strokeLinejoin",t)&&this.setSVGAttribute({"stroke-linejoin":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shapeRendering",{get:function(){return this.getPropertyValue("shapeRendering")},set:function(t){t=wb(t),this.setPropertyValue("shapeRendering",t)&&this.setSVGAttribute({"shape-rendering":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelPerfect",{get:function(){return this.getPropertyValue("pixelPerfect")},set:function(t){t=Ua(t),this._positionPrecision=t?za.pixelPerfectPrecision:3,this.setPropertyValue("pixelPerfect",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rtl",{get:function(){return ba(this._rtl)?this._rtl:!!this._topParent&&this._topParent.rtl},set:function(t){t=Ua(t),this.isBaseSprite&&(this.topParent.rtl=t),this._rtl=t},enumerable:!0,configurable:!0}),e.prototype.show=function(t){return this.showReal(t)},e.prototype.showReal=function(t){var e=this;if(!this.preventShow){var i,r=this.defaultState.properties;if(!this.disabled&&(this.isHidden||!this.visible||this.isHiding||null!=r.opacity&&this.opacity<r.opacity&&!this.isShowing)&&!this.isDisposed()){this.invalid&&this.validate(),this.positionInvalid&&this.validatePosition(),aa(t)||(t=this.defaultState.transitionDuration),this._hideAnimation&&(this._hideAnimation.kill(),this._hideAnimation=void 0),this._showHideDisposer&&this.removeDispose(this._showHideDisposer),this._isHidden=!1,this.isHiding=!1,this.isShowing=!0,(i=this.applyCurrentState(t))&&!i.isFinished()?(this._showHideDisposer=i.events.on("animationended",function(){e.isShowing=!1}),this._disposers.push(this._showHideDisposer)):this.isShowing=!1;var o=this.defaultState.properties.visible;ba(o)||(o=!0),this.visible=o,this.readerHidden=!1,this.dispatchImmediately("shown")}return i}},e.prototype.hide=function(t){return this.hideReal(t)},e.prototype.hideReal=function(t){var e,i=this;if(!this.isHiding&&this.visible&&!this.isDisposed()){this.tooltip&&this.tooltip.currentSprite==this&&this.hideTooltip(0),this._hideAnimation&&(this._hideAnimation.kill(),this._hideAnimation=void 0),this.isShowing=!1,this._showHideDisposer&&this.removeDispose(this._showHideDisposer);var r=this.hiddenState;r?(e=this.setState(r,t,void 0))&&!e.isFinished()?(this._hideAnimation=e,this._showHideDisposer=e.events.on("animationended",function(){i.isHiding=!1,i._isHidden=!0,0==r.properties.visible&&(i.visible=!1)},this),this._disposers.push(this._showHideDisposer),this._disposers.push(e)):(this.isHiding=!1,this._isHidden=!0):(this.visible=!1,this.isHiding=!1,this._isHidden=!0),this.readerHidden=!0,this.dispatchImmediately("hidden"),this.invalidate()}return aa(t)||(t=this.hiddenState.transitionDuration),e},Object.defineProperty(e.prototype,"visible",{get:function(){return this.getVisibility()},set:function(t){t=Ua(t),this.setVisibility(t)},enumerable:!0,configurable:!0}),e.prototype.getVisibility=function(){var t=this.getPropertyValue("visible");return ba(t)||(t=!0),t},e.prototype.setVisibility=function(t){if(this.setPropertyValue("visible",t)&&(t?this.group.removeAttr("visibility"):this.group.attr({visibility:"hidden"}),this.events.isEnabled("visibilitychanged"))){var e={type:"visibilitychanged",target:this,visible:t};this.events.dispatchImmediately("visibilitychanged",e)}},Object.defineProperty(e.prototype,"zIndex",{get:function(){return this.getPropertyValue("zIndex")},set:function(t){t=Ra(t),this.setPropertyValue("zIndex",t)&&this.dispatch("zIndexChanged")},enumerable:!0,configurable:!0}),e.prototype.toFront=function(){var t=this._parent;t&&t.children.indexOf(this)!=t.children.length-1&&(t.children.moveValue(this,t.children.length-1),this.dispatch("zIndexChanged"))},e.prototype.toBack=function(){var t=this._parent;t&&0!=t.children.indexOf(this)&&(t.children.moveValue(this,0),this.dispatch("zIndexChanged"))},Object.defineProperty(e.prototype,"userClassName",{get:function(){return this.getPropertyValue("userClassName")},set:function(t){this.setPropertyValue("userClassName",t)&&(!t&&this.userClassName&&this.group.removeClass(this.userClassName),this.setClassName())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip?this._tooltip:this.virtualParent?this.virtualParent.tooltip:this._parent?this._parent.tooltip:void 0},set:function(t){this._tooltip&&this.removeDispose(this._tooltip),this._tooltip=t,t&&(t.parent=this.tooltipContainer)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipDataItem",{get:function(){var t=this._tooltipDataItem;return t||this.dataItem},set:function(t){this._tooltipDataItem=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipColorSource",{get:function(){return this._tooltipColorSource},set:function(t){this._tooltipColorSource=t},enumerable:!0,configurable:!0}),e.prototype.showTooltip=function(t){"always"==this.showTooltipOn&&!this._tooltip&&this.tooltip&&(this._tooltip=this.tooltip.clone()),!t&&"pointer"==this.tooltipPosition&&this.isHover&&(t=Bc(va().lastPointer.point,this.svgContainer.SVGContainer,this.svgContainer.cssScale));for(var e=this;null!=e;){if(!e.visible||e.disabled||e.__disabled)return void(this._tooltip&&this._tooltip.visible&&this._tooltip.hide(0));e=e.parent}if(ba(this.tooltipText)||ba(this.tooltipHTML)){var i=this.tooltip,r=this.tooltipDataItem;if(i){i.targetSprite=this;var o=this,s=this.tooltipColorSource;if((i.getStrokeFromObject||i.getFillFromObject)&&s&&(s.isTemplate?r&&gf(r.sprites,function(t){return t.clonedFrom!=s||(o=t,!1)}):o=s),i.getStrokeFromObject){for(var n=this.stroke,a=o;null!=a.parent&&(null==(n=a.stroke)&&(a=a.parent),null==n););n instanceof Ga?i.background.animate({property:"stroke",to:n},i.animationDuration):i.background.stroke=n}if(i.dataItem=r,i.label.populateStringFrom=this,i.getFillFromObject){var p=this.fill;for(a=o;null!=a.parent;)if(null==(p=a.fill)||p instanceof Ga&&null==p.rgb)a=a.parent;else if(null!=p)break;null==p&&(p=ua("#000000")),p instanceof Ga&&i.visible?i.background.animate({property:"fill",to:p},i.animationDuration):i.background.fill=p,i.autoTextColor&&p instanceof Ga&&(i.label.fill=p.alternative)}var h="";if(this.tooltipHTML&&(i.html=this.tooltipHTML,h=this.tooltipHTML),this.tooltipText&&(i.text=this.tooltipText,h=this.tooltipText),this.updateTooltipPosition(t)){if(i.readerDescribedBy=this.uidAttr(),i.label.invalid&&i.label.validate(),null!=h&&""!=h&&""!=i.label.currentText){i&&!i.parent&&(i.parent=this.tooltipContainer);var l=i.defaultState.transitionDuration;return l<=0&&(l=1),i.show(l),i.currentSprite=this,!0}this.hideTooltip(0)}else this.hideTooltip(0)}}return!1},e.prototype.updateTooltipPosition=function(t){var e=this;if("pointer"!=this.tooltipPosition){var i=Yb({x:this.getTooltipX(),y:this.getTooltipY()},this);return this.pointTooltipTo(i)}if(this._interactionDisposer&&this._interactionDisposer.dispose(),this._interactionDisposer=va().body.events.on("track",function(t){return e.pointTooltipTo(Bc(t.point,e.svgContainer.SVGContainer,e.svgContainer.cssScale),!0)}),t)return this.pointTooltipTo(t,!0)},e.prototype.pointTooltipTo=function(t,e){var i=this.tooltip;if(i&&this.topParent){if(i.showInViewport)return i.pointTo(t,e),!0;if(Vg(t,{x:0,y:0,width:this.topParent.maxWidth,height:this.topParent.maxHeight}))return i.pointTo(t,e),!0}return!1},e.prototype.hideTooltip=function(t){if("always"!=this.showTooltipOn){var e=this.tooltip;e&&(e.targetSprite==this&&(e.targetSprite=void 0),e.hide(t),this._interactionDisposer&&(this._interactionDisposer.dispose(),this._interactionDisposer=void 0))}},Object.defineProperty(e.prototype,"tooltipHTML",{get:function(){return this.getPropertyValue("tooltipHTML")},set:function(t){t=wb(t),this.hoverable=!0,this.setPropertyValue("tooltipHTML",t)&&this.tooltip&&this.tooltip.visible&&this.showTooltip()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipText",{get:function(){return this.getPropertyValue("tooltipText")},set:function(t){(t=wb(t))&&(this.hoverable=!0),this.setPropertyValue("tooltipText",t)&&this.tooltip&&this.tooltip.visible&&this.showTooltip()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipContainer",{get:function(){return this._tooltipContainer?this._tooltipContainer:this._parent?this._parent.tooltipContainer:void 0},set:function(t){this._tooltipContainer=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipX",{get:function(){return this.getTooltipX()},set:function(t){this.setPercentProperty("tooltipX",t)&&this.tooltip&&this.tooltip.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alwaysShowTooltip",{get:function(){return"always"==this.getPropertyValue("showTooltipOn")},set:function(t){(t=Ua(t))&&(this.showTooltipOn="always")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTooltipOn",{get:function(){return this.getPropertyValue("showTooltipOn")},set:function(t){this.setPropertyValue("showTooltipOn",t)&&("hit"==t&&(this.clickable=!0),this.tooltip&&("always"==t?this.showTooltip():this.handleAlwaysShowTooltip()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipPosition",{get:function(){return this.getPropertyValue("tooltipPosition")},set:function(t){this.setPropertyValue("tooltipPosition",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipY",{get:function(){return this.getTooltipY()},set:function(t){this.setPercentProperty("tooltipY",t)&&this.tooltip&&this.tooltip.invalidate()},enumerable:!0,configurable:!0}),e.prototype.getTooltipX=function(){var t,e=this.getPropertyValue("tooltipX");return ba(e)||(e=ia(50)),aa(e)&&(t=e),e instanceof Da&&(t=this.maxLeftSelf+this._measuredWidthSelf*e.value-this.pixelPaddingLeft-this.ex),aa(t)||(t=0),t},e.prototype.getTooltipY=function(){var t,e=this.getPropertyValue("tooltipY");return ba(e)||(e=ia(50)),aa(e)&&(t=e),e instanceof Da&&(t=this.maxTopSelf+this._measuredHeightSelf*e.value-this.pixelPaddingTop-this.ey),aa(t)||(t=0),t},e.prototype.raiseCriticalError=function(t,e){this.svgContainer&&(this._adapterO?this.modal.content=this._adapterO.apply("criticalError",t).message:this.modal.content=t.message,e?this.modal.closable=!0:this.disabled=!0,za.suppressErrors||this.modal.open()),za.verbose&&console.log(t)},e.prototype.processConfig=function(e){e&&(ba(e.tooltipColorSource)&&Ca(e.tooltipColorSource)&&this.map.hasKey(e.tooltipColorSource)&&(e.tooltipColorSource=this.map.getKey(e.tooltipColorSource)),ba(e.cursorOverStyle)&&Ca(e.cursorOverStyle)&&(e.cursorOverStyle=this.getCursorStyle(e.cursorOverStyle)),ba(e.cursorDowntyle)&&Ca(e.cursorDowntyle)&&(e.cursorDowntyle=this.getCursorStyle(e.cursorDowntyle)),ba(e.cursorOptions)&&(ba(e.cursorOptions.overStyle)&&Ca(e.cursorOptions.overStyle)&&(e.cursorOptions.overStyle=this.getCursorStyle(e.cursorOptions.overStyle)),ba(e.cursorOptions.downStyle)&&Ca(e.cursorOptions.downStyle)&&(e.cursorOptions.downStyle=this.getCursorStyle(e.cursorOptions.downStyle)))),t.prototype.processConfig.call(this,e),this.processDelayedMap()},e.prototype.getCursorStyle=function(t){switch(t){case"grab":return tb.grab;case"grabbing":return tb.grabbing;case"pointer":return tb.pointer;case"horizontalResize":return tb.horizontalResize;case"verticalResize":return tb.verticalResize;default:return tb.default;}},e.prototype.configOrder=function(e,i){return e==i?0:"tooltipColorSource"==e?1:"tooltipColorSource"==i?-1:t.prototype.configOrder.call(this,e,i)},Object.defineProperty(e.prototype,"isHidden",{get:function(){return this._isHidden?this._isHidden:!!this._parent&&this._parent.isHidden},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showOnInit",{get:function(){return this.getPropertyValue("showOnInit")},set:function(t){t=Ua(t),this.setShowOnInit(t)},enumerable:!0,configurable:!0}),e.prototype.setShowOnInit=function(t){this.setPropertyValue("showOnInit",t)&&(this.isTemplate||(!t||this.inited||this.hidden?this._showOnInitDisposer&&this._showOnInitDisposer.dispose():(this._showOnInitDisposer=new Ya([ca.events.once("enterframe",this.hideInitially,this),this.events.once("beforevalidated",this.hideInitially,this,!1),this.events.on("inited",this.appear,this,!1)]),this._disposers.push(this._showOnInitDisposer))))},e.prototype.hideInitially=function(){this.isDisposed()||(this.appeared=!1,this.inited||this.hide(0))},e.prototype.appear=function(){var t=this;if(this.appeared=!1,this.hidden||this.isHidden||this.hide(0),this.hidden)this.appeared=!0,this.dispatch("appeared");else{var e=this.show();e&&!e.isFinished()?this.addDisposer(e.events.on("animationended",function(){t.appeared=!0,t.dispatch("appeared")})):(this.appeared=!0,this.dispatch("appeared"))}},Object.defineProperty(e.prototype,"hidden",{get:function(){return this.getPropertyValue("hidden")},set:function(t){t=Ua(t),this.setPropertyValue("hidden",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this._bbox},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plugins",{get:function(){var t=this;return this._plugins||(this._plugins=new Fa,this._disposers.push(this._plugins.events.on("inserted",function(e){e.newValue.target=t,e.newValue.init()})),this._disposers.push(new Sa(this._plugins))),this._plugins},enumerable:!0,configurable:!0}),e.prototype._systemUpdate=function(t){this.validate()},e.prototype._systemCheckIfValidate=function(){return!0},e.prototype._systemValidatePositions=function(){this.validatePosition()},e.prototype._systemValidateLayouts=function(){},e}(jc);ca.registeredClasses.Sprite=xa;var Ie=function(e){function t(){var t=e.call(this)||this;return t.className="Rectangle",t.element=t.paper.add("rect"),t.applyTheme(),t}return da(t,e),t.prototype.draw=function(){e.prototype.draw.call(this);var t=this._positionPrecision;this.pixelPerfect&&(t=0);var r=ha(this.innerWidth,t),i=ha(this.innerHeight,t);this.element.attr({width:r,height:i})},t.prototype.measureElement=function(){},Object.defineProperty(t.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.isMeasured?{x:0,y:0,width:this.innerWidth,height:this.innerHeight}:{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),t}(xa);ca.registeredClasses.Rectangle=Ie;var oa=function(t){function e(){var e=t.call(this)||this;return e._childrenByLayout=[],e._childrenDisposers=new Ta,e.hasFocused=!1,e.setStateOnSprites=[],e.layoutInvalid=!1,e._absoluteWidth=0,e._absoluteHeight=0,e._shouldBeReady=[],e._tapToActivate=!1,e.tapTimeout=3e3,e.className="Container",e._element=e.paper.addGroup("g"),e.group.add(e.element),e.setPropertyValue("pixelPerfect",!1),e.setPropertyValue("layout","absolute"),e.setPropertyValue("fixedWidthGrid",!1),e.setPropertyValue("verticalCenter","none"),e.setPropertyValue("horizontalCenter","none"),e._positionPrecision=4,e._disposers.push(new Pc(e._childrenDisposers)),e.children.events.on("inserted",e.handleChildAdded,e),e.children.events.on("removed",e.handleChildRemoved,e),e.applyTheme(),e}return da(e,t),e.prototype.handleChildAdded=function(t){this.processChild(t.newValue)},e.prototype.processChild=function(t){try{this._childrenDisposers.insertKey(t.uid,new Ya([t.events.on("transformed",this.handleChildTransform,this),t.events.on("zIndexChanged",this.sortAndAdd,this)]))}catch(e){}this.element&&this.element.add(t.group);t.parent=this,t.paper=this.paper,this.dispatchImmediately("childadded",{type:"childadded",newValue:t}),this.invalidate()},e.prototype.sortAndAdd=function(){this.sortChildren(),this.addChildren()},e.prototype.handleChildRemoved=function(t){var e=t.oldValue;(this._childrenDisposers.removeKey(e.uid),this.element)&&this.element.removeElement(e.group);e.isMeasured&&this.invalidateLayout(),this.dispatchImmediately("childremoved",{type:"childremoved",oldValue:e})},e.prototype.handleChildTransform=function(t){t.target.isMeasured&&this.invalidateLayout()},e.prototype.invalidateLayout=function(){this.layoutInvalid||this.disabled||this.isTemplate||"none"==this.layout||this.__disabled||(this.layoutInvalid=!0,ca.addToInvalidLayouts(this),Aa.requestFrame())},e.prototype.invalidate=function(){t.prototype.invalidate.call(this),this.invalidateLayout()},e.prototype.deepInvalidate=function(){t.prototype.invalidate.call(this),la(this._childrenByLayout,function(t){t instanceof e?t.deepInvalidate():t.invalidate()}),this.invalidateLayout()},Object.defineProperty(e.prototype,"children",{get:function(){return this._children||(this._children=new Fa),this._children},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth")},set:function(t){this.setPropertyValue("minWidth",t)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minHeight",{get:function(){return this.getPropertyValue("minHeight")},set:function(t){this.setPropertyValue("minHeight",t)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),e.prototype.removeElement=function(){},e.prototype.sortChildren=function(){var t=this;if(this._childrenByLayout=[],"none"!=this.layout&&"absolute"!=this.layout&&this.layout){var e=[],i=[];ga(this.children.iterator(),function(r){"horizontal"==t.layout||"grid"==t.layout?aa(r.percentWidth)?i.push(r):e.push(r):"vertical"==t.layout&&aa(r.percentHeight)?i.push(r):e.push(r)}),this._childrenByLayout=e.concat(i)}else this._childrenByLayout=this.children.values;this.calculateRelativeSize()},e.prototype.calculateRelativeSize=function(){var t=this,e=0,i=0;la(this._childrenByLayout,function(t){t.isMeasured&&(aa(t.percentWidth)&&(e+=t.percentWidth),aa(t.percentHeight)&&(i+=t.percentHeight))}),la(this._childrenByLayout,function(r){r.isMeasured&&("horizontal"==t.layout&&(aa(r.percentWidth)&&(r.relativeWidth=r.percentWidth/e),aa(r.percentHeight)&&(r.relativeHeight=r.percentHeight/100)),"vertical"==t.layout&&(aa(r.percentHeight)&&(r.relativeHeight=r.percentHeight/i),aa(r.percentWidth)&&(r.relativeWidth=r.percentWidth/100)),"grid"==t.layout&&(aa(r.percentHeight)&&(r.relativeHeight=r.percentHeight/100),aa(r.percentWidth)&&(r.relativeWidth=r.percentWidth/100))),"absolute"!=t.layout&&r.isMeasured||(aa(r.percentWidth)&&(r.relativeWidth=r.percentWidth/100),aa(r.percentHeight)&&(r.relativeHeight=r.percentHeight/100))})},e.prototype.addChildren=function(){if(this.element){var t=wd(this.children.values),e=t.map(function(t,e){return{idx:e,data:t}});e.sort(function(t,e){var i=t.data.zIndex||0,r=e.data.zIndex||0;return i<r?-1:i>r?1:t.idx-e.idx}),t=e.map(function(t){return t.data});var i=this.element,r=!0;if(i.node&&i.node.childNodes)for(var o=0,a=i.node.childNodes.length;o<a;o++)if(i.node.childNodes[o]!=t[o].group.node){r=!1;break}r||(la(t,function(t){t.group&&i.add(t.group)}),this._background&&this.group.addToBack(this._background.group),this.invalidateLayout())}},e.prototype.createChild=function(t){var e=new t;return e.parent=this,e},e.prototype.removeChildren=function(){for(;this.children.length>0;){var t=this.children.getIndex(0);t.parent=void 0,this.children.removeValue(t)}},e.prototype.disposeChildren=function(){for(;this.children.length>0;){var t=this.children.getIndex(0);t.dispose(),this.children.removeValue(t)}},Object.defineProperty(e.prototype,"background",{get:function(){return this._background||(this._background=this.createBackground(),this.processBackground()),this._background},set:function(t){this._background&&this.background!=t&&this.removeDispose(this._background),t&&(this._background=t,this._disposers.push(t),this.processBackground())},enumerable:!0,configurable:!0}),e.prototype.handleGlobalScale=function(){t.prototype.handleGlobalScale.call(this),this.children.each(function(t){t.handleGlobalScale()})},e.prototype.createBackground=function(){return new Ie},e.prototype.processBackground=function(){var t=this._background;t&&(t.isMeasured=!1,this._background.fill=new Ia().getFor("background"),t.parent=this,t.isMeasured=!1,this.children.removeValue(t),this._disposers.push(t),this.group.addToBack(this._background.group))},e.prototype.validateLayout=function(){var t=this;ca.removeFromInvalidLayouts(this),this.layoutInvalid=!1,this._availableWidth=this.innerWidth,this._availableHeight=this.innerHeight;var e=0,i=0,r=!0;this.children&&(this.sortChildren(),la(this._childrenByLayout,function(o){var a,n;if(aa(o.relativeWidth)?(a=ha(t._availableWidth*o.relativeWidth,2),"horizontal"==t.layout&&(a-=o.pixelMarginRight+o.pixelMarginLeft)):"horizontal"==t.layout&&o.invalid&&o.validate(),aa(o.relativeHeight)?(n=ha(t._availableHeight*o.relativeHeight,2),"vertical"==t.layout&&(n-=o.pixelMarginTop+o.pixelMarginBottom)):"vertical"==t.layout&&o.invalid&&o.validate(),0==o.invalid){if(aa(o.relativeWidth)&&(o.maxWidth=a),aa(o.relativeHeight)&&(o.maxHeight=n),o.isMeasured){"horizontal"==t.layout&&(aa(o.percentWidth)||o.measuredWidth>0&&(t._availableWidth-=o.measuredWidth+o.pixelMarginLeft+o.pixelMarginRight)),"vertical"==t.layout&&(aa(o.percentHeight)||o.measuredHeight>0&&(t._availableHeight-=o.measuredHeight+o.pixelMarginTop+o.pixelMarginBottom));var s=o.measuredWidth,p=o.measuredHeight;"none"!=o.align&&(s+=o.pixelMarginLeft+o.pixelMarginRight),"none"!=o.valign&&(p+=o.pixelMarginTop+o.pixelMarginBottom),e=Math.max(e,s),i=Math.max(i,p)}}else o.isMeasured&&(aa(o.relativeWidth)&&o.maxWidth!=a&&(o.maxWidth=a,r=!1),aa(o.relativeHeight)&&o.maxHeight!=n&&(o.maxHeight=n,r=!1))})),this._absoluteWidth=e,this._absoluteHeight=i,r&&this.arrange()},e.prototype.arrange=function(){var t,e,i,r,o,a,n,s,p,h,l,d=this,u=this.children,c=0,$=0,m=wa(this.innerWidth,this._absoluteWidth),y=wa(this.innerHeight,this._absoluteHeight),g=this.pixelPaddingLeft,f=this.pixelPaddingRight,v=this.pixelPaddingTop,b=this.pixelPaddingBottom,C=0,H=0,B=0,x=0,_=[],T=[],P=this.maxWidth,k=this.maxHeight,W=this.minWidth,V=this.minHeight,L=wd(u.values);if(this.reverseOrder&&L.reverse(),"grid"==this.layout){a=P,o=1;for(var N=0,M=L.length;N<M;N++){if((S=L[N]).isMeasured&&!S.disabled&&!S.__disabled){var I=S.measuredWidth;I<a&&(a=I),I>o&&(o=I)}}a=na(a,1,P),o=na(o,1,P),n=this.fixedWidthGrid?P/o:P/a,n=wa(1,Math.floor(n)),n=Ea(this.maxColumns,n),_=this.getColumnWidth(L,n,o)}for(N=0,M=L.length;N<M;N++){var S;if(!(S=L[N]).isMeasured||S.disabled||S.__disabled)S.validatePosition();else{var A=void 0,O=void 0,R=S.pixelMarginLeft,D=S.pixelMarginRight,w=S.pixelMarginTop,q=S.pixelMarginBottom,z=S.measuredWidth,j=S.measuredHeight,G=void 0,F=void 0,E=void 0,X=void 0;switch(this.layout){case"none":break;case"absolute":switch(S.align){case"left":A=R-S.maxLeft;break;case"center":A=(m-z)/2-S.maxLeft;break;case"right":A=m-D-S.maxRight;break;default:S.x instanceof Da||(A=S.pixelX);}switch(S.valign){case"top":O=w-S.maxTop;break;case"middle":O=(y-j)/2-S.maxTop;break;case"bottom":O=y-q-S.maxBottom;break;default:S.y instanceof Da||(O=S.pixelY);}break;case"vertical":switch(S.align){case"left":A=R-S.maxLeft;break;case"center":A=(m-z)/2-S.maxLeft;break;case"right":A=m-D-S.maxRight;break;default:A=S.pixelX;}H=(O=H+w-S.maxTop)+S.maxBottom+q;break;case"horizontal":switch(S.valign){case"top":O=w-S.maxTop;break;case"middle":O=(y-j)/2-S.maxTop;break;case"bottom":O=y-q-S.maxBottom;break;default:O=S.pixelY;}C=(A=C+R-S.maxLeft)+S.maxRight+D;break;case"grid":switch(A=C+R-S.maxLeft,S.valign){case"top":O=H+w-S.maxTop;break;case"middle":O=H+(y-j)/2-S.maxTop;break;case"bottom":O=H+y-q-S.maxBottom;break;default:O=H-S.maxTop;}C+=_[x],T[B]=wa(T[B],j);var Y=_[++x];if(aa(Y)||(Y=o),C>Ea(this.innerWidth,P)-Y+1&&x<n){n=x,C=0,H=0,B=0,x=0,_=this.getColumnWidth(L,n,o),T=[],N=-1;continue}x>=n&&(x=0,H+=T[B],B++,C=0);}"none"!==this.layout&&(S.moveTo({x:A,y:O}),G=A+S.maxLeft-R,F=A+S.maxRight+D,E=O+S.maxTop-w,X=O+S.maxBottom+q,(F>e||!aa(e))&&(e=F),(G<t||!aa(t))&&(t=G),(E<i||!aa(i))&&(i=E),(X>r||!aa(r))&&(r=X),(F>p||!aa(p))&&(p=F),(G<s||!aa(s))&&(s=G),(E<h||!aa(h))&&(h=E),(X>l||!aa(l))&&(l=l))}}if("none"==this.layout){var K=this.bbox;t=K.x,e=K.x+K.width,i=K.y,r=K.y+K.height}aa(t)||(t=0,s=0),aa(e)||(p=e=this._availableWidth),aa(i)||(i=0,h=0),aa(r)||(l=r=this._availableHeight),aa(h)||(h=0),aa(l)||(l=h),aa(s)||(s=0),aa(p)||(p=s),c=e-t,$=r-i,aa(this.relativeWidth)&&(t=0,e=c=P-g-f),aa(this.relativeHeight)&&(i=0,r=$=k-v-b),aa(this._pixelWidth)&&(t=0,c=this._pixelWidth-g-f),aa(W)&&c<W&&(t=0,c=this.minWidth-g-f),aa(this._pixelHeight)&&(i=0,$=this._pixelHeight-v-b),aa(V)&&$<V&&(i=0,$=V-v-b);var U=p-s,J=l-h;if("none"!=this.layout&&(this.contentAlign||this.contentValign)&&u.length>0){var Q,Z,tt=c,et=$;tt<U&&(tt=U),et<J&&(et=J),"center"==this.contentAlign&&(Q=(tt-U)/2),"right"==this.contentAlign&&(Q=tt-U),"middle"==this.contentValign&&(Z=(et-J)/2),"bottom"==this.contentValign&&(Z=et-J),aa(Q)&&ga(u.iterator(),function(t){var e=t.maxLeft,i=Q;"horizontal"==d.layout&&(t.x=t.pixelX+i),"grid"==d.layout&&(t.x=t.pixelX+i),"vertical"==d.layout&&(i+=t.pixelMarginLeft,"none"==t.align&&(t.x=i-e)),"absolute"==d.layout&&(i+=t.pixelMarginLeft,"none"==t.align&&(t.x=i-e))}),aa(Z)&&ga(u.iterator(),function(t){var e=t.maxTop,i=Z;"horizontal"==d.layout&&(i+=t.pixelMarginTop,"none"==t.valign&&(t.y=i-e)),"grid"==d.layout&&(i+=t.pixelMarginTop,t.y=i-e),"vertical"==d.layout&&(t.y=t.pixelY+i),"absolute"==d.layout&&(i+=t.pixelMarginTop,"none"==t.valign&&(t.y=i-e))})}var it=this.bbox;c=wa(c,W),$=wa($,V),this.contentWidth=c,this.contentHeight=$,c=Ea(c,P),$=Ea($,k),this._bbox={x:t,y:i,width:c,height:$};var rt=this.maxLeft,ot=this.maxTop,at=this.maxBottom,nt=this.maxRight;if(this.measure(),(rt!=this.maxLeft||nt!=this.maxRight||ot!=this.maxTop||at!=this.maxBottom)&&this.events.isEnabled("transformed")){var st={type:"transformed",target:this};it&&(st.dummyData=it.width+" "+c+"  "+it.height+" "+$),this.events.dispatchImmediately("transformed",st)}this.dispatchImmediately("layoutvalidated")},e.prototype.updateCenter=function(){t.prototype.updateCenter.call(this),this.updateBackground()},e.prototype.updateBackground=function(){var t=this._background;t&&(t.x=this.maxLeft,t.y=this.maxTop,t.width=this.maxRight-this.maxLeft,t.height=this.maxBottom-this.maxTop)},e.prototype.getColumnWidth=function(t,e,i){var r=this,o=[],a=0;return la(t,function(t){!t.isMeasured||t.disabled||t.__disabled||(r.fixedWidthGrid?o[a]=i:o[a]=wa(o[a],t.measuredWidth+t.pixelMarginRight+t.pixelMarginLeft),++a==e&&(a=0))}),o},Object.defineProperty(e.prototype,"layout",{get:function(){return this.getPropertyValue("layout")},set:function(t){this.setPropertyValue("layout",t)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentValign",{get:function(){return this.getPropertyValue("contentValign")},set:function(t){this.setPropertyValue("contentValign",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentAlign",{get:function(){return this.getPropertyValue("contentAlign")},set:function(t){this.setPropertyValue("contentAlign",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedWidthGrid",{get:function(){return this.getPropertyValue("fixedWidthGrid")},set:function(t){this.setPropertyValue("fixedWidthGrid",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxColumns",{get:function(){return this.getPropertyValue("maxColumns")},set:function(t){this.setPropertyValue("maxColumns",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverseOrder",{get:function(){return this.getPropertyValue("reverseOrder")},set:function(t){this.setPropertyValue("reverseOrder",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setStateOnChildren",{get:function(){return this.getPropertyValue("setStateOnChildren")},set:function(t){this.setPropertyValue("setStateOnChildren",t,!0)},enumerable:!0,configurable:!0}),e.prototype.fitsToBounds=function(t){var e=t.x,i=t.y;return e>=-.5&&e<=this.pixelWidth+.5&&i>=-.5&&i<=this.pixelHeight+.5},e.prototype.copyFrom=function(e){var i=this;t.prototype.copyFrom.call(this,e),this.layout=e.layout,this.setStateOnChildren=e.setStateOnChildren,e._background&&(this.background=e._background.clone(),this.background.copyFrom(e._background)),ga(e.children.iterator(),function(t){t.shouldClone&&(t.clone().parent=i)})},Object.defineProperty(e.prototype,"preloader",{get:function(){var t=this._preloader;return t||(this.parent?this.parent.preloader:void 0)},set:function(t){this._preloader&&this.removeDispose(this._preloader),this._preloader=t,t&&(t.parent=this.tooltipContainer,this._disposers.push(t))},enumerable:!0,configurable:!0}),e.prototype.setPaper=function(e){var i=this,r=t.prototype.setPaper.call(this,e);return r&&(this._background&&(this._background.paper=e,this._background.topParent=this.topParent),this.children.each(function(t){t.setPaper(e),t.topParent=i.topParent})),r},e.prototype.removeFromInvalids=function(){t.prototype.removeFromInvalids.call(this),ca.removeFromInvalidLayouts(this)},e.prototype.setDataItem=function(e){this._dataItem!=e&&(ga(this.children.iterator(),function(t){t.dataItem=e}),this._background&&(this._background.dataItem=e)),t.prototype.setDataItem.call(this,e)},e.prototype.measureElement=function(){this.disabled||this.isTemplate||"none"==this.layout||this.__disabled||this.validateLayout()},Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this.getPropertyValue("fontFamily")},set:function(t){this.setPropertyValue("fontFamily",t,!0)&&(this.setSVGAttribute({"font-family":t}),this.invalidateLabels())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this.getPropertyValue("fontSize")},set:function(t){this.setPropertyValue("fontSize",t,!0)&&(this.setSVGAttribute({"font-size":t}),this.invalidateLabels())},enumerable:!0,configurable:!0}),e.prototype.invalidateLabels=function(){this.children.each(function(t){t.hardInvalidate?(t.hardInvalidate(),t.events.once("validated",t.handleValidate,t,!1)):t instanceof e&&t.invalidateLabels()})},Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this.getPropertyValue("fontWeight")},set:function(t){this.setPropertyValue("fontWeight",t),this.setSVGAttribute({"font-weight":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textDecoration",{get:function(){return this.getPropertyValue("textDecoration")},set:function(t){this.setPropertyValue("textDecoration",t),this.setSVGAttribute({"text-decoration":t})},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._background&&this._background.dispose(),this._shouldBeReady=[],this.disposeChildren(),t.prototype.dispose.call(this)},e.prototype.setState=function(e,i,r){var o=e;return e instanceof ze&&(o=e.name),this.setStateOnChildren&&ga(this.children.iterator(),function(t){t.setState(o,i,r),"active"!=o&&(t.isActive=!1)}),this._background&&this._background.setState(o),this.setStateOnSprites.length&&la(this.setStateOnSprites,function(t){t.setState(o,i,r)}),t.prototype.setState.call(this,e,i,r)},e.prototype.setActive=function(e){t.prototype.setActive.call(this,e),this._background&&(this._background.isActive=e)},e.prototype.dispatchReady=function(){var e=this;if(!this.isReady()&&!this.isDisposed()){var i=!0;Pb(this.children.iterator(),function(t){return!!(t.__disabled||t.disabled||t.isReady())||(i=!1,!1)}),gf(this._shouldBeReady,function(t){return!!(t.__disabled||t.disabled||t.isReady())||(i=!1,!1)}),i?t.prototype.dispatchReady.call(this):ca.events.once("exitframe",function(){e.dispatchReady(),Aa.requestFrame()},void 0,!1)}},e.prototype._systemUpdate=function(e){this.children.each(function(t){t.invalid&&(t._systemCheckIfValidate()?t.dataItem&&t.dataItem.component&&t.dataItem.component.dataInvalid?e.push(t):t.validate():e.push(t))}),t.prototype._systemUpdate.call(this,e)},e.prototype._systemValidatePositions=function(){this.children.each(function(t){t.positionInvalid&&t.validatePosition()}),t.prototype._systemValidatePositions.call(this)},e.prototype._systemValidateLayouts=function(){this.layoutInvalid&&!this.isDisposed()&&this.validateLayout()},Object.defineProperty(e.prototype,"tapToActivate",{get:function(){return this._tapToActivate},set:function(t){this._tapToActivate!=t&&this.setTapToActivate(t)},enumerable:!0,configurable:!0}),e.prototype.setTapToActivate=function(t){var e=this;this._tapToActivate=t,this.interactions.isTouchProtected=t,t&&this.interactions.setEventDisposer("container-tapToActivate",t,function(){return new Ya([e.events.on("hit",e.handleTapToActivate,e,!1),e.events.on("down",e.initTapTimeout,e,!1),e.events.on("track",e.initTapTimeout,e,!1),va().body.events.on("down",function(t){va().isLocalElement(t.pointer,e.paper.svg,e.uid)||e.handleTapToActivateDeactivation()},e,!1)])}),va()},e.prototype.handleTapToActivate=function(){this.interactions.isTouchProtected=!1,this.initTapTimeout()},e.prototype.handleTapToActivateDeactivation=function(){this.interactions.isTouchProtected=!0},e.prototype.initTapTimeout=function(){var t=this;this._tapToActivateTimeout&&this._tapToActivateTimeout.dispose(),this.tapToActivate&&!this.interactions.isTouchProtected&&this.tapTimeout&&(this._tapToActivateTimeout=this.setTimeout(function(){t.handleTapToActivateDeactivation()},this.tapTimeout))},e.prototype.moveHtmlContainer=function(t){var e=Ch(t);if(e){this.htmlContainer=e;var i=this.svgContainer;i.htmlElement=e,i.htmlElement.appendChild(i.SVGContainer),i.initSensor(),i.measure()}else Ca(t)&&""!=t&&Aa.log("html container '"+t+"' not found")},e.prototype.hasLicense=function(){if(za.commercialLicense)return!0;for(var t=0;t<za.licenses.length;t++)if(za.licenses[t].match(/^CH.{5,}/i))return!0;return!1},e}(xa);ca.registeredClasses.Container=oa;var Ml=function(){function t(){this._isPaused=!1,this.animations=[],this.uid=ca.getUniqueId(),this.dummyCounter=0,this._frameRequested=!1,this.updateStepDuration=45,this.time=Date.now()}return t.prototype.reportTime=function(t,i){this.dummyCounter,i&&(this.time=Date.now())},t.prototype.update=function(){var t=this;if(!this._isPaused){this._frameRequested=!1;var i=Date.now();ca.dispatchImmediately("enterframe");for(var a in ca.invalidDatas)if(hc(ca.invalidDatas,a)){for(var r=ca.invalidDatas[a];r.length>0;){var e=($=r[0]).dataProvider;if($.isDisposed())ta(r,$);else if(e&&e.dataInvalid)try{if(e.validateData(),e.dataValidationProgress<1)break}catch(p){ta(r,e),e.raiseCriticalError(p)}else try{if($.validateData(),$.dataValidationProgress<1)break}catch(p){ta(r,$),$.raiseCriticalError(p)}}if(Date.now()-i>this.updateStepDuration)break}for(;ca.invalidRawDatas.length>0;){if(($=ca.invalidRawDatas[0]).isDisposed())ta(ca.invalidRawDatas,$);else try{$.validateRawData()}catch(p){ta(ca.invalidRawDatas,$),$.raiseCriticalError(p)}}for(;ca.invalidDataItems.length>0;){e=($=ca.invalidDataItems[0]).dataProvider;if($.isDisposed()||$.dataInvalid||e&&e.dataInvalid);else try{$.validateDataItems()}catch(p){ta(ca.invalidDataItems,$),$.raiseCriticalError(p)}ta(ca.invalidDataItems,$)}for(;ca.invalidDataRange.length>0;){var $;e=($=ca.invalidDataRange[0]).dataProvider;if($.isDisposed()||$.dataInvalid||e&&e.dataInvalid);else try{$.validateDataRange(),$.skipRangeEvent||$.dispatchImmediately("datarangechanged"),$.skipRangeEvent=!1}catch(p){ta(ca.invalidDataRange,$),$.raiseCriticalError(p)}ta(ca.invalidDataRange,$)}var o=[];sa(ca.invalidLayouts,function(i){t.validateLayouts(i)}),sa(ca.invalidPositions,function(i){t.validatePositions(i)});var s=!1;if(i=Date.now(),sa(ca.invalidSprites,function(a,r){for(var e=0;r.length>0;){if(t.validateLayouts(a),t.validatePositions(a),5==++e){if(Date.now()-i>t.updateStepDuration)break;e=0}var $=r[r.length-1];if($&&!$.isDisposed()){if($._systemCheckIfValidate()){if(t.checkIfValidate2($))try{$._systemUpdate(o)}catch(p){$.invalid=!1,ta(r,$),$.raiseCriticalError(p)}else o.push($);}else o.push($);$.invalid=!1}ta(r,$)}ca.invalidSprites[a]=ca.invalidSprites[a].concat(o)}),sa(ca.invalidSprites,function(t,i){i.length>0&&(s=!0)}),sa(ca.invalidDatas,function(t,i){i.length>0&&(s=!0)}),la(wd(this.animations),function(t){t.update()}),sa(ca.invalidLayouts,function(i){t.validateLayouts(i)}),sa(ca.invalidPositions,function(i){t.validatePositions(i)}),Dj(),sa(ca.invalidLayouts,function(i){t.validateLayouts(i)}),sa(ca.invalidPositions,function(i){t.validatePositions(i)}),ca.dispatchImmediately("exitframe"),(s||this.animations.length>0||[].length>0)&&this.requestFrame(),this.updateStepDuration<200){var n=!0;sa(ca.invalidDatas,function(t,i){i.length>0&&(n=!1)}),sa(ca.invalidSprites,function(t,i){i.length>0&&(n=!1)}),n&&(this.updateStepDuration=200)}}},t.prototype.checkIfValidate2=function(t){return!(t.dataItem&&t.dataItem.component&&t.dataItem.component.dataInvalid&&!t.dataItem.component.isTemplate)},t.prototype.requestFrame=function(){var t=this;this._frameRequested||(pf(function(){t.update()}),this._frameRequested=!0)},t.prototype.softInvalidate=function(t){var i=this;t.children.each(function(t){t instanceof oa&&i.softInvalidate(t),t.measureFailed&&(Pj(t,"Label")?t.hardInvalidate():t.invalidate(),t.measureFailed=!1)})},t.prototype.validatePositions=function(t){for(var i=ca.invalidPositions[t];i.length>0;){var a=i[i.length-1];if(a.isDisposed())ta(i,a);else try{a._systemValidatePositions()}catch(r){a.positionInvalid=!1,ta(i,a),a.raiseCriticalError(r)}}},t.prototype.validateLayouts=function(t){for(var i=ca.invalidLayouts[t];i.length>0;){var a=i[i.length-1];if(a.isDisposed())ta(i,a);else try{a.children.each(function(t){t._systemValidateLayouts()}),a.validateLayout()}catch(r){a.layoutInvalid=!1,ta(i,a),a.raiseCriticalError(r)}}},t.prototype.log=function(t){kl(t)},Object.defineProperty(t.prototype,"isPaused",{get:function(){return this._isPaused},set:function(t){this._isPaused=t,t||(this._frameRequested=!1,this.requestFrame())},enumerable:!0,configurable:!0}),t.VERSION="4.10.13",t}();var Aa=new Ml;var ai=function(){function t(){}return t.prototype.parse=function(t){return[]},Object.defineProperty(t.prototype,"parsableNumbers",{get:function(){return this.options.numberFields&&this.options.numberFields.length>0},enumerable:!0,configurable:!0}),t.prototype.maybeToNumber=function(t,e){return-1!==this.options.numberFields.indexOf(t)?Df(e):e},Object.defineProperty(t.prototype,"parsableDates",{get:function(){return this.options.dateFields&&this.options.dateFields.length>0},enumerable:!0,configurable:!0}),t.prototype.maybeToDate=function(t,e){return-1!==this.options.dateFields.indexOf(t)?this.options.dateFormatter.parse(e,this.dateFormat):e},t.prototype.maybeToEmpty=function(t){return ba(t)&&""!=t||!ba(this.options.emptyAs)?t:this.options.emptyAs},Object.defineProperty(t.prototype,"dateFormatter",{get:function(){return this.options.dateFormatter||(this.options.dateFormatter=new Md,this.options.dateFormat&&(this.options.dateFormat=this.options.dateFormat)),this.options.dateFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dateFormat",{get:function(){return this.options.dateFormat||this.dateFormatter.inputDateFormat},enumerable:!0,configurable:!0}),t}();var Nl=[",",";","\t"],Je=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.contentType="text/csv",r.options={delimiter:"",reverse:!1,skipRows:0,skipEmpty:!0,useColumnNames:!1},r}return da(r,e),r.isCSV=function(e){return!!r.getDelimiterFromData(e)},r.getDelimiterFromData=function(e){var r,t=e.split("\n"),i=t.length;return la(Nl,function(e){for(var s=0,o=0,a=0;a<i;++a){if(!((s=t[a].split(e).length)>1)){o=0;break}if(0===o)o=s;else if(s!=o){o=0;break}}o&&(r=e)}),r},r.prototype.parse=function(e){this.options.delimiter||(this.options.delimiter=r.getDelimiterFromData(e));var t,i,s,o=this.CSVToArray(e,this.options.delimiter),a=ba(this.options.emptyAs),p=this.parsableNumbers,n=this.parsableDates,$=[],l=[];for(i=0;i<this.options.skipRows;i++)o.shift();if(this.options.useColumnNames){l=o.shift();for(var h=0;h<l.length;h++)""===(t=ba(l[h])?l[h].replace(/^\s+|\s+$/gm,""):"")&&(t="col"+h),l[h]=t}for(;s=this.options.reverse?o.pop():o.shift();)if(!this.options.skipEmpty||1!==s.length||""!==s[0]){var u={};for(i=0;i<s.length;i++)u[t=void 0===l[i]?"col"+i:l[i]]=""===s[i]?this.options.emptyAs:s[i],a&&(u[t]=this.maybeToEmpty(u[t])),p&&(u[t]=this.maybeToNumber(t,u[t])),n&&(u[t]=this.maybeToDate(t,u[t]));$.push(u)}return $},r.prototype.CSVToArray=function(e,r){r=r||",";for(var t=new RegExp("(\\"+r+"|\\r?\\n|\\r|^)(?:\"([^\"]*(?:\"\"[^\"]*)*)\"|([^\"\\"+r+"\\r\\n]*))","gi"),i=[[]],s=null;s=t.exec(e);){var o=s[1];o.length&&o!==r&&i.push([]);var a=void 0;a=s[2]?s[2].replace(new RegExp("\"\"","g"),"\""):s[3],i[i.length-1].push(a)}return i},r}(ai);var Od=function(r){function e(){var e=null!==r&&r.apply(this,arguments)||this;return e.contentType="application/json",e.options={},e}return da(e,r),e.isJSON=function(r){try{return JSON.parse(r),!0}catch(e){return!1}},e.prototype.parse=function(r){var e,t=this;try{ba(JSON)&&(e=JSON.parse(r))}catch(n){return}var a=ba(this.options.emptyAs),$=this.parsableNumbers,p=this.parsableDates;if(Array.isArray(e)&&($||p||a))for(var s=function(r,s){var i=e[r];sa(i,function(r,e){a&&(i[r]=t.maybeToEmpty(i[r])),$&&(i[r]=t.maybeToNumber(r,i[r])),p&&(i[r]=t.maybeToDate(r,i[r]))})},i=0,o=e.length;i<o;i++)s(i);return e},e}(ai);var Ol=function(){function e(){this.adapter=new Kb(this)}return e.prototype.load=function(e){var r=Array.isArray(e)?e:[e],t=vd(r,function(e){return e.dispatchImmediately("started"),e.dispatchImmediately("loadstarted"),Ge(e.url,e,e.requestOptions)});Promise.all(t).then(function(e){la(e,function(e){var r=e.target;r.dispatchImmediately("loadended"),e.error?r.events.isEnabled("error")&&r.events.dispatchImmediately("error",{type:"error",code:e.xhr.status,message:r.language.translate("Unable to load file: %1",null,r.url),target:r}):r.processData(e.response,e.type),r.dispatchImmediately("ended")})}).catch(function(e){e.target&&(e.target.dispatchImmediately("loadended"),e.target.events.isEnabled("error")&&e.target.events.dispatchImmediately("error",{type:"error",code:e.xhr.status,message:e.target.language.translate("Unable to load file: %1",null,e.target.url),target:e.target}),e.target.dispatchImmediately("ended"))})},e.prototype.getParserByType=function(e){var r=this.adapter.apply("getParserByType",{parser:null,type:e}).parser;return r||("csv"==e||"text/csv"==e||"application/vnd.ms-excel"==e?new Je:"json"==e||"application/json"==e?new Od:void 0)},e.prototype.getParserByData=function(e,r){var t=this.adapter.apply("getParserByData",{parser:null,data:e,type:r}).parser;if(!t){if(t=this.getParserByType(r))return t;if(Od.isJSON(e))return this.getParserByType("json");if(Je.isCSV(e))return this.getParserByType("csv")}return t},e}();var $f=new Ol;var Pl=function(e){function t(t,r){var a=e.call(this)||this;return a.adapter=new Kb(a),a._requestOptions={},a._incremental=!1,a._incrementalParams={},a._keepCount=!1,a._updateCurrentData=!1,a.showPreloader=!0,a.className="DataSource",t&&(a.url=t),r&&(a.parser="string"==typeof r?$f.getParserByType(r):r),a}return da(t,e),t.prototype.processData=function(e,t){if(this.dispatchImmediately("parsestarted"),this.parser||(this.parser=$f.getParserByData(e,t),this.parser)){if(this.parser.options=this.adapter.apply("parserOptions",this.parser.options),this.parser.options.dateFields=this.adapter.apply("dateFields",this.parser.options.dateFields||[]),this.parser.options.numberFields=this.adapter.apply("numberFields",this.parser.options.numberFields||[]),this.parser.options.dateFields&&!this.parser.options.dateFormatter&&(this.parser.options.dateFormatter=this.dateFormatter),this.data=this.adapter.apply("parsedData",this.parser.parse(this.adapter.apply("unparsedData",e))),!ba(this.data)&&this.events.isEnabled("parseerror")){var r={type:"parseerror",message:this.language.translate("Error parsing file: %1",null,this.url),target:this};this.events.dispatchImmediately("parseerror",r)}this.dispatchImmediately("parseended"),ba(this.data)&&this.dispatchImmediately("done",{data:this.data}),this.lastLoad=new Date}else{if(this.events.isEnabled("parseerror")){var a={type:"parseerror",message:this.language.translate("No parser available for file: %1",null,this.url),target:this};this.events.dispatchImmediately("parseerror",a)}this.dispatchImmediately("parseended")}},Object.defineProperty(t.prototype,"url",{get:function(){var e=this.disableCache?this.timestampUrl(this._url):this._url;return this.incremental&&this.component.data.length&&(e=this.addUrlParams(e,this.incrementalParams)),this.adapter.apply("url",e)},set:function(e){this._url=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"requestOptions",{get:function(){return this.adapter.apply("requestOptions",this._requestOptions)},set:function(e){this._requestOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parser",{get:function(){return this._parser||(this._parser=new Od),this.adapter.apply("parser",this._parser)},set:function(e){this._parser=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reloadFrequency",{get:function(){return this.adapter.apply("reloadTimeout",this._reloadFrequency)},set:function(e){var t=this;this._reloadFrequency!=e&&(this._reloadFrequency=e,e?ba(this._reloadDisposer)||(this._reloadDisposer=this.events.on("ended",function(e){t._reloadTimeout=setTimeout(function(){t.load()},t.reloadFrequency)})):ba(this._reloadDisposer)&&(this._reloadDisposer.dispose(),this._reloadDisposer=void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"incremental",{get:function(){return this.adapter.apply("incremental",this._incremental)},set:function(e){this._incremental=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"incrementalParams",{get:function(){return this.adapter.apply("incrementalParams",this._incrementalParams)},set:function(e){this._incrementalParams=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keepCount",{get:function(){return this.adapter.apply("keepCount",this._keepCount)},set:function(e){this._keepCount=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updateCurrentData",{get:function(){return this.adapter.apply("updateCurrentData",this._updateCurrentData)},set:function(e){this._updateCurrentData=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"language",{get:function(){return this._language?this._language:this.component?(this._language=this.component.language,this._language):(this.language=new Dc,this.language)},set:function(e){this._language=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dateFormatter",{get:function(){return this._dateFormatter?this._dateFormatter:this.component?(this._dateFormatter=this.component.dateFormatter,this._dateFormatter):(this.dateFormatter=new Md,this.dateFormatter)},set:function(e){this._dateFormatter=e},enumerable:!0,configurable:!0}),t.prototype.timestampUrl=function(e){var t={};return t[new Date().getTime().toString()]="",this.addUrlParams(e,t)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._reloadTimeout&&clearTimeout(this._reloadTimeout),ba(this._reloadDisposer)&&(this._reloadDisposer.dispose(),this._reloadDisposer=void 0)},t.prototype.load=function(){this.url&&(this._reloadTimeout&&clearTimeout(this._reloadTimeout),$f.load(this))},t.prototype.addUrlParams=function(e,t){var r=e.match(/\?/)?"&":"?",a=[];return sa(t,function(e,t){""!=t?a.push(e+"="+encodeURIComponent(t)):a.push(e)}),a.length?e+r+a.join("&"):e},t.prototype.processConfig=function(t){ca.registeredClasses.json=Od,ca.registeredClasses.JSONParser=Od,ca.registeredClasses.csv=Je,ca.registeredClasses.CSVParser=Je,e.prototype.processConfig.call(this,t)},t}(jc);var Ql=function(e){function t(){var t=e.call(this)||this;return t._rules=new Fa,t._appliedRules={},t._appliedTargets=[],t._useDefault=!0,t.adapter=new Kb(t),t._enabled=!1,t._responsiveDisposers=[],t._noStates=[],t.className="Responsive",t.rules.events.on("inserted",function(){t.checkRules()},!0),t.rules.events.on("removed",function(){t.checkRules()},!0),t._disposers.push(t.rules.events),t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"component",{get:function(){return this._component},set:function(e){var t=this;e!=this._component&&(this.disposeResponsiveHandlers(),this._component=e,this._responsiveDisposers.push(Va(this.component).events.on("sizechanged",function(){t.checkRules()},this)),this._responsiveDisposers.push(Va(this.component).events.on("datavalidated",function(){t._component.isReady()&&t.checkRules(!0)},this)),this.enabled=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this.adapter.apply("enabled",this._enabled)},set:function(e){this._enabled!=e&&(this._enabled=e,this.applyRules())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useDefault",{get:function(){return this.adapter.apply("useDefault",this._useDefault)},set:function(e){this._useDefault!=e&&(this._useDefault=e,this.applyRules())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rules",{get:function(){return this.adapter.apply("rules",this._rules)},set:function(e){this._rules=e,this._enabled=!0,this.applyRules()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultRules",{get:function(){return this.adapter.apply("defaultRules",ub)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allRules",{get:function(){var e=new Fa;return this.useDefault&&e.copyFrom(this.defaultRules),e.copyFrom(this.rules),this.adapter.apply("allRules",e)},enumerable:!0,configurable:!0}),t.prototype.isApplied=function(e){var t=this._appliedRules[e];return!!ba(t)&&t},t.prototype.checkRules=function(e){var t=this;void 0===e&&(e=!1);var i=this.allRules;if(i&&0!=i.length){var r=!1,n=Va(this.component);if(ga(i.iterator(),function(e){e.id||(e.id=ca.getUniqueId());var i=e.relevant(n);(i&&!t.isApplied(e.id)||!i&&t.isApplied(e.id))&&(r=!0),t._appliedRules[e.id]=i}),e&&(r=!0),r){if(!this.component.isReady())return n.hidden=!0,void n.events.once("ready",function(e){e.target.show(0),t.applyRules()});this.dispatchImmediately("ruleschanged"),this.applyRules()}}},t.prototype.applyRules=function(e){var t=this,i=ba(e)?e:Va(this.component),r=!1;if(this.enabled){var n=!1;ga(this.allRules.iterator(),function(e){var s=t.getState(e,i);s&&(r||(-1!==_b(t._appliedTargets,i.uid)&&i.setState(t.getDefaultState(i),0),r=!0),t.isApplied(Va(e.id))&&(s.transitionDuration=0,t.setTargetState(i,s),t.dispatchImmediately("ruleapplied",{rule:e}),n=!0))}),n?qj(this._appliedTargets,i.uid):ta(this._appliedTargets,i.uid)}i.children&&ga(i.children.iterator(),function(e){t.applyRules(e)})},t.prototype.getState=function(e,t){var i="responsive-"+e.id,r=t.uid+"_"+i;if(-1===_b(this._noStates,r)){if(t.states.hasKey(i))return t.states.getKey(i);var n=e.state(t,i);return n||this._noStates.push(r),n}},t.prototype.getDefaultState=function(e){return e.states.hasKey("responsive-default")?e.states.getKey("responsive-default"):e.states.create("responsive-default")},t.prototype.setTargetState=function(e,t){var i=this,r=this.getDefaultState(e);sa(t.properties,function(t,n){ba(r.properties[t])||(r.properties[t]=i.getValue(e,t))}),e.setState(t)},t.prototype.getValue=function(e,t){var i=e.getPropertyValue(t);return!ba(i)&&ba(e[t])&&(i=e[t]),i},t.prototype.dispose=function(){this.disposeResponsiveHandlers(),e.prototype.dispose.call(this)},t.prototype.disposeResponsiveHandlers=function(){for(var e=this._responsiveDisposers.pop();e;)e.dispose(),e=this._responsiveDisposers.pop()},t}(jc);var ub=new Fa;ub.events.on("inserted",function(e){e.newValue.id=ca.getUniqueId()});var Ab=function(){function e(){}return e.widthXXS=function(t){return t.pixelWidth<=e.XXS},e.widthXS=function(t){return t.pixelWidth<=e.XS},e.widthS=function(t){return t.pixelWidth<=e.S},e.widthM=function(t){return t.pixelWidth<=e.M},e.widthL=function(t){return t.pixelWidth<=e.L},e.widthXL=function(t){return t.pixelWidth<=e.XL},e.widthXXL=function(t){return t.pixelWidth<=e.XXL},e.heightXXS=function(t){return t.pixelHeight<=e.XXS},e.heightXS=function(t){return t.pixelHeight<=e.XS},e.heightS=function(t){return t.pixelHeight<=e.S},e.heightM=function(t){return t.pixelHeight<=e.M},e.heightL=function(t){return t.pixelHeight<=e.L},e.heightXL=function(t){return t.pixelHeight<=e.XL},e.heightXXL=function(t){return t.pixelHeight<=e.XXL},e.isXXS=function(t){return t.pixelWidth<=e.XXS&&t.pixelHeight<=e.XXS},e.isXS=function(t){return t.pixelWidth<=e.XS&&t.pixelHeight<=e.XS},e.isS=function(t){return t.pixelWidth<=e.S&&t.pixelHeight<=e.S},e.isM=function(t){return t.pixelWidth<=e.M&&t.pixelHeight<=e.M},e.isL=function(t){return t.pixelWidth<=e.L&&t.pixelHeight<=e.L},e.isXL=function(t){return t.pixelWidth<=e.XL&&t.pixelHeight<=e.XL},e.isXXL=function(t){return t.pixelWidth<=e.XXL&&t.pixelHeight<=e.XXL},e.maybeXXS=function(t){return t.pixelWidth<=e.XXS||t.pixelHeight<=e.XXS},e.maybeXS=function(t){return t.pixelWidth<=e.XS||t.pixelHeight<=e.XS},e.maybeS=function(t){return t.pixelWidth<=e.S||t.pixelHeight<=e.S},e.maybeM=function(t){return t.pixelWidth<=e.M||t.pixelHeight<=e.M},e.maybeL=function(t){return t.pixelWidth<=e.L||t.pixelHeight<=e.L},e.maybeXL=function(t){return t.pixelWidth<=e.XL||t.pixelHeight<=e.XL},e.maybeXXL=function(t){return t.pixelWidth<=e.XXL||t.pixelHeight<=e.XXL},e.XXS=100,e.XS=200,e.S=300,e.M=400,e.L=600,e.XL=800,e.XXL=1e3,e}();var Rc=function(t){function e(){var e=t.call(this)||this;return e._disabled=!1,e.hasProperties=!1,e.values={},e.categories={},e.dates={},e.locations={},e.workingLocations={},e.properties={},e.sprites=[],e.isTemplate=!1,e._index=null,e._visible=!0,e._hidden=!1,e._ignoreMinMax=!1,e.hasChildren={},e.isHiding=!1,e._valueAnimations={},e._locationAnimations={},e.className="DataItem",e.applyTheme(),e}return da(e,t),Object.defineProperty(e.prototype,"adapter",{get:function(){return this._adapterO||(this._adapterO=new Kb(this)),this._adapterO},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this.component&&null!=this._index?this._index:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new kd(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return!this._hidden&&this._visible},set:function(t){t&&(this.hidden=!1),this._visible!=t&&this.setVisibility(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hidden",{get:function(){return this._hidden},set:function(t){this._hidden!=t&&(this._hidden=t,t?this.setVisibility(!1):this.setVisibility(!0,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"__disabled",{get:function(){return this._disabled},set:function(t){this._disabled=t,la(this.sprites,function(e){e.__disabled=t})},enumerable:!0,configurable:!0}),e.prototype.setVisibility=function(t,e){if(la(this.sprites,function(e){t?e.visible=e.defaultState.properties.visible:e.hiddenState?e.visible=e.hiddenState.properties.visible:e.visible=!1}),this._visible=t,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("visibilitychanged")){var i={type:"visibilitychanged",target:this,visible:t};this.events.dispatchImmediately("visibilitychanged",i)}},e.prototype.show=function(t,e,i){var s,n=this;if(!this.hidden)return this.setVisibility(!0,!0),this.isHiding=!1,this._hideDisposer&&this.removeDispose(this._hideDisposer),i&&la(i,function(i){s=n.setWorkingValue(i,n.values[i].value,t,e)}),la(this.sprites,function(i){var s=i.show(t);null==s||s.isFinished()||(n._disposers.push(s),null!=e&&e>0&&s.delay(e))}),s},e.prototype.dispose=function(){t.prototype.dispose.call(this),la(this.sprites,function(t){t.dispose()}),this.sprites=[]},e.prototype.hide=function(t,e,i,s){var n=this;if(this.isHiding=!0,la(this.sprites,function(i){var s=i.hide(t);null==s||s.isFinished()||(n._disposers.push(s),null!=e&&e>0&&s.delay(e))}),aa(i)&&s){var a;if(la(s,function(s){var o=n.setWorkingValue(s,i,t,e);o&&(a=o)}),a&&!a.isFinished())return this._hideDisposer=a.events.on("animationended",function(){n.setVisibility(!1,!0),n.isHiding=!1}),this._disposers.push(this._hideDisposer),a;this.isHiding=!1,this.setVisibility(!1,!0)}else this.isHiding=!1,this.setVisibility(!1)},e.prototype.getDuration=function(t){if(!aa(t)){var e=this.component;e&&(t=e.interpolationDuration)}if(null!=t)return this._adapterO?this._adapterO.apply("duration",t):t},e.prototype.getValue=function(t,e){if(t&&this.component){e||(e=this.component.dataFields[t+"Show"])||(e="value");var i=this.values[t][e];return this._adapterO&&this._adapterO.isEnabled("value")?this._adapterO.apply("value",{value:i,field:t}).value:i}},e.prototype.getWorkingValue=function(t){if(t&&this.component){var e=this.component.dataFields[t+"Show"];return e||(e="workingValue"),this._adapterO?this._adapterO.apply("workingValue",{workingValue:this.values[t][e],field:t}).workingValue:this.values[t][e]}},e.prototype.getActualWorkingValue=function(t){return this.values[t].workingValue},e.prototype.setValue=function(t,e,i,s){var n=this.values[t].value,a=this.getDuration(i);if(n!==(e=Ra(e))){if(this.values[t].value=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("valuechanged")){var o={type:"valuechanged",target:this,property:t};this.events.dispatchImmediately("valuechanged",o)}this.component&&this.component.handleDataItemValueChange(this,t)}this.setWorkingValue(t,e,a,s)},e.prototype.setCalculatedValue=function(t,e,i){if(this.values[t][i]!==e&&aa(e)){if(this.values[t][i]=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("calculatedvaluechanged")){var s={type:"calculatedvaluechanged",target:this,property:t};this.events.dispatchImmediately("calculatedvaluechanged",s)}this.component&&this.component.handleDataItemCalculatedValueChange(this,t)}},e.prototype.setWorkingValue=function(t,e,i,s){if(aa(this.values[t].value)){var n=this.getDuration(i),a=this.values[t].workingValue;if(null!=n&&n>0&&aa(a)&&this.component){if(a!=e){var o=this.animate({childObject:this.values[t],property:"workingValue",from:a,to:e,dummyData:t},n,this.component.interpolationEasing);return null!=s&&o.delay(s),o.events.on("animationstarted",this.handleInterpolationProgress,this),o.events.on("animationprogress",this.handleInterpolationProgress,this),o.events.on("animationended",this.handleInterpolationProgress,this),this._valueAnimations[t]=o,o}(r=this._valueAnimations[t])&&r.stop(),this.values[t].workingValue=e}else{var r;if((r=this._valueAnimations[t])&&r.stop(),this.values[t].workingValue=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workingvaluechanged")){var p={type:"workingvaluechanged",target:this,property:t};this.events.dispatchImmediately("workingvaluechanged",p)}this.component&&this.component.handleDataItemWorkingValueChange(this,t)}}},e.prototype.setLocation=function(t,e,i,s){if(this.locations[t]!==e){if(this.locations[t]=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("locationchanged")){var n={type:"locationchanged",target:this,property:t};this.events.dispatchImmediately("locationchanged",n)}this.component&&this.component.handleDataItemValueChange(this,t),this.setWorkingLocation(t,e,i,s)}},e.prototype.setWorkingLocation=function(t,e,i,s){var n=this.getDuration(i),a=this.workingLocations[t];if(null!=n&&n>0&&aa(a)&&this.component){if(a!=e){var o=this.animate({childObject:this.workingLocations,property:t,from:a,to:e,dummyData:t},n,this.component.interpolationEasing);return null!=s&&o.delay(s),o.events.on("animationstarted",this.handleInterpolationProgress,this),o.events.on("animationprogress",this.handleInterpolationProgress,this),o.events.on("animationended",this.handleInterpolationProgress,this),this._locationAnimations[t]=o,o}(r=this._locationAnimations[t])&&r.stop(),this.workingLocations[t]=e}else{var r;if((r=this._locationAnimations[t])&&r.stop(),this.workingLocations[t]=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workinglocationchanged")){var p={type:"workinglocationchanged",target:this,property:t};this.events.dispatchImmediately("workinglocationchanged",p)}this.component&&this.component.handleDataItemWorkingLocationChange(this,t)}},e.prototype.setDate=function(t,e,i){!xd(e)&&this.component&&(e=this.component.dateFormatter.parse(e)),this.dates[t]!==e&&(this.dates[t]=e,this.setValue(t,e.getTime(),i))},e.prototype.getDate=function(t){return this._adapterO?this._adapterO.apply("date",{date:this.dates[t],field:t}).date:this.dates[t]},e.prototype.setProperty=function(t,e){if(this.properties[t]!==e){if(this.hasProperties=!0,this.properties[t]=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("propertychanged")){var i={type:"propertychanged",target:this,property:t,value:e};this.events.dispatchImmediately("propertychanged",i)}this.component&&this.component.handleDataItemPropertyChange(this,t)}},e.prototype.setCategory=function(t,e){Ca(e)||(e=hf(e)),this.categories[t]!==e&&(this.categories[t]=e)},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),e.dataContext&&(this.dataContext=bk(e.dataContext,{})),tc(e.locations,this.locations),e._adapterO&&this.adapter.copyFrom(e._adapterO),this.component=e.component},Object.defineProperty(e.prototype,"opacity",{set:function(t){la(this.sprites,function(e){e.opacity=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignoreMinMax",{get:function(){return this._ignoreMinMax},set:function(t){if(this._ignoreMinMax=t,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("propertychanged")){var e={type:"propertychanged",target:this,property:"ignoreMinMax",value:t};this.events.dispatchImmediately("propertychanged",e)}this.component&&this.component.handleDataItemPropertyChange(this,"ignoreMinMax")},enumerable:!0,configurable:!0}),e.prototype.animate=function(t,e,i){return new bc(this,t,e,i).start()},e.prototype.handleInterpolationProgress=function(t){var e=t.target.animationOptions[0];if(e){if(this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workingvaluechanged")){var i={type:"workingvaluechanged",target:this,property:e.dummyData};this.events.dispatchImmediately("workingvaluechanged",i)}this.component&&this.component.handleDataItemWorkingValueChange(this,e.dummyData)}},e.prototype.hasValue=function(t){for(var e=0,i=t.length;e<i;e++){var s=this.values[t[e]];if(!s||!ba(s.value))return!1}return!0},Object.defineProperty(e.prototype,"depth",{get:function(){return this.parent?this.parent.depth+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataContext",{get:function(){return this._dataContext},set:function(t){this._dataContext=t},enumerable:!0,configurable:!0}),e.prototype.addSprite=function(t){t.dataItem&&t.dataItem!=this&&ta(t.dataItem.sprites,t),this.visible||t.hide(0),this.isHiding&&t.hide(),this.sprites.push(t),t.dataItem=this},e}(jc);var Sc=function(t){function e(){var e=t.call(this)||this;return e.dataFields={},e._dataSources={},e._parseDataFrom=0,e._dataDisposers=[],e._currentDataSetId="",e._start=0,e._end=1,e.skipRangeEvent=!1,e.rangeChangeDuration=0,e.rangeChangeEasing=Qc,e.parsingStepDuration=50,e.dataInvalid=!1,e.rawDataInvalid=!1,e.dataRangeInvalid=!1,e.dataItemsInvalid=!1,e.interpolationDuration=0,e.interpolationEasing=Qc,e.sequencedInterpolation=!0,e.sequencedInterpolationDelay=0,e.dataValidationProgress=0,e._addAllDataItems=!0,e._usesData=!0,e.className="Component",e.minZoomCount=1,e.maxZoomCount=0,e._dataItems=new le(e.createDataItem()),e._dataItems.events.on("inserted",e.handleDataItemAdded,e,!1),e._dataItems.events.on("removed",e.handleDataItemRemoved,e,!1),e._disposers.push(new Sa(e._dataItems)),e._disposers.push(e._dataItems.template),e.invalidateData(),e.dataUsers.events.on("inserted",e.handleDataUserAdded,e,!1),e._disposers.push(new Ya(e._dataDisposers)),e._start=0,e._end=1,e.maxZoomDeclination=1,e.applyTheme(),e}return da(e,t),e.prototype.createDataItem=function(){return new Rc},e.prototype.handleDataUserAdded=function(t){t.newValue.dataProvider=this},e.prototype.handleDataItemValueChange=function(t,e){this.dataItemsInvalid||this.invalidateDataItems()},e.prototype.handleDataItemWorkingValueChange=function(t,e){},e.prototype.handleDataItemWorkingLocationChange=function(t,e){},e.prototype.handleDataItemCalculatedValueChange=function(t,e){},e.prototype.handleDataItemPropertyChange=function(t,e){},e.prototype.processDataItem=function(t,e){var a=this;if(t){e||(e={}),t.dataContext=e;var i=!1;sa(this.dataFields,function(r,n){var s=r,o=e[n];if(a._adapterO&&a._adapterO.isEnabled("dataContextValue")&&(o=a._adapterO.apply("dataContextValue",{field:s,value:o,dataItem:t}).value),ba(o))if(i=!0,t.hasChildren[s]){var d=a.createDataItem();d.copyFrom(a.mainDataSet.template);var p=new le(d);p.events.on("inserted",a.handleDataItemAdded,a,!1),p.events.on("removed",a.handleDataItemRemoved,a,!1),a._dataDisposers.push(new Sa(p));for(var h=o.length,l=0;l<h;l++){var m=o[l],u=p.create();u.parent=t,a.processDataItem(u,m)}t[s]=p}else t[s]=o}),sa(this.propertyFields,function(a,r){var n=a,s=e[r];ba(s)&&(i=!0,t.setProperty(n,s))}),this._addAllDataItems||i||this.mainDataSet.remove(t)}},e.prototype.updateDataItem=function(t){var e=this;if(t){var a=t.dataContext;sa(this.dataFields,function(i,r){var n=i,s=a[r];(e._adapterO&&(s=e._adapterO.apply("dataContextValue",{field:n,value:s,dataItem:t}).value),ba(s))&&(t.hasChildren[n]?t[n].each(function(t){e.updateDataItem(t)}):t[n]=s)}),sa(this.propertyFields,function(e,i){var r=e,n=a[i];ba(n)&&t.setProperty(r,n)})}},e.prototype.validateDataElements=function(){for(var t=this.endIndex,e=this.startIndex;e<t;e++){var a=this.dataItems.getIndex(e);a&&this.validateDataElement(a)}},e.prototype.validate=function(){this.validateDataElements(),t.prototype.validate.call(this)},e.prototype.validateDataElement=function(t){},e.prototype.addData=function(t,e,a){var i=this;if(!this.dataInvalid&&this.inited&&(this._parseDataFrom=this.data.length),a||(t instanceof Array?la(t,function(t){i.data.push(t)}):this.data.push(t)),this.inited)this.removeData(e,a);else if(aa(e))for(;e>0;)this.data.shift(),e--;this.invalidateData()},e.prototype.removeData=function(t,e){if(aa(t)&&t>0){for(;t>0;){var a=this.mainDataSet.getIndex(0);a&&this.mainDataSet.remove(a),this.dataUsers.each(function(t){if(!t.data||0==t.data.length){var e=t.mainDataSet.getIndex(0);e&&t.mainDataSet.remove(e)}}),e||this.data.shift(),this._parseDataFrom>0&&this._parseDataFrom--,t--}this.invalidateDataItems()}},e.prototype.invalidateData=function(){this.disabled||this.isTemplate||(ca.addToInvalidComponents(this),Aa.requestFrame(),this.dataInvalid=!0,ga(this.dataUsers.iterator(),function(t){t.invalidateDataItems()}))},e.prototype.invalidateDataUsers=function(){ga(this.dataUsers.iterator(),function(t){t.invalidate()})},e.prototype.invalidateDataItems=function(){this.disabled||this.isTemplate||(Wb(ca.invalidDataItems,this),Aa.requestFrame(),this.dataItemsInvalid=!0,ga(this.dataUsers.iterator(),function(t){t.invalidateDataItems()}))},e.prototype.invalidateDataRange=function(){this.disabled||this.isTemplate||(this.dataRangeInvalid=!0,Wb(ca.invalidDataRange,this),Aa.requestFrame())},e.prototype.validateDataRange=function(){ta(ca.invalidDataRange,this),this.dataRangeInvalid=!1,this.startIndex==this._prevStartIndex&&this.endIndex==this._prevEndIndex||(this.rangeChangeUpdate(),this.appendDataItems(),this.invalidate(),this.dispatchImmediately("datarangechanged"))},e.prototype.sliceData=function(){this._workingStartIndex=this.startIndex,this._workingEndIndex=this.endIndex},e.prototype.rangeChangeUpdate=function(){this.sliceData(),this._prevStartIndex=this.startIndex,this._prevEndIndex=this.endIndex},e.prototype.appendDataItems=function(){for(var t=this.endIndex,e=this.startIndex;e<t;e++){(a=this.dataItems.getIndex(e))&&(a.__disabled=!1)}for(e=0;e<this.startIndex;e++){(a=this.dataItems.getIndex(e))&&(a.__disabled=!0)}for(e=this.endIndex;e<this.dataItems.length;e++){var a;(a=this.dataItems.getIndex(e))&&(a.__disabled=!0)}},e.prototype.invalidateRawData=function(){this.disabled||this.isTemplate||(Wb(ca.invalidRawDatas,this),Aa.requestFrame(),this.rawDataInvalid=!0,ga(this.dataUsers.iterator(),function(t){t.invalidateRawData()}))},e.prototype.validateRawData=function(){var t=this;ta(ca.invalidRawDatas,this),ga(this.mainDataSet.iterator(),function(e){e&&t.updateDataItem(e)})},e.prototype.dispose=function(){var e=this;this.mainDataSet.template.clones.clear(),sa(this._dataSources,function(t,a){e.removeDispose(a)}),t.prototype.dispose.call(this)},e.prototype.disposeData=function(){this.mainDataSet.template.clones.clear(),la(this._dataDisposers,function(t){t.dispose()}),ga(this.dataUsers.iterator(),function(t){t.disposeData()}),this._dataDisposers.length=0,this._startIndex=void 0,this._endIndex=void 0,this.mainDataSet.clear(),this.mainDataSet.template.clones.clear(),this._dataSets&&this._dataSets.clear()},e.prototype.getDataItem=function(t){return this.mainDataSet.create()},e.prototype.validateData=function(){if(this.dispatchImmediately("beforedatavalidated"),this.dataInvalid=!1,ca.removeFromInvalidComponents(this),!this.__disabled){if(this.dataValidationProgress=0,this._prevStartIndex=void 0,this._prevEndIndex=void 0,this._startIndex=void 0,this._endIndex=void 0,this.dataFields.data&&this.dataItem){var t=this.dataItem.dataContext;this._data=t[this.dataFields.data]}if(0===this._parseDataFrom&&this.data.length>0&&this.disposeData(),this.data.length>0){var e=this.preloader;ga(this.dataUsers.iterator(),function(t){t._startIndex=void 0,t._endIndex=void 0});for(var a=0,i=Date.now(),r=this._parseDataFrom,n=this.data.length,s=function(){var t=o.data[r];if(o._usesData){var n=o.getDataItem(t);o.processDataItem(n,t)}if((o.dataUsers.each(function(e){if(0==e.data.length){var a=e.getDataItem(t);e.processDataItem(a,t)}}),100==++a)&&(a=0,Date.now()-i>o.parsingStepDuration&&r<o.data.length-10))return o._parseDataFrom=r+1,e&&(r/o.data.length>.5&&!e.visible||(e.progress=r/o.data.length)),o.dataValidationProgress=r/o.data.length,r=o.data.length,o.invalidateData(),{value:void 0}},o=this;r<n;r++){var d=s();if("object"==typeof d)return d.value}e&&(e.progress=1),this.dataUsers.each(function(t){t.hidden&&t.hide(0)})}this.dataValidationProgress=1,this._parseDataFrom=0,this.invalidateDataItems(),this._internalDefaultsApplied||this.applyInternalDefaults(),this.dispatch("datavalidated")}},e.prototype.validateDataItems=function(){ta(ca.invalidDataItems,this),this.dataItemsInvalid=!1,this.invalidateDataRange(),this.invalidate(),this.dispatch("dataitemsvalidated")},Object.defineProperty(e.prototype,"data",{get:function(){return this._data||(this._data=[]),this._adapterO?this._adapterO.apply("data",this._data):this._data},set:function(t){this.setData(t)},enumerable:!0,configurable:!0}),e.prototype.setData=function(t){this._parseDataFrom=0,this.disposeData(),this._data=t,t&&t.length>0?this.invalidateData():(this.dispatchImmediately("beforedatavalidated"),this.dispatch("datavalidated"))},e.prototype.getDataSource=function(t){var e=this;return ba(this._dataSources[t])||(this._dataSources[t]=new Pl,this._dataSources[t].component=this,this.setDataSourceEvents(this._dataSources[t],t),this._dataSources[t].adapter.add("dateFields",function(t){return e.dataSourceDateFields(t)}),this._dataSources[t].adapter.add("numberFields",function(t){return e.dataSourceNumberFields(t)}),this.events.on("inited",function(){e.loadData(t)},this,!1)),this._dataSources[t]},Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._dataSources.data||this.getDataSource("data"),this._dataSources.data},set:function(t){var e=this;this._dataSources.data&&this.removeDispose(this._dataSources.data),this._dataSources.data=t,this._dataSources.data.component=this,this.events.on("inited",function(){e.loadData("data")},this,!1),this.setDataSourceEvents(t,"data")},enumerable:!0,configurable:!0}),e.prototype.loadData=function(t){this._dataSources[t].load()},e.prototype.dataSourceDateFields=function(t){return t},e.prototype.dataSourceNumberFields=function(t){return t},e.prototype.populateDataSourceFields=function(t,e,a){return la(a,function(a){e[a]&&-1===_b(t,e[a])&&t.push(e[a])}),t},e.prototype.setDataSourceEvents=function(t,e){var a=this;t.events.on("started",function(t){var e=a.preloader;e&&(e.progress=0)},void 0,!1),t.events.on("loadstarted",function(t){var e=a.preloader;e&&(e.progress=.25)},void 0,!1),t.events.on("loadended",function(t){var e=a.preloader;e&&(e.progress=.5)},void 0,!1),t.events.on("parseended",function(t){var e=a.preloader;e&&(e.progress=.75)},void 0,!1),t.events.on("ended",function(t){var e=a.preloader;e&&(e.progress=1)},void 0,!1),t.events.on("error",function(t){var e=a.preloader;e&&(e.progress=1),a.openModal(t.message)},void 0,!1),e&&t.events.on("done",function(i){var r=a.preloader;r&&(r.progress=1),"data"!=e||mb(i.data)||(i.data=[i.data]),t.incremental&&"data"==e&&a.data.length?a.addData(i.data,t.keepCount?i.data.length:0):t.updateCurrentData&&"data"==e&&a.data.length?(la(a.data,function(t,e){ba(i.data[e])&&sa(t,function(a,r){ba(i.data[e][a])&&(t[a]=i.data[e][a])})}),a.invalidateRawData()):a[e]=i.data})},Object.defineProperty(e.prototype,"responsive",{get:function(){return this._responsive||(this._responsive=new Ql,this._responsive.component=this),this._responsive},set:function(t){this._responsive=t,this._responsive.component=this},enumerable:!0,configurable:!0}),e.prototype.zoom=function(t,e,a,i){var r=this;void 0===e&&(e=!1),void 0===a&&(a=!1);var n=t.start,s=t.end,o=t.priority;if(t.start==t.end&&(t.start=t.start-.5/this.maxZoomFactor,t.end=t.end+.5/this.maxZoomFactor),"end"==o&&1==s&&0!=n&&n<this.start&&(o="start"),"start"==o&&0==n&&s>this.end&&(o="end"),aa(i)||(i=this.maxZoomDeclination),!aa(n)||!aa(s))return{start:this.start,end:this.end};if(this._finalStart!=n||this._finalEnd!=s){var d=this.maxZoomFactor/this.minZoomCount,p=this.maxZoomFactor/this.maxZoomCount;if("start"==o?(this.maxZoomCount>0&&1/(s-n)<p&&(s=n+1/p),1/(s-n)>d&&(s=n+1/d),s>1&&s-n<1/d&&(n=s-1/d)):(this.maxZoomCount>0&&1/(s-n)<p&&(n=s-1/p),1/(s-n)>d&&(n=s-1/d),n<0&&s-n<1/d&&(s=n+1/d)),n<-i&&(n=-i),1/(s-n)>d&&(s=n+1/d),s>1+i&&(s=1+i),1/(s-n)>d&&(n=s-1/d),this._finalEnd=s,this._finalStart=n,this.skipRangeEvent=e,this.dispatchImmediately("rangechangestarted"),this.rangeChangeDuration>0&&!a){var h=this.rangeChangeAnimation;if(h&&h.progress<1){var l=h.animationOptions;if(l.length>1){if(l[0].to==n&&l[1].to==s)return{start:n,end:s};h.isDisposed()||h.stop()}}this.rangeChangeAnimation&&this.rangeChangeAnimation.kill(),h=this.animate([{property:"start",to:n},{property:"end",to:s}],this.rangeChangeDuration,this.rangeChangeEasing),this.rangeChangeAnimation=h,h&&!h.isFinished()?h.events.on("animationended",function(){r.dispatchImmediately("rangechangeended")}):this.dispatchImmediately("rangechangeended")}else this.start=n,this.end=s,this.dispatch("rangechangeended")}return{start:n,end:s}},e.prototype.zoomToIndexes=function(t,e,a,i){if(aa(t)&&aa(e)){var r=t/this.dataItems.length,n=e/this.dataItems.length;this.zoom({start:r,end:n},a,i)}},Object.defineProperty(e.prototype,"zoomFactor",{get:function(){return na(1/(this.end-this.start),1,this.maxZoomFactor)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxZoomFactor",{get:function(){return this.getPropertyValue("maxZoomFactor")},set:function(t){this.setPropertyValue("maxZoomFactor",t)&&(1==t&&(this.maxZoomDeclination=0),this.invalidateDataRange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxZoomDeclination",{get:function(){return this.getPropertyValue("maxZoomDeclination")},set:function(t){this.setPropertyValue("maxZoomDeclination",t)&&this.invalidateDataRange()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startIndex",{get:function(){return aa(this._startIndex)||(this._startIndex=0),this._startIndex},set:function(t){this._startIndex=na(Math.round(t),0,this.dataItems.length),this.start=this.indexToPosition(this._startIndex)},enumerable:!0,configurable:!0}),e.prototype.indexToPosition=function(t){return t/this.dataItems.length},Object.defineProperty(e.prototype,"endIndex",{get:function(){var t=this.dataItems.length;return(!aa(this._endIndex)||this._endIndex>t)&&(this._endIndex=t),this._endIndex},set:function(t){this._endIndex=na(Math.round(t),0,this.dataItems.length),this.end=this.indexToPosition(this._endIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this._adapterO?this._adapterO.apply("start",this._start):this._start},set:function(t){if(this._start!=t){this._start=t;var e=Math.max(0,Math.floor(this.dataItems.length*t)||0);this._startIndex=Math.min(e,this.dataItems.length),this.invalidateDataRange(),this.invalidate(),this.dispatchImmediately("startchanged"),this.dispatch("startendchanged")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._adapterO?this._adapterO.apply("end",this._end):this._end},set:function(t){this._end!=t&&(this._end=t,this._endIndex=Math.min(this.dataItems.length,Math.ceil(this.dataItems.length*t)||0),this.invalidateDataRange(),this.invalidate(),this.dispatchImmediately("endchanged"),this.dispatch("startendchanged"))},enumerable:!0,configurable:!0}),e.prototype.removeFromInvalids=function(){t.prototype.removeFromInvalids.call(this),ca.removeFromInvalidComponents(this),ta(ca.invalidDataItems,this),ta(ca.invalidDataRange,this),ta(ca.invalidRawDatas,this)},Object.defineProperty(e.prototype,"dataItems",{get:function(){if(""!=this._currentDataSetId){var t=this.dataSets.getKey(this._currentDataSetId);if(t)return t}return this._dataItems},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSets",{get:function(){return this._dataSets||(this._dataSets=new Ta),this._dataSets},enumerable:!0,configurable:!0}),e.prototype.setDataSet=function(t){if(this._currentDataSetId!=t){if(this.dataSets.getKey(t))return this.dataItems.each(function(t){t.__disabled=!0}),this._currentDataSetId=t,this.invalidateDataRange(),this._prevStartIndex=void 0,this.dataItems.each(function(t){t.__disabled=!1}),!0;if(""!=this._currentDataSetId)return this.dataItems.each(function(t){t.__disabled=!0}),this._currentDataSetId="",this.invalidateDataRange(),this._prevStartIndex=void 0,this.dataItems.each(function(t){t.__disabled=!1}),!0}return!1},Object.defineProperty(e.prototype,"currentDataSetId",{get:function(){return this._currentDataSetId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainDataSet",{get:function(){return this._dataItems},enumerable:!0,configurable:!0}),e.prototype._updateDataItemIndexes=function(t){for(var e=this.mainDataSet.values,a=e.length,i=t;i<a;++i)e[i]._index=i},e.prototype.handleDataItemAdded=function(t){t.newValue.component=this,this._updateDataItemIndexes(t.index),this.dataItemsInvalid||this.invalidateDataItems()},e.prototype.handleDataItemRemoved=function(t){this._updateDataItemIndexes(t.index),this.dataItemsInvalid||this.invalidateDataItems()},e.prototype.bindDataField=function(t,e){this.dataFields[t]=e,this.invalidateDataRange()},e.prototype.invalidateProcessedData=function(){this.resetProcessedRange(),this.invalidateDataRange()},e.prototype.resetProcessedRange=function(){this._prevEndIndex=null,this._prevStartIndex=null},Object.defineProperty(e.prototype,"dataUsers",{get:function(){var t=this;return this._dataUsers||(this._dataUsers=new Fa,this._disposers.push(new La(function(){ga(t._dataUsers.iterator(),function(t){t.dispose()})}))),this._dataUsers},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e.dataFields=tc(this.dataFields,{}),e},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.data=e.data,this.sequencedInterpolation=e.sequencedInterpolation,this.sequencedInterpolationDelay=e.sequencedInterpolationDelay,this.interpolationDuration=e.interpolationDuration,this.interpolationEasing=e.interpolationEasing},e.prototype.reinit=function(){this._inited=!1,this.deepInvalidate()},e.prototype.getExporting=function(){var e=t.prototype.getExporting.call(this);return e.adapter.has("data",this._exportData,-1,this)||(e.adapter.add("data",this._exportData,-1,this),this.events.on("datavalidated",function(t){e.handleDataUpdated()})),e},e.prototype._exportData=function(t){return t.data=this.data,t},e.prototype.setDisabled=function(e){var a=t.prototype.setDisabled.call(this,e);return a&&this.invalidateData(),a},e.prototype.setShowOnInit=function(e){e!=this.getPropertyValue("showOnInit")&&(!e||this.inited||this.hidden?this._showOnInitDisposer2&&this.removeDispose(this._showOnInitDisposer2):(this._showOnInitDisposer2=this.events.once("dataitemsvalidated",this.hideInitially,this,!1),this._disposers.push(this._showOnInitDisposer2))),t.prototype.setShowOnInit.call(this,e)},e.prototype.setBaseId=function(e){e!=this._baseId&&this.dataInvalid&&(this.dataInvalid=!1,ca.removeFromInvalidComponents(this),this._baseId=e,this.invalidateData()),t.prototype.setBaseId.call(this,e)},Object.defineProperty(e.prototype,"minZoomCount",{get:function(){return this.getPropertyValue("minZoomCount")},set:function(t){this.setPropertyValue("minZoomCount",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxZoomCount",{get:function(){return this.getPropertyValue("maxZoomCount")},set:function(t){this.setPropertyValue("maxZoomCount",t)},enumerable:!0,configurable:!0}),e.prototype._systemCheckIfValidate=function(){return!(this.dataInvalid||this.dataProvider&&this.dataProvider.dataInvalid)},e.prototype.asFunction=function(e){return"interpolationEasing"==e||"rangeChangeEasing"==e||t.prototype.asIs.call(this,e)},e}(oa);ca.registeredClasses.Component=Sc;var Gb=function(t){function e(){var e=t.call(this)||this;return e.isOversized=!1,e.className="Label",e.fill=new Ia().getFor("text"),e.wrap=!1,e.truncate=!1,e.fullWords=!0,e.ellipsis="\u2026",e.textAlign="start",e.textValign="top",e.layout="absolute",e.baseLineRatio=-.27,e._positionPrecision=1,e.events.on("maxsizechanged",function(){e.inited&&e.handleMaxSize()},e,!1),e.events.once("validated",e.handleValidate,e,!1),e.applyTheme(),e}return da(e,t),e.prototype.afterDraw=function(){t.prototype.afterDraw.call(this),this.validatePosition()},e.prototype.setPaper=function(e){var i=t.prototype.setPaper.call(this,e);return i&&this.hardInvalidate(),i},e.prototype.handleValidate=function(){!this.currentText&&!this.text||0!=this.bbox.width&&0!=this.bbox.height||ca.events.once("exitframe",this.hardInvalidate,this)},e.prototype.handleMaxSize=function(){this.bbox.width>this.availableWidth||this.bbox.width<this.availableWidth&&(this.isOversized||this.truncate)||this.bbox.height>this.availableHeight||this.bbox.height<this.availableHeight&&this.isOversized?this.invalidate():this.alignSVGText()},e.prototype.arrange=function(){},e.prototype.updateCurrentText=function(){var t,e;pe(this.html)&&this.paper.supportsForeignObject()?(t="html",e=this.html):(t="svg",e=this.text),Wa(e)&&(e=e.toString()),ba(e)&&""!==e&&(e=this.populateString(e,this.dataItem)),"html"==t?this._adapterO&&(e=this._adapterO.apply("htmlOutput",e)):this._adapterO&&(e=this._adapterO.apply("textOutput",e));var i=e!=this.currentText||t!=this._currentFormat;return this.currentText=e,this._currentFormat=t,i},e.prototype.hardInvalidate=function(){this._prevStatus="",this.invalidate()},e.prototype.getLineBBox=function(t){var e=t&&t.element,i=e&&e.node;i&&i.parentNode&&(t.bbox=e.getBBox())},e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.bbox.width,i=this.bbox.height,r=this.topParent;if(!r||r.maxWidth&&r.maxHeight){var h=wa(this.availableWidth-this.pixelPaddingLeft-this.pixelPaddingRight,0),s=wa(this.availableHeight-this.pixelPaddingTop-this.pixelPaddingBottom,0),a=s+","+h+this.wrap+this.truncate+this.fullWords+this.rtl+this.ellipsis;if(this.updateCurrentText()||!this.inited||this._prevStatus!=a){this._measuredWidth=0,this._measuredHeight=0,this.isOversized=!1;var n=this._currentFormat,o=this.currentText;if(ba(o)&&""!=o){var l=o.split("\n");this._prevStatus=a,this.textAlign=this.textAlign;var p=this.group.getAttr("display");if("none"==p&&this.group.removeAttr("display"),this.textPathElement&&this.textPathElement.removeChildren(),"svg"===n){this.element.removeAttr("display");var d=this.element;this.resetBBox();for(var u=0,m="",$=0;$<l.length;$++){var g=l[$];if(""!=g){var c=uc().chunk(g,null,this.ignoreFormatting),b=0,x=!0,f=!1,y=this.getLineInfo($);y?(y.text="",y.element.textContent=""):(y={text:"",element:this.getSVGLineElement("",0),complex:!1},d.add(y.element)),y.element.removeAttr("display"),y.element.removeChildren(),this.textPathElement&&y.element.add(this.textPathElement);for(var v=0;v<c.length;v++){v&&(y.complex=!0);var A=c[v];if("format"===A.type)m=A.text;else{if(f)continue;y.text=A.text,y.style=uc().translateStyleShortcuts(m);var W=this.getSvgElement(y.text,y.style);if(this.textPathElement?this.textPathElement.add(W):y.element.add(W),this.getLineBBox(y),y.bbox.width=Math.ceil(y.bbox.width),b<y.bbox.height&&(b=y.bbox.height),(this.wrap||this.truncate)&&y.bbox.width>h){this.isOversized=!0;var P=y.element.textContent,q=y.bbox.width/P.length,w=Ea(Math.ceil((y.bbox.width-h)/q),P.length);if(this.truncate){var V=!1,S=y.element.node;if(S&&S.childNodes)for(var O=y.element.node.childNodes.length-1;O>=0;O--){var C=y.element.node.childNodes[O];if(V&&y.bbox.width<=h&&(C.textContent+=" "+this.ellipsis,y.bbox=y.element.getBBox(),y.bbox.width=Math.floor(y.bbox.width),y.bbox.width<=h))break;V=!1;var E=C.textContent;for(P=y.element.textContent,w=Ea(Math.ceil((y.bbox.width-h)/q),P.length);y.bbox.width>h&&w<=P.length&&w>0;){(B=wa(P.length-w-this.ellipsis.length,1))<=1&&(w=0,O>0&&(V=!0,y.element.node.removeChild(C))),(E=Af(E,B,this.ellipsis,this.fullWords,this.rtl)).length>B&&this.fullWords&&(E=Af(E,B,this.ellipsis,!1,this.rtl)),C.textContent=E,y.bbox=y.element.getBBox(),y.bbox.width=Math.floor(y.bbox.width),w=Math.ceil(1.1*w)}f=!0}}else{if(y.element.node){for(var _=y.element.node.lastChild,L=void 0;y.bbox.width>h&&w<=P.length&&w>0;){var B=wa(A.text.length-w,1);x?L=zf(A.text,B,!0,this.rtl):((L=zf(A.text,B,!0,this.rtl))[0].length>B||1===B)&&(y.element.node.removeChild(_),w=0),w>0&&(_.textContent=uc().cleanUp(kh(L.shift()))),y.bbox=y.element.getBBox(),y.bbox.width=Math.floor(y.bbox.width),w++}if(L.length>0){var T="";ba(L)&&(this.rtl?T+=L.join("")+m:T+=m+L.join("").replace(/([\[\]]{1})/g,"$1$1"));for(var I=v+1;I<c.length;I++)"value"==c[I].type?T+=c[I].text.replace(/([\[\]]{1})/g,"$1$1"):T+=c[I].text;l.splice($+1,0,T)}f=!0}}}this.bbox.width<y.bbox.width&&(this.bbox.width=y.bbox.width),this.bbox.height=u+b,this.textPathElement?y.element.attr({dy:-this.paddingBottom.toString()}):y.element.attr({x:"0",y:u+b,dy:ha(this.baseLineRatio*b,3).toString()}),x=!1}}var H=y.element.node;if(H)(_=H.lastChild)&&(_.textContent=this.rtl?ek(_.textContent):dk(_.textContent));u+=b,this.addLineInfo(y,$)}else{var j=this.getSVGLineElement("",0);j.add(this.getSvgElement(".",uc().translateStyleShortcuts(m))),d.add(j);var z=Math.ceil(j.getBBox().height);z>0&&(u+=z),d.removeElement(j);var k=this.getLineInfo($);k&&(k.text="",k.element.textContent="")}}this.maybeHideOversized(),this.measureFailed=!1,0!=this.bbox.width&&0!=this.bbox.height||(this.measureFailed=!0),this._measuredWidth=ha(wa(this.bbox.width,this.pixelWidth-this.pixelPaddingLeft-this.pixelPaddingRight)),this._measuredHeight=ha(wa(this.bbox.height,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom)),this.alignSVGText(),this.bbox.width=this._measuredWidth,this.bbox.height=this._measuredHeight,i==this._measuredHeight&&e==this._measuredWidth||this.dispatch("transformed"),this.hideUnused(l.length)}else{this.element.removeAttr("display"),this.resetBBox(),(d=this.element).removeChildren();var F=this.paper.foreignObject();d.add(F),this.maxWidth&&F.attr({width:this.maxWidth}),this.maxHeight&&F.attr({height:this.maxHeight});var M=this.getHTMLLineElement(o);F.node.appendChild(M),M.style.display="inline-block";var R=M.clientWidth,D=M.clientHeight;M.style.display="block",this._bbox={x:0,y:0,width:R,height:D},F.attr({width:R,height:D}),this.maybeHideOversized(),this._measuredWidth=wa(this.bbox.width,this.pixelWidth-this.pixelPaddingLeft-this.pixelPaddingRight),this._measuredHeight=wa(this.bbox.height,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom),this.bbox.width=this._measuredWidth,this.bbox.height=this._measuredHeight,this.truncate&&(M.style.overflow="hidden"),(R>h||D>s)&&(this.isOversized=!0)}this.setStyles(),this.updateCenter(),this.updateBackground(),"none"==p&&this.group.attr({display:"none"}),this.pathElement&&this.paper.appendDef(this.pathElement)}else this.element.attr({display:"none"})}}else r.events.once("maxsizechanged",this.hardInvalidate,this,!1)},e.prototype.maybeHideOversized=function(){this.hideOversized&&(this.availableWidth<this.bbox.width||this.availableHeight<this.bbox.height?(this.element.attr({display:"none"}),this.isOversized=!0):(this.element.removeAttr("display"),this.isOversized=!1))},e.prototype.alignSVGText=function(){var t=this.element,e=t.node.children||t.node.childNodes;if(e&&(!e||0!=e.length)){var i=this._measuredWidth,r=this._measuredHeight;Fb(this.pixelPaddingLeft),Fb(this.pixelPaddingRight),Fb(this.pixelPaddingTop),Fb(this.pixelPaddingBottom),this.rtl?t.attr({direction:"rtl"}):t.removeAttr("direction");for(var h=e.length-1;h>=0;h--){var s=e[h];if(s.setAttribute("text-anchor",this.textAlign),this.textPathElement)s.removeAttribute("x"),s.removeAttribute("y");else{switch(this.textAlign){case"middle":s.setAttribute("x",(i/2).toString()+"px");break;case"end":this.rtl||s.setAttribute("x",i.toString());break;default:this.rtl?s.setAttribute("x",i.toString()):s.removeAttribute("text-anchor");}var a=Ra(s.getAttribute("y"));switch(this.textValign){case"middle":s.setAttribute("y",((a||0)+(r-this.bbox.height)/2).toString());break;case"bottom":s.setAttribute("y",((a||0)+r-this.bbox.height).toString());break;default:s.setAttribute("y",(a||0).toString());}}}}},e.prototype.getSVGLineElement=function(t,e){var i=this.paper.addGroup("text");return i.textContent=t,i.attr({x:"0"}),ba(e)&&i.attr({y:e.toString()}),(this.truncate||this.wrap)&&i.attr({overflow:"hidden"}),i},Object.defineProperty(e.prototype,"rtl",{get:function(){return ba(this._rtl)?this._rtl:!!this._topParent&&this._topParent.rtl},set:function(t){t=Ua(t),this._rtl=t,this.element&&this.alignSVGText()},enumerable:!0,configurable:!0}),e.prototype.resetBBox=function(){this._bbox={x:0,y:0,width:0,height:0}},e.prototype.getHTMLLineElement=function(t){var e=document.createElement("div");switch(e.innerHTML=t,this.textAlign){case"middle":e.style.textAlign="center";break;case"end":e.style.textAlign="right";}return this.wrap?e.style.wordWrap="break-word":e.style.whiteSpace="nowrap",this.rtl&&(e.style.direction="rtl"),ba(this.fill)&&(e.style.color=this.fill.toString()),e},e.prototype.setStyles=function(){var t=this.element;!this.selectable||this.draggable||this.resizable||this.swipeable?t.addStyle({webkitUserSelect:"none",msUserSelect:"none"}):this.selectable&&(t.removeStyle("webkitUserSelect"),t.removeStyle("msUserSelect"))},e.prototype.hideUnused=function(t){this.initLineCache();var e=this.getCache("lineInfo");if(e.length>=t)for(var i=t;i<e.length;i++){var r=e[i];r&&r.element&&r.element.attr({display:"none"})}},Object.defineProperty(e.prototype,"text",{get:function(){return this.getPropertyValue("text")},set:function(t){this.setPropertyValue("text",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.getPropertyValue("path")},set:function(t){this.setPropertyValue("path",t,!0)&&(this.pathElement&&this.pathElement.dispose(),this.textPathElement&&this.textPathElement.dispose(),this.pathElement=this.paper.add("path"),this.pathElement.attr({d:t}),this.pathElement.attr({id:"text-path-"+this.uid}),this._disposers.push(this.pathElement),this.textPathElement=this.paper.addGroup("textPath"),this.textPathElement.attrNS(Nf,"xlink:href","#text-path-"+this.uid),this.textPathElement.attr({path:t}),this._disposers.push(this.textPathElement),this.hardInvalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locationOnPath",{get:function(){return this.getPropertyValue("locationOnPath")},set:function(t){this.setPropertyValue("locationOnPath",t),this.textPathElement&&this.textPathElement.attr({startOffset:100*t+"%"})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseLineRatio",{get:function(){return this.getPropertyValue("baseLineRatio")},set:function(t){this.setPropertyValue("baseLineRatio",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrap",{get:function(){return this.getPropertyValue("wrap")},set:function(t){this.resetBBox(),this.setPropertyValue("wrap",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"truncate",{get:function(){return this.getPropertyValue("truncate")},set:function(t){this.resetBBox(),this.setPropertyValue("truncate",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullWords",{get:function(){return this.getPropertyValue("fullWords")},set:function(t){this.setPropertyValue("fullWords",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ellipsis",{get:function(){return this.getPropertyValue("ellipsis")},set:function(t){this.setPropertyValue("ellipsis",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return this.getPropertyValue("selectable")},set:function(t){this.setPropertyValue("selectable",t,!0),this.setStyles()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textAlign",{get:function(){return this.getPropertyValue("textAlign")},set:function(t){this.setPropertyValue("textAlign",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textValign",{get:function(){return this.getPropertyValue("textValign")},set:function(t){this.setPropertyValue("textValign",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"html",{get:function(){return this.getPropertyValue("html")},set:function(t){this.setPropertyValue("html",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideOversized",{get:function(){return this.getPropertyValue("hideOversized")},set:function(t){this.setPropertyValue("hideOversized",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignoreFormatting",{get:function(){return this.getPropertyValue("ignoreFormatting")},set:function(t){this.setPropertyValue("ignoreFormatting",t,!0)},enumerable:!0,configurable:!0}),e.prototype.measureElement=function(){},e.prototype.getLineInfo=function(t){this.initLineCache();var e=this.getCache("lineInfo");return e.length>t?e[t]:void 0},e.prototype.addLineInfo=function(t,e){this.initLineCache(),this.getCache("lineInfo")[e]=t},e.prototype.initLineCache=function(){ba(this.getCache("lineInfo"))||this.setCache("lineInfo",[],0)},e.prototype.setDataItem=function(e){this._sourceDataItemEvents&&this._sourceDataItemEvents.dispose(),e&&(this._sourceDataItemEvents=new Ya([e.events.on("valuechanged",this.invalidate,this,!1),e.events.on("workingvaluechanged",this.invalidate,this,!1),e.events.on("calculatedvaluechanged",this.invalidate,this,!1),e.events.on("propertychanged",this.invalidate,this,!1)])),t.prototype.setDataItem.call(this,e)},Object.defineProperty(e.prototype,"availableWidth",{get:function(){return ba(this.maxWidth)?this.maxWidth:this.pixelWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"availableHeight",{get:function(){return ba(this.maxHeight)?this.maxHeight:this.pixelHeight},enumerable:!0,configurable:!0}),e.prototype.getSvgElement=function(t,e){var i=this.paper.add("tspan");return i.textContent=t,e&&i.node.setAttribute("style",e),i},e.prototype.deepInvalidate=function(){t.prototype.deepInvalidate.call(this),this.hardInvalidate()},Object.defineProperty(e.prototype,"readerTitle",{get:function(){var t=this.getPropertyValue("readerTitle");return t?this.dataItem&&(t=this.populateString(t)):t=this.populateString(Cf(pe(this.html)?this.html:this.text)),t},set:function(t){t=wb(t),this.setPropertyValue("readerTitle",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),e}(oa);ca.registeredClasses.Label=Gb,ub.push({relevant:Ab.heightXS,state:function(t,e){if(t instanceof Gb&&t.parent&&t.parent.isBaseSprite){var i=t.states.create(e);return i.properties.disabled=!0,i}return null}});var mc=function(e){function t(){var t=e.call(this)||this;return t.className="RoundedRectangle",t.element=t.paper.add("path"),t.cornerRadius(3,3,3,3),t.applyTheme(),t}return da(t,e),t.prototype.draw=function(){e.prototype.draw.call(this);var t=this.innerWidth,r=this.innerHeight;if(aa(t)&&aa(r)){var i=Ea(t,r)/2,o=Xa(this.cornerRadiusTopLeft,i),n=Xa(this.cornerRadiusTopRight,i),a=Xa(this.cornerRadiusBottomRight,i),s=Xa(this.cornerRadiusBottomLeft,i),u=Ea(Math.abs(t/2),Math.abs(r/2)),$=na(o,0,u),p=na(n,0,u),R=na(a,0,u),f=na(s,0,u),c="M"+$+",0 L"+(t-p)+",0"+(" a"+p+","+p+" 0 0 1 "+p+","+p)+(" L"+t+","+(r-R))+(" a"+R+","+R+" 0 0 1 -"+R+","+R)+(" L"+f+","+r)+(" a"+f+","+f+" 0 0 1 -"+f+",-"+f)+(" L0,"+$)+(" a"+$+","+$+" 0 0 1 "+$+",-"+$)+" Z";this.path=c}},t.prototype.cornerRadius=function(e,t,r,i){this.cornerRadiusTopLeft=e,this.cornerRadiusTopRight=t,this.cornerRadiusBottomLeft=r,this.cornerRadiusBottomRight=i},Object.defineProperty(t.prototype,"cornerRadiusTopLeft",{get:function(){return this.getPropertyValue("cornerRadiusTopLeft")},set:function(e){this.setPercentProperty("cornerRadiusTopLeft",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cornerRadiusTopRight",{get:function(){return this.getPropertyValue("cornerRadiusTopRight")},set:function(e){this.setPercentProperty("cornerRadiusTopRight",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cornerRadiusBottomRight",{get:function(){return this.getPropertyValue("cornerRadiusBottomRight")},set:function(e){this.setPercentProperty("cornerRadiusBottomRight",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cornerRadiusBottomLeft",{get:function(){return this.getPropertyValue("cornerRadiusBottomLeft")},set:function(e){this.setPercentProperty("cornerRadiusBottomLeft",e,!0)},enumerable:!0,configurable:!0}),t.prototype.measureElement=function(){},Object.defineProperty(t.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.isMeasured?{x:0,y:0,width:this.innerWidth,height:this.innerHeight}:{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),t}(xa);ca.registeredClasses.RoundedRectangle=mc;var Ec=function(e){function t(){var t=e.call(this)||this;t.className="Button",t.tooltipY=0,t.iconPosition="left",t.layout="horizontal",t.contentAlign="center",t.contentValign="middle",t.padding(8,16,8,16),t.setStateOnChildren=!0;var o=new Ia,r=t.background;r.fill=o.getFor("secondaryButton"),r.stroke=o.getFor("secondaryButtonStroke"),r.fillOpacity=1,r.strokeOpacity=1,r.cornerRadius(3,3,3,3),t.label=new Gb,t.label.fill=o.getFor("secondaryButtonText"),t.label.shouldClone=!1;var i=r.states.create("hover");i.properties.fillOpacity=1,i.properties.fill=o.getFor("secondaryButtonHover");var n=r.states.create("down");return n.transitionDuration=100,n.properties.fill=o.getFor("secondaryButtonDown"),n.properties.fillOpacity=1,t.role="button",t.focusable=!0,t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"icon",{get:function(){return this._icon},set:function(e){var t=this._icon;t&&(t.parent=void 0),e&&(this._icon=e,e.parent=this,e.interactionsEnabled=!1,e.shouldClone=!1,this.iconPosition=this.iconPosition,this._disposers.push(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconPosition",{get:function(){return this.getPropertyValue("iconPosition")},set:function(e){this.setPropertyValue("iconPosition",e),this.icon&&("left"==e?this.icon.toBack():this.icon.toFront())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this._label},set:function(e){this._label&&this.removeDispose(this._label),this._label=e,e&&(e.parent=this,e.interactionsEnabled=!1,this._disposers.push(this._label))},enumerable:!0,configurable:!0}),t.prototype.createBackground=function(){return new mc},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),t.label&&this.label.copyFrom(t.label),t.icon&&(this.icon=t.icon.clone())},t}(oa);ca.registeredClasses.Button=Ec;var Tc=function(e){function r(){var r=e.call(this)||this;return r.className="Circle",r.element=r.paper.add("circle"),r.setPercentProperty("radius",ia(100)),r.setPropertyValue("horizontalCenter","middle"),r.setPropertyValue("verticalCenter","middle"),r.applyTheme(),r}return da(r,e),r.prototype.draw=function(){e.prototype.draw.call(this),this.element.attr({r:this.pixelRadius})},Object.defineProperty(r.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPercentProperty("radius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pixelRadius",{get:function(){return Xa(this.radius,Ea(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),r.prototype.measureElement=function(){var e=this.pixelRadius;this._bbox={x:-e,y:-e,width:2*e,height:2*e}},r}(xa);ca.registeredClasses.Circle=Tc;var _f=function(e){function t(){var t=e.call(this)||this;return t.className="Ellipse",t.element=t.paper.add("ellipse"),t.applyTheme(),t}return da(t,e),t.prototype.draw=function(){e.prototype.draw.call(this),this.element.attr({rx:this.radius}),this.element.attr({ry:this.radiusY})},Object.defineProperty(t.prototype,"radiusY",{get:function(){return this.innerHeight/2},set:function(e){this.height=2*e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.innerWidth/2},set:function(e){this.width=2*e,this.invalidate()},enumerable:!0,configurable:!0}),t}(Tc);ca.registeredClasses.Ellipse=_f;var Rl=function(e){function t(){var t=e.call(this)||this;return t.className="Image",t.element=t.paper.add("image"),t.applyTheme(),t.width=50,t.height=50,t}return da(t,e),t.prototype.draw=function(){if(e.prototype.draw.call(this),this.href){var t=this.innerWidth,i=this.innerHeight;aa(this.widthRatio)&&(t=i*this.widthRatio,this.width=t),aa(this.heightRatio)&&(i=t*this.heightRatio,this.height=i),this.element.attr({width:t,height:i}),this.element.attrNS(Nf,"xlink:href",this.href)}},Object.defineProperty(t.prototype,"href",{get:function(){return this.getPropertyValue("href")},set:function(e){this.setPropertyValue("href",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"widthRatio",{get:function(){return this.getPropertyValue("widthRatio")},set:function(e){this.setPropertyValue("widthRatio",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"heightRatio",{get:function(){return this.getPropertyValue("heightRatio")},set:function(e){this.setPropertyValue("heightRatio",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bbox",{get:function(){return{x:0,y:0,width:this.pixelWidth,height:this.pixelHeight}},enumerable:!0,configurable:!0}),t}(xa);ca.registeredClasses.Image=Rl;var cc=function(e){function t(){var t=e.call(this)||this;return t.className="Line",t.element=t.paper.add("line"),t.fill=ua(),t.x1=0,t.y1=0,t.applyTheme(),t}return da(t,e),t.prototype.draw=function(){e.prototype.draw.call(this),this.x1==this.x2||this.y1==this.y2?this.pixelPerfect=!0:this.pixelPerfect=!1,this.x1=this.x1,this.x2=this.x2,this.y1=this.y1,this.y2=this.y2},Object.defineProperty(t.prototype,"x1",{get:function(){return this.getPropertyValue("x1")},set:function(e){aa(e)||(e=0);var t=0;this.pixelPerfect&&this.stroke instanceof Zb&&(t=1e-5),this.setPropertyValue("x1",e,!0),this.element.attr({x1:e+t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x2",{get:function(){var e=this.getPropertyValue("x2");return aa(e)||(e=this.pixelWidth),e},set:function(e){aa(e)||(e=0),this.setPropertyValue("x2",e,!0),this.element.attr({x2:e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y1",{get:function(){return this.getPropertyValue("y1")},set:function(e){aa(e)||(e=0);var t=0;this.pixelPerfect&&this.stroke instanceof Zb&&(t=1e-5),this.setPropertyValue("y1",e,!0),this.element.attr({y1:e+t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y2",{get:function(){var e=this.getPropertyValue("y2");return aa(e)||(e=this.pixelHeight),e},set:function(e){aa(e)||(e=0),this.setPropertyValue("y2",e,!0),this.element.attr({y2:e})},enumerable:!0,configurable:!0}),t.prototype.positionToPoint=function(e){var t={x:this.x1,y:this.y1},r={x:this.x2,y:this.y2},i=ge(t,r,e),$=xb(t,r);return{x:i.x,y:i.y,angle:$}},t}(xa);ca.registeredClasses.Line=cc;var Sl=function(e){function t(){var t=e.call(this)||this;return t.className="PointedShape",t.pointerBaseWidth=15,t.pointerLength=10,t.pointerY=0,t.pointerX=0,t.applyTheme(),t}return da(t,e),t.prototype.draw=function(){e.prototype.draw.call(this),aa(this.pointerX)||(this.pointerX=this.pixelWidth/2),aa(this.pointerY)||(this.pointerY=this.pixelHeight+10)},Object.defineProperty(t.prototype,"pointerBaseWidth",{get:function(){return this.getPropertyValue("pointerBaseWidth")},set:function(e){this.setPropertyValue("pointerBaseWidth",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointerLength",{get:function(){return this.getPropertyValue("pointerLength")},set:function(e){this.setPropertyValue("pointerLength",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointerX",{get:function(){return this.getPropertyValue("pointerX")},set:function(e){this.setPropertyValue("pointerX",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointerY",{get:function(){return this.getPropertyValue("pointerY")},set:function(e){this.setPropertyValue("pointerY",e,!0)},enumerable:!0,configurable:!0}),t}(xa);var Tl=function(t){function e(){var e=t.call(this)||this;return e.className="PointedRectangle",e.element=e.paper.add("path"),e.cornerRadius=6,e.applyTheme(),e}return da(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.cornerRadius,i=this.innerWidth,$=this.innerHeight;if(i>0&&$>0){var r,a,o=this.pointerX,n=this.pointerY,p=this.pointerBaseWidth/2,h=Ea(i/2,$/2),m=na(e,0,h),s=na(e,0,h),f=na(e,0,h),l=na(e,0,h),W=void 0,d=void 0,L=void 0,c=void 0,z=(o-0)*($-0)-(n-0)*(i-0),F=(o-0)*(0-$)-(n-$)*(i-0);if(z>0&&F>0)W="M"+m+",0 L"+((r=na(o,m+p,i-p-s))-p)+",0 L"+o+","+(n=na(n,-1/0,0))+" L"+(r+p)+",0 L"+(i-s)+",0";else W="M"+m+",0 L"+(i-s)+",0";if(z<0&&F<0)L=" L"+(i-f)+","+$+" L"+((r=na(o,l+p,i-p-f))+p)+","+$+" L"+o+","+(n=na(n,$,1/0))+" L"+(r-p)+","+$+" L"+l+","+$;else L=" L"+l+","+$;if(z<0&&F>0)c=" L0,"+($-l)+" L0,"+((a=na(n,m+p,$-l-p))+p)+" L"+(o=na(o,-1/0,0))+","+n+" L0,"+(a-p)+" L0,"+m;else c=" L0,"+m;if(z>0&&F<0)d=" L"+i+","+s+" L"+i+","+((a=na(n,s+p,$-p-f))-p)+" L"+(o=na(o,i,1/0))+","+n+" L"+i+","+(a+p)+" L"+i+","+($-f);else d=" L"+i+","+($-f);var K=" a"+s+","+s+" 0 0 1 "+s+","+s,u=" a"+f+","+f+" 0 0 1 -"+f+","+f,R=" a"+l+","+l+" 0 0 1 -"+l+",-"+l,g=" a"+m+","+m+" 0 0 1 "+m+",-"+m;this.path=W+K+d+u+L+R+c+g}},Object.defineProperty(e.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(t){this.setPropertyValue("cornerRadius",t,!0)},enumerable:!0,configurable:!0}),e}(Sl);function Pd($){var t=fa($[0]),r={x:0,y:0},o=za.minPolylineStep;aa(o)||(o=.5);for(var i=0,e=$.length;i<e;i++){var y=$[i];Ka(y,r)>o&&(t+=fa(y),r=y)}return t}function ma($){return" M"+ha($.x,4)+","+ha($.y,4)+" "}function fa($){return" L"+ha($.x,4)+","+ha($.y,4)+" "}function Uc($,t){return" Q"+ha(t.x,4)+","+ha(t.y,4)+" "+ha($.x,4)+","+ha($.y,4)}function od($,t,r){return" C"+ha(t.x,4)+","+ha(t.y,4)+" "+ha(r.x,4)+","+ha(r.y,4)+" "+ha($.x,4)+","+ha($.y,4)}function eb(){return" Z"}function ob($,t,r,o){if(0==t)return"";aa(o)||(o=r);var i="",e=",",y=Math.ceil(Math.abs(t)/180),p=1;t<0&&(p=0);var m=0,a=0,n=-ka($)*r,L=-ja($)*o;if(t<.5&&r>3e3){var J=$+t;return fa({x:x=ha(ka(J)*r,4),y:u=ha(ja(J)*o,4)})}for(var h=0;h<y;h++){var x,u;J=$+t/y*(h+1);i+=" a"+r+e+o+e+0+e+0+e+p+e+(x=ha(ka(J)*r+n-m,4))+e+(u=ha(ja(J)*o+L-a,4)),m=x,a=u}return i}function pd($,t,r,o,i,e,y){if(0==t)return"";if(aa(o)||(o=0),0==r&&o<=0)return"";if(r<o){var p=r;r=o,o=p,aa(i)&&(i=i/o*r)}360==(t=Ea(t,360))&&(e=0,y=0);var m=$+t,a=ja(Ea(t,45)/2),n=(i=aa(i)?i:r)/r*o,L=i/r*(e=e||0),J=i/r*(y=aa(y)?y:e);e=na(e,0,(r-o)/2),L=na(L,0,(i-n)/2),y=na(y,0,(r-o)/2),J=na(J,0,(i-n)/2),e=ha(na(e,0,r*a),4),L=ha(na(L,0,i*a),4),y=ha(na(y,0,o*a),4),J=ha(na(J,0,n*a),4);var h=Math.asin(e/r/2)*zc*2,x=Math.asin(L/i/2)*zc*2;o<y&&(o=y),n<J&&(n=J);var u=Math.asin(y/o/2)*zc*2,s=Math.asin(J/n/2)*zc*2;aa(u)||(u=0),aa(s)||(s=0);var c=$+t/2,T={x:ha(ka(c)*o,4),y:ja(c)*n},l={x:ka($)*(o+y),y:ja($)*(n+J)},v={x:ka($)*(r-e),y:ja($)*(i-L)},f={x:ka(m)*(r-e),y:ja(m)*(i-L)},d={x:ka(m)*(o+y),y:ja(m)*(n+J)},g={x:ka($+h)*r,y:ja($+x)*i},P={x:ka(m-u)*o,y:ja(m-s)*n};y+=y*ja(u/2),J+=J*ja(s/2),u>(m-$)/2&&(P=T);var b="";return 360==t?b=ma(v):(b=ma(l),b+=fa(v),b+=Rb(g,e,L,!0)),b+=ob($+h,t-2*h,r,i),aa(o)&&0!=o?(360==t&&0==e?b+=ma(d):(b+=Rb(f,e,L,!0),b+=fa(d),b+=Rb(P,y,J,!0)),b+=ob(m-u,-(t-2*u),o,n),(t<360||e>0)&&(b+=Rb(l,y,J,!0)),b+=fa(l)):(b+=Rb(f,e,L,!0),t<360&&(b+=fa(l))),b}function Rb($,t,r,o,i,e){if(0==t)return"";var y=",";return" A"+t+y+r+y+(e=e||0)+y+ +(i=Boolean(i))+y+ +(o=Boolean(o))+y+ha($.x,4)+y+ha($.y,4)}function ag($,t,r,o){return aa(r)||(r=0),aa(o)||(o=0),ma({x:r,y:o})+fa({x:r+$,y:o})+fa({x:r+$,y:o+t})+fa({x:r,y:o+t})+eb()}function Fc($,t){var r=",",o=" L";return t?"M"+$.x+r+$.y+o+$.x+r+($.y+$.height)+o+($.x+$.width)+r+($.y+$.height)+o+($.x+$.width)+r+$.y+o+$.x+r+$.y:"M"+$.x+r+$.y+o+($.x+$.width)+r+$.y+o+($.x+$.width)+r+($.y+$.height)+o+$.x+r+($.y+$.height)+o+$.x+r+$.y}var Qd=function(e){function t(){var t=e.call(this)||this;return t._distance=0,t.className="Polyline",t.element=t.paper.add("path"),t.shapeRendering="auto",t.fill=ua(),t.strokeOpacity=1,t.applyTheme(),t}return da(t,e),t.prototype.makePath=function(){this._distance=0;var e=this.segments;if(e&&e.length>0){for(var t="",r=0,i=e.length;r<i;r++){var n=e[r];if(n.length>0){t+=ma(n[0]);for(var a=1;a<n.length;a++){var o=n[a];t+=fa(o),this._distance+=Ka(n[a-1],o)}}}this.path=t}this._realSegments=e},Object.defineProperty(t.prototype,"segments",{get:function(){return this.getPropertyValue("segments")},set:function(e){this.setPropertyValue("segments",e),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.positionToPoint=function(e){var t=0;e<0&&(e=Math.abs(e),t=180);var r=this._realSegments;if(r){for(var i=this.distance,n=0,a=0,o=0,$=void 0,l=void 0,s=0;s<r.length;s++){var p=r[s];if(p.length>1){for(var h=1;h<p.length;h++)if($=p[h-1],l=p[h],a=n/i,o=(n+=Ka($,l))/i,a<=e&&o>e){s=r.length;break}}else 1==p.length&&($=p[0],l=p[0],a=0,o=1)}if($&&l){var g=(e-a)/(o-a),c=ge($,l,g);return{x:c.x,y:c.y,angle:t+xb($,l)}}}return{x:0,y:0,angle:0}},Object.defineProperty(t.prototype,"realSegments",{get:function(){return this._realSegments},enumerable:!0,configurable:!0}),t}(xa);ca.registeredClasses.Polyline=Qd;var Ul=function(t){function e(){var e=t.call(this)||this;return e.className="Polyarc",e.controlPointDistance=.5,e.controlPointPosition=.5,e.applyTheme(),e}return da(e,t),e.prototype.makePath=function(){this._distance=0;var t=this.segments;if(t&&t.length>0){var e="";this._realSegments=[];for(var r=0,o=t.length;r<o;r++){var i=t[r],n=[];if(this._realSegments.push(n),i.length>0){e+=ma(i[0]);for(var $=1;$<i.length;$++){var a=i[$-1],s=i[$],P=Ka(s,a),c=P*this.controlPointDistance,l=this.controlPointPosition,p=-xb(a,s),h={x:a.x+(s.x-a.x)*l*.5-c*ja(p),y:a.y+(s.y-a.y)*l*.5-c*ka(p)},m={x:a.x+(s.x-a.x)*l*1.5-c*ja(p),y:a.y+(s.y-a.y)*l*1.5-c*ka(p)};e+=od(s,h,m);var u=Math.ceil(P),D=a;if(u>0)for(var q=0;q<=u;q++){var y=mf(a,s,h,m,q/u);n.push(y),this._distance+=Ka(D,y),D=y}else n.push(a)}}}this.path=e}},Object.defineProperty(e.prototype,"controlPointPosition",{get:function(){return this.getPropertyValue("controlPointPosition")},set:function(t){this.setPropertyValue("controlPointPosition",t),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controlPointDistance",{get:function(){return this.getPropertyValue("controlPointDistance")},set:function(t){this.setPropertyValue("controlPointDistance",t),this.makePath()},enumerable:!0,configurable:!0}),e}(Qd);ca.registeredClasses.Polyarc=Ul;var Vl=function(t){function r(r){var o=t.call(this)||this;return o._bboxes=[],o.morphDuration=800,o.morphEasing=Qc,o.morphToSingle=!0,o.scaleRatio=1,o.className="Morpher",o.morphable=r,o.applyTheme(),o}return da(r,t),r.prototype.morphToPolygon=function(t,r,o){var i=this.morphable.currentPoints;if(i&&t){this.sortPoints(i),this.sortPoints(t),this._morphFromPointsReal=[],this._morphToPointsReal=[],ba(r)||(r=this.morphDuration),ba(o)||(o=this.morphEasing),this._morphFromPointsReal=this.normalizePoints(t,i),this._morphToPointsReal=this.normalizePoints(i,t),this.morphable.currentPoints=this._morphFromPointsReal;var e=new bc(this,{property:"morphProgress",from:0,to:1},r,o);return this._disposers.push(e),e.start(),e}},r.prototype.normalizePoints=function(t,r){for(var o=0,i=t.length;o<i;o++){var e=t[o][0],h=t[o][1],s=Va(yd(e)),p=s.x+s.width,n=s.y+s.height;if(r[o]||(r[o]=[]),e&&!r[o][0]&&(r[o][0]=[{x:p,y:n},{x:p,y:n}]),r[o][0]){r[o][0]=this.addPoints(r[o][0],e.length);for(var a=1/0,$=0,m=0;m<r[o][0].length;m++){var l=Ka(r[o][0][m],e[0]);l<a&&($=m,a=l)}var u=r[o][0].slice(0,$),g=r[o][0].slice($);r[o][0]=g.concat(u)}h&&(r[o][1]||(r[o][1]=[{x:p,y:n},{x:p,y:n}]),r[o][1]=this.addPoints(r[o][1],h.length))}return r},r.prototype.sortPoints=function(t){t.sort(function(t,r){var o=Va(yd(t[0])),i=Va(yd(r[0]));return o.width*o.height>i.width*i.height?-1:1});for(var r=[],o=0,i=t.length;o<i;o++){var e=t[o][0];e&&r.push(Va(yd(e)))}return zd(r)},r.prototype.morphToCircle=function(t,r,o){var i=this.morphable.points,e=this.sortPoints(i);this._morphFromPointsReal=[],this._morphToPointsReal=[],ba(r)||(r=this.morphDuration),ba(o)||(o=this.morphEasing);for(var h=0,s=i.length;h<s;h++){var p=i[h][0],n=i[h][1];if(this._morphFromPointsReal[h]=[],this._morphToPointsReal[h]=[],p){var a=p,$=p,m=Va(yd($));this.morphToSingle&&(m=Va(e));var l=m.x+m.width/2,u=m.y+m.height/2,g=t;aa(g)||(g=Math.min(m.width/2,m.height/2)),a=[];var d=xb({x:l,y:u},p[0]),y=100;p.length>y&&(y=p.length);for(var P=360/((y=($=this.addPoints(p,y)).length)-1),c=0;c<y;c++){var f=P*c+d,v={x:l+g*ka(f),y:u+g*ja(f)};a[c]=v}if(n&&n.length>0)for(var L=0,x=n.length;L<x;L++)a.push({x:l,y:u});this._morphFromPointsReal[h][0]=$,this._morphToPointsReal[h][0]=a}}this.morphable.currentPoints=this._morphFromPointsReal;var _=new bc(this,{property:"morphProgress",from:0,to:1},r,o);return this._disposers.push(_),_.start(),_},r.prototype.addPoints=function(t,r){for(var o=Math.round(r/t.length),i=[],e=0,h=t.length;e<h;e++){var s=t[e],p=void 0;p=e==t.length-1?t[0]:t[e+1],i.push(s);for(var n=1;n<o;n++){var a=n/o,$={x:s.x+(p.x-s.x)*a,y:s.y+(p.y-s.y)*a};i.push($)}i.length+t.length-e==r&&(o=0)}if(i.length<r&&t.length>0){var m=t[t.length-1];for(n=i.length;n<r;n++)i.push({x:m.x,y:m.y})}return i},r.prototype.morphToRectangle=function(t,r,o,i){var e=this.morphable.points;this.sortPoints(e),this._morphFromPointsReal=[],this._morphToPointsReal=[],ba(o)||(o=this.morphDuration),ba(i)||(i=this.morphEasing);for(var h=0,s=e.length;h<s;h++){var p=e[h][0],n=e[h][1];if(this._morphFromPointsReal[h]=[],this._morphToPointsReal[h]=[],p){var a=p,$=p,m=this._bboxes[h];this.morphToSingle;var l=m.x,u=m.y,g=t,d=r;if(aa(g)||(g=m.width),aa(d)||(d=m.height),a=[{x:l,y:u},{x:l+g,y:u},{x:l+g,y:u+d},{x:l,y:u+d}],a=this.addPoints(a,p.length),p.length<4)for(var y=p.length;y<4;y++)a.push({x:p[y].x,y:p[y].y});if(n&&n.length>0)for(var P=m.x+m.width/2,c=m.y+m.height/2,f=0,v=n.length;f<v;f++)a.push({x:P,y:c});this._morphFromPointsReal[h][0]=$,this._morphToPointsReal[h][0]=a}}this.morphable.currentPoints=this._morphFromPointsReal;var L=new bc(this,{property:"morphProgress",from:0,to:1},o,i);return this._disposers.push(L),L.start(),L},Object.defineProperty(r.prototype,"morphProgress",{get:function(){return this._morphProgress},set:function(t){this._morphProgress=t;var r=[];if(null!=t){var o=this._morphFromPointsReal,i=this._morphToPointsReal;if(null!=o&&null!=i)for(var e=0,h=o.length;e<h;e++){var s=[];r.push(s);var p=o[e][0],n=o[e][1],a=i[e][0],$=i[e][1];if(p&&p.length>0&&a&&a.length>0){for(var m=[],l=0,u=p.length;l<u;l++){var g=p[l],d=a[l],y={x:g.x+(d.x*this.scaleRatio-g.x)*t,y:g.y+(d.y*this.scaleRatio-g.y)*t};m.push(y)}s[0]=m}if(n&&n.length>0&&$&&$.length>0){for(var P=[],c=0,f=n.length;c<f;c++){g=n[c],d=$[c],y={x:g.x+(d.x*this.scaleRatio-g.x)*t,y:g.y+(d.y*this.scaleRatio-g.y)*t};P.push(y)}s[1]=P}}}this.morphable.currentPoints=r},enumerable:!0,configurable:!0}),r.prototype.morphBack=function(t,r){this._morphToPointsReal=this._morphFromPointsReal,this._morphFromPointsReal=this.morphable.currentPoints,ba(t)||(t=this.morphDuration),ba(r)||(r=this.morphEasing);var o=new bc(this,{property:"morphProgress",from:0,to:1},t,r);return this._disposers.push(o),o.start(),o},Object.defineProperty(r.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new kd(this._animations))),this._animations},enumerable:!0,configurable:!0}),r}(Db);var Wl=function(t){function e(){var e=t.call(this)||this;return e.className="Polygon",e.element=e.paper.add("path"),e.shapeRendering="auto",e._currentPoints=[],e.applyTheme(),e}return da(e,t),Object.defineProperty(e.prototype,"points",{get:function(){var t=this.getPropertyValue("points"),e=this.path;if(e&&(!t||0==t.length)){for(var r=e.slice(1,e.length-1).split("ZM"),o=0;o<r.length;o++){var i=r[o];if(i.length>0){var n=i.split("M"),s=n[0],p=n[1];if(s&&s.length>0){var h=s.split("L");if(h.length>0){var $=[],l=[$];t.push(l);for(var a=0;a<h.length;a++){var u=h[a].split(",");$.push({x:+u[0],y:+u[1]})}if(p&&p.length>0){var c=p.split("L");if(c.length>0){var g=[];l.push(g);for(a=c.length-1;a>=0;a--){u=c[a].split(",");g.push({x:+u[0],y:+u[1]})}}}}}}}this.setPropertyValue("points",t),this._currentPoints=t}return t},set:function(t){this.setPropertyValue("points",t,!0),this._currentPoints=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentPoints",{get:function(){return this._currentPoints&&0!=this._currentPoints.length||!this.path||(this._currentPoints=this.points),this._currentPoints},set:function(t){this._currentPoints!=t&&(this._currentPoints=t,this.draw())},enumerable:!0,configurable:!0}),e.prototype.draw=function(){var e,r,o,i,n="",s=this._currentPoints;if(s.length>0){for(var p=0,h=s.length;p<h;p++){var $=s[p][0],l=s[p][1];if($&&$.length>0){var a=$[0];n+=ma(a);for(var u=0;u<$.length;u++)a=$[u],n+=fa(a),(!aa(r)||r<a.x)&&(r=a.x),(!aa(e)||e>a.x)&&(e=a.x),(!aa(o)||o>a.y)&&(o=a.y),(!aa(i)||i<a.y)&&(i=a.y)}if(l&&l.length>0){a=l[0];n+=ma(a);for(var c=0,g=l.length;c<g;c++)a=l[c],n+=fa(a)}}n&&(n+=eb()),this.bbox.x=e,this.bbox.y=o,this.bbox.width=r-e,this.bbox.height=i-o,t.prototype.setPath.call(this,n)}},e.prototype.setPath=function(e){return!!t.prototype.setPath.call(this,e)&&(this.points=[],this._bbox=this.group.getBBox(),!0)},e.prototype.measureElement=function(){},Object.defineProperty(e.prototype,"centerPoint",{get:function(){return{x:this.bbox.x+this.bbox.width/2,y:this.bbox.y+this.bbox.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"morpher",{get:function(){return this._morpher||(this._morpher=new Vl(this),this._disposers.push(this._morpher)),this._morpher},enumerable:!0,configurable:!0}),e}(xa);ca.registeredClasses.Polygon=Wl;var Ke=function(t){function e(){var e=t.call(this)||this;return e.className="Polyspline",e.tensionX=.5,e.tensionY=.5,e.applyTheme(),e}return da(e,t),e.prototype.makePath=function(){this._distance=0;var t=this.segments,e=this.tensionX,r=this.tensionY;if(this.allPoints=[],t&&t.length>0){var i="";this._realSegments=[];for(var n=0,o=t.length;n<o;n++){var $=t[n],a=[];if(this._realSegments.push(a),$.length>0){var p=$[0],l=$[$.length-1],s=!1;ha(p.x,3)==ha(l.x)&&ha(p.y)==ha(l.y)&&(s=!0),i+=ma($[0]);for(var h=0;h<$.length-1;h++){var g=$[h-1],u=$[h],m=$[h+1],y=$[h+2];0===h?g=$[h]:h==$.length-2&&(y=$[h+1]),y||(y=m),0===h?g=s?$[$.length-2]:$[n]:h==$.length-2&&(y=s?$[1]:$[h+1]);var c=Tg(g,u,m,y,e,r),q=Ug(g,u,m,y,e,r);i+=od(m,c,q);var f=1.2*Math.ceil(xj(u,m,c,q,20)),J=u;if(f>0)for(var v=0;v<=f;v++){var x=mf(u,m,c,q,v/f);if(x.x!=J.x||x.y!=J.y){a.push(x);var P=ha(xb(J,x),5);this._distance+=Ka(J,x),this.allPoints[Math.floor(this._distance)]={x:x.x,y:x.y,angle:P},J=x}}else a.push(g)}}var b=this.allPoints;if(b.length>1)for(var d=0;d<b.length;d++)if(!b[d])if(d>1)b[d]=b[d-1];else for(var C=1;C<b.length;C++)if(b[C]){b[d]=b[C];break}}this.path=i}},e.prototype.getClosestPointIndex=function(t){var e,r=this.allPoints,i=1/0;if(r.length>1)for(var n=1;n<r.length;n++){var o=Ka(t,r[n]);o<i&&(e=n,i=o)}return e},Object.defineProperty(e.prototype,"tensionX",{get:function(){return this.getPropertyValue("tensionX")},set:function(t){this.setPropertyValue("tensionX",t),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tensionY",{get:function(){return this.getPropertyValue("tensionY")},set:function(t){this.setPropertyValue("tensionY",t,!0),this.makePath()},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t,e){var r=0,i=this.allPoints,n=i.length;if(aa(t)||(t=0),n>1){if(e&&n>3){if(t<0){t<-.01&&(t=-.01);var o=i[0],$=i[1];return{x:a=o.x-(o.x-$.x)*n*t,y:p=o.y-(o.y-$.y)*n*t,angle:xb(o,$)}}if(t>1){t>1.01&&(t=1.01);var a,p;o=i[i.length-2],$=i[i.length-3];return{x:a=o.x+(o.x-$.x)*n*(t-1),y:p=o.y+(o.y-$.y)*n*(t-1),angle:xb(o,{x:a,y:p})}}if(1==t){var l=i[i.length-1];return{x:l.x,y:l.y,angle:l.angle}}}else t<0&&(t=Math.abs(t),r=180),t>=1&&(t=.9999999999999);var s;return{x:(s=i[Math.floor(t*n)]).x,y:s.y,angle:s.angle+r}}return 1==n?{x:(s=i[0]).x,y:s.y,angle:s.angle}:{x:0,y:0,angle:0}},e}(Qd);ca.registeredClasses.Polyspline=Ke;var Vc=function(e){function t(){var t=e.call(this)||this;return t.className="Slice",t.setPropertyValue("cornerRadius",0),t.setPropertyValue("startAngle",0),t.setPercentProperty("innerRadius",0),t.setPercentProperty("radius",0),t.setPropertyValue("arc",0),t.setPropertyValue("shiftRadius",0),t.strokeOpacity=1,t.setPropertyValue("layout","none"),t.slice=t.createChild(xa),t.slice.isMeasured=!1,t._disposers.push(t.slice),t.applyTheme(),t}return da(t,e),t.prototype.draw=function(){e.prototype.draw.call(this);var t=this.radiusY;this.radius>0&&0==t&&(t=.01),this.slice.path=pd(this.startAngle,this.arc,this.radius,this.pixelInnerRadius,t,this.cornerRadius,this.innerCornerRadius),this.slice.invalidate(),this.shiftRadius=this.shiftRadius,this.realFill instanceof Cc&&this.updateGradient(this.realFill),this.realStroke instanceof Cc&&this.updateGradient(this.realStroke)},t.prototype.updateGradient=function(e){e.element.attr({gradientUnits:"userSpaceOnUse"}),e.element.attr({r:this.radius}),e.cx=0,e.cy=0,e.element.attr({radius:this.radius})},Object.defineProperty(t.prototype,"bbox",{get:function(){if(this.definedBBox)return this.definedBBox;if(this.isMeasured){var e=gc(this.startAngle,this.startAngle+this.arc,this.pixelInnerRadius),t=gc(this.startAngle,this.startAngle+this.arc,this.radius);return zd([e,t])}return{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(e){this.setPropertyValue("startAngle",Mc(e),!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"arc",{get:function(){return this.getPropertyValue("arc")},set:function(e){aa(e)||(e=0),this.setPropertyValue("arc",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){var e=this.getPropertyValue("radius");return aa(e)||(e=0),e},set:function(e){this.setPropertyValue("radius",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radiusY",{get:function(){var e=this.getPropertyValue("radiusY");return aa(e)||(e=this.radius),e},set:function(e){this.setPropertyValue("radiusY",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(e){this.setPercentProperty("innerRadius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelInnerRadius",{get:function(){return Xa(this.innerRadius,this.radius)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(e){this.setPropertyValue("cornerRadius",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerCornerRadius",{get:function(){return this.getPropertyValue("innerCornerRadius")},set:function(e){this.setPropertyValue("innerCornerRadius",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shiftRadius",{get:function(){return this.getPropertyValue("shiftRadius")},set:function(e){this.setPropertyValue("shiftRadius",e),this.dx=e*this.radius*this.ix,this.dy=e*this.radiusY*this.iy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ix",{get:function(){return ka(this.middleAngle)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iy",{get:function(){return ja(this.middleAngle)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"middleAngle",{get:function(){return this.startAngle+this.arc/2},enumerable:!0,configurable:!0}),t.prototype.getTooltipX=function(){var e=this.getPropertyValue("tooltipX");if(aa(e))return e;var t=.5;e instanceof Da&&(t=e.value);var r=Xa(this.innerRadius,this.radius);return this.ix*(r+(this.radius-r)*t)},t.prototype.getTooltipY=function(){var e=this.getPropertyValue("tooltipY");if(aa(e))return e;var t=.5;e instanceof Da&&(t=e.value);var r=Xa(this.innerRadius,this.radius);return this.iy*(r+(this.radius-r)*t)+this.slice.dy},t}(oa);ca.registeredClasses.Slice=Vc;var bi=function(e){function r(){var r=e.call(this)||this;r.className="Preloader",r.width=ia(100),r.height=ia(100);var t=new Ia,i=r.createChild(oa);i.shouldClone=!1;var s=i.createChild(Vc);s.shouldClone=!1,s.radius=53,s.arc=360,s.fill=t.getFor("fill"),s.fillOpacity=.8,s.innerRadius=42,s.isMeasured=!1,r.backgroundSlice=s;var a=i.createChild(Vc);a.shouldClone=!1,a.radius=50,a.innerRadius=45,a.fill=t.getFor("alternativeBackground"),a.fillOpacity=.2,a.isMeasured=!1,r.progressSlice=a;var l=i.createChild(Gb);return l.shouldClone=!1,l.horizontalCenter="middle",l.verticalCenter="middle",l.isMeasured=!1,l.fill=t.getFor("text"),l.align="center",l.valign="middle",l.textAlign="middle",l.fillOpacity=.4,r.label=l,r.background.opacity=1,r.background.fill=t.getFor("background"),r.contentAlign="center",r.contentValign="middle",r.delay=300,r.states.create("hidden").properties.opacity=0,r.visible=!1,r.hide(0),r.__disabled=!0,r._disposers.push(r.backgroundSlice),r._disposers.push(r.progressSlice),r._disposers.push(r.label),r._disposers.push(i),r}return da(r,e),Object.defineProperty(r.prototype,"progress",{get:function(){return this.getPropertyValue("progress")},set:function(e){var r=this;this.__disabled=!1,this.validateLayout(),this.setPropertyValue("progress",e),this.progressSlice.arc=360*e,this.label&&(this.label.text=Math.round(100*e)+"%"),e>=1?(this._started&&(this._started=void 0),ca.events.once("enterframe",function(){var e=r.hide();e&&!e.isFinished()?e.events.once("animationended",function(){r.__disabled=!0}):r.__disabled=!0}),this.interactionsEnabled=!1,this.setPropertyValue("progress",0)):e>0&&(this.delay?this._started?this._started+this.delay<=new Date().getTime()&&(this.__disabled=!1,this.show(),this.interactionsEnabled=!0):this._started=new Date().getTime():(this.__disabled=!1,this.show(),this.interactionsEnabled=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"delay",{get:function(){return this.getPropertyValue("delay")},set:function(e){this.setPropertyValue("delay",e)},enumerable:!0,configurable:!0}),r}(oa);ca.registeredClasses.Preloader=bi;var bg=function(e){function t(){var t=e.call(this)||this;t.className="ResizeButton",t.orientation="horizontal",t.layout="absolute",t.horizontalCenter="middle",t.verticalCenter="middle",t.draggable=!0,t.padding(8,8,8,8),t.background.cornerRadius(20,20,20,20);var i=new xa;i.element=t.paper.add("path");var r=ma({x:-2,y:-6});return r+=fa({x:-2,y:6}),r+=ma({x:2,y:-6}),r+=fa({x:2,y:6}),i.path=r,i.pixelPerfect=!0,i.padding(0,4,0,4),i.stroke=new Ia().getFor("alternativeText"),i.strokeOpacity=.7,t.icon=i,t.label.dispose(),t.label=void 0,t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"orientation",{set:function(e){var t=this.icon;t&&(t.rotation="horizontal"==e?0:-90)},enumerable:!0,configurable:!0}),t}(Ec);ca.registeredClasses.ResizeButton=bg;var Xl=function(e){function t(){var t=e.call(this)||this;t.className="CloseButton",t.padding(8,8,8,8),t.showSystemTooltip=!0,t.width=30,t.height=30;var r=new Ia;t.cursorOverStyle=tb.pointer;var o=t.background;o.cornerRadius(20,20,20,20);var i=r.getFor("background");o.fill=i,o.stroke=r.getFor("primaryButton"),o.strokeOpacity=1,o.strokeWidth=1;var a=r.getFor("primaryButtonActive"),$=o.states.getKey("hover");$.properties.strokeWidth=3,$.properties.fill=i;var p=o.states.getKey("down");p.properties.stroke=a,p.properties.fill=i;var s=new xa;return s.element=t.paper.add("path"),s.stroke=o.stroke,t.icon=s,t.applyTheme(),t}return da(t,e),t.prototype.validate=function(){e.prototype.validate.call(this);var t=this.pixelWidth/3,r=this.pixelHeight/3,o=ma({x:-t/2,y:-r/2});o+=fa({x:t/2,y:r/2}),o+=ma({x:t/2,y:-r/2}),o+=fa({x:-t/2,y:r/2}),this.icon.path=o,this.invalidateLayout()},t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("Close"))},t}(Ec);ca.registeredClasses.CloseButton=Xl;var Yl=function(t){function e(){var e=t.call(this)||this;e.className="SwitchButton",e.tooltipY=0,e.layout="horizontal",e.contentAlign="center",e.contentValign="middle",e.padding(8,16,8,16),e.setStateOnChildren=!0,e.states.create("active");var i=new Ia,r=new Gb;r.fillOpacity=.3,r.states.create("active").properties.fillOpacity=1,r.isActive=!0,e.leftLabel=r;var o=new Ec,n=new Tc;o.contentValign="none",o.padding(0,0,0,0),n.radius=10,o.icon=n,o.icon.valign="middle",o.label=void 0;var s=ia(100);o.background.cornerRadius(s,s,s,s),o.width=3.5*n.radius,o.height=2.1*n.radius,o.marginLeft=8,o.marginRight=8,o.togglable=!0,n.dx=.7*-n.radius,n.fill=i.getFor("primaryButton"),n.states.create("hover").properties.fill=i.getFor("primaryButtonHover");var l=n.states.create("active");l.properties.fill=i.getFor("primaryButtonActive"),l.properties.dx=.7*n.radius,e.switchButton=o,e.events.on("toggled",function(){e.leftLabel.isActive=!e.isActive,e.rightLabel.isActive=e.isActive});var a=new Gb;return a.fillOpacity=.3,a.states.create("active").properties.fillOpacity=1,e.rightLabel=a,e.role="button",e.focusable=!0,a.valign="middle",r.valign="middle",o.valign="middle",e.applyTheme(),e}return da(e,t),Object.defineProperty(e.prototype,"leftLabel",{get:function(){return this._leftLabel},set:function(t){this._leftLabel&&this.removeDispose(this._leftLabel),this._leftLabel=t,t&&(t.parent=this,t.interactionsEnabled=!1,t.shouldClone=!1,this._disposers.push(this._leftLabel))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightLabel",{get:function(){return this._rightLabel},set:function(t){this._rightLabel&&this.removeDispose(this._rightLabel),this._rightLabel=t,t&&(t.parent=this,t.interactionsEnabled=!1,t.shouldClone=!1,this._disposers.push(this._rightLabel))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"switch",{get:function(){return this._switchButton},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"switchButton",{get:function(){return this._switchButton},set:function(t){this._switchButton&&this.removeDispose(this._switchButton),this._switchButton=t,t&&(t.parent=this,t.shouldClone=!1,this._disposers.push(this._switchButton))},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),e.leftLabel&&this.leftLabel.copyFrom(e.leftLabel),e.rightLabel&&this.rightLabel.copyFrom(e.rightLabel),e.switchButton&&this.switchButton.copyFrom(e.switchButton)},e}(oa);ca.registeredClasses.SwitchButton=Yl;var Le=function(t){function e(){var e=t.call(this)||this;e._previousStart=0,e._previousEnd=1,e._prevStart=0,e._prevEnd=1,e._isBusy=!1,e._skipRangeEvents=!1,e.updateWhileMoving=!0,e.className="Scrollbar",e.minHeight=12,e.minWidth=12,e.animationDuration=0,e.animationEasing=Qc,e.margin(10,10,10,10);var i=new Ia,r=e.background;return r.cornerRadius(10,10,10,10),r.fill=i.getFor("fill"),r.fillOpacity=.5,e.showSystemTooltip=!0,e.startGrip=new bg,e.endGrip=new bg,e.events.on("transformed",e.updateThumb,e,!1),e.start=0,e.end=1,e.role="scrollbar",e.thumb.role="slider",e.thumb.readerLive="polite",e.startGrip.role="slider",e.endGrip.role="slider",e.events.once("inited",function(){e._previousStart=void 0,e.dispatchRangeChange()},void 0,!1),e.hideGrips=!1,e.orientation="horizontal",e.setSVGAttribute({"aria-valuemin":"0"}),e.setSVGAttribute({"aria-valuemax":"100"}),e.applyTheme(),e}return da(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),"horizontal"===this.orientation?(ba(this.readerTitle)||(this.readerTitle=this.language.translate("Use TAB to select grip buttons or left and right arrows to change selection")),ba(this.thumb.readerDescription)||(this.thumb.readerDescription=this.language.translate("Use left and right arrows to move selection")),ba(this.startGrip.readerDescription)||(this.startGrip.readerDescription=this.language.translate("Use left and right arrows to move left selection")),ba(this.endGrip.readerDescription)||(this.endGrip.readerDescription=this.language.translate("Use left and right arrows to move right selection")),this.readerOrientation="horizontal"):(ba(this.readerTitle)||(this.readerTitle=this.language.translate("Use TAB select grip buttons or up and down arrows to change selection")),ba(this.thumb.readerDescription)||(this.thumb.readerDescription=this.language.translate("Use up and down arrows to move selection")),ba(this.startGrip.readerDescription)||(this.startGrip.readerDescription=this.language.translate("Use up and down arrows to move upper selection")),ba(this.endGrip.readerDescription)||(this.endGrip.readerDescription=this.language.translate("Use up and down arrows to move lower selection")),this.readerOrientation="vertical"),this.readerControls=this.baseSprite.uidAttr()},e.prototype.validateLayout=function(){this.updateSize(),t.prototype.validateLayout.call(this),this.updateExtremes()},e.prototype.processBackground=function(){t.prototype.processBackground.call(this);var e=this.background;e.clickable=!0,e.events.on("hit",this.handleBgHit,this,void 0)},e.prototype.handleBgHit=function(t){this.makeBusy();var e=t.spritePoint;e=Hb(e,this.background,this);var i=this.thumb;if("horizontal"==this.orientation){var r=e.x-i.pixelWidth/2;r=na(r,0,this.innerWidth-i.pixelWidth),this._thumbAnimation=i.animate({property:"x",to:r},this.animationDuration,this.animationEasing)}else{var s=e.y-i.pixelHeight/2;s=na(s,0,this.innerHeight-i.pixelHeight),this._thumbAnimation=i.animate({property:"y",to:s},this.animationDuration,this.animationEasing)}this.animationDuration>0?this._thumbAnimation.events.on("animationended",this.makeUnbusy,this,!1):(this._thumb.validate(),this.makeUnbusy())},e.prototype.makeBusy=function(){this._isBusy=!0,this._skipRangeEvents=!1,this._unbusyTimeout&&this.removeDispose(this._unbusyTimeout),this._unbusyTimeout=void 0,this.stopAnimations()},e.prototype.stopAnimations=function(){this._thumbAnimation&&this._thumbAnimation.stop(!0),this._zoomAnimation&&this._zoomAnimation.stop(!0)},e.prototype.makeUnbusy=function(){this._unbusyTimeout=this.setTimeout(this.makeUnbusyReal.bind(this),1.1*this.animationDuration)},e.prototype.makeUnbusyReal=function(){this._usingGrip=void 0,this._isBusy=!1,this.updateWhileMoving||this.dispatchRangeChange()},e.prototype.dispatchRangeChange=function(){this._previousEnd==this.end&&this._previousStart==this.start||(this._previousStart=this.start,this._previousEnd=this.end,this.dispatch("rangechanged"))},e.prototype.updateThumb=function(){if(this.parent){var t=this.thumb,e=this.start,i=this.end,r=this.startGrip,s=this.endGrip;if("horizontal"==this.orientation){var n=this.innerWidth;t.width=n*(i-e),t.maxX=n-t.pixelWidth,t.x=e*n,r.moveTo({x:t.pixelX,y:0},void 0,void 0,!0),s.moveTo({x:t.pixelX+t.pixelWidth,y:0},void 0,void 0,!0),r.readerTitle=this.language.translate("From %1",void 0,this.adapter.apply("positionValue",{value:Math.round(100*e)+"%",position:e}).value),r.readerValueNow=""+Math.round(100*e),r.readerValueText=r.readerTitle,s.readerTitle=this.language.translate("To %1",void 0,this.adapter.apply("positionValue",{value:Math.round(100*i)+"%",position:i}).value),s.readerValueNow=""+Math.round(100*i),s.readerValueText=s.readerTitle}else{var o=this.innerHeight;t.height=o*(i-e),t.maxY=o-t.pixelHeight,t.y=(1-i)*o,r.moveTo({x:0,y:t.pixelY+t.pixelHeight},void 0,void 0,!0),s.moveTo({x:0,y:t.pixelY},void 0,void 0,!0),r.readerTitle=this.language.translate("To %1",void 0,this.adapter.apply("positionValue",{value:Math.round(100*(1-e))+"%",position:1-e}).value),r.readerValueNow=""+Math.round(100*e),r.readerValueText=r.readerTitle,s.readerTitle=this.language.translate("From %1",void 0,this.adapter.apply("positionValue",{value:Math.round(100*(1-i))+"%",position:1-i}).value),s.readerValueNow=""+Math.round(100*i),s.readerValueText=s.readerTitle}t.readerTitle=this.language.translate("From %1 to %2",void 0,this.adapter.apply("positionValue",{value:Math.round(100*e)+"%",position:e}).value,this.adapter.apply("positionValue",{value:Math.round(100*i)+"%",position:i}).value),t.readerValueNow=""+Math.round(100*e),t.readerValueText=t.readerTitle,this.readerValueNow=""+Math.round(100*e),this.readerValueText=t.readerTitle,!this._skipRangeEvents&&this.updateWhileMoving&&this.dispatchRangeChange()}},e.prototype.updateExtremes=function(){var t=0,e=0,i=0,r=0;"horizontal"==this.orientation?(i=this.innerWidth,e=r=this.innerHeight/2):(r=this.innerHeight,t=i=this.innerWidth/2);var s=this.startGrip;s.minX=t,s.maxX=i,s.minY=e,s.maxY=r;var n=this.endGrip;n.minX=t,n.maxX=i,n.minY=e,n.maxY=r;var o=this.thumb;o.minX=t,o.maxX=i,o.minY=e,o.maxY=r},e.prototype.updateSize=function(){var t=this.orientation,e=this.startGrip;e&&(e.orientation=t),this.endGrip&&(this.endGrip.orientation=t);var i=this.thumb;i&&("horizontal"==t?(aa(this._pixelWidth)||this.width instanceof Da||(this.width=ia(100)),ba(this.percentHeight)&&(this.height=this.minHeight),i.height=this.innerHeight,i.verticalCenter="middle",i.horizontalCenter="left"):(aa(this._pixelHeight)||this.height instanceof Da||(this.height=ia(100)),ba(this.percentWidth)&&(this.width=this.minWidth),i.width=this.innerWidth,i.verticalCenter="top",i.horizontalCenter="middle"))},Object.defineProperty(e.prototype,"isBusy",{get:function(){return this._isBusy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return Math.min(this.getPosition(this._start),this.getPosition(this._end))},set:function(t){this._isBusy||(this.__start=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"__start",{get:function(){return this._start},set:function(t){this._start=this.getPosition(t),this.updateThumb()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return Math.max(this.getPosition(this._start),this.getPosition(this._end))},set:function(t){this._isBusy||(this.__end=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"__end",{get:function(){return this._end},set:function(t){this._end=this.getPosition(t),this.updateThumb()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return{start:this.start,end:this.end,priority:this._usingGrip}},enumerable:!0,configurable:!0}),e.prototype.skipRangeEvents=function(){this._isBusy||(this._skipRangeEvents=!0)},e.prototype.fixRange=function(t){t.start==ha(this._start,2)&&t.end==ha(this._end,2)||(this._start=t.start,this._end=t.end,this._skipRangeEvents=!0,this.updateThumb(),this._skipRangeEvents=!1,this.thumb.validate(),this.thumb.background.validate())},e.prototype.getPosition=function(t){return na(ha(t,4),0,1)},Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t)&&("horizontal"===t?(this.startGrip.cursorOverStyle=tb.horizontalResize,this.endGrip.cursorOverStyle=tb.horizontalResize):(this.startGrip.cursorOverStyle=tb.verticalResize,this.endGrip.cursorOverStyle=tb.verticalResize),this.updateByOrientation(),this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.updateByOrientation=function(){},Object.defineProperty(e.prototype,"startGrip",{get:function(){return this._startGrip},set:function(t){this._startGrip&&this.removeDispose(this._startGrip),this._startGrip=t,this.processGrip(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endGrip",{get:function(){return this._endGrip},set:function(t){this._endGrip&&this.removeDispose(this._endGrip),this._endGrip=t,this.processGrip(t)},enumerable:!0,configurable:!0}),e.prototype.processGrip=function(t){t.parent=this,t.isMeasured=!1,t.focusable=!0,t.shouldClone=!1,t.zIndex=100,t.events.on("drag",this.handleGripDrag,this,!1),t.events.on("dragstop",this.makeUnbusy,this,!1),t.events.on("down",this.makeBusy,this,!1),t.events.on("up",this.makeUnbusy,this,!1),this._disposers.push(t)},e.prototype.handleGripDrag=function(t){this.makeBusy(),t.target===this._startGrip?this._usingGrip="start":this._usingGrip="end","horizontal"==this.orientation?(this._start=this.startGrip.pixelX/this.innerWidth,this._end=this.endGrip.pixelX/this.innerWidth):(this._start=1-this.startGrip.pixelY/this.innerHeight,this._end=1-this.endGrip.pixelY/this.innerHeight),this.updateThumb()},Object.defineProperty(e.prototype,"thumb",{get:function(){if(!this._thumb){var t=new Ec;t.background.cornerRadius(10,10,10,10),t.padding(0,0,0,0),this.thumb=t}return this._thumb},set:function(t){var e=this;t&&(this._thumb&&this.removeDispose(this._thumb),this._thumb=t,t.parent=this,t.isMeasured=!1,t.inert=!0,t.draggable=!0,t.clickable=!0,t.hoverable=!0,t.focusable=!0,t.shouldClone=!1,t.zIndex=0,t.cursorOverStyle=tb.grab,t.cursorDownStyle=tb.grabbing,t.events.on("dragstart",this.makeBusy,this,!1),t.events.on("dragstop",this.makeUnbusy,this,!1),t.events.on("positionchanged",this.handleThumbPosition,this,!1),t.events.on("sizechanged",this.handleThumbPosition,this,!1),t.events.on("doublehit",this.handleDoubleClick,this,!1),this._disposers.push(va().body.events.on("keyup",function(t){kc.isKey(t.event,["space","enter"])&&e.thumb.isFocused&&(t.event.preventDefault(),e.handleDoubleClick())})),this._disposers.push(this._thumb))},enumerable:!0,configurable:!0}),e.prototype.handleDoubleClick=function(){this.makeBusy();var t=0,e=1;0!=this.start||1!=this.end?(this._prevStart=this.start,this._prevEnd=this.end):(t=this._prevStart,e=this._prevEnd);var i=this.animate([{property:"__start",to:t},{property:"__end",to:e}],this.animationDuration,this.animationEasing);i&&!i.isFinished()?(i.events.on("animationended",this.makeUnbusy,this,!1),this._zoomAnimation=i):this.makeUnbusy()},e.prototype.handleThumbPosition=function(){var t=this.thumb;if("horizontal"==this.orientation){var e=this.innerWidth,i=t.innerWidth,r=t.pixelX;this._start=r/e,this._end=(r+i)/e,this.updateThumb()}else{var s=this.innerHeight,n=t.innerHeight,o=t.pixelY;this._start=1-(o+n)/s,this._end=1-o/s,this.updateThumb()}},e.prototype.createBackground=function(){return new mc},Object.defineProperty(e.prototype,"hideGrips",{get:function(){return this._hideGrips},set:function(t){var e=this;this._hideGrips=t,this._overDisposer&&this.removeDispose(this._overDisposer),this._outDisposer&&this.removeDispose(this._outDisposer),t?(this._overDisposer=this.events.on("over",function(){e.startGrip.show(),e.endGrip.show()},void 0,!1),this._outDisposer=this.events.on("out",function(){e.startGrip.hide(),e.endGrip.hide()},void 0,!1),this.startGrip.hide(),this.endGrip.hide()):(this.startGrip.show(),this.endGrip.show())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationDuration",{get:function(){return this.getPropertyValue("animationDuration")},set:function(t){this.setPropertyValue("animationDuration",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationEasing",{get:function(){return this.getPropertyValue("animationEasing")},set:function(t){this.setPropertyValue("animationEasing",t)},enumerable:!0,configurable:!0}),e.prototype.asFunction=function(e){return"animationEasing"==e||t.prototype.asIs.call(this,e)},e}(oa);ca.registeredClasses.Scrollbar=Le;var Zl=function(e){function r(){var r=e.call(this)||this;return r.className="Slider",r.thumb.opacity=0,r.thumb.interactionsEnabled=!1,r.endGrip.opacity=0,r.endGrip.interactionsEnabled=!1,r.startGrip.events.on("drag",function(){r.endGrip.x=r.startGrip.x,r.endGrip.y=r.startGrip.y}),r.applyTheme(),r}return da(r,e),Object.defineProperty(r.prototype,"__end",{get:function(){return this._start},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"end",{get:function(){return this._start},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"start",{get:function(){return this._start},set:function(e){this._isBusy||(this.__start=e)},enumerable:!0,configurable:!0}),r}(Le);ca.registeredClasses.Slider=Zl;var cg=function(e){function r(){var r=e.call(this)||this;r.className="TextLink",r.selectable=!0;var t=new Ia;return r.fill=t.getFor("primaryButton").brighten(.3),r.states.create("hover").properties.fill=t.getFor("primaryButtonHover").brighten(.3),r.states.create("down").properties.fill=t.getFor("primaryButtonDown").brighten(.3),r.cursorOverStyle=tb.pointer,r.applyTheme(),r}return da(r,e),r}(Gb);ca.registeredClasses.TextLink=cg;var qd=function(e){function t(){var t=e.call(this)||this;return t.properties={},t.isTemplate=!1,t._scale=1,t._nonScaling=!0,t.className="Filter",t.filterPrimitives=new Fa,t.properties.filterUnits="objectBoundingBox",t.filterPrimitives.events.on("inserted",function(e){t._disposers.push(e.newValue)}),t.width=120,t.height=120,t.applyTheme(),t}return da(t,e),t.prototype.appendPrimitives=function(e){ga(this.filterPrimitives.iterator(),function(t){e.add(t)})},t.prototype.animate=function(e,t,i){return new bc(this,e,t,i).start()},Object.defineProperty(t.prototype,"width",{get:function(){return this.properties.width},set:function(e){this.properties.width=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.properties.height},set:function(e){this.properties.height=e},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){var i=this;e.prototype.copyFrom.call(this,t),sa(t.properties,function(e,t){i[e]=t})},Object.defineProperty(t.prototype,"paper",{get:function(){return this._paper?this._paper:Ld()},set:function(e){this._paper!=e&&(this._paper=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new kd(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},set:function(e){this._scale=e,this.updateScale()},enumerable:!0,configurable:!0}),t.prototype.updateScale=function(){},Object.defineProperty(t.prototype,"filterUnits",{get:function(){return this.properties.filterUnits},set:function(e){this.properties.filterUnits=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonScaling",{get:function(){return this._nonScaling},set:function(e){this._nonScaling=e,e||(this._scale=1),this.updateScale()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sprite",{set:function(e){this.setSprite(e)},enumerable:!0,configurable:!0}),t.prototype.setSprite=function(e){this._sprite&&this._sprite!=e&&this._sprite.filters.removeValue(this),this._sprite=e},t}(Db);var ci=function(e){function r(){var r=e.call(this)||this;return r.className="DropShadowFilter",r.color=ua("#000"),r.feGaussianBlur=r.paper.add("feGaussianBlur"),r.feGaussianBlur.attr({result:"blurOut",in:"SourceGraphic"}),r.filterPrimitives.push(r.feGaussianBlur),r.feOffset=r.paper.add("feOffset"),r.feOffset.attr({result:"offsetBlur"}),r.filterPrimitives.push(r.feOffset),r.feFlood=r.paper.add("feFlood"),r.feFlood.attr({"flood-color":r.color}),r.filterPrimitives.push(r.feFlood),r.feComposite=r.paper.add("feComposite"),r.feComposite.attr({in2:"offsetBlur",operator:"in"}),r.filterPrimitives.push(r.feComposite),r.feMerge=r.paper.addGroup("feMerge"),r.feMerge.add(r.paper.add("feMergeNode")),r.feMerge.add(r.paper.add("feMergeNode").attr({in:"SourceGraphic"})),r.filterPrimitives.push(r.feMerge),r.width=200,r.height=200,r.blur=1.5,r.dx=3,r.dy=3,r.opacity=.5,r.applyTheme(),r}return da(r,e),Object.defineProperty(r.prototype,"color",{get:function(){return this.properties.color},set:function(e){this.properties.color=e,this.feFlood&&this.feFlood.attr({"flood-color":e})},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"opacity",{get:function(){return this.properties.opacity},set:function(e){this.properties.opacity=e,this.feFlood.attr({"flood-opacity":e})},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dx",{get:function(){return this.properties.dx},set:function(e){this.properties.dx=e,this.feOffset.attr({dx:e/this.scale})},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dy",{get:function(){return this.properties.dy},set:function(e){this.properties.dy=e,this.feOffset.attr({dy:e/this.scale})},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"blur",{get:function(){return this.properties.blur},set:function(e){this.properties.blur=e,this.feGaussianBlur.attr({stdDeviation:e/this.scale})},enumerable:!0,configurable:!0}),r.prototype.updateScale=function(){this.dx=this.dx,this.dy=this.dy,this.blur=this.blur},r}(qd);ca.registeredClasses.DropShadowFilter=ci;var Me=function(t){function e(){var e=t.call(this)||this;e._boundingRect={x:-4e4,y:-4e4,width:8e4,height:8e4},e._pointTo={x:0,y:0},e.fitPointerToBounds=!1,e._verticalOrientation="up",e.fixDoc=!0,e.className="Tooltip",e.isMeasured=!1,e.getFillFromObject=!0,e.margin(5,5,5,5),e.defaultState.transitionDuration=1,e.hiddenState.transitionDuration=1;var i=e.background;i.interactionsEnabled=!1,i.fillOpacity=.9,i.strokeWidth=1,i.strokeOpacity=1,i.stroke=ua("#ffffff"),i.cornerRadius=3,i.pointerLength=6,i.pointerBaseWidth=10;var o=new ci;o.dy=1,o.dx=1,o.opacity=.5,i.filters.push(o),e.autoTextColor=!0;var r=e.createChild(Gb);return r.shouldClone=!1,e.label=r,r.padding(7,12,4,12),r.interactionsEnabled=!1,r.horizontalCenter="middle",r.fill=ua("#ffffff"),e._disposers.push(r),e.label.events.on("sizechanged",e.drawBackground,e),e.label.zIndex=1,e.pointerOrientation="vertical",e.animationDuration=0,e.animationEasing=Qc,e.setPropertyValue("showInViewport",!1),e.role="tooltip",e.visible=!1,e.opacity=0,e.x=0,e.y=0,e.events.on("visibilitychanged",e.handleVisibility,e),e.applyTheme(),e}return da(e,t),e.prototype.handleVisibility=function(){this.visible&&this.label.invalidate()},Object.defineProperty(e.prototype,"getStrokeFromObject",{get:function(){return this.getPropertyValue("getStrokeFromObject")},set:function(t){this.setPropertyValue("getStrokeFromObject",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoTextColor",{get:function(){return this.getPropertyValue("autoTextColor")},set:function(t){this.setPropertyValue("autoTextColor",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keepTargetHover",{get:function(){return this.getPropertyValue("keepTargetHover")},set:function(t){var e=this;this.setPropertyValue("keepTargetHover",t,!0)&&t&&(this.hoverable=!0,this.background.interactionsEnabled=!0,this._disposers.push(this.events.on("over",function(t){e.targetSprite&&e.targetSprite.hoverable&&(e.targetSprite.isHover=!0)})),this._disposers.push(this.events.on("out",function(t){e.targetSprite&&e.targetSprite.hoverable&&(e.targetSprite.isHover=!1)})))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showInViewport",{get:function(){return this.getPropertyValue("showInViewport")},set:function(t){this.setPropertyValue("showInViewport",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getFillFromObject",{get:function(){return this.getPropertyValue("getFillFromObject")},set:function(t){this.setPropertyValue("getFillFromObject",t,!0)},enumerable:!0,configurable:!0}),e.prototype.createBackground=function(){return new Tl},Object.defineProperty(e.prototype,"pointerOrientation",{get:function(){return this.getPropertyValue("pointerOrientation")},set:function(t){this.setPropertyValue("pointerOrientation",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationDuration",{get:function(){return this.getPropertyValue("animationDuration")},set:function(t){this.setPropertyValue("animationDuration",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationEasing",{get:function(){return this.getPropertyValue("animationEasing")},set:function(t){this.setPropertyValue("animationEasing",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"html",{get:function(){return this.label.html},set:function(t){this.label.html!=t&&(this.label.html=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.label.text},set:function(t){this.label.text!=t&&(this.label.text=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.label;e.invalid&&e.validate();var i,o,r=this._pointTo.x,n=this._pointTo.y,a=this._boundingRect,s=e.measuredWidth,p=e.measuredHeight,l=this.background.pointerLength;if(this.ignoreBounds&&(a=void 0),a&&this.fixDoc&&s>a.width){If({x:a.x,y:a.y},this.parent);var u=If({x:a.x+a.width,y:a.y+a.height},this.parent),h=document.body.offsetWidth;Fb(document.body.offsetHeight),u.x>h/2?a.x=a.width-s:a.width=a.x+s}var c=this.pointerOrientation;"horizontal"==c||"left"==c||"right"==c?(o=-p/2,i="horizontal"==c?a&&r>a.x+a.width/2?-s/2-l:s/2+l:"left"==c?s/2+l:-s/2-l):(a&&(i=na(0,a.x-r+s/2,a.x-r+a.width-s/2)),"vertical"==c?a&&n>a.y+p+l?(o=-p-l,this._verticalOrientation="up"):(o=l,this._verticalOrientation="down"):"down"==c?(o=-p-l,this._verticalOrientation="up"):(o=l,this._verticalOrientation="down")),a&&(o=na(o,a.y-n,a.y+a.height-p-n)),e.x=i,e.y=o,this.drawBackground()},e.prototype.updateBackground=function(){this.group.addToBack(this.background.group)},e.prototype.drawBackground=function(){var t=this.label,e=this.background,i=t.measuredWidth,o=t.measuredHeight,r=this._boundingRect,n=i,a=t.pixelX-i/2,s=o,p=t.pixelY,l=this._pointTo.x,u=this._pointTo.y,h=r.x-l,c=h+r.width,y=r.y-u,d=y+r.height;e.x=a,e.y=p,e.width=n,e.height=s,this.fitPointerToBounds?(e.pointerX=na(-e.x,h-e.x,c-e.x),e.pointerY=na(-e.y,y-e.y,d-e.y)):(e.pointerX=-e.x,e.pointerY=-e.y),e.validate()},e.prototype.delayedPointTo=function(t,e){var i=this;this._pointToDisposer&&this._pointToDisposer.dispose(),this._pointToDisposer=ca.events.once("exitframe",function(){i.pointTo(t,e)}),this.addDisposer(this._pointToDisposer)},e.prototype.pointTo=function(t,e){this._pointTo.x==t.x&&this._pointTo.y==t.y||(this._pointTo=t,this.invalidate(),!this.visible||e?(this.moveTo(this._pointTo),this._animation&&this._animation.kill()):0==this.pixelX&&0==this.pixelY?this.moveTo(this._pointTo):(this._animation&&this._animation.kill(),this._animation=new bc(this,[{property:"x",to:t.x,from:this.pixelX},{property:"y",to:t.y,from:this.pixelY}],this.animationDuration,this.animationEasing).start()))},e.prototype.setBounds=function(t){var e=this._boundingRect;e.x==t.x&&e.y==t.y&&e.width==t.width&&e.height==t.height||(this._boundingRect=t,this.invalidate())},Object.defineProperty(e.prototype,"boundingContainer",{set:function(t){this._boundingContainer=t,t.events.on("sizechanged",this.updateBounds,this),t.events.on("positionchanged",this.updateBounds,this)},enumerable:!0,configurable:!0}),e.prototype.updateBounds=function(){var t=this._boundingContainer,e=Hf({x:t.pixelX,y:t.pixelY,width:t.maxWidth,height:t.maxHeight},t);this.setBounds(e)},Object.defineProperty(e.prototype,"ignoreBounds",{get:function(){return this.getPropertyValue("ignoreBounds")},set:function(t){this.setPropertyValue("ignoreBounds",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalOrientation",{get:function(){return this._verticalOrientation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.label.copyFrom(e.label),e._boundingRect&&(this._boundingRect=e._boundingRect)},e.prototype.asFunction=function(e){return"animationEasing"==e||t.prototype.asIs.call(this,e)},e}(oa);ca.registeredClasses.Tooltip=Me;var di=function(e){function t(){var t=e.call(this)||this;return t.className="Trapezoid",t.element=t.paper.add("path"),t.topSide=ia(100),t.bottomSide=ia(100),t.leftSide=ia(100),t.rightSide=ia(100),t.isMeasured=!1,t.applyTheme(),t}return da(t,e),t.prototype.draw=function(){e.prototype.draw.call(this);var t=this.pixelWidth,r=this.pixelHeight,i=Xa(this.topSide,t),p=Xa(this.bottomSide,t),o=Xa(this.leftSide,r),$=Xa(this.rightSide,r),a=(t-i)/2,n=(r-o)/2,l=t-(t-i)/2,u=(r-$)/2,c=t-(t-p)/2,s=r-(r-$)/2,h=(t-p)/2,d=r-(r-o)/2,m="",y="",f="",E="";if(ba(this.horizontalNeck)){var K=this.horizontalNeck.value;m=fa({x:t*K,y:Math.max(n,u)}),f=fa({x:t*K,y:Math.min(s,d)})}if(ba(this.verticalNeck)){var g=this.verticalNeck.value;y=fa({x:Math.min(l,c),y:r*g}),E=fa({x:Math.max(a,h),y:r*g})}var b=ma({x:a,y:n})+m+fa({x:l,y:u})+y+fa({x:c,y:s})+f+fa({x:h,y:d})+E;this.path=b},Object.defineProperty(t.prototype,"topSide",{get:function(){return this.getPropertyValue("topSide")},set:function(e){this.setPercentProperty("topSide",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomSide",{get:function(){return this.getPropertyValue("bottomSide")},set:function(e){this.setPercentProperty("bottomSide",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftSide",{get:function(){return this.getPropertyValue("leftSide")},set:function(e){this.setPercentProperty("leftSide",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightSide",{get:function(){return this.getPropertyValue("rightSide")},set:function(e){this.setPercentProperty("rightSide",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalNeck",{get:function(){return this.getPropertyValue("horizontalNeck")},set:function(e){this.setPropertyValue("horizontalNeck",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalNeck",{get:function(){return this.getPropertyValue("verticalNeck")},set:function(e){this.setPropertyValue("verticalNeck",e,!0)},enumerable:!0,configurable:!0}),t}(xa);ca.registeredClasses.Trapezoid=di;var dg=function(t){function e(){var e=t.call(this)||this;return e.className="Triangle",e.element=e.paper.add("path"),e.direction="top",e.applyTheme(),e}return da(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e,$=this.pixelWidth,r=this.pixelHeight;switch(this.direction){case"right":e=ma({x:0,y:0})+fa({x:$,y:r/2})+fa({x:0,y:r})+eb();break;case"left":e=ma({x:$,y:0})+fa({x:0,y:r/2})+fa({x:$,y:r})+eb();break;case"bottom":e=ma({x:0,y:0})+fa({x:$,y:0})+fa({x:$/2,y:r})+eb();break;case"top":e=ma({x:$/2,y:0})+fa({x:$,y:r})+fa({x:0,y:r})+eb();}this.path=e},Object.defineProperty(e.prototype,"direction",{get:function(){return this.getPropertyValue("direction")},set:function(t){this.setPropertyValue("direction",t,!0)},enumerable:!0,configurable:!0}),e}(xa);ca.registeredClasses.Triangle=dg;var Gc=function(){function $($,t){this._tensionX=$,this._tensionY=t}return $.prototype.smooth=function($){for(var t=$.length-1;t>0;t--){var r=$[t],e=$[t-1];Math.abs(r.x-e.x)<.1&&Math.abs(r.y-e.y)<.1&&$.splice(t-1,1)}var o=this._tensionX,a=this._tensionY;if($.length<3||o>=1&&a>=1)return Pd($);var i=$[0],n=$[$.length-1],s=!1;ha(i.x,3)==ha(n.x)&&ha(i.y)==ha(n.y)&&(s=!0);for(var N="",p=(t=0,$.length-1);t<p;t++){r=$[t-1],e=$[t];var b=$[t+1],w=$[t+2];0===t?r=s?$[$.length-2]:$[t]:t==$.length-2&&(w=s?$[1]:$[t+1]);var h=Tg(r,e,b,w,o,a),C=Ug(r,e,b,w,o,a);N+=od(b,h,C)}return N},$}();function Rd($,t,r,e,o,a){var i=$.x,n=$.y,s=t.x,N=t.y,p=Ka($,t);a&&(r=p/Math.round(p/r));var b=ca.getCache(jh(["wavedLine",$.x,t.x,$.y,t.y,r,e]));if(!b){if(p>0){var w=Math.atan2(N-n,s-i),h=Math.cos(w),C=Math.sin(w),c=r*h,u=r*C;if(r<=1||e<=1)b=fa(t);else{var l=Math.round(2*p/r),x=[],v=1;s<i&&(v*=-1),N<n&&(v*=-1);for(var m=0;m<=l;m++){var y=i+m*c/2+(v*=-1)*e/2*C,f=n+m*u/2-v*e/2*h;x.push({x:y,y:f})}b=new Gc(o,o).smooth(x)}}else b="";ca.setCache(jh(["wavedLine",$.x,t.x,$.y,t.y,r,e]),b)}return b}var ei=function(){function $($,t){this._reversed=$,this._closed=t.closed}return $.prototype._curve=function($,t,r,e,o,a){var i=(t-$)/3;return this._reversed?od({x:e,y:t},{x:r+i*o,y:$+i},{x:e-i*a,y:t-i}):od({x:t,y:e},{x:$+i,y:r+i*o},{x:t-i,y:e-i*a})},$.prototype.smooth=function($){var t=this,r=NaN,e=NaN,o=NaN,a=NaN,i=NaN,n=0,s="";switch(la($,function($){var N=$.x,p=$.y;if(t._reversed){var b=N;N=p,p=b}var w=NaN;if(N!==e||p!==a){switch(n){case 0:n=1,t._reversed?s+=fa({x:p,y:N}):s+=fa({x:N,y:p});break;case 1:n=2;break;case 2:n=3,s+=t._curve(r,e,o,a,gi(r,e,o,a,w=hi(r,e,o,a,N,p)),w);break;default:s+=t._curve(r,e,o,a,i,w=hi(r,e,o,a,N,p));}r=e,e=N,o=a,a=p,i=w}}),n){case 2:this._reversed?s+=fa({x:a,y:e}):s+=fa({x:e,y:a});break;case 3:s+=this._curve(r,e,o,a,i,gi(r,e,o,a,i));}return this._closed&&(s+=eb()),s},$}();function fi($){return $<0?-1:1}function gi($,t,r,e,o){var a=t-$;return a?(3*(e-r)/a-o)/2:o}function hi($,t,r,e,o,a){var i=t-$,n=o-t,s=(e-r)/(i||n<0&&-0),N=(a-e)/(n||i<0&&-0),p=(s*n+N*i)/(i+n);return(fi(s)+fi(N))*Math.min(Math.abs(s),Math.abs(N),.5*Math.abs(p))||0}var ii=function($){function t(t){return $.call(this,!1,t)||this}return da(t,$),t}(ei);var ji=function($){function t(t){return $.call(this,!0,t)||this}return da(t,$),t}(ei);var f=function(){function $($){this._closed=$.closed}return $.prototype.smooth=function($){var t=this,r=NaN,e=NaN,o=NaN,a=NaN,i=NaN,n=NaN,s=NaN,N=NaN,p=NaN,b=NaN,w=0,h="",C=function($,t){h+=od({x:(r+4*e+$)/6,y:(n+4*s+t)/6},{x:(2*r+e)/3,y:(2*n+s)/3},{x:(r+2*e)/3,y:(n+2*s)/3})},c=function($){var c=$.x,u=$.y;switch(w){case 0:w=1,t._closed?(o=c,N=u):h+=fa({x:c,y:u});break;case 1:w=2,t._closed&&(a=c,p=u);break;case 2:if(w=3,t._closed){i=c,b=u,h+=ma({x:(r+4*e+c)/6,y:(n+4*s+u)/6});break}h+=fa({x:(5*r+e)/6,y:(5*n+s)/6});default:C(c,u);}r=e,e=c,n=s,s=u};if(la($,c),this._closed)switch(w){case 1:h+=ma({x:o,y:N}),h+=eb();break;case 2:h+=ma({x:(o+2*a)/3,y:(N+2*p)/3}),h+=fa({x:(a+2*o)/3,y:(p+2*N)/3}),h+=eb();break;case 3:c({x:o,y:N}),c({x:a,y:p}),c({x:i,y:b});}else{switch(w){case 3:C(e,s);case 2:h+=fa({x:e,y:s});}h+=eb()}return h},$}();var Ne=function(e){function t(){var t=e.call(this)||this;return t.className="WavedCircle",t.element=t.paper.add("path"),t.waveLength=16,t.waveHeight=4,t.fill=void 0,t.fillOpacity=0,t.tension=.8,t.applyTheme(),t}return da(t,e),t.prototype.draw=function(){var e="",t=this.pixelRadius;if(t>0){var i=this.getPoints(t);e=ma(i[0])+new Gc(this.tension,this.tension).smooth(i)}var r=this.pixelInnerRadius;r>0&&((i=this.getPoints(r)).reverse(),e+=ma(i[0])+new Gc(this.tension,this.tension).smooth(i));this.path=e},t.prototype.getPoints=function(e){for(var t=e*Math.PI*2,i=this.waveHeight/2,r=t/Math.round(t/this.waveLength),n=r/2,o=[],a=t/r,s=0;s<=a;s++){var $=s*r/t*360,p=(s*r+n)/t*360;o.push({x:(e-i)*ka($),y:(e-i)*ja($)}),o.push({x:(e+i)*ka(p),y:(e+i)*ja(p)})}return o.pop(),o},Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(e){this.setPercentProperty("innerRadius",e,!0,!1,10,!1),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelInnerRadius",{get:function(){return Xa(this.innerRadius,Ea(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(e){this.setPropertyValue("waveLength",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(e){this.setPropertyValue("waveHeight",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(e){this.setPropertyValue("tension",e),this.invalidate()},enumerable:!0,configurable:!0}),t}(Tc);ca.registeredClasses.WavedCircle=Ne;var Wc=function(e){function t(){var t=e.call(this)||this;return t.className="WavedLine",t.element=t.paper.add("path"),t.waveLength=16,t.waveHeight=4,t.tension=.8,t.pixelPerfect=!1,t.fill=ua(),t.applyTheme(),t}return da(t,e),t.prototype.draw=function(){var e={x:this.x1,y:this.y1},t={x:this.x2,y:this.y2};this.path=ma(e)+Rd(e,t,this.waveLength,this.waveHeight,this.tension,!0)},Object.defineProperty(t.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(e){this.setPropertyValue("waveLength",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(e){this.setPropertyValue("waveHeight",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(e){this.setPropertyValue("tension",e),this.invalidate()},enumerable:!0,configurable:!0}),t}(cc);var ki=function(e){function t(){var t=e.call(this)||this;return t.className="WavedRectangle",t.element=t.paper.add("path"),t.waveLength=16,t.waveHeight=4,t.tension=.8,t.setPropertyValue("wavedLeft",!0),t.setPropertyValue("wavedRight",!0),t.setPropertyValue("wavedTop",!0),t.setPropertyValue("wavedBottom",!0),t.applyTheme(),t}return da(t,e),t.prototype.draw=function(){e.prototype.draw.call(this);var t=this.pixelWidth,i=this.pixelHeight;if(t>0&&i>0){var r={x:0,y:0},a={x:t,y:0},o={x:t,y:i},n={x:0,y:i},p=Math.min(t,this.waveLength),s=Math.min(i,this.waveHeight),h=Math.min(i,this.waveLength),d=Math.min(t,this.waveHeight),u="",l="",v="",$="";this.wavedTop&&(u=Rd(r,a,p,s,this.tension,!0)),this.wavedRight&&(l=Rd(a,o,h,d,this.tension,!0)),this.wavedBottom&&(v=Rd(o,n,p,s,this.tension,!0)),this.wavedLeft&&($=Rd(n,r,h,d,this.tension,!0)),this.path=ma(r)+u+fa(a)+l+fa(o)+v+fa(n)+$+"z"}},Object.defineProperty(t.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(e){this.setPropertyValue("waveLength",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(e){this.setPropertyValue("waveHeight",e),this.invalidate()},enumerable:!0,configurable:!0}),t.prototype.setWavedSides=function(e,t,i,r){this.wavedTop=e,this.wavedRight=t,this.wavedBottom=i,this.wavedLeft=r},Object.defineProperty(t.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(e){this.setPropertyValue("tension",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wavedRight",{get:function(){return this.getPropertyValue("wavedRight")},set:function(e){this.setPropertyValue("wavedRight",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wavedLeft",{get:function(){return this.getPropertyValue("wavedLeft")},set:function(e){this.setPropertyValue("wavedLeft",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wavedTop",{get:function(){return this.getPropertyValue("wavedTop")},set:function(e){this.setPropertyValue("wavedTop",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wavedBottom",{get:function(){return this.getPropertyValue("wavedBottom")},set:function(e){this.setPropertyValue("wavedBottom",e,!0)},enumerable:!0,configurable:!0}),t}(Ie);var li=function(t){function e(){var e=t.call(this)||this;e.className="ZoomOutButton",e.padding(9,9,9,9),e.showSystemTooltip=!0;var r=new Ia,o=e.background;o.cornerRadius(20,20,20,20),o.fill=r.getFor("primaryButton"),o.stroke=r.getFor("primaryButtonStroke"),o.strokeOpacity=0,o.states.getKey("hover").properties.fill=r.getFor("primaryButtonHover"),o.states.getKey("down").properties.fill=r.getFor("primaryButtonActive");var a=new xa;a.element=e.paper.add("path");var i=ma({x:0,y:0});return i+=fa({x:11,y:0}),a.path=i,a.pixelPerfect=!0,a.padding(8,3,8,3),a.stroke=r.getFor("primaryButtonText"),e.icon=a,e.applyTheme(),e}return da(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("Zoom Out"))},e}(Ec);ca.registeredClasses.ZoomOutButton=li;var $l=function(t){function e(){var e=t.call(this)||this;e.className="PlayButton",e.padding(12,12,12,12),e.showSystemTooltip=!0;var r=new Ia,i=e.background;i.cornerRadius(25,25,25,25),i.fill=r.getFor("primaryButton"),i.stroke=r.getFor("primaryButtonStroke"),i.strokeOpacity=0,i.states.getKey("hover").properties.fill=r.getFor("primaryButtonHover"),i.states.getKey("down").properties.fill=r.getFor("primaryButtonActive");var o=new dg;o.direction="right",o.width=9,o.height=11,o.marginLeft=1,o.marginRight=1,o.horizontalCenter="middle",o.verticalCenter="middle",o.stroke=r.getFor("primaryButtonText"),o.fill=o.stroke,e.icon=o;var a=new mc;a.width=11,a.height=11,a.horizontalCenter="middle",a.verticalCenter="middle",a.cornerRadius(0,0,0,0),a.stroke=r.getFor("primaryButtonText"),a.fill=o.stroke,e.togglable=!0;var l=e.states.create("active");return l.transitionDuration=0,l.properties.icon=a,e.defaultState.transitionDuration=0,e.applyTheme(),e}return da(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("Play"))},e}(Ec);ca.registeredClasses.PlayButton=$l;var mi=function(r){function o(){var o=r.call(this)||this;return o.className="ColorModifier",o.applyTheme(),o}return da(o,r),o.prototype.modify=function(r){return r},o}(Db);ca.registeredClasses.ColorModifier=mi;var eg=function(e){function t(){var t=e.call(this)||this;return t.lightnesses=[],t.brightnesses=[],t.opacities=[],t.offsets=[],t.className="GradientModifier",t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"lightnesses",{get:function(){return this._lightnesses},set:function(e){this._lightnesses=e,this._brightnesses=[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"brightnesses",{get:function(){return this._brightnesses},set:function(e){this._brightnesses=e,this._lightnesses=[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacities",{get:function(){return this._opacities},set:function(e){this._opacities=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return this._offsets},set:function(e){this._offsets=e},enumerable:!0,configurable:!0}),t.prototype.modify=function(e){this.gradient.clear();var t=0;this.opacities&&(t=wa(t,this.opacities.length)),this.lightnesses&&(t=wa(t,this.lightnesses.length)),this.brightnesses&&(t=wa(t,this.brightnesses.length));for(var s,i,r=1,o=0;o<t;o++){var n=e;this.opacities&&aa(this.opacities[o])&&(r=this.opacities[o]),this.lightnesses&&aa(this.lightnesses[o])&&(s=this.lightnesses[o],i=void 0),this.brightnesses&&aa(this.brightnesses[o])&&(i=this.brightnesses[o],s=void 0),aa(i)?n=e.brighten(this.brightnesses[o]):aa(s)&&(n=e.lighten(this.lightnesses[o]));var h=this.offsets[o];this.gradient.addColor(n,r,h)}return this.gradient},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this._offsets=t.offsets,this._brightnesses=t.brightnesses,this._lightnesses=t.lightnesses,this._opacities=t.opacities},t}(mi);ca.registeredClasses.GradientModifier=eg;var Oe=function(r){function e(){var e=r.call(this)||this;return e.className="LinearGradientModifier",e.gradient=new Zb,e.applyTheme(),e}return da(e,r),e.prototype.copyFrom=function(e){r.prototype.copyFrom.call(this,e),this.gradient=e.gradient.clone()},e}(eg);ca.registeredClasses.LinearGradientModifier=Oe;var _l=function(e){function t(){var t=e.call(this)||this;return t.className="Cone",t.angle=30,t.radius=ia(100),t.topRadius=ia(100),t.top=t.createChild(_f),t.top.shouldClone=!1,t.bottom=t.createChild(_f),t.bottom.shouldClone=!1,t.body=t.createChild(xa),t.body.shouldClone=!1,t.body.setElement(t.paper.add("path")),t.layout="none",t.bodyFillModifier=new Oe,t.bodyFillModifier.lightnesses=[0,-.25,0],t.body.fillModifier=t.bodyFillModifier,t.applyTheme(),t}return da(t,e),t.prototype.draw=function(){e.prototype.draw.call(this),gb(this,this.top,db),gb(this,this.bottom,db),gb(this,this.body,db);var t,r,i,o=this.innerWidth,a=this.innerHeight,$=this.bottom,p=this.top,n=this.angle;"horizontal"==this.orientation?(t=a/2,$.y=a/2,p.y=a/2,p.x=o,r=(90-n)/90,i=0,this.bodyFillModifier.gradient.rotation=90):(r=0,i=(90-n)/90,t=o/2,$.y=a,$.x=o/2,p.x=o/2,this.bodyFillModifier.gradient.rotation=0);var s,l=this.radius.value*t,u=this.topRadius.value*t;$.radius=l-l*r,$.radiusY=l-l*i,p.radius=u-u*r,p.radiusY=u-u*i,s="horizontal"==this.orientation?ma({x:0,y:a/2-$.radiusY})+ob(-90,-180,$.radius,$.radiusY)+fa({x:o,y:a/2+p.radiusY})+ob(90,180,p.radius,p.radiusY)+eb():ma({x:o/2-p.radius,y:0})+ob(180,-180,p.radius,p.radiusY)+fa({x:o/2+$.radius,y:a})+ob(0,180,$.radius,$.radiusY)+eb(),this.body.path=s},Object.defineProperty(t.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(e){this.setPropertyValue("angle",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPropertyValue("radius",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRadius",{get:function(){return this.getPropertyValue("topRadius")},set:function(e){this.setPropertyValue("topRadius",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(e){this.setPropertyValue("orientation",e,!0)},enumerable:!0,configurable:!0}),t}(oa);var fg=function(e){function r(){var r=e.call(this)||this;return r.className="LightenFilter",r.feColorMatrix=r.paper.add("feColorMatrix"),r.feColorMatrix.attr({type:"matrix"}),r.filterPrimitives.push(r.feColorMatrix),r.lightness=0,r.applyTheme(),r}return da(r,e),Object.defineProperty(r.prototype,"lightness",{get:function(){return this.properties.lightness},set:function(e){this.properties.lightness=e;var r=e+1;this.feColorMatrix.attr({values:r+" 0 0 0 0 0 "+r+" 0 0 0 0 0 "+r+" 0 0 0 0 0 1 0"})},enumerable:!0,configurable:!0}),r}(qd);ca.registeredClasses.LightenFilter=fg;var am=function(e){function t(){var t=e.call(this)||this;t.angle=30,t.depth=30,t.className="Rectangle3D",t.layout="none";var i=t.createChild(xa);i.shouldClone=!1,i.setElement(t.paper.add("path")),i.isMeasured=!1,t.sideBack=i,t._disposers.push(t.sideBack);var $=t.createChild(xa);$.shouldClone=!1,$.setElement(t.paper.add("path")),$.isMeasured=!1,t.sideBottom=$,t._disposers.push(t.sideBottom);var o=t.createChild(xa);o.shouldClone=!1,o.setElement(t.paper.add("path")),o.isMeasured=!1,t.sideLeft=o,t._disposers.push(t.sideLeft);var r=t.createChild(xa);r.shouldClone=!1,r.setElement(t.paper.add("path")),r.isMeasured=!1,t.sideRight=r,t._disposers.push(t.sideRight);var p=t.createChild(xa);p.shouldClone=!1,p.setElement(t.paper.add("path")),p.isMeasured=!1,t.sideTop=p,t._disposers.push(t.sideTop);var s=t.createChild(xa);return s.shouldClone=!1,s.setElement(t.paper.add("path")),s.isMeasured=!1,t.sideFront=s,t._disposers.push(t.sideFront),t.applyTheme(),t}return da(t,e),t.prototype.draw=function(){e.prototype.draw.call(this);var t=this.innerWidth,i=this.innerHeight,$=this.depth,o=this.angle,r=ja(o),p=ka(o),s={x:0,y:0},a={x:t,y:0},l={x:t,y:i},h={x:0,y:i},u={x:$*p,y:-$*r},n={x:$*p+t,y:-$*r},d={x:$*p+t,y:-$*r+i},m={x:$*p,y:-$*r+i};this.sideFront.path=ma(s)+fa(a)+fa(l)+fa(h)+eb(),this.sideBack.path=ma(u)+fa(n)+fa(d)+fa(m)+eb(),this.sideLeft.path=ma(s)+fa(u)+fa(m)+fa(h)+eb(),this.sideRight.path=ma(a)+fa(n)+fa(d)+fa(l)+eb(),this.sideBottom.path=ma(h)+fa(m)+fa(d)+fa(l)+eb(),this.sideTop.path=ma(s)+fa(u)+fa(n)+fa(a)+eb()},Object.defineProperty(t.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(e){this.setPropertyValue("depth",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(e){this.setPropertyValue("angle",e,!0)},enumerable:!0,configurable:!0}),t.prototype.setFill=function(t){var i;if(e.prototype.setFill.call(this,t),(!Wa(t)||"r"in t)&&(t=Xb(t)),t instanceof Ga)i=t.hex;else if(t instanceof Zb||t instanceof Cc)i=t.stops.getIndex(0).color.hex;else{var $=new fg;$.lightness=-.2,this.sideBack.filters.push($);var o=$.clone();o.lightness=-.4,this.sideLeft.filters.push(o);var r=$.clone();r.lightness=-.2,this.sideRight.filters.push(r);var p=$.clone();p.lightness=-.1,this.sideTop.filters.push(p);var s=$.clone();s.lightness=-.5,this.sideBottom.filters.push(s)}i&&(this.sideBack.fill=ua(i).lighten(-.2),this.sideLeft.fill=ua(i).lighten(-.4),this.sideRight.fill=ua(i).lighten(-.2),this.sideTop.fill=ua(i).lighten(-.1),this.sideBottom.fill=ua(i).lighten(-.5))},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.sideBack.copyFrom(t.sideBack),this.sideLeft.copyFrom(t.sideLeft),this.sideRight.copyFrom(t.sideRight),this.sideTop.copyFrom(t.sideTop),this.sideBottom.copyFrom(t.sideBottom)},t}(oa);var bm=function(i){function t(){var t=i.call(this)||this;t.className="Slice3D",t.layout="none";var e=t.createChild(xa);t.edge=e,e.shouldClone=!1,e.isMeasured=!1,e.toBack(),t.angle=30,t.depth=20;var $=t.createChild(xa);t.sideA=$,$.shouldClone=!1,$.isMeasured=!1;var r=t.createChild(xa);return t.sideB=r,r.shouldClone=!1,r.isMeasured=!1,t.applyTheme(),t}return da(t,i),t.prototype.setFill=function(t){var e;if(i.prototype.setFill.call(this,t),t instanceof Ga)e=t.hex;else if(t instanceof Zb||t instanceof Cc)e=t.stops.getIndex(0).color.hex;else{var $=new fg;$.lightness=-.25,this.edge.filters.push($),this.sideA.filters.push($.clone()),this.sideB.filters.push($.clone())}if(e){var r=ua(e).lighten(-.25);this.edge.fill=r,this.sideA.fill=r,this.sideB.fill=r,this.edge.stroke=r,this.sideA.stroke=r,this.sideB.stroke=r}},t.prototype.draw=function(){if(this.cornerRadius=0,this.innerCornerRadius=0,i.prototype.draw.call(this),0!==this.arc&&this.radius>0&&this.depth>0){this.sideB.show(0),this.sideA.show(0),this.edge.show(0);for(var t=this.startAngle,e=this.arc,$=this.pixelInnerRadius||0,r=this.radiusY||0,o=this.radius,s=t+e,p=r/o*$,a={x:ka(t)*$,y:ja(t)*p},h={x:ka(t)*o,y:ja(t)*r},n={x:ka(s)*o,y:ja(s)*r},l={x:ka(s)*$,y:ja(s)*p},m=this.depth,c={x:a.x,y:a.y-m},d={x:h.x,y:h.y-m},Y={x:n.x,y:n.y-m},j={x:l.x,y:l.y-m},u="",y=Math.ceil(e/5),x=e/y,f=t,g=d,T=0;T<y;T++)if((f+=x)>0&&f<180){u+=ma(g);var P={x:ka(f)*o,y:ja(f)*r-m};u+=fa({x:g.x,y:g.y+m}),u+=Rb({x:P.x,y:P.y+m},o,r,!0),u+=fa(P),u+=Rb(g,o,r),u+="z",g=P}else{u+=ma(g);P={x:ka(f)*o,y:ja(f)*r-m};u+=Rb(P,o,r,!0),u+=fa({x:P.x,y:P.y+m}),u+=Rb({x:g.x,y:g.y+m},o,r),u+=fa(g),u+="z",g=P}g=c,f=t;for(T=0;T<y;T++)if((f+=x)>0&&f<180){u+=ma(g);P={x:ka(f)*$,y:ja(f)*p-m};u+=fa({x:g.x,y:g.y+m}),u+=Rb({x:P.x,y:P.y+m},$,p,!0),u+=fa(P),u+=Rb(g,$,p),u+="z",g=P}else{u+=ma(g);P={x:ka(f)*$,y:ja(f)*p-m};u+=Rb(P,$,p,!0),u+=fa({x:P.x,y:P.y+m}),u+=Rb({x:g.x,y:g.y+m},$,p),u+=fa(g),u+="z",g=P}this.edge.path=u,this.sideA.path=ma(a)+fa(h)+fa(d)+fa(c)+eb(),this.sideB.path=ma(n)+fa(l)+fa(j)+fa(Y)+eb(),this.startAngle<90?this.sideA.toBack():this.sideA.toFront(),this.startAngle+this.arc>90?this.sideB.toBack():this.sideB.toFront(),this.slice.dy=-m}else this.sideA.hide(0),this.sideB.hide(0),this.edge.hide(0)},Object.defineProperty(t.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(i){this.setPropertyValue("depth",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){var i=this.getPropertyValue("angle");return aa(i)||(i=0),i},set:function(i){this.setPropertyValue("angle",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radiusY",{get:function(){var i=this.getPropertyValue("radiusY");return aa(i)||(i=this.radius-this.radius*this.angle/90),i},set:function(i){this.setPropertyValue("radiusY",i,!0)},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){i.prototype.copyFrom.call(this,t),this.edge.copyFrom(t.edge),this.sideA.copyFrom(t.sideA),this.sideB.copyFrom(t.sideB)},t}(Vc);var cm=function(r){function i(){var i=r.call(this)||this;return i.className="RadialGradientModifier",i.gradient=new Cc,i.applyTheme(),i}return da(i,r),i.prototype.copyFrom=function(i){r.prototype.copyFrom.call(this,i),this.gradient=i.gradient.clone()},i}(eg);ca.registeredClasses.RadialGradientModifier=cm;var ni=function(t){function i(){var i=t.call(this)||this;return i.properties.gap=0,i._line=i.paper.add("path"),i.addElement(i._line),i}return da(i,t),i.prototype.draw=function(){if(t.prototype.draw.call(this),Math.round(this.rotation/90)!=this.rotation/90&&(this.properties.shapeRendering="auto"),this._line){var i=this.width,r=this.height,e="";if(this.gap)for(var o=this.gap+this.strokeWidth,$=this.height/o,p=-$/2;p<1.5*$;p++)Math.round(this.rotation/90)!=this.rotation/90?(e+=ma({x:-i,y:(p+.5)*o})+fa({x:2*i,y:(p+.5)*o}),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2):e+=ma({x:-i,y:p*o})+fa({x:2*i,y:p*o});else Math.round(this.rotation/90)!=this.rotation/90?(e=ma({x:-i,y:r/2})+fa({x:2*i,y:r/2}),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2):e=ma({x:0,y:0})+fa({x:i,y:0});this._line.attr({d:e})}},Object.defineProperty(i.prototype,"gap",{get:function(){return this.properties.gap},set:function(t){this.properties.gap=t,this.draw()},enumerable:!0,configurable:!0}),i}(md);ca.registeredClasses.LinePattern=ni;var oi=function(r){function e(){var e=r.call(this)||this;return e.properties.radius=2,e._circle=e.paper.add("circle"),e.addElement(e._circle),e.shapeRendering="auto",e}return da(e,r),e.prototype.draw=function(){r.prototype.draw.call(this),this._circle&&this._circle.attr({r:this.radius,cx:this.width/2,cy:this.height/2})},Object.defineProperty(e.prototype,"radius",{get:function(){return this.properties.radius},set:function(r){this.properties.radius=r,this.draw()},enumerable:!0,configurable:!0}),e}(md);ca.registeredClasses.CirclePattern=oi;var pi=function(t){function e(){var e=t.call(this)||this;return e.rectHeight=1,e.rectWidth=1,e._rect=e.paper.add("rect"),e.addElement(e._rect),e}return da(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2,this._rect&&this._rect.attr({width:this.rectWidth,height:this.rectHeight,x:(this.width-this.rectWidth)/2,y:(this.height-this.rectHeight)/2})},Object.defineProperty(e.prototype,"rectWidth",{get:function(){return this.properties.rectWidth},set:function(t){this.properties.rectWidth=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rectHeight",{get:function(){return this.properties.rectHeight},set:function(t){this.properties.rectHeight=t,this.draw()},enumerable:!0,configurable:!0}),e}(md);ca.registeredClasses.RectPattern=pi;var dm=function(r){function e(){var e=r.call(this)||this;return e.className="ColorizeFilter",e.feColorMatrix=e.paper.add("feColorMatrix"),e.feColorMatrix.attr({type:"matrix"}),e.filterPrimitives.push(e.feColorMatrix),e.intensity=1,e.applyTheme(),e}return da(e,r),e.prototype.applyFilter=function(){var r,e,t,i=this.intensity,o=1-i,l=this.color;l&&l.rgb?(r=l.rgb.r/255*i,e=l.rgb.g/255*i,t=l.rgb.b/255*i):(r=0,e=0,t=0),this.feColorMatrix.attr({values:o+" 0 0 0 "+r+" 0 "+o+" 0 0 "+e+" 0 0 "+o+" 0 "+t+" 0 0 0 1 0"})},Object.defineProperty(e.prototype,"color",{get:function(){return this.properties.color},set:function(r){this.properties.color=r,this.applyFilter()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intensity",{get:function(){return this.properties.intensity},set:function(r){this.properties.intensity=r,this.applyFilter()},enumerable:!0,configurable:!0}),e}(qd);ca.registeredClasses.ColorizeFilter=dm;var Pe=function(t){function e(){var e=t.call(this)||this;return e.className="DesaturateFilter",e.feColorMatrix=e.paper.add("feColorMatrix"),e.feColorMatrix.attr({type:"saturate"}),e.filterPrimitives.push(e.feColorMatrix),e.width=120,e.height=120,e.saturation=0,e.applyTheme(),e}return da(e,t),Object.defineProperty(e.prototype,"saturation",{get:function(){return this.properties.saturation},set:function(t){this.properties.saturation=t,this.feColorMatrix.attr({values:t.toString()})},enumerable:!0,configurable:!0}),e}(qd);ca.registeredClasses.DesaturateFilter=Pe;var em=function(r){function e(){var e=r.call(this)||this;return e.className="BlurFilter",e.feGaussianBlur=e.paper.add("feGaussianBlur"),e.feGaussianBlur.attr({result:"blurOut",in:"SourceGraphic"}),e.filterPrimitives.push(e.feGaussianBlur),e.width=200,e.height=200,e.blur=1.5,e.applyTheme(),e}return da(e,r),Object.defineProperty(e.prototype,"blur",{get:function(){return this.properties.blur},set:function(r){this.properties.blur=r,this.feGaussianBlur.attr({stdDeviation:r/this.scale})},enumerable:!0,configurable:!0}),e}(qd);ca.registeredClasses.BlurFilter=em;var fm=function(e){function t(){var t=e.call(this)||this;return t.className="FocusFilter",t.feFlood=t.paper.add("feFlood"),t.feFlood.attr({"flood-color":new Ia().getFor("primaryButtonHover"),result:"base"}),t.filterPrimitives.push(t.feFlood),t.feMorphology=t.paper.add("feMorphology"),t.feMorphology.attr({result:"bigger",in:"SourceGraphic",operator:"dilate",radius:"2"}),t.filterPrimitives.push(t.feMorphology),t.feColorMatrix=t.paper.add("feColorMatrix"),t.feColorMatrix.attr({result:"mask",in:"bigger",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0"}),t.filterPrimitives.push(t.feColorMatrix),t.feComposite=t.paper.add("feComposite"),t.feComposite.attr({result:"drop",in:"base",in2:"mask",operator:"in"}),t.filterPrimitives.push(t.feComposite),t.feBlend=t.paper.add("feBlend"),t.feBlend.attr({in:"SourceGraphic",in2:"drop",mode:"normal"}),t.filterPrimitives.push(t.feBlend),t.width=130,t.height=130,t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"stroke",{get:function(){return this.properties.stroke},set:function(e){this.properties.stroke=e,this.feFlood.attr({"flood-color":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this.properties.strokeWidth},set:function(e){this.properties.strokeWidth=e,this.feMorphology.attr({radius:e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this.properties.opacity},set:function(e){this.properties.opacity=e,this.feColorMatrix.attr({values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 "+e+" 0"})},enumerable:!0,configurable:!0}),t.prototype.setSprite=function(t){this._sprite&&this._sprite!=t&&this._sprite.group.removeStyle("outline"),t.group.addStyle({outline:"none"}),e.prototype.setSprite.call(this,t)},t}(qd);var Sd=function(t){function e(){var e=t.call(this)||this;return e._list=[],e._currentStep=0,e._startIndex=0,e._currentPass=0,e.baseColor=new Ga({r:103,g:183,b:220}),e.stepOptions={},e.passOptions={brighten:-.2},e.step=1,e.minColors=20,e.minLightness=.2,e.maxLightness=.9,e.shuffle=!1,e.wrap=!0,e.reuse=!1,e.saturation=1,e.className="ColorSet",e.applyTheme(),e}return da(e,t),Object.defineProperty(e.prototype,"list",{get:function(){return this._list||this.generate(this.minColors),this._list},set:function(t){this._list=t,this.reset()},enumerable:!0,configurable:!0}),e.prototype.getReusableColor=function(t){if(0==this._list.length)return this.generate(1),this.list[0];var e=t-Math.floor(t/this._list.length)*this.list.length;return this.list[e]},e.prototype.next=function(){var t;return this.list.length<=this._currentStep?this.reuse?t=this.getReusableColor(this._currentStep):(this.generate(wa(this.minColors,this._currentStep+1)),t=this.list[this._currentStep]):t=this.list[this._currentStep],this._currentStep+=this.step,t.saturate(this.saturation)},e.prototype.getIndex=function(t){var e;return this.list.length<=t?this.reuse?e=this.getReusableColor(t):(this.generate(this.minColors),e=this.getIndex(t)):e=this.list[t],e.saturate(this.saturation)},e.prototype.reset=function(){this._currentStep=this._startIndex},Object.defineProperty(e.prototype,"currentStep",{get:function(){return this._currentStep},set:function(t){this._currentStep=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startIndex",{get:function(){return this._startIndex},set:function(t){this._startIndex=t,this.reset()},enumerable:!0,configurable:!0}),e.prototype.generate=function(t){var e=this.currentColor,s=oe(Va(e.rgb)),i=ba(this.stepOptions.hue)?this.stepOptions.hue:1/t,r={brighten:0,lighten:0,hue:s.h,lightness:s.l,saturation:s.s},n=[],o=0==this.list.length?0:1;if(this.reuse)for(var l=o;l<=t;l++)n.push(oe(Va(this._list[l].rgb)).h);else for(l=o;l<=t;l++){var h=s.h+i*l;this.wrap&&h>1&&(h-=1),n.push(h)}this.shuffle&&n.sort(function(t,e){return Math.random()-.5});for(l=0;l<t;l++){this.reuse?s=oe(Va(this._list[l].rgb)):s.h=n.shift(),this.applyStepOptions(s,r,l,this._currentPass);var p=ua(hh(s)),$=(this.stepOptions.brighten||0)*l+(this.passOptions.brighten||0)*this._currentPass;0!=$&&($=this.wrap?Gf($,this.minLightness,this.maxLightness):Ff($,this.minLightness,this.maxLightness),p=p.brighten($));var a=(this.stepOptions.lighten||0)*l+(this.passOptions.lighten||0)*this._currentPass;0!=a&&(a=this.wrap?Gf(a,this.minLightness,this.maxLightness):Ff(a,this.minLightness,this.maxLightness),p=p.lighten(a)),this._list.push(p)}this._currentPass++},Object.defineProperty(e.prototype,"currentColor",{get:function(){return 0==this._list.length?this.baseColor.saturate(this.saturation):this._list[this._list.length-1].saturate(this.saturation)},enumerable:!0,configurable:!0}),e.prototype.applyStepOptions=function(t,e,s,i){t.l=e.lightness+(this.stepOptions.lightness||0)*s+(this.passOptions.lightness||0)*i,this.wrap?(t.l>1?t.l=t.l-Math.floor(t.l):t.l<0&&(t.l=-(t.l-Math.floor(t.l))),t.l=Gf(t.l,this.minLightness,this.maxLightness)):(t.l>1?t.l=1:t.l<0&&(t.l=0),t.l=Ff(t.l,this.minLightness,this.maxLightness))},e.prototype.processConfig=function(e){if(e){if(ba(e.list)&&mb(e.list))for(var s=0,i=e.list.length;s<i;s++)e.list[s]instanceof Ga||(e.list[s]=ua(e.list[s]));!ba(e.baseColor)||e.baseColor instanceof Ga||(e.baseColor=ua(e.baseColor))}t.prototype.processConfig.call(this,e)},e}(Db);ca.registeredClasses.ColorSet=Sd;var gm=function(t){function e(){var e=t.call(this)||this;e._list=[],e._currentStep=0,e._startIndex=0,e._currentPass=0,e.baseColor=new Ga({r:103,g:183,b:220}),e.className="PatternSet";var r=new Ia;return e.list=[e.getLinePattern(1e3,45,1,6),e.getRectPattern(10,0,4),e.getLinePattern(1e3,-45,1,6),e.getCirclePattern(11,2,!0),e.getLinePattern(6,90,1),e.getRectPattern(12,45,6,!0),e.getLinePattern(6,0,1),e.getRectPattern(7,0,4),e.getLinePattern(1e3,45,2,3,"4,2"),e.getCirclePattern(9,3,!1),e.getLinePattern(1e3,-45,2,3,"4,2"),e.getRectPattern(10,45,Math.sqrt(50)),e.getLinePattern(1e3,-45,2,1),e.getRectPattern(10,0,9),e.getLinePattern(1e3,45,2,1),e.getLinePattern(1e3,0,3,1),e.getRectPattern(10,45,10),e.getLinePattern(1e3,90,3,1)],e.baseColor=r.getFor("stroke"),e.applyTheme(),e}return da(e,t),e.prototype.getLinePattern=function(t,e,r,n,i){var o=new ni;return o.width=t,o.height=t,o.stroke=this.baseColor,o.gap=n,o.strokeDasharray=i,o.strokeWidth=r,o.rotation=e,o},e.prototype.getRectPattern=function(t,e,r,n){var i=new pi;return i.width=t,i.height=t,i.rectWidth=r,i.rectHeight=r,n?(i.stroke=this.baseColor,i.strokeWidth=1,i.fillOpacity=0):(i.fill=this.baseColor,i.strokeWidth=0),0!=e&&(i.shapeRendering="auto"),i.rotation=e,i},e.prototype.getCirclePattern=function(t,e,r){var n=new oi;return n.width=t,n.height=t,n.shapeRendering="auto",n.radius=e,r?(n.stroke=this.baseColor,n.strokeWidth=1,n.fillOpacity=0):(n.fill=this.baseColor,n.strokeWidth=0),n},Object.defineProperty(e.prototype,"list",{get:function(){return this._list},set:function(t){this._list=t,this.reset()},enumerable:!0,configurable:!0}),e.prototype.next=function(){var t=this.getIndex(this.currentStep);return this._currentStep++,t},e.prototype.getIndex=function(t){for(;this.list.length<=t;)this.generatePatterns();return this.list[t].clone()},e.prototype.generatePatterns=function(){var t=this.list.length/(this._currentPass+1);this._currentPass++;for(var e=0;e<t;e++)this.list.push(this.list[e].clone())},e.prototype.reset=function(){this._currentStep=this._startIndex},Object.defineProperty(e.prototype,"currentStep",{get:function(){return this._currentStep},set:function(t){this._currentStep=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startIndex",{get:function(){return this._startIndex},set:function(t){this._startIndex=t,this.reset()},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){t.prototype.processConfig.call(this,e)},e}(Db);ca.registeredClasses.PatternSet=gm;var g=function(){function s(){this._disposed=!1,this._disposers=[]}return s.prototype.init=function(){},s.prototype.isDisposed=function(){return this._disposed},s.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var s=this._disposers;for(this._disposers=null;0!==s.length;){s.shift().dispose()}}},s}();function hm(e,r){var t=Ch(e),$=!1;if(t||((t=document.createElement("div")).style.width="200px",t.style.height="200px",t.style.visibility="hidden",t.style.position="absolute",document.body.appendChild(t),$=!0),t){t.innerHTML="";var i=new Mh(t),o=new Nh(i.SVGContainer,"svg-"+(Vf.length-1)),n=new oa;n.htmlContainer=t,n.svgContainer=i,n.width=ia(100),n.height=ia(100),n.background.fillOpacity=0,n.paper=o,o.append(n.group),$&&$k(function(){n.moveHtmlContainer(e)}),n.relativeWidth=1,n.relativeHeight=1,i.container=n;var s=n.createChild(r);s.topParent=n;var p=s.uid;ca.invalidSprites[p]=[],ca.invalidDatas[p]=[],ca.invalidPositions[p]=[],ca.invalidLayouts[p]=[],n.baseId=p,s.isBaseSprite=!0,s.focusFilter=new fm,ca.baseSprites.push(s),ca.baseSpritesByUid[p]=s,s.maskRectangle={x:0,y:0,width:Math.max(i.width||0,0),height:Math.max(i.height||0,0)},n.events.on("maxsizechanged",function(e){0!=e.previousWidth&&0!=e.previousHeight||n.deepInvalidate(),s.maskRectangle&&(s.maskRectangle={x:0,y:0,width:Math.max(i.width||0,0),height:Math.max(i.height||0,0)})});var a=null,d=function(){s.isDisposed()?a=null:null==Fh(s.dom)?(za.autoDispose?(n.htmlContainer=void 0,i.htmlElement=void 0,s.dispose()):Uf("Chart was not disposed",s.uid),a=null):a=window.setTimeout(d,1e3)};d(),s.addDisposer(new La(function(){null!==a&&clearTimeout(a),ta(ca.baseSprites,s),ca.baseSpritesByUid[s.uid]=void 0})),s.addDisposer(n);var l=n.createChild(oa);l.topParent=n,l.width=ia(100),l.height=ia(100),l.isMeasured=!1,n.tooltipContainer=l,s.tooltip=new Me,s.tooltip.hide(0),s.tooltip.setBounds({x:0,y:0,width:l.maxWidth,height:l.maxHeight}),l.events.on("maxsizechanged",function(){Va(s.tooltip).setBounds({x:0,y:0,width:l.maxWidth,height:l.maxHeight})},void 0,!1);var m=new bi;if(m.events.on("inited",function(){m.__disabled=!0},void 0,!1),n.preloader=m,s instanceof oa&&!s.hasLicense()){var P=l.createChild(jm);l.events.on("maxsizechanged",function(e){l.maxWidth<=100||l.maxHeight<=50?P.hide():(P.isHidden||P.isHiding)&&P.show()},void 0,!1),s.logo=P,P.align="left",P.valign="bottom"}if(Fb(s.numberFormatter),n.isStandaloneInstance=!0,za.onlyShowOnViewport){if(Sf(t,za.viewportTarget))za.queue&&gg(s);else{s.__disabled=!0,s.tooltipContainer.__disabled=!0;var u=[Za(window,"DOMContentLoaded",function(){rd(s)}),Za(window,"load",function(){rd(s)}),Za(window,"resize",function(){rd(s)}),Za(window,"scroll",function(){rd(s)})];if(za.viewportTarget)for(var c=mb(za.viewportTarget)?za.viewportTarget:za.viewportTarget?[za.viewportTarget]:[],h=0;h<c.length;h++){var v=c[h];u.push(Za(v,"resize",function(){rd(s)})),u.push(Za(v,"scroll",function(){rd(s)}))}var g=new Ya(u);s.addDisposer(g),s.vpDisposer=g}}else za.queue&&gg(s);return s}throw Aa.log("html container not found"),new Error("html container not found")}function gg(e){-1==ca.queue.indexOf(e)&&(e.__disabled=!0,e.tooltipContainer.__disabled=!0,e.events.disableType("appeared"),0==ca.queue.length&&(ca.events.once("exitframe",function(){qi(e)}),Aa.requestFrame()),e.addDisposer(new La(function(){Qe(e)})),ca.queue.push(e))}function Qe(e){var r=ca.queue.indexOf(e);if(r>=0){ca.queue.splice(ca.queue.indexOf(e),1);var t=ca.queue[r];t&&qi(t)}}function rd(e){e.__disabled&&Sf(e.htmlContainer,za.viewportTarget)&&(e.vpDisposer&&e.vpDisposer.dispose(),gg(e))}function qi(e){e.__disabled=!1,e.tooltipContainer.__disabled=!1,e.events.enableType("appeared"),e.dispatch("removedfromqueue"),e.showOnInit&&e.events.on("appeared",function(){Qe(e)}),e.vpDisposer&&e.vpDisposer.dispose(),e instanceof oa&&e.invalidateLabels(),e.tooltipContainer&&e.tooltipContainer.invalidateLayout(),e instanceof Sc?(e.invalidateData(),e.reinit(),e.events.once("datavalidated",function(){e.showOnInit?e.appear():Qe(e)})):(e.reinit(),e.events.once("inited",function(){Qe(e)}),e.showOnInit&&e.appear())}function im(e,r){var t;Ca(r)&&(ba(ca.registeredClasses[r])?r=ca.registeredClasses[r]:(r=ca.registeredClasses.Container,t=new Error("Class ["+r+"] is not loaded.")));var $=hm(e,r);return t&&$.raiseCriticalError(t),$}function ri(){var e,r=ca.deferred[0];if(r){var t=(e=r.callback).call.apply(e,Lc([r.scope],r.args));t.events.on("ready",function(){r.resolve(t),ca.deferred.shift(),za.deferredDelay?setTimeout(ri,za.deferredDelay):ri()})}}var jm=function(r){function e(){var e=r.call(this)||this;e.className="AmChartsLogo",e.valign="bottom";var t=.3;e.opacity=.3,e.defaultState.properties.opacity=.4,e.url="https://www.amcharts.com/",e.urlTarget="_blank",e.showSystemTooltip=!0,e.readerTitle="Chart created using amCharts library",e.width=66,e.height=21,e.background.opacity=0;var o=ua("#474758");"#ffffff"==new Ia().getFor("background").alternative.hex&&(o=ua("#ffffff"));var a=new Zb;a.addColor(o),a.addColor(o,1,.75),a.addColor(ua("#3cabff"),1,.755),a.rotation=-10;var i=a,$=e.createChild(Ke);$.shouldClone=!1,$.isMeasured=!1,$.segments=[[{x:15,y:15},{x:27,y:15},{x:36,y:6},{x:40.5,y:10.5},{x:45,y:6},{x:54,y:15},{x:60,y:15}]],$.strokeWidth=6*t,$.tensionX=.8,$.tensionY=1,$.stroke=ua("#3cabff");var s=e.createChild(Ke);s.shouldClone=!1,s.isMeasured=!1,s.segments=[[{x:6,y:15},{x:15,y:15},{x:27,y:12*t},{x:39.9,y:15},{x:51,y:15},{x:60,y:15}]],s.strokeWidth=6*t,s.tensionX=.75,s.tensionY=1,s.stroke=i,e._disposers.push(s);var l=new Pe;e.filters.push(l);var n=new Pe;n.saturation=1;var p=e.states.create("hover");return p.properties.opacity=1,p.filters.push(n),e.applyTheme(),e}return da(e,r),e}(oa);var si=function(t){function e(){var e=t.call(this)||this;e.className="Grip";var i=new Ia;e.layout="absolute",e.padding(10,10,10,10),e.margin(3,3,3,3),e.background.fillOpacity=.3,e.background.cornerRadius(10,10,10,10);var o=new xa;o.element=e.paper.add("path");var r=ma({x:-6,y:0});return r+=fa({x:6,y:0}),r+=ma({x:-8,y:-6}),r+=fa({x:0,y:-12}),r+=fa({x:8,y:-6}),r+=ma({x:-8,y:6}),r+=fa({x:0,y:12}),r+=fa({x:8,y:6}),o.path=r,o.strokeWidth=2,o.fillOpacity=0,o.pixelPerfect=!0,o.padding(0,4,0,4),o.stroke=i.getFor("text"),o.strokeOpacity=.7,o.align="center",o.valign="middle",e.icon=o,e.label.dispose(),e.label=void 0,e.position="right",e.autoHideDelay=3e3,e.events.on("shown",function(t){e._autoHideTimeout&&e._autoHideTimeout.dispose(),e.autoHideDelay&&(e._autoHideTimeout=e.setTimeout(function(){e.hide()},e.autoHideDelay))}),e.events.on("down",function(t){e._autoHideTimeout&&e._autoHideTimeout.dispose()}),e.events.on("out",function(t){e.autoHideDelay&&(e._autoHideTimeout=e.setTimeout(function(){e.hide()},e.autoHideDelay))}),e.applyTheme(),e}return da(e,t),Object.defineProperty(e.prototype,"position",{get:function(){return this.getPropertyValue("position")},set:function(t){if(this.setPropertyValue("position",t))switch(t){case"left":this.align="left",this.valign="middle",this.horizontalCenter="left",this.verticalCenter="middle",this.icon.rotation=0,this.width=void 0,this.height=ia(30);break;case"right":this.align="right",this.valign="middle",this.horizontalCenter="right",this.verticalCenter="middle",this.icon.rotation=0,this.width=void 0,this.height=ia(30);break;case"top":this.align="center",this.valign="top",this.horizontalCenter="middle",this.verticalCenter="top",this.icon.rotation=90,this.width=ia(30),this.height=void 0;break;case"bottom":this.align="center",this.valign="bottom",this.horizontalCenter="middle",this.verticalCenter="bottom",this.icon.rotation=90,this.width=ia(30),this.height=void 0;break;default:this.align="center",this.valign="middle",this.horizontalCenter="middle",this.verticalCenter="middle",this.icon.rotation=90,this.width=ia(30),this.height=void 0;}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoHideDelay",{get:function(){return this.getPropertyValue("autoHideDelay")},set:function(t){this.setPropertyValue("autoHideDelay",t)},enumerable:!0,configurable:!0}),e}(Ec);ca.registeredClasses.Grip=si;var ti=function(e){function t(){var t=e.call(this)||this;return t.className="ChartDataItem",t.applyTheme(),t}return da(t,e),t}(Rc);var Xc=function(e){function t(){var r=e.call(this)||this;if(r._legend=new nb,r.constructor===t)throw new Error("'Chart' cannot be instantiated directly. Please use a specific chart type.");r.className="Chart";var n=new Gb;r.titles=new _a(n),r._disposers.push(new Sa(r.titles)),r._disposers.push(n),r.width=ia(100),r.height=ia(100),r.layout="vertical";var i=r.createChild(oa);i.shouldClone=!1,i.layout="vertical",i.width=ia(100),i.height=ia(100),r.chartAndLegendContainer=i;var o=i.createChild(oa);return o.shouldClone=!1,o.width=ia(100),o.height=ia(100),r.chartContainer=o,r.showOnInit=!0,r._disposers.push(r._legend),r.titles.events.on("inserted",function(e){r.processTitle(e),r.updateReaderTitleReferences()},r,!1),r.titles.events.on("removed",function(e){r.updateReaderTitleReferences()},r,!1),r.role="region",r.defaultState.transitionDuration=1,r.applyTheme(),r}return da(t,e),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("Chart"))},t.prototype.draw=function(){this.fixLayout(),e.prototype.draw.call(this)},t.prototype.fixLayout=function(){var e=this.legend;if(e){var t=this.chartAndLegendContainer,r=this.chartContainer;switch(r.x=void 0,r.y=void 0,e.x=void 0,e.y=void 0,e.position){case"left":t.layout="horizontal",e.toBack();break;case"right":t.layout="horizontal",e.toFront();break;case"top":t.layout="vertical",e.toBack();break;case"bottom":t.layout="vertical",e.toFront();}}},t.prototype.feedLegend=function(){},t.prototype.processTitle=function(e){var t=e.newValue;return t.parent=this,t.toBack(),t.shouldClone=!1,t.align="center",t.uidAttr(),t},t.prototype.updateReaderTitleReferences=function(){if(this.titles.length){var e=[];ga(this.titles.iterator(),function(t){e.push(t.uid)}),this.setSVGAttribute({"aria-labelledby":e.join(" ")})}else this.removeSVGAttribute("aria-labelledby")},Object.defineProperty(t.prototype,"legend",{get:function(){return this._legend.get()},set:function(e){this.setLegend(e)},enumerable:!0,configurable:!0}),t.prototype.setLegend=function(e){var t=this;this._legend.get()!==e&&(e?(e.parent=this.chartAndLegendContainer,this._legend.set(e,e.events.on("propertychanged",function(e){"position"==e.property&&t.fixLayout()},void 0,!1)),e.addDisposer(new La(function(){t.legend=void 0}))):this._legend.reset(),this.feedLegend())},t.prototype.dispose=function(){this.legend&&this.legend.dispose(),e.prototype.dispose.call(this)},t.prototype.processConfig=function(t){t&&ba(t.legend)&&!ba(t.legend.type)&&(t.legend.type="Legend"),e.prototype.processConfig.call(this,t)},t.prototype.copyFrom=function(t){this.titles.copyFrom(t.titles),this.chartContainer.copyFrom(t.chartContainer),t.legend&&(this.legend=t.legend.clone(),this.legend.removeChildren()),e.prototype.copyFrom.call(this,t)},Object.defineProperty(t.prototype,"dragGrip",{get:function(){var e=this;if(!this._dragGrip){var t=this.tooltipContainer.createChild(si);t.align="right",t.valign="middle",t.hide(0),t.events.on("down",function(t){t.touch&&(e.interactionsEnabled=!1)}),t.events.on("up",function(t){e.interactionsEnabled=!0}),this.events.on("down",function(e){e.touch&&t.show()}),this._dragGrip=t}return this._dragGrip},set:function(e){this._dragGrip=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusable",{get:function(){return this.parent.focusable},set:function(e){this.parent.focusable=e},enumerable:!0,configurable:!0}),t}(Sc);ca.registeredClasses.Chart=Xc,ub.push({relevant:Ab.widthXS,state:function(e,t){if(e instanceof Xc){var r=e.states.create(t);return e.pixelPaddingLeft>10&&(r.properties.paddingLeft=10),e.pixelPaddingRight>10&&(r.properties.paddingRight=10),r}return null}}),ub.push({relevant:Ab.heightXS,state:function(e,t){if(e instanceof Xc){var r=e.states.create(t);return e.pixelPaddingTop>10&&(r.properties.paddingTop=10),e.pixelPaddingBottom>10&&(r.properties.paddingBottom=10),r}return null}}),ub.push({relevant:Ab.widthXXS,state:function(e,t){if(e instanceof Xc){var r=e.states.create(t);return r.properties.paddingLeft=0,r.properties.paddingRight=0,r}return null}}),ub.push({relevant:Ab.heightXXS,state:function(e,t){if(e instanceof Xc){var r=e.states.create(t);return r.properties.paddingTop=0,r.properties.paddingBottom=0,r}return null}});var nc=function(e){function t(){var t=e.call(this)||this;return t.className="Bullet",t.isMeasured=!1,t.tooltipX=0,t.tooltipY=0,t.layout="none",t.applyOnClones=!0,t.copyToLegendMarker=!0,t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"locationX",{get:function(){return this.getPropertyValue("locationX")},set:function(e){if(this.setPropertyValue("locationX",e)){var t=this.dataItem;t&&t.component&&t.component.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locationY",{get:function(){return this.getPropertyValue("locationY")},set:function(e){if(this.setPropertyValue("locationY",e)){var t=this.dataItem;t&&t.component&&t.component.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xField",{get:function(){return this.getPropertyValue("xField")},set:function(e){this.setPropertyValue("xField",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yField",{get:function(){return this.getPropertyValue("yField")},set:function(e){this.setPropertyValue("yField",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDynamic",{get:function(){return this.getPropertyValue("isDynamic")},set:function(e){this.setPropertyValue("isDynamic",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"copyToLegendMarker",{get:function(){return this.getPropertyValue("copyToLegendMarker")},set:function(e){this.setPropertyValue("copyToLegendMarker",e)},enumerable:!0,configurable:!0}),t}(oa);ca.registeredClasses.Bullet=nc,ub.push({relevant:Ab.isXS,state:function(e,t){if(e instanceof nc){var r=e.states.create(t);return r.properties.disabled=!0,r}return null}});var km=function(e){function t(){var t=e.call(this)||this;return t.childrenCreated=!1,t.className="LegendDataItem",t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"label",{get:function(){var e=this;if(!this._label){var t=this.component.labels.create();this._label=t,this.addSprite(t),this._disposers.push(t),t.parent=this.itemContainer,this._disposers.push(new La(function(){ba(e.component)&&e.component.labels.removeValue(t)}))}return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.properties.color},set:function(e){this.setProperty("color",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valueLabel",{get:function(){var e=this;if(!this._valueLabel){var t=this.component.valueLabels.create();this._valueLabel=t,this.addSprite(t),this._disposers.push(t),t.parent=this.itemContainer,this._disposers.push(new La(function(){ba(e.component)&&e.component.valueLabels.removeValue(t)}))}return this._valueLabel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemContainer",{get:function(){var e=this;if(!this._itemContainer){var t=this.component,i=t.itemContainers.create();i.parent=t,this._itemContainer=i,this.addSprite(i),this._disposers.push(i),i.togglable&&i.events.on("toggled",function(e){t.toggleDataItem(e.target.dataItem)},void 0,!1),i.focusable&&(i.events.on("hit",function(e){t.focusedItem=void 0},void 0,!1),i.events.on("focus",function(e){t.focusedItem=e.target.dataItem},void 0,!1),i.events.on("blur",function(e){t.focusedItem=void 0},void 0,!1)),this._disposers.push(new La(function(){ba(e.component)&&e.component.itemContainers.removeValue(i)})),this.dataContext.uidAttr&&(i.readerControls=this.dataContext.uidAttr(),i.readerLabelledBy=this.dataContext.uidAttr());var r=this.dataContext;if((r instanceof Rc||r instanceof xa)&&!r.isDisposed()){var a=function(e){i.readerChecked=e.visible,i.events.disableType("toggled"),i.isActive=!e.visible,i.events.enableType("toggled")};r.addDisposer(new La(function(){e.component&&e.component.dataItems.remove(e)})),r instanceof xa?(i.addDisposer(r.events.on("visibilitychanged",a,void 0,!1)),i.addDisposer(r.events.on("hidden",function(e){i.readerChecked=!1,i.events.disableType("toggled"),i.isActive=!0,i.events.enableType("toggled")},void 0,!1)),i.addDisposer(r.events.on("shown",function(e){i.readerChecked=!0,i.events.disableType("toggled"),i.isActive=!1,i.events.enableType("toggled")},void 0,!1))):i.addDisposer(r.events.on("visibilitychanged",a,void 0,!1))}}return this._itemContainer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"marker",{get:function(){var e=this;if(!this._marker){var t=this.component.markers.create();this._marker=t,t.parent=this.itemContainer,this.addSprite(t),this._disposers.push(t),this._disposers.push(new La(function(){ba(e.component)&&e.component.markers.removeValue(t)}))}return this._marker},enumerable:!0,configurable:!0}),t}(Rc);var ui=function(){return function(){this.createMarker=!0}}();var Td=function(e){function t(){var t=e.call(this)||this;t.className="Legend",t.layout="grid",t.setPropertyValue("useDefaultMarker",!1),t.setPropertyValue("scrollable",!1),t.setPropertyValue("contentAlign","center");var i=new oa;i.applyOnClones=!0,i.padding(8,0,8,0),i.margin(0,10,0,10),i.layout="horizontal",i.clickable=!0,i.focusable=!0,i.role="switch",i.togglable=!0,i.cursorOverStyle=tb.pointer,i.background.fillOpacity=0,t.itemContainers=new _a(i),t._disposers.push(new Sa(t.itemContainers)),t._disposers.push(t.itemContainers.template),t._disposers.push(va().body.events.on("keyup",function(e){if(kc.isKey(e.event,"enter")&&t.focusedItem){var i=t.focusedItem,r=i.itemContainer;r.togglable?t.toggleDataItem(i):r.clickable&&r.events.isEnabled("hit")&&(r.dispatchImmediately("hit",{event:e}),t.focusedItem=i)}},t));var r=new Ia,a=new oa;a.width=23,a.height=23,a.interactionsEnabled=!1,a.applyOnClones=!0,a.setStateOnChildren=!0,a.background.fillOpacity=0,a.background.strokeOpacity=0,a.propertyFields.fill="fill",a.valign="middle";var s=r.getFor("disabledBackground");a.events.on("childadded",function(e){var t=e.newValue.states.create("active");t.properties.stroke=s,t.properties.fill=s}),t.markers=new _a(a),t._disposers.push(new Sa(t.markers)),t._disposers.push(t.markers.template);var n=a.createChild(mc);n.width=ia(100),n.height=ia(100),n.applyOnClones=!0,n.propertyFields.fill="fill",n.strokeOpacity=0;var o=new Gb;o.text="{name}",o.margin(0,5,0,5),o.valign="middle",o.applyOnClones=!0,o.states.create("active").properties.fill=r.getFor("disabledBackground"),t.labels=new _a(o),t._disposers.push(new Sa(t.labels)),t._disposers.push(t.labels.template),o.interactionsEnabled=!1,o.truncate=!0,o.fullWords=!1;var l=new Gb;return l.margin(0,5,0,0),l.valign="middle",l.width=50,l.align="right",l.textAlign="end",l.applyOnClones=!0,l.states.create("active").properties.fill=r.getFor("disabledBackground"),l.interactionsEnabled=!1,t.valueLabels=new _a(l),t._disposers.push(new Sa(t.valueLabels)),t._disposers.push(t.valueLabels.template),t.position="bottom",i.states.create("active"),i.setStateOnChildren=!0,t.role="group",t.events.on("layoutvalidated",t.handleScrollbar,t,!1),t.applyTheme(),t}return da(t,e),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("Legend"))},t.prototype.createDataItem=function(){return new km},t.prototype.validateDataElements=function(){this.scrollbar&&(this.scrollbar.start=0,this.scrollbar.end=1),e.prototype.validateDataElements.call(this)},t.prototype.validateDataElement=function(t){e.prototype.validateDataElement.call(this,t);var i=t.itemContainer,r=t.marker;Fb(t.label);var a=t.valueLabel;i.readerChecked=t.dataContext.visible,t.dataContext.legendDataItem=t;var s=t.label.maxWidth;t.label.width instanceof Da||(t.label.width=void 0),s>0&&(t.label.maxWidth=s),"right"==a.align&&(a.width=void 0);var n=t.dataContext.legendSettings,o=t.dataContext;!o.createLegendMarker||this.useDefaultMarker&&o instanceof xa?this.markers.template.propertyFields.fill=void 0:t.childrenCreated||(o.createLegendMarker(r),t.childrenCreated=!0),o.updateLegendValue&&o.updateLegendValue(),o.component&&o.component.updateLegendValue&&o.component.updateLegendValue(o),a.invalid&&a.validate(),""==a.text||null==a.text?a.__disabled=!0:a.__disabled=!1,!n||null==n.itemValueText&&null==n.valueText||(a.__disabled=!1);var l=t.dataContext.visible;void 0===l&&(l=!0),l=Ua(l),t.dataContext.visible=l,i.events.disableType("toggled"),i.isActive=!l,i.isActive?i.setState("active",0):i.setState("default",0),i.events.enableType("toggled")},t.prototype.afterDraw=function(){var t=this,i=this.getPropertyValue("maxWidth"),r=0;this.labels.each(function(e){e.invalid&&(e.maxWidth=void 0,e.validate()),e.measuredWidth+e.pixelMarginLeft+e.pixelMarginRight>r&&(r=e.measuredWidth+e.pixelMarginLeft+e.pixelMarginRight)});var a=0;this.valueLabels.each(function(e){e.invalid&&e.validate(),e.measuredWidth+e.pixelMarginLeft+e.pixelMarginRight>a&&(a=e.measuredWidth+e.pixelMarginLeft+e.pixelMarginRight)});var s=0;this.markers.each(function(e){e.invalid&&e.validate(),e.measuredWidth+e.pixelMarginLeft+e.pixelMarginRight>s&&(s=e.measuredWidth+e.pixelMarginLeft+e.pixelMarginRight)});var n,o=this.itemContainers.template,l=o.pixelMarginRight+o.pixelMarginLeft,p=r+a+s;aa(i)?((i-=l)>p&&(i=p),n=i-s-a):n=r,this.labels.each(function(e){("right"==t.valueLabels.template.align||e.measuredWidth>n)&&(e.width instanceof Da||(e.width=Math.min(e.maxWidth,n-e.pixelMarginLeft-e.pixelMarginRight)))}),"right"==this.valueLabels.template.align&&this.valueLabels.each(function(e){e.width=a-e.pixelMarginRight-e.pixelMarginLeft}),e.prototype.afterDraw.call(this)},t.prototype.handleScrollbar=function(){var e=this.scrollbar;this.scrollable&&e&&(e.height=this.measuredHeight,e.x=this.measuredWidth-e.pixelWidth-e.pixelMarginLeft,this.contentHeight>this.measuredHeight?(e.visible=!0,e.thumb.height=e.height*this.measuredHeight/this.contentHeight,this.paddingRight=e.pixelWidth+e.pixelMarginLeft+ +e.pixelMarginRight):e.visible=!1,this.updateMasks())},Object.defineProperty(t.prototype,"position",{get:function(){return this.getPropertyValue("position")},set:function(e){this.setPropertyValue("position",e)&&("left"==e||"right"==e?(this.margin(10,5,10,10),this.valign="middle",this.contentAlign="none",this.valueLabels.template.align="right",aa(this.maxColumns)||(this.maxColumns=1),this.width=void 0,this.maxWidth=220):(this.maxColumns=void 0,this.width=ia(100),this.valueLabels.template.align="left"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useDefaultMarker",{get:function(){return this.getPropertyValue("useDefaultMarker")},set:function(e){this.setPropertyValue("useDefaultMarker",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollable",{get:function(){return this.getPropertyValue("scrollable")},set:function(e){if(this.setPropertyValue("scrollable",e,!0))if(e){var t=this.createChild(Le);this.scrollbar=t,t.isMeasured=!1,t.orientation="vertical",t.endGrip.__disabled=!0,t.startGrip.__disabled=!0,t.visible=!1,t.marginLeft=5,this._mouseWheelDisposer=this.events.on("wheel",this.handleWheel,this,!1),this._disposers.push(this._mouseWheelDisposer),this._disposers.push(t.events.on("rangechanged",this.updateMasks,this,!1))}else this._mouseWheelDisposer&&(this._mouseWheelDisposer.dispose(),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=void 0))},enumerable:!0,configurable:!0}),t.prototype.handleWheel=function(e){var t=e.shift.y,i=this.scrollbar;if(i){var r=t/1e3*this.measuredHeight/this.contentHeight,a=i.end-i.start;t>0?(i.start=wa(0,i.start-r),i.end=i.start+a):(i.end=Ea(1,i.end-r),i.start=i.end-a)}},t.prototype.updateMasks=function(){var e=this;this.scrollbar&&this.itemContainers.each(function(t){t.dy=-e.scrollbar.thumb.pixelY*e.contentHeight/e.measuredHeight,t.maskRectangle={x:0,y:-t.dy,width:e.measuredWidth,height:e.measuredHeight}})},t.prototype.toggleDataItem=function(e){var t=e.dataContext;!t.visible||t.isHiding||t instanceof xa&&t.isHidden?(e.color=e.colorOrig,e.itemContainer.isActive=!1,!0===t.hidden&&(t.hidden=!1),t.show?t.show():t.visible=!0,this.svgContainer.readerAlert(this.language.translate("%1 shown",this.language.locale,e.label.readerTitle))):(e.itemContainer.isActive=!0,t.hide?t.hide():t.visible=!1,this.svgContainer.readerAlert(this.language.translate("%1 hidden",this.language.locale,e.label.readerTitle)),e.color=new Ia().getFor("disabledBackground"))},Object.defineProperty(t.prototype,"preloader",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.handleDataItemPropertyChange=function(e,t){e.valueLabel.invalidate(),e.label.invalidate()},t}(Sc);ca.registeredClasses.Legend=Td,ub.push({relevant:Ab.widthXS,state:function(e,t){if(e instanceof Td&&("left"==e.position||"right"==e.position)){var i=e.states.create(t);return i.properties.position="bottom",i}return null}}),ub.push({relevant:Ab.heightXS,state:function(e,t){if(e instanceof Td&&("top"==e.position||"bottom"==e.position)){var i=e.states.create(t);return i.properties.position="right",i}return null}}),ub.push({relevant:Ab.isXS,state:function(e,t){if(e instanceof Td){var i=e.states.create(t);return i.properties.disabled=!0,i}return null}});var Re=function(t){function e(){var e=t.call(this)||this;return e.className="SeriesDataItem",e.values.value={},e.values.value={},e.applyTheme(),e}return da(e,t),Object.defineProperty(e.prototype,"bullets",{get:function(){return this._bullets||(this._bullets=new Ta,this._disposers.push(new Pc(this._bullets))),this._bullets},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.bullets.clear(),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"value",{get:function(){return this.values.value.value},set:function(t){this.setValue("value",t)},enumerable:!0,configurable:!0}),e}(Rc);var Se=function(t){function e(){var i=t.call(this)||this;if(i._ignoreMinMax=!1,i._showBullets=!0,i.legendSettings=new ui,i._tmin=new Ta,i._tmax=new Ta,i._smin=new Ta,i._smax=new Ta,i.dataItemsByAxis=new Ta,i.skipFocusThreshold=20,i._itemReaderTextChanged=!1,i.calculatePercent=!1,i.usePercentHack=!0,i.autoDispose=!0,i.simplifiedProcessing=!1,i.constructor===e)throw new Error("'Series' cannot be instantiated directly. Please use a specific series type.");i.className="Series",i.isMeasured=!1,i.layout="none",i.shouldClone=!1,i.setPropertyValue("hidden",!1),i.axisRanges=new Fa,i.axisRanges.events.on("inserted",i.processAxisRange,i,!1),i.minBulletDistance=0,i.mainContainer=i.createChild(oa),i.mainContainer.shouldClone=!1,i.mainContainer.mask=i.createChild(xa),i._disposers.push(i.mainContainer);var a=i.mainContainer.createChild(oa);return i._shouldBeReady.push(a),a.shouldClone=!1,a.layout="none",a.virtualParent=i,i._disposers.push(a),i.bulletsContainer=a,i.tooltip=new Me,i.tooltip.virtualParent=i,i._disposers.push(i.tooltip),i.hiddenState.transitionEasing=xh,i.dataItem=i.createDataItem(),i._disposers.push(i.dataItem),i.dataItem.component=i,i.role="group",i.applyTheme(),i}return da(e,t),e.prototype.applyTheme=function(){t.prototype.applyTheme.call(this),za.autoSetClassName&&this.bulletsContainer&&(this.bulletsContainer.className=this.className+"-bullets",this.bulletsContainer.setClassName())},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("Series"))},e.prototype.createDataItem=function(){return new Re},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart=t},enumerable:!0,configurable:!0}),e.prototype.positionBullet=function(t){},e.prototype.processBullet=function(t){var e=this,i=t.newValue;i.isTemplate=!0,this.events.once("datavalidated",function(t){e.itemsFocusable()&&(i.focusable=!0)}),this.invalidate()},e.prototype.removeBullet=function(t){var e=t.oldValue;this.dataItems.each(function(t){var i=t.bullets.getKey(e.uid);i&&i.dispose()}),this.invalidate()},e.prototype.validateDataItems=function(){t.prototype.validateDataItems.call(this),this.processValues(!1)},e.prototype.getFirstValue=function(t,e){for(var i=e;i>=0;i--){var a=this.dataItems.getIndex(i).getActualWorkingValue(t);if(aa(a))return a}return null},e.prototype.getAbsoluteFirstValue=function(t){for(var e=0;e<this.dataItems.length;e++){var i=this.dataItems.getIndex(e).values[t].value;if(aa(i))return i}return null},e.prototype.rangeChangeUpdate=function(){t.prototype.rangeChangeUpdate.call(this),this.processValues(!0)},e.prototype.processValues=function(t){var e=this;if(!this.simplifiedProcessing){var i=this.dataItems,a={},r={},s={},o={},n={},l={},p={},u={},$={},c={},h=wa(0,this.startIndex);h=Ea(h,this.dataItems.length);var m=Ea(this.endIndex,this.dataItems.length);if(aa(h)||(h=0),aa(m)||(m=this.dataItems.length),h>0){var f=i.getIndex(h-1);sa(f.values,function(t,e){var i=f.getActualWorkingValue(t);aa(i)&&(u[t]=i)})}for(var d=function(t){var m=i.getIndex(t);sa(m.values,function(t,i){var f=m.getActualWorkingValue(t);if(aa(f)){aa(a[t])||(a[t]=0),a[t]++,aa(r[t])||(r[t]=0),r[t]+=f,aa(s[t])||(s[t]=0),s[t]+=Math.abs(f),aa(l[t])||(l[t]=f),p[t]=f,aa(o[t])?o[t]>f&&(o[t]=f):o[t]=f,aa(n[t])?n[t]<f&&(n[t]=f):n[t]=f,aa($[t])||($[t]=e.getFirstValue(t,h)),aa(c[t])||(c[t]=e.getAbsoluteFirstValue(t)),m.setCalculatedValue(t,f-$[t],"change"),m.setCalculatedValue(t,(f-$[t])/$[t]*100,"changePercent"),m.setCalculatedValue(t,f-c[t],"startChange"),m.setCalculatedValue(t,(f-c[t])/c[t]*100,"startChangePercent");var d=u[t];aa(d)||(d=f),m.setCalculatedValue(t,f-d,"previousChange"),m.setCalculatedValue(t,(f-d)/d*100,"previousChangePercent"),u[t]=f}})},y=h;y<m;y++)d(y);if(this.calculatePercent){var g=function(t){var a=i.getIndex(t);sa(a.values,function(t){var i=s[t],r=a.getActualWorkingValue(t);if(aa(r))if(i>0){e.usePercentHack&&r==i&&(i=a.values[t].value);var o=r/i*100;a.setCalculatedValue(t,o,"percent")}else a.setCalculatedValue(t,0,"percent")})};for(y=h;y<m;y++)g(y)}if(h>0){var S=i.getIndex(h-1);sa(S.values,function(t){var e=S.values[t].value;S.setCalculatedValue(t,e-l[t],"change"),S.setCalculatedValue(t,(e-l[t])/l[t]*100,"changePercent")})}var b=this.dataItem;sa(b.values,function(t){b.setCalculatedValue(t,r[t],"sum"),b.setCalculatedValue(t,s[t],"absoluteSum"),b.setCalculatedValue(t,r[t]/a[t],"average"),b.setCalculatedValue(t,l[t],"open"),b.setCalculatedValue(t,p[t],"close"),b.setCalculatedValue(t,o[t],"low"),b.setCalculatedValue(t,n[t],"high"),b.setCalculatedValue(t,a[t],"count")})}},e.prototype.validate=function(){Id()&&this.filters.clear(),ga(this.axisRanges.iterator(),function(t){t.validate()}),t.prototype.validate.call(this);var e=this.bulletsContainer;if(e.fill=this.fill,e.stroke=this.stroke,e.x=this.pixelX,e.y=this.pixelY,this.bulletsContainer.children.length>0)if(this._showBullets){for(var i=0;i<this.startIndex;i++){(a=this.dataItems.getIndex(i))&&a.bullets.each(function(t,e){e.__disabled=!0})}for(i=this.dataItems.length-1;i>this.endIndex;i--){var a;(a=this.dataItems.getIndex(i))&&a.bullets.each(function(t,e){e.__disabled=!0})}}else this.bulletsContainer.children.each(function(t){t.__disabled=!0});this.updateTooltipBounds()},e.prototype.updateTooltipBounds=function(){if(this.topParent){var t={x:0,y:0,width:this.topParent.maxWidth,height:this.topParent.maxHeight};this.tooltip.setBounds(t)}},e.prototype.shouldCreateBullet=function(t,e){return!0},e.prototype.validateDataElement=function(e){var i=this;t.prototype.validateDataElement.call(this,e),this._showBullets?(this.isHidden||(this.bulletsContainer.visible=!0),this.bullets.each(function(t){var a=e.bullets.getKey(t.uid);if(i.shouldCreateBullet(e,t)){if(!a){var r=t.propertyFields.disabled,s=e.dataContext;r&&s&&!1===s[r]?(t.applyOnClones=!1,t.disabled=!1,a=t.clone(),t.disabled=!0,t.applyOnClones=!0):a=t.clone(),a.shouldClone=!1,e.addSprite(a),i.visible&&!i.isHiding||a.hide(0)}var o=a.dataItem;if(o!=e){o&&o.bullets.setKey(t.uid,void 0);var n=i.itemReaderText;a instanceof nc&&(n||(n="{"+a.xField+"}: {"+a.yField+"}"),a.isDynamic&&(e.events.on("workingvaluechanged",a.deepInvalidate,a,!1),i.dataItem.events.on("workingvaluechanged",a.deepInvalidate,a,!1)),a.deepInvalidate()),a.focusable&&(a.events.on("focus",function(t){a.readerTitle=i.populateString(n,a.dataItem)},void 0,!1),a.events.on("blur",function(t){a.readerTitle=""},void 0,!1)),a.hoverable&&(a.events.on("over",function(t){a.readerTitle=i.populateString(n,a.dataItem)},void 0,!1),a.events.on("out",function(t){a.readerTitle=""},void 0,!1))}a.parent=i.bulletsContainer,e.bullets.setKey(t.uid,a),a.maxWidth=e.itemWidth,a.maxHeight=e.itemHeight,a.__disabled=!1,i.positionBullet(a)}else a&&(a.__disabled=!0)})):this.bulletsContainer.visible=!1},e.prototype.handleDataItemWorkingValueChange=function(t,e){this.dataRangeInvalid||this.invalidateProcessedData()},Object.defineProperty(e.prototype,"ignoreMinMax",{get:function(){return this._ignoreMinMax},set:function(t){this._ignoreMinMax=t,this.invalidateDataItems()},enumerable:!0,configurable:!0}),e.prototype.createMask=function(){},e.prototype.processAxisRange=function(t){this.rangesContainer||(this.rangesContainer=this.createChild(oa),this.rangesContainer.shouldClone=!1,this.rangesContainer.isMeasured=!1);var e=t.newValue;e&&(e.contents.parent=this.rangesContainer,e.isRange=!0,e.events.on("valuechanged",this.invalidateDataItems,this,!1))},e.prototype.getAxisField=function(t){},e.prototype.showTooltipAtPosition=function(t,e){},Object.defineProperty(e.prototype,"minBulletDistance",{get:function(){return this.getPropertyValue("minBulletDistance")},set:function(t){this.setPropertyValue("minBulletDistance",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bullets",{get:function(){return this._bullets||(this._bullets=new _a(new nc()),this._bullets.template.virtualParent=this,this._bullets.events.on("inserted",this.processBullet,this,!1),this._bullets.events.on("removed",this.removeBullet,this,!1),this._disposers.push(new Sa(this._bullets)),this._disposers.push(this._bullets.template)),this._bullets},enumerable:!0,configurable:!0}),e.prototype.createLegendMarker=function(t){},Object.defineProperty(e.prototype,"hiddenInLegend",{get:function(){return this.getPropertyValue("hiddenInLegend")},set:function(t){this.setPropertyValue("hiddenInLegend",t)&&this.chart&&this.chart.feedLegend()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.getPropertyValue("name")},set:function(t){this.setPropertyValue("name",t);var e=this.legendDataItem;e&&(e.component.invalidate(),e.component.invalidateRawData()),this.readerTitle=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemReaderText",{get:function(){var t=this._itemReaderText;return t||(this.tooltipText?t=Cf(this.tooltipText):this.tooltipHTML&&(t=Cf(this.tooltipHTML))),this._adapterO?this._adapterO.apply("itemReaderText",t):t},set:function(t){this._itemReaderText=t,this._itemReaderTextChanged=!0},enumerable:!0,configurable:!0}),e.prototype.itemsFocusable=function(){return!(this.dataItems.length>=this.skipFocusThreshold)},Object.defineProperty(e.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(t){this._legendDataItem=t,this._legendDataItem.itemContainer.deepInvalidate()},enumerable:!0,configurable:!0}),e.prototype.updateLegendValue=function(t,e){if(this.legendDataItem){var i=this.legendSettings,a=this.legendDataItem,r=a.label,s=a.valueLabel;t&&!t.isDisposed()||e?(s&&(i.itemValueText&&(s.text=i.itemValueText),s.dataItem=t),r&&(i.itemLabelText&&(r.text=i.itemLabelText),r.dataItem=t)):(r&&((i.labelText||null!=i.itemLabelText)&&(r.text=i.labelText),r.dataItem=this.dataItem),s&&((i.valueText||null!=i.itemValueText)&&(s.text=i.valueText),s.dataItem=this.dataItem))}},e.prototype.copyFrom=function(e){this.bullets.copyFrom(e.bullets),this.bulletsContainer.copyFrom(e.bulletsContainer),this.calculatePercent=e.calculatePercent,this.usePercentHack=e.usePercentHack,this.simplifiedProcessing=e.simplifiedProcessing,t.prototype.copyFrom.call(this,e)},e.prototype.raiseCriticalError=function(t){this._chart&&this._chart.modal&&(this._chart.modal.content=this._chart.adapter.apply("criticalError",t).message,this._chart.modal.closable=!1,za.suppressErrors||this._chart.modal.open(),this._chart.disabled=!0),za.verbose&&console.log(t)},e.prototype.applyFilters=function(){var e=this;t.prototype.applyFilters.call(this),this.bulletsContainer.filters.clear(),ga(this.filters.iterator(),function(t){e.bulletsContainer.filters.push(t.clone())})},Object.defineProperty(e.prototype,"heatRules",{get:function(){var t=this;return this._heatRules||(this._heatRules=new Fa,this._heatRules.events.on("inserted",function(e){var i=e.newValue,a=i.target;if(a){var r=i.dataField;ba(r)||(r="value");var s=t.dataItem,o=i.property,n=Ra(i.minValue),l=Ra(i.maxValue);aa(n)||aa(l)||t.dataItem.events.on("calculatedvaluechanged",function(e){e.property==r&&ga(t.dataItems.iterator(),function(t){var e=!1;la(t.sprites,function(t){if(t.clonedFrom==a){var i=t;i[o]=i[o],e=!0}}),e||la(t.sprites,function(t){t instanceof oa&&ga(t.children.iterator(),function(t){if(t.className==a.className){var e=t;e[o]=e[o]}else t instanceof oa&&t.deepInvalidate()})})})}),t.dataItems.template.events.on("workingvaluechanged",function(t){if(t.property==r){var e=t.target,i=!1;la(e.sprites,function(t){if(t.clonedFrom==a){var e=t;e[o]=e[o],i=!0}}),i||la(e.sprites,function(t){t instanceof oa&&ga(t.children.iterator(),function(t){if(t.className==a.className){var e=t;e[o]=e[o]}else t instanceof oa&&t.deepInvalidate()})})}}),a.adapter.add(o,function(t,e,a){var o=Ra(i.minValue),n=Ra(i.maxValue),l=i.min,p=i.max;if(e instanceof xa){var u=e.propertyFields[a];if(u&&e.dataItem){var $=e.dataItem.dataContext;if($&&ba($[u]))return t}}var c=e.dataItem;if((aa(o)||(o=s.values[r].low),aa(n)||(n=s.values[r].high),c)&&c.values[r]){var h=c.getActualWorkingValue(r);if(ba(l)&&ba(p)&&aa(o)&&aa(n)&&aa(h)){var m=void 0;if(m=i.logarithmic?(Math.log(h)*Math.LOG10E-Math.log(o)*Math.LOG10E)/(Math.log(n)*Math.LOG10E-Math.log(o)*Math.LOG10E):(h-o)/(n-o),!aa(h)||aa(m)&&Math.abs(m)!=1/0||(m=.5),aa(l))return l+(p-l)*m;if(l instanceof Ga)return new Ga(me(l.rgb,p.rgb,m))}}return t})}})),this._heatRules},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){var i;if(e){if(ba(e.bullets)&&mb(e.bullets))for(var a=0,r=e.bullets.length;a<r;a++){var s=e.bullets[a];ba(s.type)||(s.type="Bullet")}ba(e.heatRules)&&mb(e.heatRules)&&(i=e.heatRules,delete e.heatRules)}if(t.prototype.processConfig.call(this,e),i){for(a=0,r=i.length;a<r;a++){var o=i[a],n=this;if(ba(o.target)&&Ca(o.target))if(this.map.hasKey(o.target))n=this.map.getKey(o.target);else for(var l=o.target.split("."),p=0;p<l.length;p++)if(n instanceof Fa){var u=n.getIndex(Ra(l[p]));n=u||n[l[p]]}else{var $=l[p].match(/^(.*)\[([0-9]+)\]/);n=$?n[$[1]]instanceof Fa?n[$[1]].getIndex(Ra($[2])):n[$[1]][Ra($[2])]:n[l[p]]}o.target=n,ba(o.min)&&(o.min=this.maybeColorOrPercent(o.min)),ba(o.max)&&(o.max=this.maybeColorOrPercent(o.max))}t.prototype.processConfig.call(this,{heatRules:i})}},e.prototype.configOrder=function(e,i){return e==i?0:"heatRules"==e?1:"heatRules"==i?-1:t.prototype.configOrder.call(this,e,i)},e.prototype.setVisibility=function(e){t.prototype.setVisibility.call(this,e),this.bulletsContainer.visible=e},e}(Sc);ca.registeredClasses.Series=Se,ca.registeredClasses.SeriesDataItem=Re;var vi=function(e){function r(){var r=e.call(this)||this;return r.className="SerialChartDataItem",r.applyTheme(),r}return da(r,e),r}(ti);var hg=function(e){function r(){var r=e.call(this)||this;r.className="SerialChart",r.colors=new Sd,r._usesData=!1;var t=r.chartContainer.createChild(oa);t.shouldClone=!1,t.width=ia(100),t.height=ia(100),t.isMeasured=!1,t.layout="none",t.zIndex=2,r.seriesContainer=t;var a=r.chartContainer.createChild(oa);return a.shouldClone=!1,a.width=ia(100),a.height=ia(100),a.isMeasured=!1,a.zIndex=3,a.layout="none",r.bulletsContainer=a,r.applyTheme(),r}return da(r,e),r.prototype.dispose=function(){e.prototype.dispose.call(this),this.colors&&this.colors.dispose(),this.patterns&&this.patterns.dispose()},r.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("Serial chart"))},Object.defineProperty(r.prototype,"series",{get:function(){return this._series||(this._series=new _a(this.createSeries()),this._series.events.on("inserted",this.handleSeriesAdded,this,!1),this._series.events.on("removed",this.handleSeriesRemoved,this,!1),this._disposers.push(new Sa(this._series,!1)),this._disposers.push(this._series.template)),this._series},enumerable:!0,configurable:!0}),r.prototype.handleSeriesRemoved=function(e){var r=e.oldValue;this.dataUsers.removeValue(r),this.dataUsers.each(function(e){e.invalidateDataItems()}),r.autoDispose?r.dispose():(r.parent=void 0,r.bulletsContainer.parent=void 0);var t=this.legend;if(t){for(var a=this.legend.dataItems,i=a.length-1;i>=0;i--){var s=a.getIndex(i);s&&s.dataContext==r&&t.dataItems.remove(s)}for(i=t.data.length-1;i>=0;i--){var o=t.data[i];o&&o==r&&ta(t.data,o)}}},r.prototype.handleSeriesAdded=function(e){var r=this,t=e.newValue;t.isDisposed()||(t.chart=this,t.parent=this.seriesContainer,t.bulletsContainer.parent=this.bulletsContainer,this._dataUsers.moveValue(t),t.addDisposer(new La(function(){r.dataUsers.removeValue(t)})),this.handleSeriesAdded2(t),this.handleLegendSeriesAdded(t))},r.prototype.handleLegendSeriesAdded=function(e){e.hiddenInLegend||this.legend&&this.legend.addData(e)},r.prototype.handleSeriesAdded2=function(e){var r=this;this.dataInvalid||this._disposers.push(ca.events.once("exitframe",function(){e.data&&0!=e.data.length||(e.data=r.data,e.showOnInit&&(e.reinit(),e.setPropertyValue("showOnInit",!1),e.showOnInit=!0),e.events.once("datavalidated",function(){e.data==r.data&&(e._data=[])}))}))},r.prototype.feedLegend=function(){var e=this.legend;if(e){var r=[];ga(this.series.iterator(),function(e){e.hiddenInLegend||r.push(e)}),e.dataFields.name="name",e.data=r}},r.prototype.createSeries=function(){return new Se},Object.defineProperty(r.prototype,"colors",{get:function(){return this.getPropertyValue("colors")},set:function(e){this.setPropertyValue("colors",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"patterns",{get:function(){return this.getPropertyValue("patterns")},set:function(e){this.setPropertyValue("patterns",e,!0)},enumerable:!0,configurable:!0}),r.prototype.copyFrom=function(r){e.prototype.copyFrom.call(this,r),this.series.copyFrom(r.series)},r.prototype.appear=function(){e.prototype.appear.call(this),this.series.each(function(e){e.showOnInit&&e.inited&&e.appear()})},r}(Xc);ca.registeredClasses.SerialChart=hg;var lm;var Te=function(e){function t(){var t=e.call(this)||this;t._axis=new nb,t.dataItems=new Fa,t.className="AxisBreak",t.breakSize=.01,t.marginLeft=-5,t.marginRight=-5,t.marginTop=-5,t.marginBottom=-5;var i=new Ia,r=new Wc;r.fill=i.getFor("background"),r.stroke=ua(),r.fillOpacity=.9,r.zIndex=0,t._fillShape=r;var o=new Wc;o.fill=ua(),o.stroke=i.getFor("grid"),o.strokeOpacity=.3,o.zIndex=1,t._startLine=o;var a=new Wc;return a.fill=ua(),a.stroke=ua("#000000"),a.strokeOpacity=.3,a.zIndex=2,t._endLine=a,t._disposers.push(t._axis),t.applyTheme(),t}return da(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._fillShape&&this._fillShape.dispose(),this._startLine&&this._startLine.dispose(),this._endLine&&this._endLine.dispose()},Object.defineProperty(t.prototype,"startLine",{get:function(){return this._startLine},set:function(e){this._startLine&&this._startLine.dispose(),this._startLine=e,this.addBreakSprite(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endLine",{get:function(){return this._endLine},set:function(e){this._endLine&&this._endLine.dispose(),this._endLine=e,this.addBreakSprite(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillShape",{get:function(){return this._fillShape},set:function(e){this._fillShape&&this._fillShape.dispose(),this._fillShape=e,this.addBreakSprite(e)},enumerable:!0,configurable:!0}),t.prototype.addBreakSprite=function(e){e.parent=this,e.isMeasured=!1,this._disposers.push(e)},Object.defineProperty(t.prototype,"axis",{get:function(){return this._axis.get()},set:function(e){if(this._axis.get()!==e){this._axis.set(e,e.renderer.gridContainer.events.on("transformed",this.invalidate,this,!1)),e.renderer.createBreakSprites(this);var t=e.axisBreaks.template;this.startLine.copyFrom(t.startLine),this.endLine.copyFrom(t.endLine),this.fillShape.copyFrom(t.fillShape)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"breakSize",{get:function(){return this.getPropertyValue("breakSize")},set:function(e){this.setPropertyValue("breakSize",e)&&this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startPoint",{get:function(){var e=this.axis.renderer;if(e)return e.positionToPoint(this.startPosition)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endPoint",{get:function(){var e=this.axis.renderer;if(e)return e.positionToPoint(this.endPosition)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startPosition",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endPosition",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.draw=function(){(e.prototype.draw.call(this),this.axis)&&this.axis.renderer.updateBreakElement(this)},Object.defineProperty(t.prototype,"startValue",{get:function(){return this.getPropertyValue("startValue")},set:function(e){this.setPropertyValue("startValue",e)&&this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endValue",{get:function(){return this.getPropertyValue("endValue")},set:function(e){this.setPropertyValue("endValue",e)&&this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),t}(oa);ca.registeredClasses.AxisBreak=Te;var mm,Ud=function(t){function e(){var e=t.call(this)||this;return e.className="AxisDataItem",e.applyTheme(),e}return da(e,t),Object.defineProperty(e.prototype,"grid",{get:function(){if(!this._grid){var t=this.component;if(t){var e,i=void 0;if(this.isRange){if((i=t.axisRanges.template.grid).disabled)return;e=i.clone()}else{if((i=t.renderer.grid.template).disabled)return;e=t.renderer.grid.create(),this._disposers.push(new La(function(){t.renderer.grid.removeValue(e)}))}this.grid=e,e.shouldClone=!1,this._disposers.push(e),e.axis=this.component}}return this._grid},set:function(t){this._grid&&this._grid!=t&&(ta(this.sprites,this._grid),this._grid.dataItem=void 0),t&&(t.dataItem&&t.dataItem!=this&&(ta(t.dataItem.sprites,t),t.dataItem.grid=void 0),this.addSprite(t)),this._grid=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tick",{get:function(){if(!this._tick){var t=this.component;if(t){var e,i=void 0;if(this.isRange){if((i=t.axisRanges.template.tick).disabled)return;e=i.clone()}else{if((i=t.renderer.ticks.template).disabled)return;e=t.renderer.ticks.create(),this._disposers.push(new La(function(){t.renderer.ticks.removeValue(e)}))}this.tick=e,e.axis=this.component,e.shouldClone=!1,this._disposers.push(e)}}return this._tick},set:function(t){this._tick&&this._tick!=t&&(ta(this.sprites,this._tick),this._tick.dataItem=void 0),t&&(t.dataItem&&t.dataItem!=this&&(ta(t.dataItem.sprites,t),t.dataItem.tick=void 0),this.addSprite(t)),this._tick=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){if(!this._label){var t=this.component;if(t){var e,i=void 0;if(this.isRange){if((i=t.axisRanges.template.label).disabled)return;e=i.clone()}else{if((i=t.renderer.labels.template).disabled)return;e=t.renderer.labels.create(),this._disposers.push(new La(function(){t.renderer.labels.removeValue(e)}))}this._disposers.push(e),this.label=e,e.shouldClone=!1,e.axis=this.component,e.virtualParent=t}}return this._label},set:function(t){this._label&&this._label!=t&&(ta(this.sprites,this._label),this._label.dataItem=void 0),t&&(t.dataItem&&t.dataItem!=this&&(ta(t.dataItem.sprites,t),t.dataItem.label=void 0),this.addSprite(t)),this._label=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisFill",{get:function(){if(!this._axisFill){var t=this.component;if(t){var e,i=void 0;if(this.isRange){if(i=t.axisRanges.template.axisFill,!this.isTemplate&&i.disabled)return;e=i.clone()}else{if((i=t.renderer.axisFills.template).disabled)return;e=t.renderer.axisFills.create(),this._disposers.push(new La(function(){t.renderer.axisFills.removeValue(e)}))}this.axisFill=e,e.shouldClone=!1,this._disposers.push(e)}}return this._axisFill},set:function(t){this._axisFill&&this._axisFill!=t&&(ta(this.sprites,this._axisFill),this._axisFill.dataItem=void 0),t&&(t.dataItem&&t.dataItem!=this&&(ta(t.dataItem.sprites,t),t.dataItem.axisFill=void 0),t.axis=this.component,this.addSprite(t)),this._axisFill=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t,this._label&&(this._label.text=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contents",{get:function(){if(!this._contents){var t=new oa;this.addSprite(t),t.isMeasured=!1,this._contents=t;var e=this.component;if(e){var i=e.renderer.createFill(this.component);i.disabled=!1,i.axis=e,this.addSprite(i),this._mask=i,t.mask=i}}return this._contents},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisBreak",{get:function(){return this._axisBreak},set:function(t){this._axisBreak&&this._axisBreak.dataItems.removeValue(this),t&&t.dataItems.push(this),this._axisBreak=t},enumerable:!0,configurable:!0}),e.prototype.validate=function(){this.component&&this.component.validateDataElement(this)},e.prototype.appendChildren=function(){this.component&&this.component.appendDataItem(this)},e.prototype.hasProperty=function(e){return"component"==e||t.prototype.hasProperty.call(this,e)},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.text=e.text,e.bullet&&(this.bullet=e.bullet.clone()),this.minPosition=e.minPosition,this.maxPosition=e.maxPosition},e.prototype.setVisibility=function(e,i){t.prototype.setVisibility.call(this,e,i),this._contents&&(this._contents.visible=e)},Object.defineProperty(e.prototype,"bullet",{get:function(){return this._bullet},set:function(t){this._bullet&&this._bullet!=t&&(ta(this.sprites,this._bullet),this._bullet.dataItem=void 0),this._bullet=t,t&&this.addSprite(t)},enumerable:!0,configurable:!0}),e}(Rc);(function(t){t[t.Start=0]="Start",t[t.Middle=.5]="Middle",t[t.End=1]="End"})(mm||(lm=mm={},lm));var Ue=function(t){function e(){var i=t.call(this)||this;if(i._gridCount=10,i._series=new Fa,i.autoDispose=!0,i._axisItemCount=0,i.constructor===e)throw new Error("'Axis' cannot be instantiated directly. Please use a specific axis type.");i.hideTooltipWhileZooming=!0,i.minWidth=1e-4,i.minHeight=1e-4,i.className="Axis",i.shouldClone=!1,i.setPropertyValue("cursorTooltipEnabled",!0),i.toggleZoomOutButton=!0,i.zoomable=!0;var r=new Ia;i.title=new Gb,i.title.shouldClone=!1,i._disposers.push(i.title),i.setPropertyValue("startLocation",0),i.setPropertyValue("endLocation",1),i._dataItemsIterator=new sf(i.dataItems,function(){return i.dataItems.create()}),i._dataItemsIterator.createNewItems=!0;var o=new Me;i._disposers.push(o),o.label.padding(5,10,5,10),o.background.pointerLength=5,o.fitPointerToBounds=!0,o.background.filters.clear(),o.virtualParent=i;var s=o.background;return s.cornerRadius=0,s.fill=r.getFor("alternativeBackground"),s.stroke=s.fill,s.strokeWidth=1,s.fillOpacity=1,o.label.fill=r.getFor("alternativeText"),i.tooltip=o,i.readerHidden=!0,i.events.on("rangechangestarted",function(){i.series.each(function(t){t.hideTooltipWhileZooming&&(t.tooltip.hide(),t.tooltip.preventShow=!0)}),i.hideTooltipWhileZooming&&(i.tooltip.hide(),i.tooltip.preventShow=!0)},void 0,!1),i.events.on("rangechangeended",function(){i.series.each(function(t){t.hideTooltipWhileZooming&&(t.tooltip.hide(),t.tooltip.preventShow=!1)}),i.hideTooltipWhileZooming&&(i.tooltip.hide(),i.tooltip.preventShow=!1)},void 0,!1),i.applyTheme(),i}return da(e,t),e.prototype.fillRule=function(t,e){aa(e)||(e=t.index),e/2==Math.round(e/2)?(t.axisFill.__disabled=!0,t.axisFill.opacity=0):(t.axisFill.opacity=1,t.axisFill.__disabled=!1)},e.prototype.createDataItem=function(){return new Ud},e.prototype.invalidateLayout=function(){t.prototype.invalidateLayout.call(this),ga(this.series.iterator(),function(t){t.invalidateLayout()})},e.prototype.invalidateSeries=function(){ga(this.series.iterator(),function(t){t.invalidate()})},e.prototype.validateDataElements=function(){this._axisItemCount=0,this.ghostLabel&&(this.renderer.updateLabelElement(this.ghostLabel,this.start,this.end),this.ghostLabel.validate())},e.prototype.updateGridCount=function(){if(this.renderer){var t=this.axisLength/this.renderer.minGridDistance;t!=this._gridCount&&(this._gridCount=t,this.clearCache())}},e.prototype.validateLayout=function(){this.axisFullLength=this.axisLength/(this.end-this.start),t.prototype.validateLayout.call(this),this.updateGridCount();var e=this.renderer;e&&(e.updateAxisLine(),e.updateTooltip(),e.updateBaseGridElement()),this._prevLength!=this.axisLength&&(this.dispatchImmediately("lengthchanged"),this._prevLength=this.axisLength)},e.prototype.initRenderer=function(){},e.prototype.appendDataItem=function(t){var e=this.renderer,i=t.tick;i&&(i.above?i.parent=e.bulletsContainer:i.parent=e.gridContainer),t.label&&(t.label.parent=e);var r=t.axisFill;r&&(r.above?r.parent=e.bulletsContainer:r.parent=e.gridContainer);var o=t.grid;o&&(o.above?o.parent=e.bulletsContainer:o.parent=e.gridContainer),t.bullet&&(t.bullet.parent=e.bulletsContainer)},e.prototype.validate=function(){t.prototype.validate.call(this),this.validateLayout(),this.renderer.updateGridContainer()},e.prototype.validateAxisRanges=function(){var t=this;ga(this.axisRanges.iterator(),function(e){t.appendDataItem(e),t.validateDataElement(e),e.grid&&e.grid.validate(),e.tick&&e.tick.validate(),e.axisFill&&e.axisFill.validate(),e.label&&e.label.validate()})},e.prototype.validateBreaks=function(){this._axisBreaks&&ga(this._axisBreaks.iterator(),function(t){t.invalidate()})},e.prototype.processBreak=function(t){var e=t.newValue;e.parent=this.renderer.breakContainer,e.axis=this},e.prototype.registerSeries=function(t){var e=this;return this.series.moveValue(t),new Ya([new La(function(){e.series.removeValue(t)}),this.events.on("lengthchanged",t.invalidate,t,!1),this.events.on("lengthchanged",t.createMask,t,!1),this.events.on("startchanged",t.invalidate,t,!1),this.events.on("endchanged",t.invalidate,t,!1)])},Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},set:function(t){if(t!=this._renderer){this._renderer=t,t.chart=this.chart,t.axis=this,t.parent=this,this.title.parent=this,this.initRenderer(),this._disposers.push(t.gridContainer.events.on("maxsizechanged",this.invalidate,this,!1));var e=this.renderer.labels.create();this._disposers.push(e),e.dataItem=this.dataItems.template.clone(),e.text="L",e.parent=this.renderer,e.shouldClone=!1,e.fillOpacity=0,e.opacity=0,e.strokeOpacity=0,e.interactionsEnabled=!1,e.validate(),this.ghostLabel=e,this.events.on("beforedatavalidated",function(){e.text="L"},void 0,!1)}},enumerable:!0,configurable:!0}),e.prototype.positionToAngle=function(t){return this.renderer.positionToAngle(t)},e.prototype.pointToPosition=function(t){return this.renderer.pointToPosition(t)},e.prototype.positionToCoordinate=function(t){return this.renderer.positionToCoordinate(t)},e.prototype.getAnyRangePath=function(t,e){return this.renderer.getPositionRangePath(t,e)},e.prototype.anyToPosition=function(t){return 0},e.prototype.anyToPoint=function(t){return{x:0,y:0,angle:0}},e.prototype.getPositionRangePath=function(t,e){return this.renderer?this.renderer.getPositionRangePath(t,e):""},Object.defineProperty(e.prototype,"axisLength",{get:function(){return this.renderer?this.renderer.axisLength:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorTooltipEnabled",{get:function(){return this.getPropertyValue("cursorTooltipEnabled")},set:function(t){this.setPropertyValue("cursorTooltipEnabled",t)&&(t&&this.renderer?this.renderer.updateTooltip():this.tooltip&&this.tooltip.hide(0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toggleZoomOutButton",{get:function(){return this.getPropertyValue("toggleZoomOutButton")},set:function(t){this.setPropertyValue("toggleZoomOutButton",t)},enumerable:!0,configurable:!0}),e.prototype.hideTooltip=function(e){t.prototype.hideTooltip.call(this,e),this._tooltipPosition=void 0},e.prototype.showTooltipAtPosition=function(t,e){var i=this._tooltip;if(!i||this.dataItems.length<=0)this._tooltipPosition=void 0;else{if(e||(t=this.toAxisPosition(t)),!aa(t)||t<this.start||t>this.end)return i.hide(0),void(this._tooltipPosition=void 0);var r=this.renderer;i.parent||(i.parent=this.tooltipContainer);var o=r.tooltipLocation,s=this.getCellStartPosition(t),n=this.getCellEndPosition(t);if("fixed"==this.tooltipPosition&&(t=s+(n-s)*o),t=na(t,this.start,this.end),this._tooltipPosition!=t){this._tooltipPosition=t;var a=r.tooltipLocation2,p=r.positionToPoint(s,a),l=r.positionToPoint(n,a);this.currentItemStartPoint=p,this.currentItemEndPoint=l,r.fullWidthTooltip&&(i.width=l.x-p.x,i.height=l.y-p.y);var u=r.positionToPoint(t,a),d=Yb(u,this.renderer.line);i.text=this.getTooltipText(t),i.text&&(i.delayedPointTo(d),i.show())}this.cursorTooltipEnabled&&!this.tooltip.disabled||i.hide(0)}},e.prototype.toAxisPosition=function(t){if(null!=(t=this.renderer.toAxisPosition(t)))return t*=this.end-this.start,t=this.renderer.inversed?this.end-t:this.start+t},e.prototype.toGlobalPosition=function(t){return this.renderer.inversed?t=this.end-t:t-=this.start,t/(this.end-this.start)},e.prototype.getTooltipText=function(t){},e.prototype.updateTooltip=function(t,e){var i=this._tooltip;i&&(i.fixDoc=!1,i.pointerOrientation=t,i.setBounds(Hf(e,this.renderer.line)))},e.prototype.roundPosition=function(t,e,i){return t},e.prototype.getCellStartPosition=function(t){return t},e.prototype.getCellEndPosition=function(t){return t},Object.defineProperty(e.prototype,"axisRanges",{get:function(){if(!this._axisRanges){var t=this.createDataItem();t.isRange=!0,t.axisFill=this.renderer.axisFills.template.clone(),t.grid=this.renderer.grid.template.clone(),t.tick=this.renderer.ticks.template.clone(),t.label=this.renderer.labels.template.clone(),t.isTemplate=!0,t.component=this,t.axisFill.disabled=!1,t.tick.disabled=!1,t.grid.disabled=!1,t.label.disabled=!1,this._axisRanges=new _a(t),this._axisRanges.events.on("inserted",this.processAxisRange,this,!1),this._disposers.push(new Sa(this._axisRanges)),this._disposers.push(this._axisRanges.template)}return this._axisRanges},enumerable:!0,configurable:!0}),e.prototype.processAxisRange=function(t){var e=t.newValue;e.component=this,e.isRange=!0},Object.defineProperty(e.prototype,"axisBreaks",{get:function(){return this._axisBreaks||(this._axisBreaks=new eh(this.createAxisBreak(),function(t,e){return ic(t.adjustedStartValue,e.adjustedStartValue)}),this._axisBreaks.events.on("inserted",this.processBreak,this,!1),this._disposers.push(new Sa(this._axisBreaks)),this._disposers.push(this._axisBreaks.template)),this._axisBreaks},enumerable:!0,configurable:!0}),e.prototype.createAxisBreak=function(){return new Te},Object.defineProperty(e.prototype,"series",{get:function(){return this._series||(this._series=new Fa),this._series},enumerable:!0,configurable:!0}),e.prototype.processSeriesDataItems=function(){},e.prototype.processSeriesDataItem=function(t,e){},e.prototype.postProcessSeriesDataItems=function(t){},e.prototype.postProcessSeriesDataItem=function(t){},e.prototype.updateAxisBySeries=function(){},e.prototype.hideUnusedDataItems=function(){var t=this,e=this._dataItemsIterator;e.createNewItems=!1,ga(e.iterator(),function(e){t.validateDataElement(e),e.__disabled=!0}),e.clear(),e.createNewItems=!0},e.prototype.getSeriesDataItem=function(t,e,i){},e.prototype.getAngle=function(t,e,i,r,o){},e.prototype.getX=function(t,e,i,r,o){},e.prototype.getPositionX=function(t,e,i,r,o){},e.prototype.getY=function(t,e,i,r,o){},e.prototype.getPositionY=function(t,e,i,r,o){},Object.defineProperty(e.prototype,"basePoint",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),e.prototype.dataChangeUpdate=function(){},e.prototype.seriesDataChangeUpdate=function(t){},e.prototype.adjustDifference=function(t,e){var i=e-t;if(aa(i))return this._axisBreaks&&Pb(this._axisBreaks.iterator(),function(r){var o=r.adjustedStartValue,s=r.adjustedEndValue;if(aa(o)&&aa(s)){if(o>e)return!1;if(s>=t&&aa(o)&&aa(s)){var n=r.breakSize,a=uj({start:o,end:s},{start:t,end:e});a&&(i-=(a.end-a.start)*(1-n))}return!0}}),i},e.prototype.isInBreak=function(t){if(this._axisBreaks)return Lj(this._axisBreaks.iterator(),function(e){return t>=e.adjustedStartValue&&t<=e.adjustedEndValue})},e.prototype.fixAxisBreaks=function(){var t=this;if(this._axisBreaks){var e=this._axisBreaks;if(e.length>0){la(Cd(e.iterator()),function(e){var i=Ea(e.startValue,e.endValue),r=wa(e.startValue,e.endValue);e.adjustedStartValue=i,e.adjustedEndValue=r,t._axisBreaks.update(e)});var i=e.first,r=Math.min(i.startValue,i.endValue);ga(e.iterator(),function(t){var e=t.adjustedStartValue,i=t.adjustedEndValue;e<r&&(e=r,i<r&&(i=r)),t.adjustedStartValue=e,t.adjustedEndValue=i})}}},Object.defineProperty(e.prototype,"startIndex",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endIndex",{get:function(){return this.dataItems.length},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.getPositionLabel=function(t){return Math.round(100*t)+"%x"},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart=t},enumerable:!0,configurable:!0}),e.prototype.createSeriesRange=function(t){var e=this.axisRanges.create();return e.component=this,e.axisFill=this.renderer.axisFills.template.clone(),e.axisFill.disabled=!1,e.axisFill.fillOpacity=0,e.grid=this.renderer.grid.template.clone(),e.grid.disabled=!0,e.tick=this.renderer.ticks.template.clone(),e.tick.disabled=!0,e.label=this.renderer.labels.template.clone(),e.label.disabled=!0,e.addDisposer(new La(function(){t.axisRanges.removeValue(e)})),t.axisRanges.push(e),e},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.renderer?this.renderer.copyFrom(e.renderer):e.renderer&&(this.renderer=e.renderer.clone(),this._disposers.push(this.renderer)),e.title&&(this.title?this.title.copyFrom(e.title):(this.title=e.title.clone(),this.title.parent=this),this._disposers.push(this.title))},e.prototype.resetIterators=function(){this._dataItemsIterator.reset()},e.prototype.processConfig=function(e){if(e&&ba(e.axisRanges)&&mb(e.axisRanges))for(var i=0,r=e.axisRanges.length;i<r;i++){var o=e.axisRanges[i];ba(o.series)&&Ca(o.series)&&this.map.hasKey(o.series)&&(e.axisRanges[i]=this.createSeriesRange(this.map.getKey(o.series)),delete o.series,e.axisRanges[i].config=o)}t.prototype.processConfig.call(this,e)},e.prototype.configOrder=function(e,i){return e==i?0:"title"==e?1:"title"==i?-1:"component"==e?-1:"component"==i?1:t.prototype.configOrder.call(this,e,i)},Object.defineProperty(e.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(t){this.setPropertyValue("startLocation",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(t){this.setPropertyValue("endLocation",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setDisabled=function(e){var i=t.prototype.setDisabled.call(this,e);return this.renderer&&(this.renderer.gridContainer.disabled=e),i},Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(t){this._title&&this._title!=t&&this._title.dispose(),t&&(this._title=t,t.parent=this,t.shouldClone=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideTooltipWhileZooming",{get:function(){return this.getPropertyValue("hideTooltipWhileZooming")},set:function(t){this.setPropertyValue("hideTooltipWhileZooming",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomable",{get:function(){return this.getPropertyValue("zoomable")},set:function(t){this.setPropertyValue("zoomable",t)},enumerable:!0,configurable:!0}),e}(Sc);ca.registeredClasses.Axis=Ue,ca.registeredClasses.AxisDataItem=Ud,ub.push({relevant:Ab.maybeXS,state:function(t,e){if(t instanceof Ue&&t.tooltip){var i=t.states.create(e);return i.properties.cursorTooltipEnabled=!1,i}return null}});var wi=function(e){function r(){var r=e.call(this)||this;r.className="AxisLine",r.element=r.paper.add("path");var i=new Ia;return r.stroke=i.getFor("grid"),r.strokeOpacity=.15,r.pixelPerfect=!0,r.fill=ua(),r.applyTheme(),r.interactionsEnabled=!1,r}return da(r,e),r}(xa);ca.registeredClasses.AxisLine=wi;var ig=function(e){function t(t){var i=e.call(this)||this;i.axis=t,i.element=i.paper.add("path"),i.className="AxisFill",i.isMeasured=!1,i.location=0,i.above=!1;var r=new Ia;return i.fill=r.getFor("alternativeBackground"),i.fillOpacity=0,i.applyTheme(),i}return da(t,e),t.prototype.setDisabled=function(t){var i=e.prototype.setDisabled.call(this,t);return this.axis&&this.axis.invalidateDataItems(),i},t.prototype.draw=function(){e.prototype.draw.call(this),this.__disabled||this.disabled||this.axis&&aa(this.startPosition)&&aa(this.endPosition)&&(this.fillPath=this.axis.getPositionRangePath(this.startPosition,this.endPosition),this.path=this.fillPath,this.isMeasured&&this.measure())},Object.defineProperty(t.prototype,"startPosition",{get:function(){return this.getPropertyValue("startPosition")},set:function(e){this.setPropertyValue("startPosition",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endPosition",{get:function(){return this.getPropertyValue("endPosition")},set:function(e){this.setPropertyValue("endPosition",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(e){this.setPropertyValue("location",e,!0)},enumerable:!0,configurable:!0}),t.prototype.setPath=function(e){return!!this.setPropertyValue("path",e)&&(this.element.attr({d:e}),!0)},Object.defineProperty(t.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(e){this.setPropertyValue("above",e,!0)},enumerable:!0,configurable:!0}),t}(xa);ca.registeredClasses.AxisFill=ig;var Vd=function(e){function r(){var r=e.call(this)||this;r.className="Grid",r.element=r.paper.add("path"),r.location=.5,r.isMeasured=!1,r.above=!1;var t=new Ia;return r.stroke=t.getFor("grid"),r.pixelPerfect=!0,r.strokeOpacity=.15,r.fill=ua(),r.applyTheme(),r}return da(r,e),Object.defineProperty(r.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(e){this.setPropertyValue("location",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(e){this.setPropertyValue("above",e,!0)},enumerable:!0,configurable:!0}),r.prototype.setDisabled=function(r){var t=e.prototype.setDisabled.call(this,r);return this.axis&&this.axis.invalidateDataItems(),t},r}(xa);ca.registeredClasses.Grid=Vd,ub.push({relevant:Ab.maybeXS,state:function(e,r){if(e instanceof Vd){var t=e.states.create(r);return t.properties.disabled=!0,t}return null}});var jg=function(e){function t(){var t=e.call(this)||this;return t.className="AxisLabel",t.isMeasured=!1,t.padding(10,10,10,10),t.location=.5,t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(e){this.setPropertyValue("location",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(e){this.setPropertyValue("inside",e,!0)},enumerable:!0,configurable:!0}),t.prototype.setDisabled=function(t){var r=e.prototype.setDisabled.call(this,t);return this.axis&&this.axis.invalidateDataItems(),r},t}(Gb);ca.registeredClasses.AxisLabel=jg;var Wd=function(r){function e(){var e=r.call(this)||this;e.className="Tick";var t=new Ia;return e.fillOpacity=0,e.length=6,e.strokeOpacity=.2,e.stroke=t.getFor("grid"),e.isMeasured=!1,e.nonScalingStroke=!0,e.applyTheme(),e}return da(e,r),Object.defineProperty(e.prototype,"length",{get:function(){return this.disabled?0:this.getPropertyValue("length")},set:function(r){this.setPropertyValue("length",r,!0)},enumerable:!0,configurable:!0}),e}(xa);ca.registeredClasses.Tick=Wd;var xi=function(e){function t(){var t=e.call(this)||this;return t.className="AxisTick",t.element=t.paper.add("path"),t.location=.5,t.above=!1,t.isMeasured=!1,t.pixelPerfect=!0,t.strokeOpacity=0,t.length=5,t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(e){this.setPropertyValue("location",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(e){this.setPropertyValue("inside",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(e){this.setPropertyValue("above",e,!0)},enumerable:!0,configurable:!0}),t.prototype.setDisabled=function(t){var r=e.prototype.setDisabled.call(this,t);return this.axis&&this.axis.invalidateDataItems(),r},t}(Wd);ca.registeredClasses.AxisTick=xi;var Ve=function(e){function t(){var t=e.call(this)||this;t._chart=new nb,t.className="AxisRenderer",t.minGridDistance=50,t.inside=!1,t.inversed=!1,t.tooltipLocation=.5,t.fullWidthTooltip=!1,t.cellStartLocation=0,t.cellEndLocation=1,t.minLabelPosition=0,t.maxLabelPosition=1,t.shouldClone=!1;var i=t.createChild(oa);i.shouldClone=!1,i.layout="none",i.virtualParent=t,i.width=ia(100),i.height=ia(100),t.gridContainer=i,i.events.on("maxsizechanged",function(){t.inited&&t.invalidateAxisItems()},t,!1);var r=t.createChild(oa);r.shouldClone=!1,r.isMeasured=!1,r.layout="none",r.width=ia(100),r.height=ia(100),t.breakContainer=r;var o=t.createChild(oa);o.shouldClone=!1,o.isMeasured=!1,o.layout="none",o.width=ia(100),o.height=ia(100),t.bulletsContainer=o,t.line=t.createChild(wi),t.line.shouldClone=!1,t.line.strokeOpacity=0;var n=t.createChild(Vd);n.shouldClone=!1,t.baseGrid=n;var s=t._disposers;return s.push(n),s.push(t.line),s.push(i),s.push(r),s.push(o),s.push(t._chart),t.ticks.template.disabled=!0,t.axisFills.template.disabled=!0,t.axisFills.template.interactionsEnabled=!1,t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"axis",{get:function(){return this._axis},set:function(e){this.setAxis(e)},enumerable:!0,configurable:!0}),t.prototype.setAxis=function(e){this._axis=e,this.baseGrid.parent=e,this.line.parent=e,this.gridContainer.bind("opacity",e)},t.prototype.processRenderer=function(){this.events.on("sizechanged",this.updateTooltip,this,!1),this.events.on("positionchanged",this.updateTooltip,this,!1),this.labels.template.inside=this.inside,this.ticks.template.inside=this.inside},t.prototype.updateTooltip=function(){},Object.defineProperty(t.prototype,"axisLength",{get:function(){return 0},enumerable:!0,configurable:!0}),t.prototype.positionItem=function(e,t){e&&e.moveTo(t)},t.prototype.positionToPoint=function(e,t){return{x:0,y:0}},t.prototype.positionToAngle=function(e){return 0},t.prototype.positionToCoordinate=function(e){var t=this.axis,i=t.axisFullLength;return t.renderer.inversed?(t.end-e)*i:(e-t.start)*i},t.prototype.updateGridContainer=function(){},t.prototype.getHeight=function(){var e=this.gridContainer;return e.parent?e.parent.pixelHeight:this.gridContainer.pixelHeight||0},t.prototype.getWidth=function(){var e=this.gridContainer;return e.parent?e.parent.pixelWidth:this.gridContainer.pixelWidth||0},t.prototype.coordinateToPosition=function(e,t){var i,r=this.axis,o=r.axisFullLength;return i=r.renderer.inversed?r.end-e/o:e/o+r.start,ha(i,5)},t.prototype.pointToPosition=function(e){return 0},t.prototype.getPositionRangePath=function(e,t){return""},t.prototype.invalidateAxisItems=function(){var e=this.axis;e&&e.invalidateDataItems()},t.prototype.updateGridElement=function(e,t,i){},t.prototype.updateTickElement=function(e,t,i){},t.prototype.updateBullet=function(e,t,i){},t.prototype.updateLabelElement=function(e,t,i,r){},t.prototype.updateFillElement=function(e,t,i){e.startPosition=t,e.endPosition=i},t.prototype.updateAxisLine=function(){},t.prototype.updateBaseGridElement=function(){},t.prototype.updateBreakElement=function(e){this.positionItem(e.startLine,e.startPoint),this.toggleVisibility(e.startLine,e.startPosition,0,1),this.positionItem(e.endLine,e.endPoint),this.toggleVisibility(e.endLine,e.endPosition,0,1)},Object.defineProperty(t.prototype,"minGridDistance",{get:function(){return this.getPropertyValue("minGridDistance")},set:function(e){this.setPropertyValue("minGridDistance",e)&&this.axis&&this.axis.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart.get()},set:function(e){this._chart.set(e,null)},enumerable:!0,configurable:!0}),t.prototype.toggleVisibility=function(e,t,i,r){var o=this.axis,n=e.dataItem;n&&n instanceof Ud&&(aa(n.minPosition)&&(i=n.minPosition),aa(n.maxPosition)&&(r=n.maxPosition));var s=o.start+(o.end-o.start)*(i-1e-4),a=o.start+(o.end-o.start)*(r+1e-4);e.disabled||(e.__disabled=t<s||t>a)},t.prototype.createBreakSprites=function(e){},Object.defineProperty(t.prototype,"axisFills",{get:function(){if(!this._axisFills){var e=this.createFill(this.axis);this._axisFills=new _a(e),e.applyOnClones=!0,e.events.on("enabled",this.invalidateAxisItems,this,!1),this._disposers.push(new Sa(this._axisFills)),this._disposers.push(this._axisFills.template)}return this._axisFills},enumerable:!0,configurable:!0}),t.prototype.createFill=function(e){return new ig(e)},Object.defineProperty(t.prototype,"grid",{get:function(){if(!this._grid){var e=this.createGrid();this._grid=new _a(e),e.applyOnClones=!0,e.events.on("enabled",this.invalidateAxisItems,this,!1),this._disposers.push(new Sa(this._grid)),this._disposers.push(this._grid.template)}return this._grid},enumerable:!0,configurable:!0}),t.prototype.createGrid=function(){return new Vd},Object.defineProperty(t.prototype,"ticks",{get:function(){if(!this._ticks){var e=this.createTick();e.applyOnClones=!0,e.isMeasured=!1,e.events.on("enabled",this.invalidateAxisItems,this,!1),this._ticks=new _a(e),this._disposers.push(new Sa(this._ticks)),this._disposers.push(this._ticks.template)}return this._ticks},enumerable:!0,configurable:!0}),t.prototype.createTick=function(){return new xi},Object.defineProperty(t.prototype,"labels",{get:function(){if(!this._labels){var e=this.createLabel();this._labels=new _a(e),e.applyOnClones=!0,e.events.on("enabled",this.invalidateAxisItems,this,!1),this._disposers.push(new Sa(this._labels)),this._disposers.push(this._labels.template)}return this._labels},enumerable:!0,configurable:!0}),t.prototype.createLabel=function(){return new jg},Object.defineProperty(t.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(e){this.setPropertyValue("inside",e)&&this.axis&&this.axis.invalidate(),e?(this.width=0,this.height=0):(this.width=void 0,this.height=void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opposite",{get:function(){return this.getPropertyValue("opposite")},set:function(e){this.setPropertyValue("opposite",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullWidthTooltip",{get:function(){return this.getPropertyValue("fullWidthTooltip")},set:function(e){this.setPropertyValue("fullWidthTooltip",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipLocation",{get:function(){return this.getPropertyValue("tooltipLocation")},set:function(e){this.setPropertyValue("tooltipLocation",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipLocation2",{get:function(){return this.getPropertyValue("tooltipLocation2")},set:function(e){this.setPropertyValue("tooltipLocation2",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellStartLocation",{get:function(){return this.getPropertyValue("cellStartLocation")},set:function(e){this.setPropertyValue("cellStartLocation",e)&&this.axis&&this.axis.invalidateSeries()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellEndLocation",{get:function(){return this.getPropertyValue("cellEndLocation")},set:function(e){this.setPropertyValue("cellEndLocation",e)&&this.axis&&this.axis.invalidateSeries()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inversed",{get:function(){return this.getPropertyValue("inversed")},set:function(e){this.setPropertyValue("inversed",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minLabelPosition",{get:function(){return this.getPropertyValue("minLabelPosition")},set:function(e){this.setPropertyValue("minLabelPosition",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxLabelPosition",{get:function(){return this.getPropertyValue("maxLabelPosition")},set:function(e){this.setPropertyValue("maxLabelPosition",e,!0)},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.grid.template.copyFrom(t.grid.template),this.ticks.template.copyFrom(t.ticks.template),this.labels.template.copyFrom(t.labels.template),this.axisFills.template.copyFrom(t.axisFills.template),this.line.copyFrom(t.line),this.baseGrid.copyFrom(t.baseGrid)},t.prototype.toAxisPosition=function(e){return e},t.prototype.setVisibility=function(t){e.prototype.setVisibility.call(this,t),this.bulletsContainer.visible=t},t}(oa);ca.registeredClasses.AxisRenderer=Ve;var Xd=function(e){function r(){var r=e.call(this)||this;return r.className="AxisBullet",r.location=.5,r.isMeasured=!1,r.applyTheme(),r}return da(r,e),Object.defineProperty(r.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(e){this.setPropertyValue("location",e,!0)},enumerable:!0,configurable:!0}),r.prototype.setDisabled=function(r){var t=e.prototype.setDisabled.call(this,r);return this.axis&&this.axis.invalidateDataItems(),t},r}(oa);ca.registeredClasses.AxisBullet=Xd;var dc=function(t){function i(){var i=t.call(this)||this;return i.className="AxisRendererY",i.minGridDistance=40,i.opposite=!1,i.height=ia(100),i.labels.template.verticalCenter="middle",i.applyTheme(),i}return da(i,t),i.prototype.setAxis=function(i){t.prototype.setAxis.call(this,i),i.layout="horizontal"},i.prototype.updateGridContainer=function(){var t=this.axis;if(t){var i=this.gridContainer;i.y=t.pixelY,i.height=t.axisLength}},i.prototype.toAxisPosition=function(t){var i=this.axis;if(i){var e=1-t,r=i.relativePositionSprite,o=i.pixelY;if(r?o=Hb({x:0,y:this.pixelY},this.parent,r).y:r=i.parent,r)return 1-(e-o/r.innerHeight)/(i.axisLength/r.innerHeight)}return t},i.prototype.processRenderer=function(){t.prototype.processRenderer.call(this);var i=this.axis;if(i){var e=i.title;e.valign="middle",i.height instanceof Da||(i.height=ia(100)),this.opposite?(e.rotation=90,this.line.toBack(),e.toFront()):(e.rotation=-90,e.toBack(),this.line.toFront())}},i.prototype.updateTooltip=function(){if(this.axis){var t=0,i=2e3,e=this.axisLength;this.opposite?this.inside&&(t=-2e3,i=2e3):this.inside||(t=-2e3,i=2e3),this.axis.updateTooltip("horizontal",{x:t,y:0,width:i,height:e})}},Object.defineProperty(i.prototype,"axisLength",{get:function(){var t=this.axis;return t.measuredHeight-t.pixelPaddingTop-t.pixelPaddingBottom||0},enumerable:!0,configurable:!0}),i.prototype.positionToPoint=function(t,i){return{x:0,y:this.positionToCoordinate(t)}},i.prototype.pointToPosition=function(t){return this.coordinateToPosition(t.y,t.x)},i.prototype.coordinateToPosition=function(t,i){var e,r=this.axis,o=r.axisFullLength;return e=r.renderer.inversed?1-r.start-t/o:t/o+(1-r.end),ha(e,5)},i.prototype.getPositionRangePath=function(t,i){var e=na(this.positionToCoordinate(t),0,this.axisLength),r=na(this.positionToCoordinate(i),0,this.axisLength),o=Math.abs(r-e),n=this.getWidth(),s=Math.min(e,r);return Fc({x:0,y:s,width:n,height:o},!0)},i.prototype.updateGridElement=function(t,i,e){i+=(e-i)*t.location;var r=this.positionToPoint(i);t.path=ma({x:0,y:0})+fa({x:this.getWidth(),y:0}),this.positionItem(t,r),this.toggleVisibility(t,i,0,1)},i.prototype.updateTickElement=function(t,i,e){i+=(e-i)*t.location;var r=this.positionToPoint(i),o=t.length;try{Fb(this.axis.title.measuredWidth)}catch(n){}r.x=Hb({x:this.line.pixelX,y:0},this.line.parent,this.gridContainer).x,this.opposite?o*=t.inside?-1:1:o*=t.inside?1:-1,t.path=ma({x:0,y:0})+fa({x:o,y:0}),this.positionItem(t,r),this.toggleVisibility(t,i,0,1)},i.prototype.updateAxisLine=function(){this.line.path=ma({x:0,y:0})+fa({x:0,y:this.axisLength})},i.prototype.updateBaseGridElement=function(){t.prototype.updateBaseGridElement.call(this);var i=this.axis,e=this.getWidth(),r=this.axisLength,o=i.basePoint.y,n=this.baseGrid;if(o<-.2||o>r+.2)n.hide(0);else{var s=Hb({x:0,y:0},this.gridContainer,n.parent).x;n.path=ma({x:0,y:0})+fa({x:e,y:0}),n.moveTo({x:s,y:o}),n.show(0)}},i.prototype.updateLabelElement=function(t,i,e,r){ba(r)||(r=t.location),i+=(e-i)*r,t.isMeasured=!t.inside;var o,n=this.positionToPoint(i),s=0,a=this.gridContainer.maxWidth;this.opposite?(t.inside?(o="right","left"==t.align&&(s=-a,o="left"),"center"==t.align&&(s=-a/2,o="middle")):o="left",n.x=0+s):(t.inside?(o="left","right"==t.align&&(s=a,o="right"),"center"==t.align&&(s=a/2,o="middle")):o="right",n.x=this.measuredWidth+s),0==t.rotation&&(t.horizontalCenter=o),this.positionItem(t,n),this.toggleVisibility(t,i,this.minLabelPosition,this.maxLabelPosition)},i.prototype.updateBreakElement=function(i){t.prototype.updateBreakElement.call(this,i);var e=i.startLine,r=i.endLine,o=i.fillShape,n=i.startPoint,s=i.endPoint,a=i.pixelMarginLeft,p=this.getWidth()-i.pixelMarginLeft-i.pixelMarginRight;n.y=na(n.y,-1,this.axisLength+1),s.y=na(s.y,-1,this.axisLength+1),n.y==s.y&&(n.y<0||n.y>this.axisLength)?i.fillShape.__disabled=!0:i.fillShape.__disabled=!1;var $=Math.abs(p-a);e.x=a,e.height=0,e.width=$,r.x=a,r.height=0,r.width=$,o.width=$,o.height=Math.abs(s.y-n.y),o.x=a,o.y=s.y},i.prototype.createBreakSprites=function(t){t.startLine=new Wc,t.endLine=new Wc;var i=new ki;i.setWavedSides(!0,!1,!0,!1),t.fillShape=i},i.prototype.positionToCoordinate=function(t){var i=this.axis,e=i.axisFullLength;return i.renderer.inversed?(t-i.start)*e:(i.end-t)*e},i.prototype.updateBullet=function(t,i,e){var r=.5;t instanceof Xd&&(r=t.location),i+=(e-i)*r;var o=this.positionToPoint(i);o.x=Hb({x:this.line.pixelX,y:0},this.line.parent,this.gridContainer).x,this.positionItem(t,o),this.toggleVisibility(t,i,0,1)},i}(Ve);ca.registeredClasses.AxisRendererY=dc,ub.push({relevant:Ab.widthS,state:function(t,i){if(t instanceof dc){var e=t.states.create(i);return e.properties.inside=!0,e.properties.maxLabelPosition=.9,e.properties.minLabelPosition=.1,e}return null}}),ub.push({relevant:Ab.widthXS,state:function(t,i){if(t instanceof dc){var e=t.states.create(i);return e.properties.disabled=!0,e}return null}});var kg=function(e){function r(){var r=e.call(this)||this;return r.className="ValueAxisBreak",r.applyTheme(),r}return da(r,e),Object.defineProperty(r.prototype,"startPosition",{get:function(){if(this.axis)return this.axis.valueToPosition(this.adjustedStartValue)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endPosition",{get:function(){if(this.axis)return this.axis.valueToPosition(this.adjustedEndValue)},enumerable:!0,configurable:!0}),r}(Te);ca.registeredClasses.ValueAxisBreak=kg;var We=function(t){function e(){var e=t.call(this)||this;return e.className="ValueAxisDataItem",e.values.value={},e.values.endValue={},e.applyTheme(),e}return da(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.values.value.value},set:function(t){this.setValue("value",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endValue",{get:function(){return this.values.endValue.value},set:function(t){this.setValue("endValue",t)},enumerable:!0,configurable:!0}),e}(Ud);var Ba=function(t){function e(){var e=t.call(this)||this;return e._stepDecimalPlaces=0,e._prevStepDecimalPlaces=0,e._adjustLabelPrecision=!0,e._baseValue=0,e._adjustedStart=0,e._adjustedEnd=1,e._extremesChanged=!1,e._deltaMinMax=1,e._dsc=!1,e.calculateTotals=!1,e.className="ValueAxis",e.axisFieldName="value",e.setPropertyValue("maxZoomFactor",1e3),e.setPropertyValue("extraMin",0),e.setPropertyValue("extraMax",0),e.setPropertyValue("strictMinMax",!1),e.setPropertyValue("maxPrecision",Number.MAX_VALUE),e.setPropertyValue("adjustLabelPrecision",!0),e.setPropertyValue("extraTooltipPrecision",0),e.keepSelection=!1,e.includeRangesInMinMax=!1,e.applyTheme(),e}return da(e,t),e.prototype.fillRule=function(t){var e=t.value,i=t.component;t.axisFill.disabled||(ha(e/i.step/2,5)==Math.round(e/i.step/2)?t.axisFill.__disabled=!0:t.axisFill.__disabled=!1)},e.prototype.createDataItem=function(){return new We},e.prototype.createAxisBreak=function(){return new kg},e.prototype.dataChangeUpdate=function(){this.clearCache(),this.keepSelection?(0!=this._start&&this.dispatchImmediately("startchanged"),1!=this._end&&this.dispatchImmediately("endchanged"),0==this._start&&1==this._end||this.dispatchImmediately("startendchanged")):0==this._start&&1==this._end||(this._start=0,this._end=1,this.dispatchImmediately("startendchanged")),this._maxZoomed=this._maxDefined,this._minZoomed=this._minDefined,this._maxAdjusted=this._maxDefined,this._minAdjusted=this._minDefined},e.prototype.processSeriesDataItems=function(){if(this.calculateTotals){var t=this.series.getIndex(0),e=t.startIndex;if(t.dataItems.length>0){e>0&&e--;var i=t.endIndex;i<t.dataItems.length&&i++;for(var a=function(t){var e={},i={};s.series.each(function(a){if(!a.excludeFromTotal){var s=a.dataItems.getIndex(t);s&&sa(s.values,function(t){var a=s.values[t].workingValue;aa(a)&&(aa(e[t])?e[t]+=Math.abs(a):e[t]=Math.abs(a),aa(i[t])?i[t]+=a:i[t]=a)})}}),s.series.each(function(a){if(!a.excludeFromTotal){var s=a.dataItems.getIndex(t);s&&sa(s.values,function(t){var a=s.values[t].workingValue;aa(a)&&(s.setCalculatedValue(t,e[t],"total"),s.setCalculatedValue(t,100*a/e[t],"totalPercent"),s.setCalculatedValue(t,i[t],"sum"))})}})},s=this,r=e;r<i;++r)a(r)}}},e.prototype.validate=function(){this.axisLength<=0||(t.prototype.validate.call(this),this.getMinMax(),this.fixAxisBreaks(),this.calculateZoom(),this.validateAxisElements(),this.validateAxisRanges(),this.validateBreaks(),this.hideUnusedDataItems(),this.renderer.invalidateLayout())},e.prototype.calculateZoom=function(){if(aa(this.min)&&aa(this.max)){var t=this.positionToValue(this.start),e=this.positionToValue(this.end),i=this.adjustDifference(t,e),a=this.adjustMinMax(t,e,i,this._gridCount,!0),s=lk(a.step);this._stepDecimalPlaces=s,t=ha(t,s),e=ha(e,s);var r=(a=this.adjustMinMax(t,e,i,this._gridCount,!0)).step;if(this.syncWithAxis){var n=this.getCache(t+"-"+e);aa(n)&&(r=n)}else t=a.min,e=a.max;(this._minZoomed!=t||this._maxZoomed!=e||this._step!=r||this._dsc)&&(this._dsc=!1,this._minZoomed=t,this._maxZoomed=e,this._step=r,this.dispatchImmediately("selectionextremeschanged"))}},e.prototype.fixSmallStep=function(t){return 1+t==1?(t*=2,this.fixSmallStep(t)):t},e.prototype.validateAxisElements=function(){var t=this;if(aa(this.max)&&aa(this.min)){var e=this.minZoomed-2*this._step;if(this.logarithmic)Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E>1?e=Math.pow(10,Math.log(this.min)*Math.LOG10E):0==(e=Math.floor(this.minZoomed/this._step)*this._step)&&(e=this.minZoomed);else e=Math.floor(e/this._step)*this._step;var i=this._maxZoomed+this._step;this.resetIterators();var a=this._dataItemsIterator;if(0==this._step)return;this._step=this.fixSmallStep(this._step);var s=0,r=this._prevStepDecimalPlaces!=this._stepDecimalPlaces;for(this._prevStepDecimalPlaces=this._stepDecimalPlaces;e<=i;){if(!this.isInBreak(e)){var n=a.find(function(t){return t.value===e});n.__disabled&&(n.__disabled=!1),this.appendDataItem(n),n.axisBreak=void 0,(n.value!=e||r)&&(n.value=e,n.text=this.formatLabel(e),n.label&&n.label.invalid&&n.label.validate(),n.value>=this.min&&n.value<=this.max&&n.label&&("Y"==this.axisLetter&&n.label.measuredWidth>this.ghostLabel.measuredWidth||"X"==this.axisLetter&&n.label.measuredHeight>this.ghostLabel.measuredHeight)&&(this.ghostLabel.text=n.label.currentText,this.ghostLabel.validate())),this.validateDataElement(n)}if(s++,this.logarithmic)Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E>1?e=Math.pow(10,Math.log(this.min)*Math.LOG10E+s):e+=this._step;else e+=this._step;var o=Math.pow(10,Math.floor(Math.log(Math.abs(this._step))*Math.LOG10E));if(o<1){var h=Math.round(Math.abs(Math.log(Math.abs(o))*Math.LOG10E))+2;e=ha(e,h)}}var l=this._axisBreaks;if(l){var u=this.renderer;ga(l.iterator(),function(e){if(e.breakSize>0&&Ka(e.startPoint,e.endPoint)>u.minGridDistance)for(var i=e.adjustedMin;i<=e.adjustedMax;){if(i>=e.adjustedStartValue&&i<=e.adjustedEndValue){var s=a.find(function(t){return t.value===i});s.__disabled&&(s.__disabled=!1),t.appendDataItem(s),s.axisBreak=e,s.value!=i&&(s.value=i,s.text=t.formatLabel(i),s.label&&s.label.invalid&&s.label.validate()),t.validateDataElement(s)}i+=e.adjustedStep}})}}},e.prototype.validateDataElement=function(e){t.prototype.validateDataElement.call(this,e),e.itemIndex=this._axisItemCount,this._axisItemCount++;var i=this.renderer,a=e.value,s=e.endValue,r=this.valueToPosition(a);e.position=r;var n=r,o=this.valueToPosition(a+this._step);aa(s)&&(o=n=this.valueToPosition(s)),e.point=i.positionToPoint(r);var h=e.tick;h&&!h.disabled&&i.updateTickElement(h,r,n);var l=e.grid;l&&!l.disabled&&i.updateGridElement(l,r,n);var u=e.label;u&&!u.disabled&&i.updateLabelElement(u,r,n);var m=e.axisFill;m&&!m.disabled&&(i.updateFillElement(m,r,o),e.isRange||this.fillRule(e)),e.bullet&&i.updateBullet(e.bullet,r,n);var p=e.mask;p&&i.updateFillElement(p,r,o)},e.prototype.formatLabel=function(t){return this.adjustLabelPrecision&&0!=t?this.numberFormatter.format(t,void 0,this._stepDecimalPlaces):this.numberFormatter.format(t)},Object.defineProperty(e.prototype,"basePoint",{get:function(){var t=this.baseValue,e=this.valueToPosition(t);return this.renderer.positionToPoint(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseValue",{get:function(){var t=this._baseValue;return this.logarithmic&&(t=this.min),this._adapterO?this._adapterO.apply("baseValue",t):t},set:function(t){this._baseValue=t,this.invalidateLayout(),this.invalidateSeries()},enumerable:!0,configurable:!0}),e.prototype.anyToPosition=function(t){return this.valueToPosition(t)},e.prototype.valueToPoint=function(t){var e=this.valueToPosition(t),i=this.renderer.positionToPoint(e),a=this.renderer.positionToAngle(e);return{x:i.x,y:i.y,angle:a}},e.prototype.anyToPoint=function(t){return this.valueToPoint(t)},e.prototype.valueToPosition=function(t){if(aa(t)){var e=this.min,i=this.max;if(aa(e)&&aa(i)){var a=this._difference,s=this._axisBreaks;s&&s.length>0&&Pb(s.iterator(),function(a){var s=a.adjustedStartValue,r=a.adjustedEndValue;if(aa(s)&&aa(r)){if(t<s)return!1;if(fe({start:s,end:r},{start:e,end:i})){s=Math.max(s,e),r=Math.min(r,i);var n=a.breakSize;t>r?e+=(r-s)*(1-n):t<s||(t=s+(t-s)*n)}}return!0});var r=void 0;if(this.logarithmic){var n=this.treatZeroAs;aa(n)&&t<=n&&(t=n),r=(Math.log(t)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)/(Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)}else r=(t-e)/a;return r}}return 0},e.prototype.invalidateLabels=function(){t.prototype.invalidateLabels.call(this),this.dataItems&&(this.dataItems.each(function(t){t.value=void 0}),this.invalidate())},e.prototype.positionToValue=function(t){var e=this.min,i=this.max;if(aa(e)&&aa(i)){var a=i-e,s=null,r=this._axisBreaks;return r&&r.length>0&&Pb(r.iterator(),function(r){var n=r.startPosition,o=r.endPosition,h=r.adjustedStartValue,l=r.adjustedEndValue;if(aa(h)&&aa(l)){if(h>i)return!1;if(fe({start:h,end:l},{start:e,end:i})){h=wa(h,e),l=Ea(l,i);var u=r.breakSize;if(a-=(l-h)*(1-u),t>o)e+=(l-h)*(1-u);else if(!(t<n))return s=h+(t-n)/(o-n)*(l-h),!1}return!0}}),aa(s)||(s=this.logarithmic?Math.pow(Math.E,(t*(Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)+Math.log(this.min)*Math.LOG10E)/Math.LOG10E):t*a+e),s}},e.prototype.xToValue=function(t){return this.positionToValue(this.pointToPosition({x:t,y:0}))},e.prototype.yToValue=function(t){return this.positionToValue(this.pointToPosition({x:0,y:t}))},e.prototype.pointToPosition=function(t){return this.renderer instanceof dc?1-this.renderer.pointToPosition(t):this.renderer.pointToPosition(t)},e.prototype.animateMinMax=function(t,e){return this.animate([{property:"_minAdjusted",from:this._minAdjusted,to:t},{property:"_maxAdjusted",from:this._maxAdjusted,to:e}],this.rangeChangeDuration,this.rangeChangeEasing)},e.prototype.getMinMax=function(){var t=this;this.updateGridCount();var e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;if(aa(this._minDefined)&&aa(this._maxDefined)||(this.series.each(function(a){if(!a.ignoreMinMax){var s=a.min(t);aa(s)&&s<e&&(e=s);var r=a.max(t);aa(r)&&r>i&&(i=r)}}),this.includeRangesInMinMax&&this.axisRanges.each(function(t){if(!t.ignoreMinMax){var a=Ea(t.value,t.endValue),s=wa(t.value,t.endValue);(a<e||!aa(e))&&(e=a),(s>i||!aa(i))&&(i=s)}})),this.logarithmic){var a=this.treatZeroAs;aa(a)&&e<=0&&(e=a),e<=0&&this.raiseCriticalError(new Error("Logarithmic value axis can not have values <= 0."),!0)}if(0==e&&0==i&&(i=.9,e=-.9),aa(this._minDefined)&&(e=this._minDefined),aa(this._maxDefined)&&(i=this._maxDefined),this._adapterO&&(e=this._adapterO.apply("min",e)),this._adapterO&&(i=this._adapterO.apply("max",i)),aa(e)&&aa(i)){this._minReal=e,this._maxReal=i,e==Number.POSITIVE_INFINITY&&(e=void 0),i==Number.NEGATIVE_INFINITY&&(i=void 0);var s=this.adjustDifference(e,i);if(e=this.fixMin(e),(i=this.fixMax(i))-e<=1/Math.pow(10,15)){if(i-e!=0)this._deltaMinMax=(i-e)/2;else{var r=Math.log(Math.abs(i))*Math.LOG10E,n=Math.pow(10,Math.floor(r));n/=10,this._deltaMinMax=n}e-=this._deltaMinMax,i+=this._deltaMinMax}e-=(i-e)*this.extraMin,i+=(i-e)*this.extraMax;var o=this.strictMinMax;aa(this._maxDefined)&&(o=!0);var h=this.adjustMinMax(e,i,s,this._gridCount,o);if(e=h.min,s=(i=h.max)-e,h=this.adjustMinMax(e,i,i-e,this._gridCount,!0),e=h.min,i=h.max,this.strictMinMax&&(e=aa(this._minDefined)?this._minDefined:this._minReal,(i=aa(this._maxDefined)?this._maxDefined:this._maxReal)-e<=1e-8&&(e-=this._deltaMinMax,i+=this._deltaMinMax),e-=(i-e)*this.extraMin,i+=(i-e)*this.extraMax),this._adapterO&&(e=this._adapterO.apply("min",e)),this._adapterO&&(i=this._adapterO.apply("max",i)),this._step=h.step,(this._minAdjusted!=e||this._maxAdjusted!=i)&&aa(e)&&aa(i)){var l=this._minMaxAnimation;if(this._extremesChanged&&aa(this._minAdjusted)&&aa(this._maxAdjusted)&&this.inited){if(l&&!l.isFinished()&&this._finalMax==i&&this._finalMin==e)return;this._finalMin=e,this._finalMax=i,(l=this.animateMinMax(e,i))&&!l.isFinished()?(l.events.on("animationprogress",this.validateDataItems,this),l.events.on("animationended",function(){t.series.each(function(t){t.validate()}),t.validateDataItems(),t.handleSelectionExtremesChange()}),this._minMaxAnimation=l):this.series.each(function(t){t.invalidate()}),this.validateDataItems(),this.dispatchImmediately("extremeschanged"),this.handleSelectionExtremesChange()}else{if(l&&!l.isFinished()&&this._finalMax==i&&this._finalMin==e)return;this._minAdjusted=e,this._maxAdjusted=i,this._finalMin=e,this._finalMax=i,this.invalidateDataItems(),this.dispatchImmediately("extremeschanged")}}this._extremesChanged=!1,this._difference=this.adjustDifference(e,i)}},e.prototype.fixMin=function(t){return t},e.prototype.fixMax=function(t){return t},e.prototype.adjustMinMax=function(t,e,i,a,s){a<=1&&(a=1),a=Math.round(a);var r=t,n=e;0===i&&(i=Math.abs(e));var o=Math.log(Math.abs(i))*Math.LOG10E,h=Math.pow(10,Math.floor(o)),l=h/=10;s&&(l=0),this.logarithmic?(t<=0&&(t=this.baseValue),t==1/0&&(t=1),e==-1/0&&(e=10),t=Math.pow(10,Math.floor(Math.log(Math.abs(t))*Math.LOG10E)),e=Math.pow(10,Math.ceil(Math.log(Math.abs(e))*Math.LOG10E)),this.strictMinMax&&(this._minDefined>0&&(t=this._minDefined),this._maxDefined>0&&(e=this._maxDefined))):(s?(t=Math.floor(t/h)*h,e=Math.ceil(e/h)*h):(t=Math.ceil(t/h)*h-l,e=Math.floor(e/h)*h+l),t<0&&r>=0&&(t=0),e>0&&n<=0&&(e=0)),o=Math.log(Math.abs(i))*Math.LOG10E,h=Math.pow(10,Math.floor(o)),h/=10;var u=Math.ceil(i/a/h)*h,m=Math.pow(10,Math.floor(Math.log(Math.abs(u))*Math.LOG10E)),p=Math.ceil(u/m);p>5?p=10:p<=5&&p>2&&(p=5),u=Math.ceil(u/(m*p))*m*p,this.maxPrecision<Number.MAX_VALUE&&u!=Qg(u,this.maxPrecision)&&(u=Qg(u,this.maxPrecision));var g=0;if(m<1&&(g=Math.round(Math.abs(Math.log(Math.abs(m))*Math.LOG10E))+1,u=ha(u,g)),!this.logarithmic){var $=Math.floor(t/u);t=ha(u*$,g);var d=void 0;(d=s?Math.floor(e/u):Math.ceil(e/u))==$&&d++,(e=ha(u*d,g))<n&&(e+=u),t>r&&(t-=u)}return{min:t,max:e,step:u}},Object.defineProperty(e.prototype,"min",{get:function(){var t=this._minAdjusted;return aa(t)||(t=this._minDefined),t},set:function(t){this._minDefined!=t&&(this._minDefined=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minDefined",{get:function(){return this._minDefined},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxDefined",{get:function(){return this._maxDefined},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extraMin",{get:function(){return this.getPropertyValue("extraMin")},set:function(t){this.setPropertyValue("extraMin",t)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extraMax",{get:function(){return this.getPropertyValue("extraMax")},set:function(t){this.setPropertyValue("extraMax",t)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){var t=this._maxAdjusted;return aa(t)||(t=this._maxDefined),t},set:function(t){this._maxDefined!=t&&(this._maxDefined=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adjustLabelPrecision",{get:function(){return this.getPropertyValue("adjustLabelPrecision")},set:function(t){this.setPropertyValue("adjustLabelPrecision",t)&&this.invalidate()},enumerable:!0,configurable:!0}),e.prototype.registerSeries=function(e){return new Ya([t.prototype.registerSeries.call(this,e),e.events.on("extremeschanged",this.handleExtremesChange,this,!1),e.events.on("selectionextremeschanged",this.handleSelectionExtremesChange,this,!1),this.events.on("extremeschanged",e.invalidate,e,!1)])},e.prototype.handleSelectionExtremesChange=function(){var t,e,i=this,a=!0;if(ga(this.series.iterator(),function(s){if(!s.ignoreMinMax&&!s.isHidden&&!s.outOfRange){s.visible&&!s.isHiding&&(a=!1);var r=s.selectionMin(i),n=s.selectionMax(i);aa(r)&&(!aa(t)||r<t)&&(t=r),aa(n)&&(!aa(e)||n>e)&&(e=n)}}),this.includeRangesInMinMax&&this.axisRanges.each(function(i){if(!i.ignoreMinMax){var a=Ea(i.value,i.endValue),s=wa(i.value,i.endValue);a<t&&(t=a),s>e&&(e=s)}}),aa(this._minDefined)?t=this.strictMinMax?this._minDefined:this.min:this.strictMinMax&&(t=this._minReal),aa(this._maxDefined)?e=this.strictMinMax?this._maxDefined:this.max:this.strictMinMax&&(e=this._maxReal),t==e){t-=this._deltaMinMax,e+=this._deltaMinMax;var s=this.adjustMinMax(t,e,0,this._gridCount,this.strictMinMax);t=s.min,e=s.max}var r=this.adjustDifference(t,e),n=this.adjustMinMax(t,e,r,this._gridCount);t=n.min,e=n.max,t-=(e-t)*this.extraMin,e+=(e-t)*this.extraMax,t=na(t,this.min,this.max),e=na(e,this.min,this.max),r=this.adjustDifference(t,e),n=this.adjustMinMax(t,e,r,this._gridCount,!0),t=n.min,e=n.max,this.strictMinMax&&(t=wa(t,this._minDefined),e=Ea(e,this._maxDefined));var o=n.step;this.syncWithAxis&&(n=this.syncAxes(t,e,o),t=n.min,e=n.max,this.invalidate()),o=n.step,this._difference=this.adjustDifference(this.min,this.max);var h=this.valueToPosition(t),l=this.valueToPosition(e);a&&!this.syncWithAxis&&(h=0,l=1);var u=0;this.syncWithAxis?(u=5,this.setCache(t+"-"+e,o)):(this._step==o&&this._minZoomed==t&&this._maxZoomed==e||(this._dsc=!0),this._step=o,this._minZoomed=t,this._maxZoomed=e),this.keepSelection||this.zoom({start:h,end:l},!1,!1,u)},Object.defineProperty(e.prototype,"strictMinMax",{get:function(){return this.getPropertyValue("strictMinMax")},set:function(t){this.setPropertyValue("strictMinMax",t)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logarithmic",{get:function(){return this.getPropertyValue("logarithmic")},set:function(t){this.setPropertyValue("logarithmic",t)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keepSelection",{get:function(){return this.getPropertyValue("keepSelection")},set:function(t){this.setPropertyValue("keepSelection",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"includeRangesInMinMax",{get:function(){return this.getPropertyValue("includeRangesInMinMax")},set:function(t){this.setPropertyValue("includeRangesInMinMax",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxPrecision",{get:function(){return this.getPropertyValue("maxPrecision")},set:function(t){this.setPropertyValue("maxPrecision",t)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extraTooltipPrecision",{get:function(){return this.getPropertyValue("extraTooltipPrecision")},set:function(t){this.setPropertyValue("extraTooltipPrecision",t)&&this.invalidate()},enumerable:!0,configurable:!0}),e.prototype.handleExtremesChange=function(){var t=this;if(this._extremesChanged=!0,this.getMinMax(),this.ghostLabel){this.dataItems.each(function(e){e.label&&e.label.pixelWidth>0&&(t.ghostLabel.text=e.label.currentText)})}},e.prototype.getX=function(t,e,i,a,s){return this.renderer.positionToPoint(this.getPositionX(t,e,i,a,s)).x},e.prototype.getPositionX=function(t,e,i,a,s){var r=t.getWorkingValue(e);ba(a)||(a="valueX");var n=t.getValue(a,"stack");aa(r)||(r=this.baseValue,this.logarithmic&&n>0&&(r=0));var o=this.valueToPosition(r+n);return s&&(o=na(o,s.start,s.end)),o},e.prototype.getY=function(t,e,i,a,s){return this.renderer.positionToPoint(this.getPositionY(t,e,i,a,s)).y},e.prototype.getPositionY=function(t,e,i,a,s){var r=t.getWorkingValue(e);ba(a)||(a="valueY");var n=t.getValue(a,"stack");aa(r)||(r=this.baseValue,this.logarithmic&&n>0&&(r=0));var o=this.valueToPosition(r+n);return s&&(o=na(o,s.start,s.end)),o},e.prototype.getAngle=function(t,e,i,a,s){var r=t.getWorkingValue(e),n=t.getValue(a,"stack");aa(r)||(r=this.baseValue);var o=this.valueToPosition(r+n);return s&&(o=na(o,s.start,s.end)),this.positionToAngle(o)},e.prototype.getAnyRangePath=function(t,e,i){var a=this.valueToPosition(t),s=this.valueToPosition(e);return this.getPositionRangePath(a,s)},e.prototype.getTooltipText=function(t){var e=ha(this.positionToValue(t),this._stepDecimalPlaces+this.extraTooltipPrecision),i=this.tooltip.numberFormatter.format(e);return this._adapterO?this._adapterO.apply("getTooltipText",i):i},e.prototype.zoomToValues=function(t,e,i,a){var s=(t-this.min)/(this.max-this.min),r=(e-this.min)/(this.max-this.min);this.zoom({start:s,end:r},i,a)},Object.defineProperty(e.prototype,"minZoomed",{get:function(){return this.syncWithAxis?this._minZoomed:wa(this.min,this._minZoomed)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxZoomed",{get:function(){return this.syncWithAxis?this._maxZoomed:Ea(this.max,this._maxZoomed)},enumerable:!0,configurable:!0}),e.prototype.fixAxisBreaks=function(){var e=this;t.prototype.fixAxisBreaks.call(this);var i=this._axisBreaks;i&&i.length>0&&i.each(function(t){var i=t.adjustedStartValue,a=t.adjustedEndValue,s=a-i,r=Math.ceil(s*t.breakSize)*e._gridCount/(e.max-e.min),n=e.adjustMinMax(i,a,s,r,!0);t.adjustedStep=n.step,t.adjustedMin=n.min,t.adjustedMax=n.max}),this._difference=this.adjustDifference(this.min,this.max)},e.prototype.getPositionLabel=function(t){var e=this.positionToValue(t);return this.numberFormatter.format(e)},e.prototype.showTooltipAt=function(t){this.showTooltipAtPosition(this.valueToPosition(t))},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.min=e.min,this.max=e.max,this.calculateTotals=e.calculateTotals,this._baseValue=e.baseValue},Object.defineProperty(e.prototype,"syncWithAxis",{get:function(){return this.getPropertyValue("syncWithAxis")},set:function(t){var e=this;this.setPropertyValue("syncWithAxis",t,!0)&&t&&(this._disposers.push(t.events.on("extremeschanged",this.handleSelectionExtremesChange,this,!1)),this._disposers.push(t.events.on("selectionextremeschanged",this.handleSelectionExtremesChange,this,!1)),this._disposers.push(t.events.on("startendchanged",this.handleSelectionExtremesChange,this,!1)),this.events.on("shown",this.handleSelectionExtremesChange,this,!1),this.events.on("maxsizechanged",function(){e.clearCache(),e._disposers.push(ca.events.once("exitframe",function(){e.handleSelectionExtremesChange()}))},this,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"treatZeroAs",{get:function(){return this.getPropertyValue("treatZeroAs")},set:function(t){this.setPropertyValue("treatZeroAs",t,!0)},enumerable:!0,configurable:!0}),e.prototype.syncAxes=function(t,e,i){var a=this.syncWithAxis;if(a){aa(t)||(t=this.min),aa(e)||(e=this.max),aa(i)||(i=this._step);var s=Math.round((a.maxZoomed-a.minZoomed)/a.step),r=Math.round((e-t)/i);if(aa(s)&&aa(r))for(var n=!1,o=0,h=.01*(e-t),l=t,u=e,m=i;1!=n;)if(n=this.checkSync(l,u,m,s),++o>1e3&&(n=!0),n)t=l,e=u,i=m;else{o/3==Math.round(o/3)?(l=t-h*o,t>=0&&l<0&&(l=0)):(u=e+h*o)<=0&&u>0&&(u=0);var p=this.adjustMinMax(l,u,u-l,this._gridCount,!0);l=p.min,u=p.max,m=p.step}}return{min:t,max:e,step:i}},e.prototype.checkSync=function(t,e,i,a){for(var s=(e-t)/i,r=1;r<a;r++)if(ha(s/r,1)==a||s*r==a)return!0;return!1},e.prototype.processConfig=function(e){e&&ba(e.syncWithAxis)&&Ca(e.syncWithAxis)&&(this.map.hasKey(e.syncWithAxis)?e.syncWithAxis=this.map.getKey(e.syncWithAxis):(this.processingErrors.push("[ValueAxis] No axis with id \""+e.syncWithAxis+"\" found for `syncWithAxis`"),delete e.xAxis)),t.prototype.processConfig.call(this,e)},e}(Ue);ca.registeredClasses.ValueAxis=Ba,ca.registeredClasses.ValueAxisDataItem=We;var yi=function(e){function t(){var t=e.call(this)||this;return t.className="DateAxisBreak",t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"startDate",{get:function(){return this.getPropertyValue("startDate")},set:function(e){this.setPropertyValue("startDate",e)&&(this.startValue=e.getTime(),this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endDate",{get:function(){return this.getPropertyValue("endDate")},set:function(e){this.setPropertyValue("endDate",e)&&(this.endValue=e.getTime(),this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries()))},enumerable:!0,configurable:!0}),t}(kg);ca.registeredClasses.DateAxisBreak=yi;var zi=function(t){function e(){var e=t.call(this)||this;return e.className="DateAxisDataItem",e.applyTheme(),e.values.date={},e.values.endDate={},e}return da(e,t),Object.defineProperty(e.prototype,"date",{get:function(){return this.dates.date},set:function(t){this.setDate("date",t),this.value=t.getTime()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endDate",{get:function(){return this.dates.endDate},set:function(t){this.setDate("endDate",t),this.endValue=t.getTime()},enumerable:!0,configurable:!0}),e}(We);var $a=function(t){function e(){var e=t.call(this)||this;return e._gapBreaks=!1,e.gridIntervals=new Fa,e.groupIntervals=new Fa,e.dateFormats=new Ta,e.periodChangeDateFormats=new Ta,e._baseIntervalReal={timeUnit:"day",count:1},e._prevSeriesTime={},e._minDifference={},e._firstWeekDay=1,e.groupMin={},e.groupMax={},e.className="DateAxis",e.setPropertyValue("markUnitChange",!0),e.snapTooltip=!0,e.tooltipPosition="pointer",e.setPropertyValue("groupData",!1),e.groupCount=200,e.events.on("parentset",e.getDFFormatter,e,!1),e.gridIntervals.pushAll([{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:5},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:50},{timeUnit:"millisecond",count:100},{timeUnit:"millisecond",count:500},{timeUnit:"second",count:1},{timeUnit:"second",count:5},{timeUnit:"second",count:10},{timeUnit:"second",count:30},{timeUnit:"minute",count:1},{timeUnit:"minute",count:5},{timeUnit:"minute",count:10},{timeUnit:"minute",count:15},{timeUnit:"minute",count:30},{timeUnit:"hour",count:1},{timeUnit:"hour",count:3},{timeUnit:"hour",count:6},{timeUnit:"hour",count:12},{timeUnit:"day",count:1},{timeUnit:"day",count:2},{timeUnit:"day",count:3},{timeUnit:"day",count:4},{timeUnit:"day",count:5},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"month",count:2},{timeUnit:"month",count:3},{timeUnit:"month",count:6},{timeUnit:"year",count:1},{timeUnit:"year",count:2},{timeUnit:"year",count:5},{timeUnit:"year",count:10},{timeUnit:"year",count:50},{timeUnit:"year",count:100},{timeUnit:"year",count:200},{timeUnit:"year",count:500},{timeUnit:"year",count:1e3},{timeUnit:"year",count:2e3},{timeUnit:"year",count:5e3},{timeUnit:"year",count:1e4},{timeUnit:"year",count:1e5}]),e.groupIntervals.pushAll([{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:100},{timeUnit:"second",count:1},{timeUnit:"second",count:10},{timeUnit:"minute",count:1},{timeUnit:"minute",count:10},{timeUnit:"hour",count:1},{timeUnit:"day",count:1},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"year",count:1}]),e.axisFieldName="date",e.applyTheme(),e}return da(e,t),e.prototype.fillRule=function(t){var e=t.value,i=t.component,a=i._gridInterval,o=cb(a.timeUnit,a.count);Math.round((e-i.min)/o)/2==Math.round(Math.round((e-i.min)/o)/2)?t.axisFill.__disabled=!0:t.axisFill.__disabled=!1},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),this.dateFormats.hasKey("millisecond")||this.dateFormats.setKey("millisecond",this.language.translate("_date_millisecond")),this.dateFormats.hasKey("second")||this.dateFormats.setKey("second",this.language.translate("_date_second")),this.dateFormats.hasKey("minute")||this.dateFormats.setKey("minute",this.language.translate("_date_minute")),this.dateFormats.hasKey("hour")||this.dateFormats.setKey("hour",this.language.translate("_date_hour")),this.dateFormats.hasKey("day")||this.dateFormats.setKey("day",this.language.translate("_date_day")),this.dateFormats.hasKey("week")||this.dateFormats.setKey("week",this.language.translate("_date_day")),this.dateFormats.hasKey("month")||this.dateFormats.setKey("month",this.language.translate("_date_month")),this.dateFormats.hasKey("year")||this.dateFormats.setKey("year",this.language.translate("_date_year")),this.periodChangeDateFormats.hasKey("millisecond")||this.periodChangeDateFormats.setKey("millisecond",this.language.translate("_date_millisecond")),this.periodChangeDateFormats.hasKey("second")||this.periodChangeDateFormats.setKey("second",this.language.translate("_date_second")),this.periodChangeDateFormats.hasKey("minute")||this.periodChangeDateFormats.setKey("minute",this.language.translate("_date_minute")),this.periodChangeDateFormats.hasKey("hour")||this.periodChangeDateFormats.setKey("hour",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("day")||this.periodChangeDateFormats.setKey("day",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("week")||this.periodChangeDateFormats.setKey("week",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("month")||this.periodChangeDateFormats.setKey("month",this.language.translate("_date_month")+" "+this.language.translate("_date_year"))},e.prototype.createDataItem=function(){return new zi},e.prototype.createAxisBreak=function(){return new yi},e.prototype.validateDataItems=function(){var e=this.start,i=this.end,a=this.baseDuration,o=(this.max-this.min)/a;this._firstWeekDay=this.getFirstWeekDay(),this.getDFFormatter(),t.prototype.validateDataItems.call(this);var r=cb(this.mainBaseInterval.timeUnit,this.mainBaseInterval.count);this.maxZoomFactor=Math.max(1,(this.max-this.min)/r),this._deltaMinMax=this.baseDuration/2,e+=(i-e)*(1-o/((this.max-this.min)/a)),this.zoom({start:e,end:i},!1,!0)},e.prototype.handleSelectionExtremesChange=function(){},e.prototype.calculateZoom=function(){var e=this;t.prototype.calculateZoom.call(this);var i=this.adjustDifference(this._minZoomed,this._maxZoomed),a=!1;if(this.groupData&&ba(i)){var o=this.mainBaseInterval,r=i+(this.startLocation+(1-this.endLocation))*this.baseDuration,n=void 0;this.groupInterval?n=$b({},this.groupInterval):(n=this.chooseInterval(0,r,this.groupCount,this.groupIntervals),cb(n.timeUnit,n.count)<cb(o.timeUnit,o.count)&&(n=$b({},o))),this._groupInterval=n;var s=n.timeUnit+n.count;this._currentDataSetId!=s&&(this._currentDataSetId=s,this.dispatch("groupperiodchanged")),this.series.each(function(t){t.baseAxis==e&&t.setDataSet(e._currentDataSetId)&&(a=!0)})}var m=this.chooseInterval(0,i,this._gridCount);cb(m.timeUnit,m.count)<this.baseDuration&&(m=$b({},this.baseInterval)),this._gridInterval=m,this._nextGridUnit=Hh(m.timeUnit),this._intervalDuration=cb(m.timeUnit,m.count),this._gridDate=rb(new Date(this.minZoomed-cb(m.timeUnit,m.count)),m.timeUnit,m.count,this._firstWeekDay,this._df.utc,new Date(this.min),this._df.timezoneMinutes,this._df.timezone),ga(this.series.iterator(),function(t){if(t.baseAxis==e){var i=t.getAxisField(e),o=rb(new Date(e._minZoomed+.05*e.baseDuration),e.baseInterval.timeUnit,e.baseInterval.count,e._firstWeekDay,e._df.utc,void 0,e._df.timezoneMinutes,e._df.timezone).getTime(),r=o.toString(),n=t.dataItemsByAxis.getKey(e.uid).getKey(r+t.currentDataSetId),s=0;0!=e.start&&(s=n?(n=e.findFirst(n,o,i)).index:t.dataItems.findClosestIndex(e._minZoomed,function(t){return t[i]},"left"));var m=e.baseInterval,u=Eb(rb(new Date(e._maxZoomed),m.timeUnit,m.count,e._firstWeekDay,e._df.utc,void 0,e._df.timezoneMinutes,e._df.timezone),m.timeUnit,m.count,e._df.utc).getTime(),p=u.toString(),d=t.dataItemsByAxis.getKey(e.uid).getKey(p+t.currentDataSetId),h=t.dataItems.length;1!=e.end&&(d?h=d.index:(u-=1,h=t.dataItems.findClosestIndex(u,function(t){return t[i]},"right"),h++)),t.max(e)<o?(t.startIndex=t.dataItems.length,t.endIndex=t.dataItems.length,t.outOfRange=!0):t.min(e)>u?(t.startIndex=0,t.endIndex=0,t.outOfRange=!0):(t.outOfRange=!1,t.startIndex=s,t.endIndex=h),!a&&t.dataRangeInvalid&&t.validateDataRange()}})},e.prototype.findFirst=function(t,e,i){var a=t.index;if(a>0){var o=t.component.dataItems.getIndex(a-1),r=o[i];return!r||r.getTime()<e?t:this.findFirst(o,e,i)}return t},e.prototype.validateData=function(){t.prototype.validateData.call(this),aa(this.baseInterval.count)||(this.baseInterval.count=1)},Object.defineProperty(e.prototype,"minDifference",{get:function(){var t=this,e=Number.MAX_VALUE;return this.series.each(function(i){e>t._minDifference[i.uid]&&(e=t._minDifference[i.uid])}),e!=Number.MAX_VALUE&&0!=e||(e=cb("day")),e},enumerable:!0,configurable:!0}),e.prototype.seriesDataChangeUpdate=function(t){this._minDifference[t.uid]=Number.MAX_VALUE},e.prototype.postProcessSeriesDataItems=function(t){var e=this;t?this.seriesGroupUpdate(t):this.series.each(function(t){e.seriesGroupUpdate(t)}),this.addEmptyUnitsBreaks()},e.prototype.seriesGroupUpdate=function(t){var e=this;JSON.stringify(t._baseInterval[this.uid])!=JSON.stringify(this.mainBaseInterval)&&(t._baseInterval[this.uid]=this.mainBaseInterval,t.mainDataSet.each(function(t){e.postProcessSeriesDataItem(t)}),this.groupData&&this.groupSeriesData(t))},e.prototype.groupSeriesData=function(t){var e=this;if(t.baseAxis==this&&t.dataItems.length>0&&!t.dataGrouped){t.bulletsContainer.removeChildren();var i=[],a=this.mainBaseInterval,o=cb(a.timeUnit,a.count);this.groupIntervals.each(function(t){var a=cb(t.timeUnit,t.count);(a>o&&a<e.max-e.min||e.groupInterval)&&i.push(t)}),t._dataSets&&(t._dataSets.each(function(t,e){e.each(function(t){t.dispose()}),e.clear()}),t._dataSets.clear()),t.dataGrouped=!0,la(i,function(i){var a="date"+e.axisLetter,o=i.timeUnit+i.count,r=new le(t.mainDataSet.template.clone());t.dataSets.setKey(o,r);var n,s,m=t.mainDataSet,u=Number.NEGATIVE_INFINITY,p=0,d=[];sa(t.dataFields,function(t,e){var i=t;i!=a&&-1==i.indexOf("Show")&&d.push(i)}),m.each(function(o){var m=o.getDate(a);if(m){var h=m.getTime(),$=(s=rb(new Date(h),i.timeUnit,i.count,e._df.firstDayOfWeek,e._df.utc,void 0,e._df.timezoneMinutes,e._df.timezone)).getTime();u<$?(n&&t._adapterO&&la(d,function(e){n.values[e].value=t._adapterO.apply("groupDataItem",{dataItem:n,interval:i,dataField:e,date:s,value:n.values[e].value}).value,n.values[e].workingValue=n.values[e].value}),(n=r.create()).dataContext={},n.setWorkingLocation("dateX",t.dataItems.template.locations.dateX,0),n.setWorkingLocation("openDateX",t.dataItems.template.locations.openDateX,0),n.setWorkingLocation("dateY",t.dataItems.template.locations.dateY,0),n.setWorkingLocation("openDateY",t.dataItems.template.locations.openDateY,0),n.component=t,n.setDate(a,s),n._index=p,p++,la(d,function(e){var a=o.values[e];if(a){var r=a.value;t._adapterO&&(r=t._adapterO.apply("groupValue",{dataItem:o,interval:i,dataField:e,date:s,value:r}).value);var m=n.values[e];aa(r)?(m.value=r,m.workingValue=r,m.open=r,m.close=r,m.low=r,m.high=r,m.sum=r,m.average=r,m.count=1):m.count=0}}),e.postProcessSeriesDataItem(n,i),sa(t.propertyFields,function(t,e){var i=t,a=o.properties[t];ba(a)&&(n.hasProperties=!0,n.setProperty(i,a))}),n.groupDataItems=[o],u=$):n&&(la(d,function(e){var a=t.groupFields[e],r=o.values[e];if(r){var m=r.value;if(t._adapterO&&(m=t._adapterO.apply("groupValue",{dataItem:o,interval:i,dataField:e,date:s,value:m}).value),aa(m)){var u=n.values[e];aa(u.open)||(u.open=m),u.close=m,(u.low>m||!aa(u.low))&&(u.low=m),(u.high<m||!aa(u.high))&&(u.high=m),aa(u.sum)?u.sum+=m:u.sum=m,u.count++,u.average=u.sum/u.count,aa(u[a])&&(u.value=u[a],u.workingValue=u.value)}}}),tc(o.properties,n.properties),sa(t.propertyFields,function(t,e){var i=t,a=o.properties[t];ba(a)&&(n.hasProperties=!0,n.setProperty(i,a))}),n.groupDataItems.push(o))}n&&tc(o.dataContext,n.dataContext)}),n&&t._adapterO&&la(d,function(e){n.values[e].value=t._adapterO.apply("groupDataItem",{dataItem:n,interval:i,dataField:e,date:s,value:n.values[e].value}).value,n.values[e].workingValue=n.values[e].value})}),this.calculateZoom()}},e.prototype.getDFFormatter=function(){this._df=this.dateFormatter},e.prototype.postProcessSeriesDataItem=function(t,e){var i=this,a="";e?a=e.timeUnit+e.count:e=this.mainBaseInterval;var o=t.component.dataItemsByAxis.getKey(this.uid);sa(t.dates,function(r){var n=t.getDate(r).getTime(),s=rb(new Date(n),e.timeUnit,e.count,i._firstWeekDay,i._df.utc,void 0,i._df.timezoneMinutes,i._df.timezone).getTime(),m=Eb(new Date(s),e.timeUnit,e.count,i._df.utc);t.setCalculatedValue(r,s,"open"),t.setCalculatedValue(r,m.getTime(),"close"),o.setKey(s+a,t)})},e.prototype.addEmptyUnitsBreaks=function(){var t=this;if(this.skipEmptyPeriods&&aa(this.min)&&aa(this.max)){var e=this.baseInterval.timeUnit,i=this.baseInterval.count;this._axisBreaks&&this._axisBreaks.clear();for(var a=rb(new Date(this.min),e,i,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),o=void 0,r=function(){Eb(a,e,i,n._df.utc);var r=a.getTime(),s=r.toString();rf(n.series.iterator(),function(e){return!!e.dataItemsByAxis.getKey(t.uid).getKey(s+e.currentDataSetId)})?o&&(o.endDate=new Date(r-1),o=void 0):o||((o=n.axisBreaks.create()).startDate=new Date(r),n._gapBreaks=!0)},n=this;a.getTime()<this.max-this.baseDuration;)r()}},e.prototype.fixAxisBreaks=function(){var e=this;t.prototype.fixAxisBreaks.call(this);var i=this._axisBreaks;i&&i.length>0&&i.each(function(t){var i=Math.ceil(e._gridCount*(Math.min(e.end,t.endPosition)-Math.max(e.start,t.startPosition))/(e.end-e.start));t.gridInterval=e.chooseInterval(0,t.adjustedEndValue-t.adjustedStartValue,i);var a=rb(new Date(t.adjustedStartValue),t.gridInterval.timeUnit,t.gridInterval.count,e._firstWeekDay,e._df.utc,void 0,e._df.timezoneMinutes,e._df.timezone);a.getTime()>t.startDate.getTime()&&Eb(a,t.gridInterval.timeUnit,t.gridInterval.count,e._df.utc),t.gridDate=a})},e.prototype.getFirstWeekDay=function(){return this._df?this._df.firstDayOfWeek:1},e.prototype.getGridDate=function(t,e){var i=this._gridInterval.timeUnit,a=this._gridInterval.count;rb(t,i,1,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone);var o=t.getTime(),r=ld(t),n=Eb(r,i,e,this._df.utc).getTime(),s=this.isInBreak(n);s&&s.endDate&&(r=new Date(s.endDate.getTime()),rb(r,i,a,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),r.getTime()<s.endDate.getTime()&&Eb(r,i,a,this._df.utc),n=r.getTime());var m=this.adjustDifference(o,n);return Math.round(m/cb(i))<a?this.getGridDate(t,e+a):r},e.prototype.getBreaklessDate=function(t,e,i){var a=new Date(t.endValue);rb(a,e,i,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),Eb(a,e,i,this._df.utc);var o=a.getTime();return(t=this.isInBreak(o))?this.getBreaklessDate(t,e,i):a},e.prototype.validateAxisElements=function(){var t=this;if(aa(this.max)&&aa(this.min)){this.calculateZoom();var e=this._gridDate.getTime(),i=this._gridInterval.timeUnit,a=this._gridInterval.count,o=ld(this._gridDate),r=this._dataItemsIterator;this.resetIterators();for(var n=function(){var t=s.getGridDate(ld(o),a);e=t.getTime();var n=ld(t);n=Eb(n,i,a,s._df.utc);var m=s.dateFormats.getKey(i);s.markUnitChange&&o&&Tf(t,o,s._nextGridUnit,s._df.utc)&&"year"!==i&&(m=s.periodChangeDateFormats.getKey(i));var u=s._df.format(t,m),p=r.find(function(t){return t.text===u});p.__disabled&&(p.__disabled=!1),s.appendDataItem(p),p.axisBreak=void 0,p.date=t,p.endDate=n,p.text=u,s.validateDataElement(p),o=t},s=this;e<=this._maxZoomed;)n();var m=this.renderer;this._axisBreaks&&ga(this._axisBreaks.iterator(),function(e){if(e.breakSize>0){var i=e.gridInterval.timeUnit,a=e.gridInterval.count;if(Ka(e.startPoint,e.endPoint)>4*m.minGridDistance)for(var o,n=e.gridDate.getTime(),s=0,u=function(){var m=ld(e.gridDate);if(n=Eb(m,i,a*s,t._df.utc).getTime(),s++,n>e.adjustedStartValue&&n<e.adjustedEndValue){var u=ld(m);u=Eb(u,i,a,t._df.utc);var p=t.dateFormats.getKey(i);t.markUnitChange&&o&&Tf(m,o,t._nextGridUnit,t._df.utc)&&"year"!==i&&(p=t.periodChangeDateFormats.getKey(i));var d=t._df.format(m,p),h=r.find(function(t){return t.text===d});h.__disabled&&(h.__disabled=!1),t.appendDataItem(h),h.axisBreak=e,e.dataItems.moveValue(h),h.date=m,h.endDate=u,h.text=d,o=m,t.validateDataElement(h)}};n<=e.adjustedMax;)u()}})}},e.prototype.validateDataElement=function(t){if(t.itemIndex=this._axisItemCount,this._axisItemCount++,aa(this.max)&&aa(this.min)){var e=this.renderer,i=t.value,a=t.endValue;aa(a)||(a=i);var o=this.valueToPosition(i),r=this.valueToPosition(a),n=r;!t.isRange&&this._gridInterval.count>this.baseInterval.count&&(r=o+(r-o)/(this._gridInterval.count/this.baseInterval.count)),t.position=o;var s=t.tick;s&&!s.disabled&&e.updateTickElement(s,o,r);var m=t.grid;m&&!m.disabled&&e.updateGridElement(m,o,r);var u=t.axisFill;u&&!u.disabled&&(e.updateFillElement(u,o,n),t.isRange||this.fillRule(t));var p=t.mask;p&&e.updateFillElement(p,o,r),t.bullet&&e.updateBullet(t.bullet,o,r);var d=t.label;if(d&&!d.disabled){var h=d.location;0==h&&(h=1!=this._gridInterval.count||"week"==this._gridInterval.timeUnit||t.isRange?0:.5),e.updateLabelElement(d,o,r,h)}}},Object.defineProperty(e.prototype,"baseDuration",{get:function(){return cb(this.baseInterval.timeUnit,this.baseInterval.count)},enumerable:!0,configurable:!0}),e.prototype.adjustMinMax=function(t,e){return{min:t,max:e,step:this.baseDuration}},e.prototype.fixMin=function(t){var e=this.baseInterval,i=rb(new Date(t),e.timeUnit,e.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone).getTime();return i+(Eb(new Date(i),e.timeUnit,e.count,this._df.utc).getTime()-i)*this.startLocation},e.prototype.fixMax=function(t){var e=this.baseInterval,i=rb(new Date(t),e.timeUnit,e.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone).getTime();return i+(Eb(new Date(i),e.timeUnit,e.count,this._df.utc).getTime()-i)*this.endLocation},e.prototype.chooseInterval=function(t,e,i,a){a||(a=this.gridIntervals);var o=a.getIndex(t),r=cb(o.timeUnit,o.count),n=a.length-1;if(t>=n)return $b({},a.getIndex(n));var s=Math.ceil(e/r);return e<r&&t>0?$b({},a.getIndex(t-1)):s<=i?$b({},a.getIndex(t)):t+1<a.length?this.chooseInterval(t+1,e,i,a):$b({},a.getIndex(t))},e.prototype.formatLabel=function(t){return this._df.format(t)},e.prototype.dateToPosition=function(t){return this.valueToPosition(t.getTime())},e.prototype.anyToPosition=function(t){return t instanceof Date?this.dateToPosition(t):this.valueToPosition(t)},e.prototype.dateToPoint=function(t){var e=this.dateToPosition(t),i=this.renderer.positionToPoint(e),a=this.renderer.positionToAngle(e);return{x:i.x,y:i.y,angle:a}},e.prototype.anyToPoint=function(t){return t instanceof Date?this.dateToPoint(t):this.valueToPoint(t)},e.prototype.positionToDate=function(t){return new Date(this.positionToValue(t))},e.prototype.getPositionX=function(t,e,i,a,o){var r=this.getTimeByLocation(t,e,i);aa(r)||(r=this.baseValue);var n=this.valueToPosition(r);return o&&(n=na(n,o.start,o.end)),n},e.prototype.getPositionY=function(t,e,i,a,o){var r=this.getTimeByLocation(t,e,i),n=t.getValue("valueX","stack");aa(r)||(r=this.baseValue);var s=this.valueToPosition(r+n);return o&&(s=na(s,o.start,o.end)),s},e.prototype.getAngle=function(t,e,i,a,o){var r=this.getTimeByLocation(t,e,i),n=t.getValue(a,"stack");aa(r)||(r=this.baseValue);var s=this.valueToPosition(r+n);return o&&(s=na(s,o.start,o.end)),this.positionToAngle(s)},e.prototype.getTimeByLocation=function(t,e,i){if(ba(e)){aa(i)||(i=t.workingLocations[e],aa(i)||(i=0));var a=t.values[e].open,o=t.values[e].close,r=t.values[e].workingValue,n=t.values[e].value-r;return a-=n,o-=n,aa(a)&&aa(o)?a+(o-a)*i:void 0}},e.prototype.processSeriesDataItem=function(t,e){var i,a=t.component,o=t["date"+e];if(aa(this.timezoneOffset)?(o.setTime(o.getTime()+6e4*(o.getTimezoneOffset()-this.timezoneOffset)),t.setValue("date"+e,o.getTime(),0)):ba(this.timezone)&&(o=Fe(o,this.timezone),t.setValue("date"+e,o.getTime(),0),t["date"+e]=o),o){i=o.getTime();var r,n=t["openDate"+e],s=this._prevSeriesTime[a.uid];if(n&&(r=n.getTime()),aa(r)){var m=Math.abs(i-r);this._minDifference[a.uid]>m&&(this._minDifference[a.uid]=m)}var u=i-s;u>0&&this._minDifference[a.uid]>u&&(this._minDifference[a.uid]=u),this._prevSeriesTime[a.uid]=i,a._baseInterval[this.uid]&&this.postProcessSeriesDataItem(t)}},e.prototype.updateAxisBySeries=function(){t.prototype.updateAxisBySeries.call(this);var e=this.chooseInterval(0,this.minDifference,1);this.minDifference>=cb("day",27)&&"week"==e.timeUnit&&(e.timeUnit="month",e.count=1),"month"==e.timeUnit&&(this.minDifference>=cb("day",58)&&1==e.count&&(e.count=2),this.minDifference>=cb("day",87)&&2==e.count&&(e.count=3),this.minDifference>=cb("day",174)&&5==e.count&&(e.count=6)),this.minDifference>=cb("hour",23)&&"hour"==e.timeUnit&&(e.timeUnit="day",e.count=1),this.minDifference>=cb("week",1)-cb("hour",1)&&"day"==e.timeUnit&&(e.timeUnit="week",e.count=1),this.minDifference>=cb("year",1)-cb("day",1.01)&&"month"==e.timeUnit&&(e.timeUnit="year",e.count=1),this._baseIntervalReal=e,this._mainBaseInterval=e},Object.defineProperty(e.prototype,"baseInterval",{get:function(){return this._groupInterval?this._groupInterval:this._baseInterval?this._baseInterval:this._baseIntervalReal},set:function(t){JSON.stringify(this._baseInterval)!=JSON.stringify(t)&&(this._baseInterval=t,this._mainBaseInterval=t,aa(t.count)||(t.count=1),this.invalidate(),this.postProcessSeriesDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainBaseInterval",{get:function(){return this._baseInterval?this._baseInterval:this._mainBaseInterval?this._mainBaseInterval:this._baseIntervalReal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipEmptyPeriods",{get:function(){return this.getPropertyValue("skipEmptyPeriods")},set:function(t){if(t){var e=this.axisBreaks.template;e.startLine.disabled=!0,e.endLine.disabled=!0,e.fillShape.disabled=!0,e.breakSize=0}else this._gapBreaks&&(this.axisBreaks.clear(),this._gapBreaks=!1);this.setPropertyValue("skipEmptyPeriods",t)&&(this.invalidate(),this.postProcessSeriesDataItems(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipDateFormat",{get:function(){return this.getPropertyValue("tooltipDateFormat")},set:function(t){this.setPropertyValue("tooltipDateFormat",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"markUnitChange",{get:function(){return this.getPropertyValue("markUnitChange")},set:function(t){this.setPropertyValue("markUnitChange",t)&&this.invalidateData()},enumerable:!0,configurable:!0}),e.prototype.getTooltipText=function(t){var e,i=this.positionToDate(t);if(i=rb(i,this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,new Date(this.min),this._df.timezoneMinutes,this._df.timezone),this.tooltipDate=i,ba(this.tooltipDateFormat))e=this._df.format(i,this.tooltipDateFormat);else{var a=this.dateFormats.getKey(this.baseInterval.timeUnit);e=a?this._df.format(i,a):this.getPositionLabel(t)}return this._adapterO?this._adapterO.apply("getTooltipText",e):e},e.prototype.roundPosition=function(t,e,i){var a=this.baseInterval,o=a.timeUnit,r=a.count,n=this.positionToDate(t);if(rb(n,o,r,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),e>0&&Eb(n,o,e*r,this._df.utc),i>0&&i<1&&n.setTime(n.getTime()+this.baseDuration*i),this.isInBreak(n.getTime()))for(;n.getTime()<this.max&&(Eb(n,o,r,this._df.utc),this.isInBreak(n.getTime())););return this.dateToPosition(n)},e.prototype.getCellStartPosition=function(t){return this.roundPosition(t,0)},e.prototype.getCellEndPosition=function(t){return this.roundPosition(t,1)},e.prototype.getSeriesDataItem=function(t,e,i){var a=this.positionToValue(e),o=a-("Y"==this.axisLetter?t.dataItems.template.locations.dateY:t.dataItems.template.locations.dateX)*this.baseDuration,r=rb(new Date(a),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),n=rb(new Date(a+this.baseDuration),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone);n.getTime()>r.getTime()&&Math.abs(n.getTime()-o)<Math.abs(o-r.getTime())&&(r=n);var s,m=t.dataItemsByAxis.getKey(this.uid).getKey(r.getTime()+t.currentDataSetId);!m&&i&&(s="Y"==this.axisLetter?"dateY":"dateX",m=t.dataItems.getIndex(t.dataItems.findClosestIndex(r.getTime(),function(t){return t[s]?t[s].getTime():-1/0},"any")));return m},e.prototype.getPositionLabel=function(t){var e=this.positionToDate(t);return this._df.format(e,this.getCurrentLabelFormat())},e.prototype.getCurrentLabelFormat=function(){return this.dateFormats.getKey(this._gridInterval?this._gridInterval.timeUnit:"day")},e.prototype.initRenderer=function(){t.prototype.initRenderer.call(this);var e=this.renderer;e&&(e.ticks.template.location=0,e.grid.template.location=0,e.labels.template.location=0,e.baseGrid.disabled=!0)},Object.defineProperty(e.prototype,"basePoint",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),e.prototype.animateMinMax=function(t,e){var i=this,a=this.animate([{property:"_minAdjusted",from:this._minAdjusted,to:t},{property:"_maxAdjusted",from:this._maxAdjusted,to:e}],this.rangeChangeDuration,this.rangeChangeEasing);return a.events.on("animationprogress",function(){i.dispatch("extremeschanged")}),a},e.prototype.handleExtremesChange=function(){if(t.prototype.handleExtremesChange.call(this),this.groupData){var e=this.baseInterval.timeUnit+this.baseInterval.count;this.groupMin[e]=this._finalMin,this.groupMax[e]=this._finalMax}},e.prototype.zoomToDates=function(t,e,i,a,o){t=this._df.parse(t),e=this._df.parse(e),this.zoomToValues(t.getTime(),e.getTime(),i,a,o)},e.prototype.zoomToValues=function(t,e,i,a,o){var r=this;if(this.groupData){var n=this.adjustDifference(t,e),s=!1;e==this.max&&(s=!0);var m=!1;if(t==this.min&&(m=!0),ba(n)){var u=this.mainBaseInterval,p=this.chooseInterval(0,n,this.groupCount,this.groupIntervals);(p.timeUnit==u.timeUnit&&p.count<u.count||cb(p.timeUnit,1)<cb(u.timeUnit,1))&&(p=$b({},u));var d=p.timeUnit+p.count,h=this.groupMin[d],$=this.groupMax[d];aa(h)&&aa($)||(h=Number.POSITIVE_INFINITY,$=Number.NEGATIVE_INFINITY,this.series.each(function(t){var e=t.min(r),i=t.max(r);if(t._dataSets){var a=t._dataSets.getKey(p.timeUnit+p.count);if(a){var o=a.getIndex(0),n=a.getIndex(a.length-1);o&&(t.xAxis==r?e=o.dateX.getTime():t.yAxis==r&&(e=o.dateY.getTime())),n&&(t.xAxis==r?i=n.dateX.getTime():t.yAxis==r&&(i=n.dateY.getTime()))}}i=rb(Eb(new Date(i),p.timeUnit,1,r._df.utc),p.timeUnit,1,r._df.firstDayOfWeek,r._df.utc,void 0,r._df.timezoneMinutes,r._df.timezone).getTime(),e<h&&(h=e),i>$&&($=i)}),this.groupMin[d]=h,this.groupMax[d]=$),t=na(t,h,$),e=na(e,h,$),o&&(s&&(t=e-n,t=na(t,h,$)),m&&(e=t+n,e=na(e,h,$)));l=(t-h)/($-h),c=(e-h)/($-h);this.zoom({start:l,end:c},i,a)}}else{var l=(t-this.min)/(this.max-this.min),c=(e-this.min)/(this.max-this.min);this.zoom({start:l,end:c},i,a)}},e.prototype.asIs=function(e){return"baseInterval"==e||t.prototype.asIs.call(this,e)},e.prototype.copyFrom=function(e){var i=this;t.prototype.copyFrom.call(this,e),this.dateFormats=e.dateFormats,this.periodChangeDateFormats=e.periodChangeDateFormats,this.groupIntervals.clear(),e.groupIntervals.each(function(t){i.groupIntervals.push($b({},t))}),this.gridIntervals.clear(),e.gridIntervals.each(function(t){i.gridIntervals.push($b({},t))}),e._baseInterval&&(this.baseInterval=e._baseInterval)},e.prototype.showTooltipAtPosition=function(e,i){var a=this;if(i||(e=this.toAxisPosition(e)),this.snapTooltip){var o,r=this.positionToDate(e).getTime();if(this.series.each(function(t){if(t.baseAxis==a){var i=a.getSeriesDataItem(t,e,!0);if(i){var n=void 0;t.xAxis==a&&(n=i.dateX),t.yAxis==a&&(n=i.dateY),o?Math.abs(o.getTime()-r)>Math.abs(n.getTime()-r)&&(o=n):o=n}}}),o){var n=o.getTime();o=rb(new Date(n),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),n=o.getTime();var s=this.renderer.tooltipLocation;0==s&&(s=1e-4),o=new Date(o.getTime()+this.baseDuration*s),e=this.dateToPosition(o),this.chart.cursor&&this.chart.cursor.snapToSeries||this.series.each(function(t){var e=t.dataItemsByAxis.getKey(a.uid).getKey(n+t.currentDataSetId),i=t.showTooltipAtDataItem(e);i?a.chart._seriesPoints.push({series:t,point:i}):(t.tooltipText||t.tooltipHTML)&&t.hideTooltip()})}}t.prototype.showTooltipAtPosition.call(this,e,!0)},Object.defineProperty(e.prototype,"snapTooltip",{get:function(){return this.getPropertyValue("snapTooltip")},set:function(t){this.setPropertyValue("snapTooltip",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupData",{get:function(){return this.getPropertyValue("groupData")},set:function(t){var e=this;this.setPropertyValue("groupData",t)&&(this.series.each(function(i){i.setDataSet(""),t&&!i.dataGrouped&&i.inited&&(i._baseInterval[e.uid]=e.mainBaseInterval,e.groupSeriesData(i))}),this._currentDataSetId="",this._groupInterval=void 0,this.invalidate(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupInterval",{get:function(){return this.getPropertyValue("groupInterval")},set:function(t){this.setPropertyValue("groupInterval",t)&&(this.invalidate(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupCount",{get:function(){return this.getPropertyValue("groupCount")},set:function(t){this.setPropertyValue("groupCount",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timezoneOffset",{get:function(){return this.getPropertyValue("timezoneOffset")},set:function(t){this.setPropertyValue("timezoneOffset",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timezone",{get:function(){return this.getPropertyValue("timezone")},set:function(t){this.setPropertyValue("timezone",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridInterval",{get:function(){return this._gridInterval},enumerable:!0,configurable:!0}),e.prototype.makeGap=function(t,e){var i=t.component;if(t&&e&&!i.connect&&aa(i.autoGapCount)&&i.baseAxis==this){var a=t.dates["date"+this.axisLetter],o=e.dates["date"+this.axisLetter];if(a&&o)if(a.getTime()-o.getTime()>i.autoGapCount*this.baseDuration)return!0}return!1},Object.defineProperty(e.prototype,"baseValue",{get:function(){return this.min},enumerable:!0,configurable:!0}),e}(Ba);ca.registeredClasses.DateAxis=$a,ca.registeredClasses.DateAxisDataItem=zi;var vc=function(t){function i(){var i=t.call(this)||this;return i.className="AxisRendererX",i.minGridDistance=120,i.opposite=!1,i.rotation=0,i.width=ia(100),i.labels.template.horizontalCenter="middle",i.applyTheme(),i}return da(i,t),i.prototype.setAxis=function(i){t.prototype.setAxis.call(this,i),i.layout="vertical"},i.prototype.updateGridContainer=function(){var t=this.axis;if(t){var i=this.gridContainer;i.x=t.pixelX,i.width=t.axisLength}},i.prototype.processRenderer=function(){t.prototype.processRenderer.call(this);var i=this.axis;if(i){i.width instanceof Da||(i.width=ia(100)),Fb(this.line);var e=i.title;e.rotation=0,e.align="center",this.opposite?(this.line.toFront(),e.toBack()):(e.toFront(),this.toBack(),this.line.toBack())}},i.prototype.updateTooltip=function(){if(this.axis){var t=this.line.pixelX,i=this.line.pixelY,e=this.axisLength,o=1e3;this.opposite?this.inside||(i=-1e3,o=1e3):this.inside&&(i=-1e3,o=1e3),this.axis.updateTooltip("vertical",{x:t,y:i,width:e,height:o})}},i.prototype.updateLabelElement=function(t,i,e,o){ba(o)||(o=t.location),i+=(e-i)*o;var r=this.positionToPoint(i);t.isMeasured=!t.inside;var n,s=0,a=this.gridContainer.maxHeight;this.opposite?(t.inside?(n="top","bottom"==t.valign&&(s=a,n="bottom"),"middle"==t.valign&&(s=a/2,n="middle")):n="bottom",r.y=s):(t.inside?(n="bottom","top"==t.valign&&(s=-a,n="top"),"middle"==t.valign&&(s=-a/2,n="middle")):n="top",r.y+=s),0==t.rotation&&(t.verticalCenter=n),this.positionItem(t,r),this.toggleVisibility(t,i,this.minLabelPosition,this.maxLabelPosition)},Object.defineProperty(i.prototype,"axisLength",{get:function(){var t=this.axis;return t.measuredWidth-t.pixelPaddingRight-t.pixelPaddingLeft||0},enumerable:!0,configurable:!0}),i.prototype.positionToPoint=function(t,i){return{x:this.positionToCoordinate(t),y:0}},i.prototype.pointToPosition=function(t){return this.coordinateToPosition(t.x,t.y)},i.prototype.getPositionRangePath=function(t,i){var e=na(this.positionToCoordinate(t),0,this.axisLength),o=na(this.positionToCoordinate(i),0,this.axisLength),r=Math.abs(o-e),n=this.getHeight(),s=Math.min(e,o);return Fc({x:s,y:0,width:r,height:n},!0)},i.prototype.updateBreakElement=function(i){t.prototype.updateBreakElement.call(this,i);var e=i.startLine,o=i.endLine,r=i.fillShape,n=i.startPoint,s=i.endPoint,a=i.pixelMarginLeft,p=this.getHeight()-i.pixelMarginTop-i.pixelMarginBottom;n.x=na(n.x,-1,this.axisLength+1),s.x=na(s.x,-1,this.axisLength+1),n.x==s.x&&(n.x<0||n.x>this.axisLength)?i.fillShape.__disabled=!0:i.fillShape.__disabled=!1,e.y=a,e.width=0,e.height=p,o.y=a,o.width=0,o.height=p,r.height=p,r.width=Math.abs(s.x-n.x),r.y=a,r.x=n.x},i.prototype.updateGridElement=function(t,i,e){i+=(e-i)*t.location;var o=this.positionToPoint(i);t.path=ma({x:0,y:0})+fa({x:0,y:this.getHeight()}),this.positionItem(t,o),this.toggleVisibility(t,i,0,1)},i.prototype.updateTickElement=function(t,i,e){i+=(e-i)*t.location;var o=this.positionToPoint(i),r=t.length;o.y=Hb({x:0,y:this.line.pixelY},this.line.parent,this.gridContainer).y,this.opposite?r*=t.inside?1:-1:r*=t.inside?-1:1,t.path=ma({x:0,y:0})+fa({x:0,y:r}),this.positionItem(t,o),this.toggleVisibility(t,i,0,1)},i.prototype.updateAxisLine=function(){this.line.path=ma({x:0,y:0})+fa({x:this.axisLength,y:0})},i.prototype.updateBaseGridElement=function(){t.prototype.updateBaseGridElement.call(this);var i=this.axis,e=this.getHeight(),o=this.axisLength,r=this.baseGrid,n=i.basePoint.x;if(n<-.2||n>o+.2)r.hide(0);else{var s=Hb({x:0,y:0},this.gridContainer,r.parent).y;r.path=ma({x:0,y:0})+fa({x:0,y:e}),r.moveTo({x:n,y:s}),r.show(0)}},i.prototype.createBreakSprites=function(t){t.startLine=new Wc,t.endLine=new Wc;var i=new ki;i.setWavedSides(!1,!0,!1,!0),t.fillShape=i},i.prototype.toAxisPosition=function(t){var i=t,e=this.axis;if(e){var o=e.relativePositionSprite,r=e.pixelX;if(o?r=Hb({x:this.pixelX,y:0},this.parent,o).x:o=e.parent,o)return(i-r/o.innerWidth)/(e.axisLength/o.innerWidth)}return t},i.prototype.updateBullet=function(t,i,e){var o=.5;t instanceof Xd&&(o=t.location),i+=(e-i)*o;var r=this.positionToPoint(i);r.y=Hb({x:0,y:this.line.pixelY},this.line.parent,this.gridContainer).y,this.positionItem(t,r),this.toggleVisibility(t,i,0,1)},i}(Ve);ca.registeredClasses.AxisRendererX=vc,ub.push({relevant:Ab.heightXS,state:function(t,i){if(t instanceof vc){var e=t.states.create(i);return e.properties.inside=!0,e.properties.maxLabelPosition=.9,e.properties.minLabelPosition=.1,e}return null}}),ub.push({relevant:Ab.heightXXS,state:function(t,i){if(t instanceof vc){var e=t.states.create(i);return e.properties.disabled=!0,e}return null}});var Ai=function(e){function t(){var t=e.call(this)||this;return t.className="CategoryAxisBreak",t.properties.startLocation=.5,t.properties.endLocation=.5,t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"startPosition",{get:function(){if(this.axis)return this.axis.indexToPosition(this.adjustedStartValue,this.startLocation)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endPosition",{get:function(){if(this.axis)return this.axis.indexToPosition(this.adjustedEndValue,this.endLocation)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startCategory",{get:function(){return this.getPropertyValue("startCategory")},set:function(e){this.setPropertyValue("startCategory",e)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endCategory",{get:function(){return this.getPropertyValue("endCategory")},set:function(e){this.setPropertyValue("endCategory",e)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startValue",{get:function(){var e=this.getPropertyValue("startCategory");return e?this.axis.categoryToIndex(e):this.getPropertyValue("startValue")},set:function(e){this.setPropertyValue("startValue",e)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endValue",{get:function(){var e=this.getPropertyValue("endCategory");return e?this.axis.categoryToIndex(e):this.getPropertyValue("endValue")},set:function(e){this.setPropertyValue("endValue",e)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(e){this.setPropertyValue("startLocation",e)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(e){this.setPropertyValue("endLocation",e)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),t}(Te);ca.registeredClasses.CategoryAxisBreak=Ai;var Bi=function(t){function e(){var e=t.call(this)||this;return e.seriesDataItems={},e.className="CategoryAxisDataItem",e.text="{category}",e.locations.category=0,e.locations.endCategory=1,e.deltaPosition=0,e.applyTheme(),e}return da(e,t),Object.defineProperty(e.prototype,"category",{get:function(){return this._adapterO&&this._adapterO.isEnabled("category")?this._adapterO.apply("category",this.properties.category):this.properties.category},set:function(t){var e=this.properties.category;this.setProperty("category",t),ba(e)&&e!=t&&this.component&&this.component.validateDataElement(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endCategory",{get:function(){return this.properties.endCategory},set:function(t){this.setProperty("endCategory",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deltaPosition",{get:function(){return this.properties.deltaCoordinate},set:function(t){t!=this.properties.deltaCoordinate&&(this.setProperty("deltaCoordinate",t),this.component&&(this.component.invalidateDataItems(),this.component.invalidateSeries()))},enumerable:!0,configurable:!0}),e}(Ud);var jb=function(t){function e(){var e=t.call(this)||this;e.dataItemsByCategory=new Ta,e.className="CategoryAxis",e.axisFieldName="category",e._lastDataItem=e.createDataItem(),e._lastDataItem.component=e,e._disposers.push(e._lastDataItem),e.applyTheme();var i=e.dataItemsByCategory;return e.addDisposer(e.mainDataSet.events.on("removed",function(t){i.removeKey(t.oldValue.category)})),e}return da(e,t),e.prototype.createDataItem=function(){return new Bi},e.prototype.createAxisBreak=function(){return new Ai},e.prototype.processSeriesDataItem=function(e,i){t.prototype.processSeriesDataItem.call(this,e,i);var a=e["category"+this.axisLetter];if(ba(a)){var r=this.dataItemsByCategory.getKey(a);if(r){var o=e.component.uid,s=r.seriesDataItems[o];s||(s=[],r.seriesDataItems[o]=s),s.push(e)}}else e.component.dataItems.remove(e)},e.prototype.validateDataRange=function(){var i=this;t.prototype.validateDataRange.call(this),ga(this._series.iterator(),function(t){if(t.xAxis instanceof e&&t.yAxis instanceof e)t.invalidateDataRange();else{var a=i.positionToIndex(i.start),r=i.positionToIndex(i.end);r>=i.dataItems.length&&r--;for(var o=t.uid,s=void 0,n=void 0,p=a;p<=r;p++){var d=i.dataItems.getIndex(p);if(d){var h=d.seriesDataItems[o];if(h)for(var $=0;$<h.length;$++){var l=h[$];if(l){var y=l.index;(!aa(s)||y<s)&&(s=y),(!aa(n)||y>n)&&(n=y)}}}}aa(s)?t.startIndex=s:t.start=i.start,aa(n)?t.endIndex=n+1:t.end=i.end,i._axisBreaks&&i._axisBreaks.length>0&&t.invalidateDataRange()}})},e.prototype.validate=function(){var e=this;t.prototype.validate.call(this);var i=this.dataItems.length,a=na(Math.floor(this.start*i-1),0,i),r=na(Math.ceil(this.end*i),0,i);this.renderer.invalid&&this.renderer.validate();var o=this.renderer.axisLength/Math.max(this.renderer.minGridDistance,1/Number.MAX_SAFE_INTEGER),s=Math.min(this.dataItems.length,Math.ceil((r-a)/o));if(this._startIndex=Math.floor(a/s)*s,this._endIndex=Math.ceil(this.end*i),this.fixAxisBreaks(),this._startIndex==this._endIndex&&this._endIndex++,this._frequency=s,!(this.axisLength<=0)){this.maxZoomFactor=this.dataItems.length,this.dataItems.length<=0&&(this.maxZoomFactor=1),this.resetIterators(),a=wa(0,this._startIndex-this._frequency),r=Ea(this.dataItems.length,this._endIndex+this._frequency);for(var n=0,p=0;p<a;p++){(h=this.dataItems.getIndex(p)).__disabled=!0}p=r;for(var d=this.dataItems.length;p<d;p++){(h=this.dataItems.getIndex(p)).__disabled=!0}for(p=a;p<r;p++)if(p<this.dataItems.length){var h=this.dataItems.getIndex(p);if(p/this._frequency==Math.round(p/this._frequency))this.isInBreak(p)||(this.appendDataItem(h),this.validateDataElement(h,n)),n++;else h.__disabled=!0}if(this.appendDataItem(this._lastDataItem),this.validateDataElement(this._lastDataItem,n+1,this.dataItems.length),this._axisBreaks)this._axisBreaks.each(function(t){var i=t.adjustedStartValue,a=t.adjustedEndValue;if(fe({start:i,end:a},{start:e._startIndex,end:e._endIndex})){for(var r=i;r<=a;r++){(n=e.dataItems.getIndex(r)).__disabled=!0}var o=na(Math.ceil(e._frequency/t.breakSize),1,a-i),s=0;if(t.breakSize>0)for(r=i;r<=a;r+=o){var n;(n=e.dataItems.getIndex(r)).__disabled=!1,e.appendDataItem(n),e.validateDataElement(n,s),s++}}});this.validateBreaks(),this.validateAxisRanges(),this.ghostLabel.invalidate(),this.renderer.invalidateLayout()}},e.prototype.validateDataElement=function(e,i,a){t.prototype.validateDataElement.call(this,e),e.itemIndex=this._axisItemCount,this._axisItemCount++;var r=this.renderer;aa(a)||(a=this.categoryToIndex(e.category));var o=this.categoryToIndex(e.endCategory);aa(o)||(o=a);var s,n,p,d=this.indexToPosition(a,e.locations.category),h=this.indexToPosition(o,e.locations.endCategory);e.position=d,e.isRange&&(s=o,n=this.indexToPosition(a,e.locations.category),p=this.indexToPosition(s,e.locations.endCategory)),e.point=r.positionToPoint(d);var $=e.tick;$&&!$.disabled&&r.updateTickElement($,d,h);var l=e.grid;l&&!l.disabled&&r.updateGridElement(l,d,h);var y=e.label;y&&!y.disabled&&(e.isRange&&null!=y.text||(e.text=e.text),r.updateLabelElement(y,d,h),(r instanceof dc&&e.label.measuredWidth>this.ghostLabel.measuredWidth||r instanceof vc&&e.label.measuredHeight>this.ghostLabel.measuredHeight)&&(e.label.html?this.ghostLabel.html=e.label.currentText:this.ghostLabel.text=e.label.currentText));var c=e.axisFill;c&&!c.disabled&&(e.isRange||(s=a+this._frequency,n=this.indexToPosition(a,c.location),p=this.indexToPosition(s,c.location)),r.updateFillElement(c,n,p),e.isRange||this.fillRule(e,i)),e.bullet&&r.updateBullet(e.bullet,d,h);var m=e.mask;m&&r.updateFillElement(m,n,p)},e.prototype.disposeData=function(){this.dataItemsByCategory.clear(),t.prototype.disposeData.call(this)},e.prototype.processDataItem=function(e,i){e&&(t.prototype.processDataItem.call(this,e,i),ba(e.category)&&this.dataItemsByCategory.setKey(e.category,e))},e.prototype.getDataItem=function(t){var e=t[this.dataFields.category];if(ba(e)){var i=this.dataItemsByCategory.getKey(e);return i||this.dataItems.create()}},e.prototype.indexToPosition=function(t,e){aa(e)||(e=.5);var i=this.startIndex,a=this.endIndex,r=this.adjustDifference(i,a),o=this.startLocation;if(r-=o,r-=1-this.endLocation,this._axisBreaks){var s=this._axisBreaks;Pb(s.iterator(),function(e){var r=e.adjustedStartValue,o=e.adjustedEndValue;if(t<i||!aa(r)||!aa(o))return!1;if(fe({start:r,end:o},{start:i,end:a})){r=Math.max(i,r),o=Math.min(a,o);var s=e.breakSize;t>o?i+=(o-r)*(1-s):t<r||(t=r+(t-r)*s)}return!0})}var n=0,p=this.dataItems.getIndex(t);return p&&(n=p.deltaPosition),ha(n+(t+e-o-i)/r,5)},e.prototype.categoryToPosition=function(t,e){var i=this.categoryToIndex(t);return this.indexToPosition(i,e)},e.prototype.categoryToPoint=function(t,e){var i=this.categoryToPosition(t,e),a=this.renderer.positionToPoint(i),r=this.renderer.positionToAngle(i);return{x:a.x,y:a.y,angle:r}},e.prototype.anyToPoint=function(t,e){return this.categoryToPoint(t,e)},e.prototype.anyToPosition=function(t,e){return this.categoryToPosition(t,e)},e.prototype.categoryToIndex=function(t){if(ba(t)){var e=this.dataItemsByCategory.getKey(t);if(e)return e.index}},e.prototype.zoomToCategories=function(t,e){this.zoomToIndexes(this.categoryToIndex(t),this.categoryToIndex(e)+1)},e.prototype.getAnyRangePath=function(t,e,i,a){var r=this.categoryToPosition(t,i),o=this.categoryToPosition(e,a);return this.getPositionRangePath(r,o)},e.prototype.roundPosition=function(t,e){var i=this.positionToIndex(t);return this.indexToPosition(i,e)},e.prototype.getFirstSeriesDataItem=function(t,e){for(var i=0;i<t.dataItems.length;i++){var a=t.dataItems.getIndex(i);if(t.xAxis==this&&a.categoryX==e)return a;if(t.yAxis==this&&a.categoryY==e)return a}},e.prototype.getLastSeriesDataItem=function(t,e){for(var i=t.dataItems.length-1;i>=0;i--){var a=t.dataItems.getIndex(i);if(t.xAxis==this&&a.categoryX==e)return a;if(t.yAxis==this&&a.categoryY==e)return a}},e.prototype.getSeriesDataItemByCategory=function(t,e){var i,a=this;return e.dataItems.each(function(r){e.xAxis==a?r.categoryX==t&&(i=r):e.yAxis==a&&r.categoryY==t&&(i=r)}),i},e.prototype.getSeriesDataItem=function(t,e,i){var a=this;if(aa(e)){var r=this.positionToIndex(e);r>=this.dataItems.length&&r--;var o=this.dataItems.getIndex(r);if(o){var s,n=o.category,p=t.dataItems.getIndex(r);if(p){if(t.xAxis==this&&p.categoryX==n)return p;if(t.yAxis==this&&p.categoryY==n)return p}return t.dataItems.each(function(e){t.xAxis==a&&e.categoryX==n&&(s||(s=e),Math.abs(r-s.index)>Math.abs(r-e.index)&&(s=e)),t.yAxis==a&&e.categoryY==n&&(s||(s=e),Math.abs(r-s.index)>Math.abs(r-e.index)&&(s=e))}),s}}},e.prototype.getX=function(t,e,i,a,r){var o=this.getPositionX(t,e,i,a,r);return yb(o)?this.basePoint.x:this.renderer.positionToPoint(o).x},e.prototype.getPositionX=function(t,e,i,a,r){var o;return ba(e)&&(o=this.categoryToPosition(t.categories[e],i)),r&&(o=na(o,r.start,r.end)),o},e.prototype.getY=function(t,e,i,a,r){var o=this.getPositionY(t,e,i,a,r);return yb(o)?this.basePoint.y:this.renderer.positionToPoint(o).y},e.prototype.getPositionY=function(t,e,i,a,r){var o;return ba(e)&&(o=this.categoryToPosition(t.categories[e],i)),r&&(o=na(o,r.start,r.end)),o},e.prototype.getAngle=function(t,e,i,a,r){var o=this.categoryToPosition(t.categories[e],i);return r&&(o=na(o,r.start,r.end)),this.positionToAngle(o)},e.prototype.getCellStartPosition=function(t){return this.roundPosition(t,0)},e.prototype.getCellEndPosition=function(t){return this.roundPosition(t,1)},e.prototype.getTooltipText=function(t){var e=this.dataItems.getIndex(this.positionToIndex(t));if(e)return this.tooltipDataItem=e,this.tooltip.dataItem=e,this.tooltipText?this.tooltipText:this._adapterO?this._adapterO.apply("getTooltipText",e.category):e.category},e.prototype.positionToIndex=function(t){(t=ha(t,10))<0&&(t=0),t>1&&(t=1);var e=this.startIndex,i=this.endIndex,a=i-e-this.startLocation-(1-this.endLocation);t+=1/a*this.startLocation;var r=null;if(this._axisBreaks){var o=this._axisBreaks;Pb(o.iterator(),function(o){var s=o.startPosition,n=o.endPosition,p=o.adjustedStartValue,d=o.adjustedEndValue;p=wa(p,e),d=Ea(d,i);var h=o.breakSize;if(a-=(d-p)*(1-h),t>n)e+=(d-p)*(1-h);else if(!(t<s)){var $=(t-s)/(n-s);return r=p+Math.round($*(d-p)),!1}return!0})}return aa(r)||(r=Math.floor(t*a+e)),r>=this.dataItems.length&&(r=this.dataItems.length-1),r},e.prototype.positionToCategory=function(t){return this.getPositionLabel(t)},e.prototype.getPositionLabel=function(t){var e=this.dataItems.getIndex(this.positionToIndex(t));if(e)return e.category},Object.defineProperty(e.prototype,"basePoint",{get:function(){return this.renderer.positionToPoint(1)},enumerable:!0,configurable:!0}),e.prototype.initRenderer=function(){t.prototype.initRenderer.call(this),this.renderer.baseGrid.disabled=!0},Object.defineProperty(e.prototype,"frequency",{get:function(){return this._frequency},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortBySeries",{get:function(){return this.getPropertyValue("sortBySeries")},set:function(t){this.setPropertyValue("sortBySeries",t,!0)},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){e&&ba(e.sortBySeries)&&Ca(e.sortBySeries)&&(this.map.hasKey(e.sortBySeries)?e.sortBySeries=this.map.getKey(e.sortBySeries):(this.addDelayedMap("sortBySeries",e.sortBySeries),delete e.sortBySeries)),t.prototype.processConfig.call(this,e)},e}(Ue);ca.registeredClasses.CategoryAxis=jb,ca.registeredClasses.CategoryAxisDataItem=Bi;var Xe=function(t){function e(){var e=t.call(this)||this;return e.className="XYSeriesDataItem",e.values.customValue={},e.values.valueX={stack:0},e.values.valueY={stack:0},e.values.openValueX={},e.values.openValueY={},e.values.dateX={},e.values.dateY={},e.values.openDateX={},e.values.openDateY={},e.setLocation("dateX",.5,0),e.setLocation("dateY",.5,0),e.setLocation("categoryX",.5,0),e.setLocation("categoryY",.5,0),e.applyTheme(),e}return da(e,t),Object.defineProperty(e.prototype,"valueX",{get:function(){return this.values.valueX.value},set:function(t){this.setValue("valueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"customValue",{get:function(){return this.values.customValue.value},set:function(t){this.setValue("customValue",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueY",{get:function(){return this.values.valueY.value},set:function(t){this.setValue("valueY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateX",{get:function(){return this.getDate("dateX")},set:function(t){this.setDate("dateX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateY",{get:function(){return this.getDate("dateY")},set:function(t){this.setDate("dateY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryX",{get:function(){return this.categories.categoryX},set:function(t){this.setCategory("categoryX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryY",{get:function(){return this.categories.categoryY},set:function(t){this.setCategory("categoryY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openValueX",{get:function(){return this.values.openValueX.value},set:function(t){this.setValue("openValueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openValueY",{get:function(){return this.values.openValueY.value},set:function(t){this.setValue("openValueY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openDateX",{get:function(){return this.getDate("openDateX")},set:function(t){this.setDate("openDateX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openDateY",{get:function(){return this.getDate("openDateY")},set:function(t){this.setDate("openDateY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openCategoryX",{get:function(){return this.categories.openCategoryX},set:function(t){this.setCategory("openCategoryX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openCategoryY",{get:function(){return this.categories.openCategoryY},set:function(t){this.setCategory("openCategoryY",t)},enumerable:!0,configurable:!0}),e.prototype.getMin=function(t,e,i){var s,a=this;return aa(i)||(i=0),la(t,function(t){var o;o=e?a.getWorkingValue(t):a.getValue(t),((o+=i)<s||!aa(s))&&(s=o)}),s},e.prototype.getMax=function(t,e,i){var s,a=this;return aa(i)||(i=0),la(t,function(t){var o;o=e?a.getWorkingValue(t):a.getValue(t),((o+=i)>s||!aa(s))&&(s=o)}),s},e}(Re);var Yc=function(t){function e(){var e=t.call(this)||this;return e.groupFields={},e._xAxis=new nb,e._yAxis=new nb,e._xValueFields=[],e._yValueFields=[],e._baseInterval={},e.dataGrouped=!1,e.usesShowFields=!1,e._dataSetChanged=!1,e._maxxX=1e5,e._maxxY=1e5,e._propertiesChanged=!1,e.outOfRange=!1,e.className="XYSeries",e.isMeasured=!1,e.groupFields.valueX="close",e.groupFields.valueY="close",e.groupFields.customValue="close",e.groupFields.openValueX="open",e.groupFields.openValueY="open",e.cursorTooltipEnabled=!0,e.cursorHoverEnabled=!0,e.excludeFromTotal=!1,e.mainContainer.mask=new xa,e.mainContainer.mask.setElement(e.paper.add("path")),e.stacked=!1,e.snapTooltip=!1,e._showBullets=!1,e.tooltip.pointerOrientation="horizontal",e.properties.stackToNegative=!0,e.hideTooltipWhileZooming=!0,e.setPropertyValue("maskBullets",!0),e.tooltip.events.on("hidden",function(){e.returnBulletDefaultState()},void 0,!1),e._disposers.push(e._xAxis),e._disposers.push(e._yAxis),e.observe(db,function(){e.inited&&(e._propertiesChanged=!0,e.legendDataItem&&(e.legendDataItem.childrenCreated=!1),e.chart&&e.chart.legend&&e.chart.legend.invalidateDataItems(),e.invalidate())},void 0,!1),e.applyTheme(),e}return da(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("X/Y Series"))},e.prototype.createDataItem=function(){return new Xe},e.prototype.resetExtremes=function(){this._tmin.clear(),this._tmax.clear(),this._smin.clear(),this._smax.clear()},e.prototype.dataChangeUpdate=function(){this.dataGrouped=!1,this._baseInterval={},this._currentDataSetId="",this.resetExtremes(),this.xAxis&&this.xAxis.seriesDataChangeUpdate(this),this.yAxis&&this.yAxis.seriesDataChangeUpdate(this)},e.prototype.validateData=function(){this._baseInterval={};var e=this.dataFields;if(e.valueYShow||e.openValueXShow||e.openValueXShow||e.openValueYShow?this.usesShowFields=!0:this.usesShowFields=!1,this.defineFields(),this.data.length>0&&this.dataChangeUpdate(),t.prototype.validateData.call(this),this.updateItemReaderText(),this.chart&&(!ba(this.dataFields[this._xField])||!ba(this.dataFields[this._yField])))throw Error("Data fields for series \""+(this.name?this.name:this.uid)+"\" are not properly defined.");this.inited&&this.isHidden&&this.hide(0),this.dataGrouped=!1},e.prototype.processDataItem=function(e,i){try{t.prototype.processDataItem.call(this,e,i),this.xAxis.processSeriesDataItem(e,"X"),this.yAxis.processSeriesDataItem(e,"Y"),this.setInitialWorkingValues(e)}catch(s){this._chart&&this._chart.raiseCriticalError(s)}},e.prototype.updateDataItem=function(e){t.prototype.updateDataItem.call(this,e),this.xAxis.processSeriesDataItem(e,"X"),this.yAxis.processSeriesDataItem(e,"Y")},e.prototype.setInitialWorkingValues=function(t){},e.prototype.disposeData=function(){t.prototype.disposeData.call(this);var e=this.xAxis,i=this.yAxis;if(e){var s=this.dataItemsByAxis.getKey(e.uid);s&&s.clear(),e instanceof jb&&this.clearCatAxis(e)}if(i){var a=this.dataItemsByAxis.getKey(i.uid);a&&a.clear(),i instanceof jb&&this.clearCatAxis(i)}},e.prototype.clearCatAxis=function(t){var e=this.uid;t.dataItems.each(function(t){t.seriesDataItems[e]&&(t.seriesDataItems[e]=[])})},e.prototype.defineFields=function(){var t=this.xAxis,e=this.yAxis;if(t&&e){var i=t.axisFieldName,s=i+"X",a="open"+qe(i)+"X",o=e.axisFieldName,r=o+"Y",n="open"+qe(o)+"Y";this._xField=s,this._yField=r,this.dataFields[a]&&(this._xOpenField=a),this.dataFields[n]&&(this._yOpenField=n),this.dataFields[n]||this.baseAxis!=e||(this._yOpenField=r),this.dataFields[a]||this.baseAxis!=t||(this._xOpenField=s),this.stacked&&this.baseAxis==t&&(this._xOpenField=s),this.stacked&&this.baseAxis==e&&(this._yOpenField=r),t instanceof jb&&e instanceof jb&&(this._yOpenField||(this._yOpenField=r)),this._xValueFields=[],this._yValueFields=[],this.addValueField(t,this._xValueFields,this._xField),this.addValueField(t,this._xValueFields,this._xOpenField),this.addValueField(e,this._yValueFields,this._yField),this.addValueField(e,this._yValueFields,this._yOpenField)}},e.prototype.addValueField=function(t,e,i){t instanceof Ba&&ba(this.dataFields[i])&&-1==e.indexOf(i)&&e.push(i)},e.prototype.setCategoryAxisField=function(t,e){ba(this.dataFields[t])||(this.dataFields[t]=e.dataFields.category)},e.prototype.setDateAxisField=function(t,e){ba(this.dataFields[t])||(this.dataFields[t]=e.dataFields.date)},e.prototype.afterDraw=function(){t.prototype.afterDraw.call(this),this.createMask()},e.prototype.createMask=function(){if(this.mainContainer.mask){var t=this.getMaskPath();ga(this.axisRanges.iterator(),function(e){e.axisFill.fillPath&&(e.axisFill.validate(),t+=e.axisFill.fillPath)}),this.mainContainer.mask.path=t}},e.prototype.getMaskPath=function(){return this.xAxis&&this.yAxis?Fc({x:0,y:0,width:this.xAxis.axisLength,height:this.yAxis.axisLength}):""},e.prototype.getAxisField=function(t){return t==this.xAxis?this.xField:t==this.yAxis?this.yField:void 0},e.prototype.validateDataItems=function(){var e=this.chart;e&&(this._maxxX=wa(1e5,2*e.plotContainer.maxWidth),this._maxxY=wa(1e5,2*e.plotContainer.maxHeight));var i=this.xAxis,s=this.yAxis;i&&s&&(i.updateAxisBySeries(),s.updateAxisBySeries()),t.prototype.validateDataItems.call(this),i&&s&&(i.postProcessSeriesDataItems(this),s.postProcessSeriesDataItems(this))},e.prototype.validateDataRange=function(){var e=this.xAxis,i=this.yAxis;e&&i&&(e.dataRangeInvalid&&e.validateDataRange(),i.dataRangeInvalid&&i.validateDataRange()),t.prototype.validateDataRange.call(this)},e.prototype.validate=function(){var e=this.xAxis,i=this.yAxis;if(e&&i){e.invalid&&e.validate(),i.invalid&&i.validate(),this.y=i.pixelY,this.x=e.pixelX,this._showBullets=!0;var s=this.minBulletDistance;aa(s)&&this.baseAxis.axisLength/(this.endIndex-this.startIndex)<s&&(this._showBullets=!1)}if(this.updateTooltip(),!(e instanceof $a&&e.groupData&&!this.dataGrouped||i instanceof $a&&i.groupData&&!this.dataGrouped)){t.prototype.validate.call(this);var a=this.chart,o=this.maskBullets;a&&o&&"XYChart"==a.className&&("vertical"!=a.leftAxesContainer.layout&&"vertical"!=a.rightAxesContainer.layout||(this.yAxis?this.bulletsContainer.mask=this.yAxis.renderer.gridContainer:this.bulletsContainer.mask=void 0),"horizontal"!=a.topAxesContainer.layout&&"horizontal"!=a.bottomAxesContainer.layout||(this.xAxis?this.bulletsContainer.mask=this.xAxis.renderer.gridContainer:this.bulletsContainer.mask=void 0))}},Object.defineProperty(e.prototype,"xAxis",{get:function(){if(this.chart){if(!this._xAxis.get()){var t=this.chart.xAxes.getIndex(0);if(!t)throw Error("There are no X axes on chart.");this.xAxis=t}return this._xAxis.get()}},set:function(t){this.setXAxis(t)},enumerable:!0,configurable:!0}),e.prototype.setXAxis=function(t){var e=this._xAxis.get();e!=t&&(e&&(this.dataItemsByAxis.removeKey(e.uid),this._xAxis.dispose(),e.series.removeValue(this)),this._xAxis.set(t,t.registerSeries(this)),this.dataItemsByAxis.setKey(t.uid,new Ta),this.invalidateData())},Object.defineProperty(e.prototype,"yAxis",{get:function(){if(this.chart){if(!this._yAxis.get()){var t=this.chart.yAxes.getIndex(0);if(!t)throw Error("There are no Y axes on chart.");this.yAxis=t}return this._yAxis.get()}},set:function(t){this.setYAxis(t)},enumerable:!0,configurable:!0}),e.prototype.setYAxis=function(t){var e=this._yAxis.get();e!=t&&(e&&(this.dataItemsByAxis.removeKey(e.uid),this._yAxis.dispose(),e.series.removeValue(this)),this._yAxis.set(t,t.registerSeries(this)),t.chart instanceof Hc&&t.chart.handleYAxisSet(this),this.dataItemsByAxis.setKey(t.uid,new Ta),this.invalidateData())},Object.defineProperty(e.prototype,"baseAxis",{get:function(){var t=this.xAxis,e=this.yAxis;return!this._baseAxis&&t&&e&&(e instanceof $a&&(this._baseAxis=e),t instanceof $a&&(this._baseAxis=t),e instanceof jb&&(this._baseAxis=e),t instanceof jb&&(this._baseAxis=t),this._baseAxis||(this._baseAxis=t)),this._baseAxis},set:function(t){this._baseAxis!=t&&(this._baseAxis=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.addData=function(e,i,s){t.prototype.addData.call(this,e,i,s),this.scrollbarSeries&&this.scrollbarSeries.addData(e,i,!0)},e.prototype.setData=function(e){t.prototype.setData.call(this,e),this.scrollbarSeries&&this.scrollbarSeries.setData(e)},e.prototype.setDataSet=function(e){var i=t.prototype.setDataSet.call(this,e);if(i){this._dataSetChanged=!0;var s=this.dataItems;if(this.resetExtremes(),s&&s.length>0){var a=this.xAxis,o=this.yAxis;this._prevStartIndex=void 0,this._prevEndIndex=void 0,this._startIndex=void 0,this._endIndex=void 0,this.appeared||this.processValues(!1),a instanceof $a&&a==this.baseAxis&&(this._tmin.setKey(a.uid,s.getIndex(0).dateX.getTime()),this._tmax.setKey(a.uid,s.getIndex(s.length-1).dateX.getTime()),this.dispatch("extremeschanged")),o instanceof $a&&o==this.baseAxis&&(this._tmin.setKey(o.uid,s.getIndex(0).dateY.getTime()),this._tmax.setKey(o.uid,s.getIndex(s.length-1).dateY.getTime()),this.dispatch("extremeschanged"))}}return i},e.prototype.processValues=function(e){t.prototype.processValues.call(this,e);var i=this.xAxis,s=this.yAxis;if(i&&s){var a=this.dataItems,o=1/0,r=-1/0,n=1/0,l=-1/0,u=this.startIndex,h=this.endIndex,p=u,d=h;e||(u=0,h=this.dataItems.length);for(var c=u;c<h;c++){var $=a.getIndex(c);this.getStackValue($,e);var m=$.getValue("valueX","stack"),x=$.getValue("valueY","stack");o=Ea($.getMin(this._xValueFields,e,m),o),n=Ea($.getMin(this._yValueFields,e,x),n),r=wa($.getMax(this._xValueFields,e,m),r),l=wa($.getMax(this._yValueFields,e,x),l),this.stacked&&(this.baseAxis==i&&(x<n&&(n=x),x>l&&(l=x)),this.baseAxis==s&&(m<o&&(o=m),m>r&&(r=m)))}i.processSeriesDataItems(),s.processSeriesDataItems();var y=i.uid,g=s.uid;if(this.xAxis instanceof Ba&&(o==1/0||r==-1/0))return this._smin.setKey(y,void 0),this._smax.setKey(y,void 0),void this.dispatchImmediately("selectionextremeschanged");if(this.yAxis instanceof Ba&&(n==1/0||l==-1/0))return this._smin.setKey(g,void 0),this._smax.setKey(g,void 0),void this.dispatchImmediately("selectionextremeschanged");if(!e&&(this._tmin.getKey(y)!=o||this._tmax.getKey(y)!=r||this._tmin.getKey(g)!=n||this._tmax.getKey(g)!=l)){this._tmin.setKey(y,o),this._tmax.setKey(y,r),this._tmin.setKey(g,n),this._tmax.setKey(g,l);var f=this.stackedSeries;f&&(f.isDisposed()?this.stackedSeries=void 0:f.processValues(!1)),this.dispatchImmediately("extremeschanged")}if(u!=p||h!=d){o=1/0,r=-1/0,n=1/0,l=-1/0;for(c=p;c<d;c++){$=a.getIndex(c);this.getStackValue($,e);m=$.getValue("valueX","stack"),x=$.getValue("valueY","stack");o=Ea($.getMin(this._xValueFields,e,m),o),n=Ea($.getMin(this._yValueFields,e,x),n),r=wa($.getMax(this._xValueFields,e,m),r),l=wa($.getMax(this._yValueFields,e,x),l),this.stacked&&(this.baseAxis==i&&(x<n&&(n=x),x>l&&(l=x)),this.baseAxis==s&&(m<o&&(o=m),m>r&&(r=m)))}}if(this.xAxis instanceof Ba&&(o==1/0||r==-1/0))return this._smin.setKey(y,void 0),this._smax.setKey(y,void 0),void this.dispatchImmediately("selectionextremeschanged");if(this.yAxis instanceof Ba&&(n==1/0||l==-1/0))return this._smin.setKey(g,void 0),this._smax.setKey(g,void 0),void this.dispatchImmediately("selectionextremeschanged");if((this._smin.getKey(y)!=o||this._smax.getKey(y)!=r||this._smin.getKey(g)!=n||this._smax.getKey(g)!=l)&&(this._smin.setKey(y,o),this._smax.setKey(y,r),this._smin.setKey(g,n),this._smax.setKey(g,l),this.appeared||0!=this.start||1!=this.end||this.dataItems!=this.mainDataSet)){var v=!1;if(s instanceof Ba&&!(s instanceof $a)){var A=this._tmin.getKey(g);(!aa(A)||(this.usesShowFields||this._dataSetChanged||i instanceof $a&&i.groupData&&this.isShowing)&&n<A||this.stackedSeries&&!this.isHidden)&&(this._tmin.setKey(g,n),v=!0);var b=this._tmax.getKey(g);(!aa(b)||(this.usesShowFields||this._dataSetChanged||i instanceof $a&&i.groupData&&this.isShowing)&&l>b||this.stackedSeries&&!this.isHidden)&&(this._tmax.setKey(g,l),v=!0)}if(i instanceof Ba&&!(i instanceof $a)){A=this._tmin.getKey(y);(!aa(A)||(this.usesShowFields||this._dataSetChanged||s instanceof $a&&s.groupData&&this.isShowing)&&o<A||this.stackedSeries&&!this.isHidden)&&(this._tmin.setKey(y,o),v=!0);b=this._tmax.getKey(y);(!aa(b)||(this.usesShowFields||this._dataSetChanged||s instanceof $a&&s.groupData&&this.isShowing)&&r>b||this.stackedSeries&&!this.isHidden)&&(this._tmax.setKey(y,r),v=!0)}v&&this.dispatchImmediately("extremeschanged"),0==this.start&&1==this.end&&(this._dataSetChanged=!1),this.dispatchImmediately("selectionextremeschanged")}!e&&this.stacked&&this.processValues(!0)}},e.prototype.hideTooltip=function(e){t.prototype.hideTooltip.call(this,e),this.returnBulletDefaultState(),this._prevTooltipDataItem=void 0},e.prototype.showTooltipAtPosition=function(t,e){var i;if(this.visible&&!this.isHiding&&!this.isShowing){var s=this._xAxis.get(),a=this._yAxis.get();s==this.baseAxis&&(i=s.getSeriesDataItem(this,s.toAxisPosition(t),this.snapTooltip)),a==this.baseAxis&&(i=a.getSeriesDataItem(this,a.toAxisPosition(e),this.snapTooltip));var o=this.showTooltipAtDataItem(i);if(o)return o;if(!this.tooltipText&&!this.tooltipHTML)return}this.hideTooltip()},e.prototype.getAdjustedXLocation=function(t,e,i){return t.locations[e]},e.prototype.getAdjustedYLocation=function(t,e,i){return t.locations[e]},e.prototype.showTooltipAtDataItem=function(t){var e,i,s=this.chart.cursor;if(s&&s.hideSeriesTooltipsOnSelection&&s.selection.visible&&s.downPoint)this.hideTooltip();else if(this.returnBulletDefaultState(t),t&&t.visible){if(this.updateLegendValue(t),this.cursorTooltipEnabled){this.tooltipDataItem=t;var a=this.tooltipXField,o=this.tooltipYField;if(ba(t[a])&&ba(t[o])){var r=this.getPoint(t,a,o,this.getAdjustedXLocation(t,a),this.getAdjustedYLocation(t,o));if(r&&("XYChart"!=this.chart.className||!(r.y<-1||r.y>this.yAxis.pixelHeight+1||r.x<-1||r.x>this.xAxis.pixelWidth+1))){if(this.tooltipX=r.x,this.tooltipY=r.y,this._prevTooltipDataItem!=t&&(this.dispatchImmediately("tooltipshownat",{type:"tooltipshownat",target:this,dataItem:t}),this._prevTooltipDataItem=t),this.cursorHoverEnabled)try{for(var n=be(t.sprites),l=n.next();!l.done;l=n.next()){var u=l.value;!u.parent.visible||u.isHidden||u.__disabled||u.disabled||u.isHiding||(u.interactions.isRealHover||(u.dispatchImmediately("over"),u.interactions.isRealHover=!0),u.isHover=!0)}}catch(h){e={error:h}}finally{try{l&&!l.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}return this.showTooltip()?Yb({x:r.x,y:r.y},this):void 0}}}}else this.updateLegendValue(t,!0)},e.prototype.returnBulletDefaultState=function(t){var e,i;if(this._prevTooltipDataItem&&this._prevTooltipDataItem!=t)try{for(var s=be(this._prevTooltipDataItem.sprites),a=s.next();!a.done;a=s.next()){var o=a.value;if(o.isDisposed())this._prevTooltipDataItem=void 0;else{var r=o.interactions.isRealHover;o.isHover=!1,r&&o.dispatchImmediately("out")}}}catch(n){e={error:n}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}},e.prototype.shouldCreateBullet=function(t,e){var i=e.xField;ba(i)||(i=this.xField);var s=e.yField;if(ba(s)||(s=this.yField),this.xAxis instanceof Ba&&!t.hasValue([i])||this.yAxis instanceof Ba&&!t.hasValue([s]))return!1;if(e.disabled){var a=e.propertyFields.disabled,o=t.dataContext;return!(!o||!1!==o[a])}return!0},e.prototype.updateTooltip=function(){this.hideTooltipWhileZooming||!this.tooltip||this.tooltip.isHidden||this.isHiding||this.isHidden||!this.tooltipDataItem||this.showTooltipAtDataItem(this.tooltipDataItem)},e.prototype.positionBullet=function(e){t.prototype.positionBullet.call(this,e);var i=e.dataItem,s=e.xField;ba(s)||(s=this.xField);var a=e.yField;ba(a)||(a=this.yField);var o=this.xAxis,r=this.yAxis;if(o instanceof Ba&&!i.hasValue([s])||r instanceof Ba&&!i.hasValue([a]))e.visible=!1;else{var n=this.getBulletLocationX(e,s),l=this.getBulletLocationY(e,a);if(this.getPoint(i,s,a,n,l)){var u=this.xOpenField,h=this.yOpenField,p=void 0,d=void 0;if(o instanceof $a){aa(n)||(n=0);var c=void 0,$=i.getWorkingValue(s);if(u?c=i.getWorkingValue(u):o==this.baseAxis&&(c=o.baseValue),aa(c)||(c=$),(c+=A=i.getValue("valueX","stack"))==($+=A)){var m=o.baseInterval,x=o.dateFormatter;c=rb(new Date(c),m.timeUnit,m.count,x.firstDayOfWeek,x.utc,void 0,x.timezoneMinutes).getTime(),$=Eb(new Date(c),m.timeUnit,m.count,x.utc).getTime()}var y=void 0;y=o==this.baseAxis?c+($-c)*n:c+($-c)*(1-n),p=o.valueToPosition(y)}else if(o instanceof Ba){aa(n)||(n=0);c=void 0,$=i.getWorkingValue(s);c=u?i.getWorkingValue(u):o.baseValue;y=(c+=A=i.getValue("valueX","stack"))+(($+=A)-c)*(1-n);p=o.valueToPosition(y)}else if(o instanceof jb){var g=this.getAdjustedXLocation(i,s,e.locationX),f=this.getAdjustedXLocation(i,u,e.locationX);p=o.categoryToPosition(i[s],g);var v=void 0;u&&(v=o.categoryToPosition(i[u],f)),aa(v)||(v=1),p=v+(p-v)*n}if(r instanceof $a){aa(l)||(l=0);c=void 0,$=i.getWorkingValue(a);if(h?c=i.getWorkingValue(h):r==this.baseAxis&&(c=r.baseValue),aa(c)||(c=$),(c+=A=i.getValue("valueY","stack"))==($+=A)){m=r.baseInterval,x=r.dateFormatter;c=rb(new Date(c),m.timeUnit,m.count,x.firstDayOfWeek,x.utc,void 0,x.timezoneMinutes).getTime(),$=Eb(new Date(c),m.timeUnit,m.count,x.utc).getTime()}y=void 0;y=r==this.baseAxis?c+($-c)*l:c+($-c)*(1-l),d=r.valueToPosition(y)}else if(r instanceof Ba){aa(l)||(l=0);var A;c=void 0,$=i.getWorkingValue(a);c=h?i.getWorkingValue(h):r.baseValue;y=(c+=A=i.getValue("valueY","stack"))+(($+=A)-c)*(1-l);d=r.valueToPosition(y)}else if(r instanceof jb){d=r.categoryToPosition(i[a],l);var b=this.getAdjustedYLocation(i,a,e.locationY),_=this.getAdjustedYLocation(i,h,e.locationY);d=r.categoryToPosition(i[a],b);var V=void 0;h&&(V=r.categoryToPosition(i[h],_)),aa(V)||(V=1),d=V+(d-V)*l}e.visible=!0,this.positionBulletReal(e,p,d)}else e.visible=!1}},e.prototype.positionBulletReal=function(t,e,i){t.x=this.xAxis.renderer.positionToPoint(e,i).x,t.y=this.yAxis.renderer.positionToPoint(i,e).y},e.prototype.getBulletLocationX=function(t,e){var i=t.locationX,s=t.dataItem;return aa(i)||(i=s.workingLocations[e]),i},e.prototype.getBulletLocationY=function(t,e){var i=t.locationY,s=t.dataItem;return aa(i)||(i=s.workingLocations[e]),i},e.prototype.updateStacking=function(){var t=this;this.invalidateDataItems(),this.chart&&this.chart.series.each(function(e){e.baseAxis==t.baseAxis&&(e.stackedSeries=void 0,e.invalidateDataItems(),e.invalidateProcessedData())})},Object.defineProperty(e.prototype,"stacked",{get:function(){return this.getPropertyValue("stacked")},set:function(t){if(this.setPropertyValue("stacked",t,!0)){this.updateStacking();var e,i=this.xAxis,s=this.yAxis;if(!t)i!=this.baseAxis&&i instanceof Ba&&(e=this.xField),s!=this.baseAxis&&s instanceof Ba&&(e=this.yField),e&&this.dataItems.each(function(t){t.setCalculatedValue(e,0,"stack")})}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"snapTooltip",{get:function(){return this.getPropertyValue("snapTooltip")},set:function(t){this.setPropertyValue("snapTooltip",t)},enumerable:!0,configurable:!0}),e.prototype.show=function(e){var i,s=this;this.appeared&&this.xAxis instanceof $a&&this.xAxis.groupData&&(this._tmin.setKey(this.yAxis.uid,void 0),this._tmax.setKey(this.yAxis.uid,void 0)),this.appeared&&this.yAxis instanceof $a&&this.yAxis.groupData&&(this._tmin.setKey(this.xAxis.uid,void 0),this._tmax.setKey(this.xAxis.uid,void 0)),this.xAxis instanceof Ba&&this.xAxis!=this.baseAxis&&(i=this._xValueFields),this.yAxis instanceof Ba&&this.yAxis!=this.baseAxis&&(i=this._yValueFields);var a,o=this.startIndex,r=this.endIndex,n=0,l=this.defaultState.transitionDuration;aa(e)&&(l=e),za.animationsEnabled||(l=0),ga(Oc(this.dataItems.iterator()),function(t){var e=t[0],u=t[1],h=l;(e<s.startIndex-10||e>s.endIndex+10)&&(h=0,n=0),s.sequencedInterpolation&&h>0&&(n=s.sequencedInterpolationDelay*e+l*(e-o)/(r-o)),a=u.show(h,n,i)}),this.dataSets.each(function(t,e){e!=s.dataItems&&e.each(function(t){t.events.disable(),t.show(0,0,i),t.events.enable()})}),this.mainDataSet!=this.dataItems&&this.mainDataSet.each(function(t){t.events.disable(),t.show(0,0,i),t.events.enable()});var u=t.prototype.show.call(this,e);return a&&!a.isFinished()&&(u=a),this.hidden&&(this.dispatchImmediately("selectionextremeschanged"),this.hidden=!1),u},e.prototype.hide=function(e){var i,s,a=this,o=this.xAxis;o instanceof Ba&&o!=this.baseAxis&&(i=this._xValueFields,s=this.stacked||o.minZoomed<o.baseValue&&o.maxZoomed>o.baseValue||this.stackedSeries?o.baseValue:o.min);var r=this.yAxis;r instanceof Ba&&r!=this.baseAxis&&(i=this._yValueFields,s=this.stacked||r.minZoomed<r.baseValue&&r.maxZoomed>r.baseValue||this.stackedSeries?r.baseValue:r.min);var n=this.startIndex,l=this.endIndex,u=this.hiddenState.transitionDuration;aa(e)&&(u=e),za.animationsEnabled||(u=0);var h,p=0;ga(Oc(this.dataItems.iterator()),function(t){var e=t[0],o=t[1],r=u;(e<a.startIndex-10||e>a.endIndex+10)&&(r=0),0==r?o.hide(0,0,s,i):(a.sequencedInterpolation&&r>0&&(p=a.sequencedInterpolationDelay*e+u*(e-n)/(l-n)),h=o.hide(r,p,s,i))}),this.dataSets.each(function(t,e){e!=a.dataItems&&e.each(function(t){t.events.disable(),t.hide(0,0,s,i),t.events.enable()})}),this.mainDataSet!=this.dataItems&&this.mainDataSet.each(function(t){t.events.disable(),t.hide(0,0,s,i),t.events.enable()});var d=t.prototype.hide.call(this,u);return d&&!d.isFinished()&&d.delay(p),h&&!h.isFinished()&&(d=h),this.validateDataElements(),d},e.prototype.handleDataItemWorkingValueChange=function(e,i){t.prototype.handleDataItemWorkingValueChange.call(this,e,i);var s=this.baseAxis.series;ga(s.iterator(),function(t){(t.stacked||t.stackedSeries)&&t.invalidateProcessedData()})},e.prototype.getStackValue=function(t,e){var i=this,s=this.xAxis,a=this.yAxis;if(this.stacked&&s&&a){var o,r=this.chart,n=r.series.indexOf(this);s!=this.baseAxis&&s instanceof Ba&&(o=this.xField),a!=this.baseAxis&&a instanceof Ba&&(o=this.yField),o&&(t.setCalculatedValue(o,0,"stack"),Pb(r.series.range(0,n).backwards().iterator(),function(r){if(r.xAxis==s&&r.yAxis==a&&r.className==i.className){r.stackedSeries=i;var n=r.dataItems.getIndex(t.index);if(n&&n.hasValue(i._xValueFields)&&n.hasValue(i._yValueFields)){var l=t.getValue(o),u=void 0,h=n.getValue(o)+n.getValue(o,"stack");if(u=e?n.getWorkingValue(o)+n.getValue(o,"stack"):n.getValue(o)+n.getValue(o,"stack"),!i.stackToNegative)return t.setCalculatedValue(o,u,"stack"),!1;if(l>=0&&h>=0||l<0&&h<0)return t.setCalculatedValue(o,u,"stack"),!1}else if(!r.stacked)return!1}return!0}))}},Object.defineProperty(e.prototype,"stackToNegative",{get:function(){return this.getPropertyValue("stackToNegative")},set:function(t){this.setPropertyValue("stackToNegative",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xField",{get:function(){return this._xField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yField",{get:function(){return this._yField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xOpenField",{get:function(){return this._xOpenField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yOpenField",{get:function(){return this._yOpenField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipXField",{get:function(){return this._tooltipXField?this._tooltipXField:this._xField},set:function(t){this._tooltipXField=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipYField",{get:function(){return this._tooltipYField?this._tooltipYField:this._yField},set:function(t){this._tooltipYField=t},enumerable:!0,configurable:!0}),e.prototype.min=function(t){return this._tmin.getKey(t.uid)},e.prototype.max=function(t){return this._tmax.getKey(t.uid)},e.prototype.selectionMin=function(t){return this._smin.getKey(t.uid)},e.prototype.selectionMax=function(t){return this._smax.getKey(t.uid)},e.prototype.processConfig=function(e){if(e){if(ba(e.baseAxis)&&Ca(e.baseAxis)&&(this.map.hasKey(e.baseAxis)?e.baseAxis=this.map.getKey(e.baseAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+")] No axis with id \""+e.baseAxis+"\" found for `baseAxis`."),delete e.baseAxis)),ba(e.xAxis)&&Ca(e.xAxis)&&(this.map.hasKey(e.xAxis)?e.xAxis=this.map.getKey(e.xAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+")] No axis with id \""+e.xAxis+"\" found for `xAxis`."),delete e.xAxis)),ba(e.yAxis)&&Ca(e.yAxis)&&(this.map.hasKey(e.yAxis)?e.yAxis=this.map.getKey(e.yAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+")] No axis with id \""+e.yAxis+"\" found for `yAxis`."),delete e.yAxis)),ba(e.axisRanges)&&mb(e.axisRanges))for(var i=0,s=e.axisRanges.length;i<s;i++){var a=e.axisRanges[i];ba(a.type)||(a.type="AxisDataItem"),ba(a.axis)&&Ca(a.axis)&&this.map.hasKey(a.axis)?a.component=this.map.getKey(a.axis):ba(a.component)&&Ca(a.component)&&this.map.hasKey(a.component)&&(a.component=this.map.getKey(a.component))}ba(e.dataFields)&&Wa(e.dataFields)||this.processingErrors.push("`dataFields` is not set for series ["+(this.name||"unnamed")+"]")}t.prototype.processConfig.call(this,e)},e.prototype.getPoint=function(t,e,i,s,a,o,r){if(this.xAxis&&this.yAxis){var n=this.xAxis.getX(t,e,s),l=this.yAxis.getY(t,i,a);return{x:n=na(n,-this._maxxX,this._maxxX),y:l=na(l,-this._maxxY,this._maxxY)}}},e.prototype.updateItemReaderText=function(){if(!this._itemReaderTextChanged){var t="";sa(this.dataFields,function(e,i){t+="{"+e+"} "}),this.itemReaderText=t,this._itemReaderTextChanged=!1}},Object.defineProperty(e.prototype,"cursorTooltipEnabled",{get:function(){return this.getPropertyValue("cursorTooltipEnabled")},set:function(t){this.setPropertyValue("cursorTooltipEnabled",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorHoverEnabled",{get:function(){return this.getPropertyValue("cursorHoverEnabled")},set:function(t){this.setPropertyValue("cursorHoverEnabled",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"excludeFromTotal",{get:function(){return this.getPropertyValue("excludeFromTotal")},set:function(t){this.setPropertyValue("excludeFromTotal",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideTooltipWhileZooming",{get:function(){return this.getPropertyValue("hideTooltipWhileZooming")},set:function(t){this.setPropertyValue("hideTooltipWhileZooming",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(t){this.setPropertyValue("maskBullets",t);var e=this.chart;e&&(this.bulletsContainer.parent=t?e.bulletsContainer:e.axisBulletsContainer)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){this.groupFields=tc(e.groupFields,{}),t.prototype.copyFrom.call(this,e)},e.prototype.dispose=function(){this.scrollbarSeries&&this.scrollbarSeries.dispose(),t.prototype.dispose.call(this)},e}(Se);ca.registeredClasses.XYSeries=Yc,ca.registeredClasses.XYSeriesDataItem=Xe;var Zc=function(e){function t(){var t=e.call(this)||this;t._chart=new nb,t.className="XYChartScrollbar";var i=new Ia;t.padding(0,0,0,0);var r=t.createChild(Hc);if(r.shouldClone=!1,r.margin(0,0,0,0),r.padding(0,0,0,0),r.interactionsEnabled=!1,t._scrollbarChart=r,!Id()){var a=new Pe;a.filterUnits="userSpaceOnUse",r.plotContainer.filters.push(a)}t._disposers.push(t._scrollbarChart),t.minHeight=60,t.minWidth=60;var o=t.createChild(xa);o.shouldClone=!1,o.setElement(t.paper.add("path")),o.fill=i.getFor("background"),o.fillOpacity=.8,o.interactionsEnabled=!1,o.isMeasured=!1,o.toBack(),t._unselectedOverlay=o,t._disposers.push(t._unselectedOverlay),r.toBack(),t.background.cornerRadius(0,0,0,0);var s=t.thumb.background;s.cornerRadius(0,0,0,0),s.fillOpacity=0,s.fill=i.getFor("background");var n=s.states.getKey("hover");n&&(n.properties.fillOpacity=.2);var l=s.states.getKey("down");return l&&(l.properties.fillOpacity=.4),t._disposers.push(t._chart),t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"series",{get:function(){return this._series||(this._series=new Fa,this._disposers.push(this._series.events.on("inserted",this.handleSeriesAdded,this,!1)),this._disposers.push(this._series.events.on("removed",this.handleSeriesRemoved,this,!1))),this._series},enumerable:!0,configurable:!0}),t.prototype.handleSeriesAdded=function(e){var t=this,i=e.newValue;if(i.xAxis&&i.yAxis){var r=this.scrollbarChart;r.zoomOutButton.disabled=!0,this.chart=i.chart,r.dateFormatter.inputDateFormat=this.chart.dateFormatter.inputDateFormat,r.language.locale=this.chart.language.locale;var a=!0,o=!0;ga(this.series.iterator(),function(e){e!=i&&(e.xAxis==i.xAxis&&t.scrollbarChart.xAxes.length>0&&(a=!1),e.yAxis==i.yAxis&&t.scrollbarChart.yAxes.length>0&&(o=!1))}),i.events.on("beforedisposed",function(){t.series.removeValue(i)});var s=new Ia,n=i.clone();if((za.onlyShowOnViewport||za.queue)&&this.addDisposer(this.chart.events.on("removedfromqueue",function(){r.invalidateData()})),Id()&&(n.stroke=ua("#aaaaaa"),n.fill=n.stroke,n.propertyFields.fill=void 0,n.propertyFields.stroke=void 0),i.scrollbarSeries=n,a){var l=i.xAxis.clone();if(r.xAxes.moveValue(l),l.title.disabled=!0,l.rangeChangeDuration=0,($=l.renderer).ticks.template.disabled=!0,$.inside=!0,$.labels.template.inside=!0,$.line.strokeOpacity=0,$.minLabelPosition=.02,$.maxLabelPosition=.98,$.line.disabled=!0,$.axisFills.template.disabled=!0,$.baseGrid.disabled=!0,$.grid.template.strokeOpacity=.05,$.minWidth=void 0,$.minHeight=void 0,$.padding(0,0,0,0),$.chart=r,$.margin(0,0,0,0),l.width=ia(100),$.labels.template.fillOpacity=.5,l.maxZoomCount=void 0,l.minZoomCount=void 0,l instanceof $a){var d=l,p=i.xAxis;d.groupCount=5*p.groupCount,d.min=void 0,d.max=void 0,this._disposers.push(d.clonedFrom.events.on("extremeschanged",function(){aa(d.clonedFrom.minDefined)&&(d.min=d.clonedFrom.minDefined),aa(d.clonedFrom.maxDefined)&&(d.max=d.clonedFrom.maxDefined)},void 0,!1))}else if(l instanceof Ba){var c=l;c.min=void 0,c.max=void 0,aa(c.clonedFrom.minDefined)||(c.min=void 0),aa(c.clonedFrom.maxDefined)||(c.max=void 0),this._disposers.push(c.clonedFrom.events.on("extremeschanged",function(){aa(c.clonedFrom.minDefined)&&(c.min=c.clonedFrom.min),aa(c.clonedFrom.maxDefined)&&(c.max=c.clonedFrom.max)},void 0,!1))}n.xAxis=l}else this.scrollbarChart.xAxes.each(function(e){e.clonedFrom==i.xAxis&&(n.xAxis=e)});if(o){var $,m=i.yAxis.clone();if(r.yAxes.moveValue(m),m.title.disabled=!0,m.rangeChangeDuration=0,($=m.renderer).ticks.template.disabled=!0,$.inside=!0,$.labels.template.inside=!0,$.line.strokeOpacity=0,$.minLabelPosition=.02,$.maxLabelPosition=.98,$.line.disabled=!0,$.axisFills.template.disabled=!0,$.grid.template.stroke=s.getFor("background"),$.baseGrid.disabled=!0,$.grid.template.strokeOpacity=.05,$.minWidth=void 0,$.minHeight=void 0,$.chart=r,$.padding(0,0,0,0),$.margin(0,0,0,0),m.height=ia(100),$.labels.template.fillOpacity=.5,n.yAxis=m,m.maxZoomCount=void 0,m.minZoomCount=void 0,m instanceof $a){var h=m;h.min=void 0,h.max=void 0;p=i.yAxis;m.groupCount=5*p.groupCount,this._disposers.push(h.clonedFrom.events.on("extremeschanged",function(){aa(h.clonedFrom.minDefined)&&(h.min=h.clonedFrom.minDefined),aa(h.clonedFrom.maxDefined)&&(h.max=h.clonedFrom.maxDefined)}))}else if(m instanceof Ba){var u=m;u.min=void 0,u.max=void 0,aa(u.clonedFrom.minDefined)||(u.min=void 0),aa(u.clonedFrom.maxDefined)||(u.max=void 0),this._disposers.push(u.clonedFrom.events.on("extremeschanged",function(){aa(u.clonedFrom.minDefined)&&(u.min=u.clonedFrom.minDefined),aa(u.clonedFrom.maxDefined)&&(u.max=u.clonedFrom.maxDefined)}))}}else this.scrollbarChart.yAxes.each(function(e){e.clonedFrom==i.yAxis&&(n.yAxis=e)});n.rangeChangeDuration=0,n.interpolationDuration=0,n.defaultState.transitionDuration=0,n.showOnInit=!1,this._disposers.push(n.events.on("validated",this.zoomOutAxes,this,!1)),this._disposers.push(i.events.on("datavalidated",function(){n.data!=i.data&&(n.data=i.data)},void 0,!1)),n.defaultState.properties.visible=!0,r.series.push(n),this.updateByOrientation()}},t.prototype.updateByOrientation=function(){var e=this;this._scrollbarChart&&(ga(this._scrollbarChart.xAxes.iterator(),function(t){var i=t.renderer;"vertical"==e.orientation?(i.grid.template.disabled=!0,i.labels.template.disabled=!0,i.minGridDistance=10):(i.grid.template.disabled=!1,i.labels.template.disabled=!1,i.minGridDistance=t.clonedFrom.renderer.minGridDistance)}),ga(this._scrollbarChart.yAxes.iterator(),function(t){var i=t.renderer;"horizontal"==e.orientation?(i.grid.template.disabled=!0,i.labels.template.disabled=!0,i.minGridDistance=10):(i.grid.template.disabled=!1,i.labels.template.disabled=!1,i.minGridDistance=t.clonedFrom.renderer.minGridDistance)}))},t.prototype.handleSeriesRemoved=function(e){var t=e.oldValue,i=this.scrollbarChart;i.series.each(function(e){e&&e.clonedFrom==t&&i.series.removeValue(e)}),0==i.series.length&&(i.xAxes.clear(),i.yAxes.clear());try{t.events.off("validated",this.zoomOutAxes,this)}catch(r){}},Object.defineProperty(t.prototype,"scrollbarChart",{get:function(){return this._scrollbarChart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart.get()},set:function(e){this._chart.get()!==e&&(this._chart.set(e,e.events.on("datavalidated",this.handleDataChanged,this,!1)),this.handleDataChanged(),this._scrollbarChart.dataProvider=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unselectedOverlay",{get:function(){return this._unselectedOverlay},enumerable:!0,configurable:!0}),t.prototype.handleDataChanged=function(){this.chart.data!=this.scrollbarChart.data?this.scrollbarChart.data=this.chart.data:this.scrollbarChart.invalidateRawData()},t.prototype.zoomOutAxes=function(){var e=this.scrollbarChart;ga(e.xAxes.iterator(),function(e){e.zoom({start:0,end:1},!0,!0)}),ga(e.yAxes.iterator(),function(e){e.zoom({start:0,end:1},!0,!0)})},t.prototype.updateThumb=function(){if(e.prototype.updateThumb.call(this),this._unselectedOverlay){var t=this.thumb,i=t.pixelX||0,r=t.pixelY||0,a=t.pixelWidth||0,o=t.pixelHeight||0,s="";"horizontal"==this.orientation?(s=Fc({x:-1,y:0,width:i,height:o}),s+=Fc({x:i+a,y:0,width:(this.pixelWidth||0)-i-a,height:o})):(s=Fc({x:0,y:0,width:a,height:r}),s+=Fc({x:0,y:r+o,width:a,height:(this.pixelHeight||0)-r-o})),this._unselectedOverlay.path=s}},t.prototype.processConfig=function(t){if(t&&ba(t.series)&&mb(t.series))for(var i=0,r=t.series.length;i<r;i++){var a=t.series[i];if(ba(a)&&Ca(a)){if(!this.map.hasKey(a))throw Error("XYChartScrollbar error: Series with id `"+a+"` does not exist.");t.series[i]=this.map.getKey(a)}}e.prototype.processConfig.call(this,t)},t}(Le);ca.registeredClasses.XYChartScrollbar=Zc;var lg=function(t){function e(){var e=t.call(this)||this;return e.className="XYChartDataItem",e.applyTheme(),e}return da(e,t),e}(vi);var Hc=function(t){function e(){var e=t.call(this)||this;e._axisRendererX=vc,e._axisRendererY=dc,e._seriesPoints=[],e.className="XYChart",e.maskBullets=!0,e.arrangeTooltips=!0;var i=e.chartContainer;i.layout="vertical",e.padding(15,15,15,15);var r=i.createChild(oa);r.shouldClone=!1,r.layout="vertical",r.width=ia(100),r.zIndex=1,e.topAxesContainer=r;var o=i.createChild(oa);o.shouldClone=!1,o.layout="horizontal",o.width=ia(100),o.height=ia(100),o.zIndex=0,e.yAxesAndPlotContainer=o;var s=i.createChild(oa);s.shouldClone=!1,s.width=ia(100),s.layout="vertical",s.zIndex=1,e.bottomAxesContainer=s;var a=o.createChild(oa);a.shouldClone=!1,a.layout="horizontal",a.height=ia(100),a.contentAlign="right",a.events.on("transformed",e.updateXAxesMargins,e,!1),a.zIndex=1,e.leftAxesContainer=a;var n=o.createChild(oa);n.shouldClone=!1,n.height=ia(100),n.width=ia(100),n.background.fillOpacity=0,e.plotContainer=n,e.mouseWheelBehavior="none",e._cursorContainer=n;var p=o.createChild(oa);p.shouldClone=!1,p.layout="horizontal",p.height=ia(100),p.zIndex=1,p.events.on("transformed",e.updateXAxesMargins,e,!1),e.rightAxesContainer=p,e.seriesContainer.parent=n,e.bulletsContainer.parent=n;var h=n.createChild(li);h.shouldClone=!1,h.align="right",h.valign="top",h.zIndex=Number.MAX_SAFE_INTEGER,h.marginTop=5,h.marginRight=5,h.hide(0),e.zoomOutButton=h;var l=e.plotContainer.createChild(oa);return l.shouldClone=!1,l.width=ia(100),l.height=ia(100),l.isMeasured=!1,l.zIndex=4,l.layout="none",e.axisBulletsContainer=l,e._bulletMask=e.plotContainer,e.events.on("beforedatavalidated",function(){e.series.each(function(t){t.dataGrouped=!1,t._baseInterval={}})},e,!1),e.applyTheme(),e}return da(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),this.zoomOutButton.exportable=!1,ba(this.readerTitle)||(this.readerTitle=this.language.translate("X/Y chart"))},e.prototype.draw=function(){t.prototype.draw.call(this),this.seriesContainer.toFront(),this.bulletsContainer.toFront(),this.maskBullets&&(this.bulletsContainer.mask=this._bulletMask),this.updateSeriesLegend()},e.prototype.updatePlotElements=function(){ga(this.series.iterator(),function(t){t.invalidate()})},e.prototype.validateData=function(){0==this._parseDataFrom&&(ga(this.xAxes.iterator(),function(t){t.dataChangeUpdate()}),ga(this.yAxes.iterator(),function(t){t.dataChangeUpdate()}),ga(this.series.iterator(),function(t){t.dataChangeUpdate()})),t.prototype.validateData.call(this)},e.prototype.updateXAxesMargins=function(){var t=this.leftAxesContainer.measuredWidth,e=this.rightAxesContainer.measuredWidth,i=this.bottomAxesContainer;i.paddingLeft==t&&i.paddingRight==e||(i.paddingLeft=t,i.paddingRight=e);var r=this.topAxesContainer;r.paddingLeft==t&&r.paddingRight==e||(r.paddingLeft=t,r.paddingRight=e)},e.prototype.reinit=function(){t.prototype.reinit.call(this),this.series.each(function(t){t.appeared=!1})},e.prototype.handleXAxisChange=function(t){this.updateXAxis(t.target)},e.prototype.handleYAxisChange=function(t){this.updateYAxis(t.target)},e.prototype.processXAxis=function(t){var e=t.newValue;e.chart=this,e.renderer||(e.renderer=new this._axisRendererX,e.renderer.observe(["opposite","inside","inversed","minGridDistance"],this.handleXAxisChange,this,!1)),e.axisLetter="X",e.events.on("startendchanged",this.handleXAxisRangeChange,this,!1),e.dataProvider=this,this.updateXAxis(e.renderer),this.processAxis(e)},e.prototype.processYAxis=function(t){var e=t.newValue;e.chart=this,e.renderer||(e.renderer=new this._axisRendererY,e.renderer.observe(["opposite","inside","inversed","minGridDistance"],this.handleYAxisChange,this,!1)),e.axisLetter="Y",e.events.on("startendchanged",this.handleYAxisRangeChange,this,!1),e.dataProvider=this,this.updateYAxis(e.renderer),this.processAxis(e)},e.prototype.handleXAxisRangeChange=function(){var t=this.getCommonAxisRange(this.xAxes);this.scrollbarX&&this.zoomAxes(this.xAxes,t,!0),this.toggleZoomOutButton(),this.updateScrollbar(this.scrollbarX,t)},e.prototype.toggleZoomOutButton=function(){if(this.zoomOutButton){var t=!1;Pb(this.xAxes.iterator(),function(e){if(e.toggleZoomOutButton)if(e.maxZoomCount>0){var i=e.maxZoomFactor/e.maxZoomCount;if(ha(e.end-e.start,3)<1/i)return t=!0,!1}else if(ha(e.start,3)>0||ha(e.end,3)<1)return t=!0,!1;return!0}),Pb(this.yAxes.iterator(),function(e){if(e.toggleZoomOutButton){if(e.maxZoomCount>0){var i=e.maxZoomFactor/e.maxZoomCount;if(ha(e.end-e.start,3)<1/i)return t=!0,!1}else if(ha(e.start,3)>0||ha(e.end,3)<1)return t=!0,!1;return!0}}),this.seriesAppeared||(t=!1),t?this.zoomOutButton.show():this.zoomOutButton.hide()}},e.prototype.seriesAppeared=function(){var t=!1;return ga(this.series.iterator(),function(e){if(!e.appeared)return t=!1,!1}),t},e.prototype.handleYAxisRangeChange=function(){var t=this.getCommonAxisRange(this.yAxes);this.scrollbarY&&this.zoomAxes(this.yAxes,t,!0),this.toggleZoomOutButton(),this.updateScrollbar(this.scrollbarY,t)},e.prototype.updateScrollbar=function(t,e){t&&(t.skipRangeEvents(),t.start=e.start,t.end=e.end)},e.prototype.getCommonAxisRange=function(t){var e,i;return t.each(function(t){if(!t.zoomable||t instanceof Ba&&t.syncWithAxis);else{var r=t.start,o=t.end;t.renderer.inversed&&(r=1-t.end,o=1-t.start),(!aa(e)||r<e)&&(e=r),(!aa(i)||o>i)&&(i=o)}}),{start:e,end:i}},e.prototype.updateXAxis=function(t){var e=t.axis;t.opposite?(e.parent=this.topAxesContainer,e.toFront()):(e.parent=this.bottomAxesContainer,e.toBack()),e.renderer&&e.renderer.processRenderer()},e.prototype.updateYAxis=function(t){var e=t.axis;t.opposite?(e.parent=this.rightAxesContainer,e.toBack()):(e.parent=this.leftAxesContainer,e.toFront()),e.renderer&&e.renderer.processRenderer()},e.prototype.processAxis=function(t){var e=this;t instanceof jb&&this._dataUsers.moveValue(t);var i=t.renderer;i.gridContainer.parent=this.plotContainer,i.gridContainer.toBack(),i.breakContainer.parent=this.plotContainer,i.breakContainer.toFront(),i.breakContainer.zIndex=10,t.addDisposer(new La(function(){e.dataUsers.removeValue(t)})),i.bulletsContainer.parent=this.axisBulletsContainer,this._disposers.push(t.events.on("positionchanged",function(){var r=Hb({x:0,y:0},t,e.axisBulletsContainer);t.renderer instanceof dc&&(i.bulletsContainer.y=r.y),t.renderer instanceof vc&&(i.bulletsContainer.x=r.x)},void 0,!1)),this.plotContainer.events.on("maxsizechanged",function(){e.inited&&(t.invalidateDataItems(),e.updateSeriesMasks())},t,!1)},e.prototype.updateSeriesMasks=function(){Id()&&this.series.each(function(t){var e=t.mainContainer.mask;t.mainContainer.mask=void 0,t.mainContainer.mask=e})},e.prototype.handleSeriesRemoved=function(e){var i=e.oldValue;i&&(i.xAxis&&(i.xAxis.series.removeValue(i),i.xAxis.invalidateProcessedData()),i.yAxis&&(i.yAxis.series.removeValue(i),i.yAxis.invalidateProcessedData()),this.series.each(function(t){t.resetExtremes()})),t.prototype.handleSeriesRemoved.call(this,e)},Object.defineProperty(e.prototype,"xAxes",{get:function(){return this._xAxes||(this._xAxes=new Fa,this._xAxes.events.on("inserted",this.processXAxis,this,!1),this._xAxes.events.on("removed",this.handleAxisRemoval,this,!1),this._disposers.push(new Sa(this._xAxes,!1))),this._xAxes},enumerable:!0,configurable:!0}),e.prototype.handleAxisRemoval=function(t){var e=t.oldValue;this.dataUsers.removeValue(e),e.autoDispose&&e.dispose()},Object.defineProperty(e.prototype,"yAxes",{get:function(){return this._yAxes||(this._yAxes=new Fa,this._yAxes.events.on("inserted",this.processYAxis,this,!1),this._yAxes.events.on("removed",this.handleAxisRemoval,this,!1),this._disposers.push(new Sa(this._yAxes,!1))),this._yAxes},enumerable:!0,configurable:!0}),e.prototype.handleSeriesAdded=function(e){try{t.prototype.handleSeriesAdded.call(this,e);var i=e.newValue;0!=this.xAxes.length&&0!=this.yAxes.length||(ca.removeFromInvalidComponents(i),i.dataInvalid=!1),Fb(i.xAxis),Fb(i.yAxis),i.maskBullets=i.maskBullets,null==i.fill&&(this.patterns?(ba(i.stroke)||(i.stroke=this.colors.next()),i.fill=this.patterns.next(),ba(i.fillOpacity)&&(i.fill.backgroundOpacity=i.fillOpacity),i.stroke instanceof Ga&&(i.fill.stroke=i.stroke,i.fill.fill=i.stroke)):i.fill=this.colors.next()),ba(i.stroke)||(i.stroke=i.fill)}catch(r){this.raiseCriticalError(r)}},Object.defineProperty(e.prototype,"cursor",{get:function(){return this._cursor},set:function(t){this._cursor!=t&&(this._cursor&&this.removeDispose(this._cursor),this._cursor=t,t&&(this._disposers.push(t),t.chart=this,t.shouldClone=!1,t.parent=this._cursorContainer,t.events.on("cursorpositionchanged",this.handleCursorPositionChange,this,!1),t.events.on("zoomstarted",this.handleCursorZoomStart,this,!1),t.events.on("zoomended",this.handleCursorZoomEnd,this,!1),t.events.on("panstarted",this.handleCursorPanStart,this,!1),t.events.on("panning",this.handleCursorPanning,this,!1),t.events.on("panended",this.handleCursorPanEnd,this,!1),t.events.on("behaviorcanceled",this.handleCursorCanceled,this,!1),t.events.on("hidden",this.handleHideCursor,this,!1),t.zIndex=Number.MAX_SAFE_INTEGER-1,this.tapToActivate&&this.setTapToActivate(this.tapToActivate)))},enumerable:!0,configurable:!0}),e.prototype.handleCursorPositionChange=function(){var t=this.cursor;if(t.visible&&!t.isHiding){var e=this.cursor.xPosition,i=this.cursor.yPosition;this.showSeriesTooltip({x:e,y:i});var r=[],o=t.snapToSeries;if(o&&!t.downPoint){o instanceof Yc&&(o=[o]);var s=[];la(o,function(t){if(!t.isHidden&&!t.isHiding){var o=t.xAxis,a=t.yAxis;o instanceof Ba&&!(o instanceof $a)&&a instanceof Ba&&!(a instanceof $a)?(t.dataItems.each(function(t){s.push(t)}),Wb(r,t.yAxis),Wb(r,t.xAxis)):(t.baseAxis==t.xAxis&&(Wb(r,t.yAxis),s.push(o.getSeriesDataItem(t,o.toAxisPosition(e),!0))),t.baseAxis==t.yAxis&&(Wb(r,t.xAxis),s.push(a.getSeriesDataItem(t,a.toAxisPosition(i),!0))))}});var a=this.getClosest(s,e,i);a&&(this.series.each(function(t){var e=a.component;t!=e&&(t.hideTooltip(),t.xAxis!=e.xAxis&&t.xAxis.hideTooltip(),t.yAxis!=e.yAxis&&t.yAxis.hideTooltip())}),a.component.showTooltipAtDataItem(a),t.handleSnap(a.component))}this._seriesPoints=[],this._cursorXPosition!=e&&this.showAxisTooltip(this.xAxes,e,r),this._cursorYPosition!=i&&this.showAxisTooltip(this.yAxes,i,r),this.arrangeTooltips&&this.sortSeriesTooltips(this._seriesPoints),this.legend&&this.legend.afterDraw()}},e.prototype.getClosest=function(t,e,i){var r,o=1/0;return gf(t,function(t){if(t){var s=t.component.xAxis,a=t.component.yAxis,n=s.positionToCoordinate(s.toGlobalPosition(s.toAxisPosition(e))),p=a.positionToCoordinate(a.toGlobalPosition(a.toAxisPosition(i))),h=t.component.xField,l=t.component.yField;if(s instanceof Ba&&!aa(t.getValue(h)))return!0;if(a instanceof Ba&&!aa(t.getValue(l)))return!0;var $=s.positionToCoordinate(s.toGlobalPosition(s.getPositionX(t,h,t.locations[h],"valueX"))),d=a.positionToCoordinate(a.toGlobalPosition(a.getPositionY(t,l,t.locations[l],"valueY"))),u=Math.sqrt(Math.pow(n-$,2)+Math.pow(p-d,2));return u<o&&(o=u,r=t),!0}}),r},e.prototype.handleHideCursor=function(){this.hideObjectTooltip(this.xAxes),this.hideObjectTooltip(this.yAxes),this.hideObjectTooltip(this.series),this._cursorXPosition=void 0,this._cursorYPosition=void 0,this.updateSeriesLegend()},e.prototype.updateSeriesLegend=function(){ga(this.series.iterator(),function(t){t.updateLegendValue()})},e.prototype.hideObjectTooltip=function(t){ga(t.iterator(),function(t){t.cursorTooltipEnabled&&t.hideTooltip(0)})},e.prototype.showSeriesTooltip=function(t){var e=this;if(t){var i=[];this.series.each(function(r){if(r.xAxis instanceof $a&&r.xAxis.snapTooltip||r.yAxis instanceof $a&&r.yAxis.snapTooltip);else{var o=r.showTooltipAtPosition(t.x,t.y);o&&(r.tooltip.setBounds(Hf({x:0,y:0,width:e.pixelWidth,height:e.pixelHeight},e)),i.push({series:r,point:o}))}}),this.arrangeTooltips&&this.sortSeriesTooltips(i)}else this.series.each(function(t){t.hideTooltip()})},e.prototype.sortSeriesTooltips=function(t){if(t.length>0){var e=this.cursor;if(e&&aa(e.maxTooltipDistance)){var i,r,o=Yb({x:e.point.x,y:e.point.y},e),s=1/0;la(t,function(t){var e=t.series,a=t.point;if(a){var n={x:a.x,y:a.y},p=Math.abs(Ka(n,o));p<s&&(r=n,s=p,i=e)}});var a=[];i&&(la(t,function(t){if(Math.abs(Ka(t.point,r))<=Math.abs(e.maxTooltipDistance))a.push({series:t.series,point:t.point});else{var i=t.series.tooltipDataItem;i&&la(i.sprites,function(t){t.isHover=!1,t.handleOutReal()}),t.series.hideTooltip(0)}}),e.maxTooltipDistance<0&&(a.length>0&&la(a,function(t){i!=t.series&&t.series.hideTooltip(0)}),a=[{series:i,point:r}])),t=a}var n=Yb({x:-.5,y:-.5},this.plotContainer),p=Yb({x:this.plotContainer.pixelWidth+.5,y:this.plotContainer.pixelHeight+.5},this.plotContainer),h=0,l=[];la(t,function(t){var e=t.point;e&&Vg(e,{x:n.x,y:n.y,width:p.x-n.x,height:p.y-n.y})&&(l.push({point:e,series:t.series}),h+=e.y)}),t=l;var $=this.series.getIndex(0),d=!1;$&&$.yAxis&&$.yAxis.renderer.inversed&&(d=!0),d?t.sort(function(t,e){return ic(t.point.y,e.point.y)}):(t.sort(function(t,e){return ic(e.point.y,t.point.y)}),t.reverse());var u=h/t.length,c=nh({x:0,y:0},this.svgContainer.SVGContainer).y;if(t.length>0){var x=n.y,m=p.y;If({x:0,y:x},this);var y=!1;if(u>x+(m-x)/2)for(var g=m,f=t.length-1;f>=0;f--){var v=(C=t[f].series).tooltip,A=t[f].point.y;if(v.setBounds({x:0,y:-c,width:this.pixelWidth,height:g+c}),v.invalid&&v.validate(),v.toBack(),(g=Yb({x:0,y:v.label.pixelY-v.pixelY+A-v.pixelMarginTop},v).y)<-c){y=!0;break}}if(u<=x+(m-x)/2||y)for(var V=x,M=(f=0,t.length);f<M;f++){var C=t[f].series;A=t[f].point.y;(v=C.tooltip).setBounds({x:0,y:V,width:this.pixelWidth,height:m}),v.invalid&&v.validate(),v.toBack(),V=Yb({x:0,y:v.label.pixelY+v.label.measuredHeight-v.pixelY+A+v.pixelMarginBottom},v).y}}}},e.prototype.showAxisTooltip=function(t,e,i){var r=this;ga(t.iterator(),function(t){i&&-1!=i.indexOf(t)||(r.dataItems.length>0||t.dataItems.length>0)&&t.showTooltipAtPosition(e)})},e.prototype.getUpdatedRange=function(t,e){if(t){var i,r;t.renderer.inversed?(lf(e),i=1-t.end,r=1-t.start):(i=t.start,r=t.end);var o=r-i;return{start:i+e.start*o,end:i+e.end*o}}},e.prototype.handleCursorZoomEnd=function(t){var e=this.cursor,i=e.behavior;if("zoomX"==i||"zoomXY"==i){var r=e.xRange;r&&this.xAxes.length>0&&((r=this.getUpdatedRange(this.xAxes.getIndex(0),r)).priority="start",this.zoomAxes(this.xAxes,r))}if("zoomY"==i||"zoomXY"==i){var o=e.yRange;o&&this.yAxes.length>0&&((o=this.getUpdatedRange(this.yAxes.getIndex(0),o)).priority="start",this.zoomAxes(this.yAxes,o))}this.handleHideCursor()},e.prototype.handleCursorPanStart=function(t){var e=this.xAxes.getIndex(0);e&&(this._panStartXRange={start:e.start,end:e.end});var i=this.yAxes.getIndex(0);i&&(this._panStartYRange={start:i.start,end:i.end})},e.prototype.handleCursorPanEnd=function(t){var e=this.cursor.behavior;if(this._panEndXRange&&("panX"==e||"panXY"==e)){var i=this._panEndXRange,r=this._panStartXRange,o=0;i.start<0&&(o=i.start),r.end>1?i.end>r.end&&(o=i.end-r.end):i.end>1&&(o=i.end-1),this.zoomAxes(this.xAxes,{start:i.start-o,end:i.end-o},!1,!0),this._panEndXRange=void 0,this._panStartXRange=void 0}if(this._panEndYRange&&("panY"==e||"panXY"==e)){o=0;(i=this._panEndYRange).start<0&&(o=i.start),i.end>1&&(o=i.end-1),this.zoomAxes(this.yAxes,{start:i.start-o,end:i.end-o},!1,!0),this._panEndYRange=void 0,this._panStartYRange=void 0}},e.prototype.handleCursorCanceled=function(){this._panEndXRange=void 0,this._panStartXRange=void 0},e.prototype.handleCursorPanning=function(t){var e=this.cursor,i=e.behavior,r=e.maxPanOut;if(this._panStartXRange&&("panX"==i||"panXY"==i)){var o=this._panStartXRange,s=e.xRange,a=this.getCommonAxisRange(this.xAxes),n=o.end-o.start,p=s.start*(a.end-a.start),h=Math.max(-r,p+o.start),l=Math.min(p+o.end,1+r);h<=0&&(l=h+n),l>=1&&(h=l-n);var $={start:h,end:l};this._panEndXRange=$,this.zoomAxes(this.xAxes,$,!1,!1,e.maxPanOut)}if(this._panStartYRange&&("panY"==i||"panXY"==i)){o=this._panStartYRange,s=e.yRange,a=this.getCommonAxisRange(this.yAxes),n=o.end-o.start,p=s.start*(a.end-a.start),h=Math.max(-r,p+o.start),l=Math.min(p+o.end,1+r);h<=0&&(l=h+n),l>=1&&(h=l-n);$={start:h,end:l};this._panEndYRange=$,this.zoomAxes(this.yAxes,$,!1,!1,e.maxPanOut)}this.handleHideCursor()},e.prototype.handleYAxisSet=function(t){},e.prototype.handleCursorZoomStart=function(t){},Object.defineProperty(e.prototype,"scrollbarX",{get:function(){return this._scrollbarX},set:function(t){var e=this;this._scrollbarX&&this.removeDispose(this._scrollbarX),this._scrollbarX=t,t&&(this._disposers.push(t),t.parent=this.topAxesContainer,t.shouldClone=!1,t.startGrip.exportable=!1,t.endGrip.exportable=!1,t.toBack(),t.orientation="horizontal",t.events.on("rangechanged",this.handleXScrollbarChange,this,!1),t.adapter.add("positionValue",function(t){var i=e.xAxes.getIndex(0);return i&&(t.value=i.getPositionLabel(i.renderer.inversed?1-t.position:t.position)),t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollbarY",{get:function(){return this._scrollbarY},set:function(t){var e=this;this._scrollbarY&&this.removeDispose(this._scrollbarY),this._scrollbarY=t,t&&(this._disposers.push(t),t.parent=this.rightAxesContainer,t.startGrip.exportable=!1,t.shouldClone=!1,t.endGrip.exportable=!1,t.toFront(),t.orientation="vertical",t.events.on("rangechanged",this.handleYScrollbarChange,this,!1),t.adapter.add("positionValue",function(t){var i=e.yAxes.getIndex(0);return i&&(t.value=i.getPositionLabel(t.position)),t}))},enumerable:!0,configurable:!0}),e.prototype.handleXScrollbarChange=function(t){if(this.inited){var e=t.target,i=e.range;0==i.start&&(i.priority="start"),1==i.end&&(i.priority="end"),i=this.zoomAxes(this.xAxes,i),e.fixRange(i)}},e.prototype.handleYScrollbarChange=function(t){if(this.inited){var e=t.target,i=e.range;1==i.end&&(i.priority="end"),0==i.start&&(i.priority="start"),i=this.zoomAxes(this.yAxes,i),e.fixRange(i)}},e.prototype.zoomAxes=function(t,e,i,r,o){var s={start:0,end:1};return this.showSeriesTooltip(),this.dataInvalid||ga(t.iterator(),function(t){if(t.zoomable){if(t.renderer.inversed&&(e=lf(e)),t.hideTooltip(0),r)if(t instanceof jb){var a=t.getCellEndPosition(0)-t.getCellStartPosition(0);e.start=t.roundPosition(e.start+a/2-t.startLocation*a,t.startLocation),e.end=t.roundPosition(e.end-a/2+(1-t.endLocation)*a,t.endLocation)}else e.start=t.roundPosition(e.start+1e-4,0,t.startLocation),e.end=t.roundPosition(e.end+1e-4,0,t.endLocation);var n=t.zoom(e,i,i,o);t.renderer.inversed&&(n=lf(n)),s=n}}),s},Object.defineProperty(e.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(t){this.setPropertyValue("maskBullets",t,!0)&&this.bulletsContainer&&(this.bulletsContainer.mask=t?this._bulletMask:void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"arrangeTooltips",{get:function(){return this.getPropertyValue("arrangeTooltips")},set:function(t){this.setPropertyValue("arrangeTooltips",t,!0)},enumerable:!0,configurable:!0}),e.prototype.handleWheel=function(t){var e=this.plotContainer,i=Bc(t.point,this.htmlContainer,this.svgContainer.cssScale),r=ac(i,e),o=t.shift.y;this.handleWheelReal(o,this.mouseWheelBehavior,r)},e.prototype.handleHorizontalWheel=function(t){var e=this.plotContainer,i=Bc(t.point,this.htmlContainer,this.svgContainer.cssScale),r=ac(i,e);this.handleWheelReal(t.shift.x,this.horizontalMouseWheelBehavior,r)},e.prototype.handleWheelReal=function(t,e,i){if(0!=t){var r=this.plotContainer,o=this.getCommonAxisRange(this.xAxes),s=this.getCommonAxisRange(this.yAxes);if("panX"==e||"panXY"==e){var a=o.end-o.start,n=Math.max(-0,o.start+.1*t/100*(o.end-o.start)),p=Math.min(o.end+.1*t/100*(o.end-o.start),1);n<=0&&(p=n+a),p>=1&&(n=p-a),this.zoomAxes(this.xAxes,{start:n,end:p})}if("panY"==e||"panXY"==e){t*=-1;var h=s.end-s.start,l=Math.max(-0,s.start+.1*t/100*(s.end-s.start)),$=Math.min(s.end+.1*t/100*(s.end-s.start),1);l<=0&&($=l+h),$>=1&&(l=$-h),this.zoomAxes(this.yAxes,{start:l,end:$})}if("zoomX"==e||"zoomXY"==e){var d=i.x/r.maxWidth,u=this.xAxes.getIndex(0).toAxisPosition(d);n=Math.max(-0,o.start-.1*(o.end-o.start)*t/100*d);n=Math.min(n,u);p=Math.min(o.end+.1*(o.end-o.start)*t/100*(1-d),1);p=Math.max(p,u),this.zoomAxes(this.xAxes,{start:n,end:p})}if("zoomY"==e||"zoomXY"==e){var c=i.y/r.maxHeight,x=this.yAxes.getIndex(0).toAxisPosition(c);l=Math.max(-0,s.start-.1*(s.end-s.start)*t/100*(1-c));l=Math.min(l,x);$=Math.min(s.end+.1*t/100*c*(s.end-s.start),1);$=Math.max($,x),this.zoomAxes(this.yAxes,{start:l,end:$})}}},Object.defineProperty(e.prototype,"mouseWheelBehavior",{get:function(){return this.getPropertyValue("mouseWheelBehavior")},set:function(t){this.setPropertyValue("mouseWheelBehavior",t)&&("none"!=t?(this._mouseWheelDisposer=this.plotContainer.events.on("wheel",this.handleWheel,this,!1),this._disposers.push(this._mouseWheelDisposer)):this._mouseWheelDisposer&&(this.plotContainer.wheelable=!1,this.plotContainer.hoverable=!1,this._mouseWheelDisposer.dispose()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalMouseWheelBehavior",{get:function(){return this.getPropertyValue("horizontalMouseWheelBehavior")},set:function(t){this.setPropertyValue("horizontalMouseWheelBehavior",t)&&("none"!=t?(this._mouseWheelDisposer2=this.plotContainer.events.on("wheel",this.handleHorizontalWheel,this,!1),this._disposers.push(this._mouseWheelDisposer2)):this._mouseWheelDisposer2&&(this.plotContainer.wheelable=!1,this.plotContainer.hoverable=!1,this._mouseWheelDisposer2.dispose()))},enumerable:!0,configurable:!0}),e.prototype.dataSourceDateFields=function(e){var i=this;return e=t.prototype.dataSourceDateFields.call(this,e),ga(this.series.iterator(),function(t){e=i.populateDataSourceFields(e,t.dataFields,["dateX","dateY","openDateX","openDateY"])}),e},e.prototype.dataSourceNumberFields=function(e){var i=this;return e=t.prototype.dataSourceDateFields.call(this,e),ga(this.series.iterator(),function(t){e=i.populateDataSourceFields(e,t.dataFields,["valueX","valueY","openValueX","openValueY"])}),e},e.prototype.processConfig=function(e){if(e){var i=[],r=[];if(ba(e.xAxes)&&mb(e.xAxes))for(var o=0,s=e.xAxes.length;o<s;o++){if(!e.xAxes[o].type)throw Error("[XYChart error] No type set for xAxes["+o+"].");if(ba(e.xAxes[o].axisRanges)){for(var a=0,n=e.xAxes[o].axisRanges.length;a<n;a++){var p=e.xAxes[o].axisRanges[a];ba(p.date)&&Ca(p.date)&&(p.date=this.dateFormatter.parse(p.date)),ba(p.endDate)&&Ca(p.endDate)&&(p.endDate=this.dateFormatter.parse(p.endDate))}i.push({axisRanges:e.xAxes[o].axisRanges,index:o}),delete e.xAxes[o].axisRanges}}if(ba(e.yAxes)&&mb(e.yAxes))for(o=0,s=e.yAxes.length;o<s;o++){if(!e.yAxes[o].type)throw Error("[XYChart error] No type set for yAxes["+o+"].");if(ba(e.yAxes[o].axisRanges)){a=0;for(var h=e.yAxes[o].axisRanges.length;a<h;a++){p=e.yAxes[o].axisRanges[a];ba(p.date)&&Ca(p.date)&&(p.date=this.dateFormatter.parse(p.date)),ba(p.endDate)&&Ca(p.endDate)&&(p.endDate=this.dateFormatter.parse(p.endDate))}r.push({axisRanges:e.yAxes[o].axisRanges,index:o}),delete e.yAxes[o].axisRanges}}if(ba(e.series)&&mb(e.series))for(o=0,s=e.series.length;o<s;o++)e.series[o].type=e.series[o].type||"LineSeries";if(ba(e.cursor)&&!ba(e.cursor.type)&&(e.cursor.type="XYCursor"),ba(e.scrollbarX)&&!ba(e.scrollbarX.type)&&(e.scrollbarX.type="Scrollbar"),ba(e.scrollbarY)&&!ba(e.scrollbarY.type)&&(e.scrollbarY.type="Scrollbar"),t.prototype.processConfig.call(this,e),r.length)for(o=0,s=r.length;o<s;o++)this.yAxes.getIndex(r[o].index).config={axisRanges:r[o].axisRanges};if(i.length)for(o=0,s=i.length;o<s;o++)this.xAxes.getIndex(i[o].index).config={axisRanges:i[o].axisRanges}}},e.prototype.configOrder=function(e,i){return e==i?0:"scrollbarX"==e?1:"scrollbarX"==i?-1:"scrollbarY"==e?1:"scrollbarY"==i?-1:"cursor"==e?1:"cursor"==i?-1:"series"==e?1:"series"==i?-1:t.prototype.configOrder.call(this,e,i)},e.prototype.createSeries=function(){return new Yc},Object.defineProperty(e.prototype,"zoomOutButton",{get:function(){return this._zoomOutButton},set:function(t){var e=this;this._zoomOutButton=t,t&&t.events.on("hit",function(){e.zoomAxes(e.xAxes,{start:0,end:1}),e.zoomAxes(e.yAxes,{start:0,end:1})},void 0,!1)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){var i=this;e.xAxes.each(function(t){var e=i.xAxes.push(t.clone());e.chart=i,e.renderer.chart=i}),e.yAxes.each(function(t){var e=i.yAxes.push(t.clone());e.renderer.chart=i,e.chart=i}),t.prototype.copyFrom.call(this,e),e.cursor&&(this.cursor=e.cursor.clone()),e.scrollbarX&&(this.scrollbarX=e.scrollbarX.clone()),e.scrollbarY&&(this.scrollbarY=e.scrollbarY.clone())},e.prototype.disposeData=function(){t.prototype.disposeData.call(this);var e=this.scrollbarX;e&&e instanceof Zc&&e.scrollbarChart.disposeData();var i=this.scrollbarY;i&&i instanceof Zc&&i.scrollbarChart.disposeData(),this.xAxes.each(function(t){t instanceof jb&&t.disposeData()}),this.yAxes.each(function(t){t instanceof jb&&t.disposeData()})},e.prototype.addData=function(e,i){this.scrollbarX instanceof Zc&&this.addScrollbarData(this.scrollbarX,i),this.scrollbarY instanceof Zc&&this.addScrollbarData(this.scrollbarY,i),t.prototype.addData.call(this,e,i)},e.prototype.addScrollbarData=function(t,e){var i=t.scrollbarChart;i._parseDataFrom=i.data.length,i.invalidateData()},e.prototype.removeScrollbarData=function(t,e){var i=t.scrollbarChart;if(aa(e)){for(;e>0;){var r=this.dataItems.getIndex(0);r&&i.dataItems.remove(r),i.dataUsers.each(function(t){var e=t.dataItems.getIndex(0);e&&t.dataItems.remove(e)}),i._parseDataFrom--,e--}i.invalidateData()}},e.prototype.removeData=function(e){this.scrollbarX instanceof Zc&&this.removeScrollbarData(this.scrollbarX,e),this.scrollbarY instanceof Zc&&this.removeScrollbarData(this.scrollbarY,e),t.prototype.removeData.call(this,e)},e.prototype.setTapToActivate=function(e){t.prototype.setTapToActivate.call(this,e),this.cursor&&(this.cursor.interactions.isTouchProtected=e,this.plotContainer.interactions.isTouchProtected=e)},e.prototype.handleTapToActivate=function(){t.prototype.handleTapToActivate.call(this),this.cursor&&(this.cursor.interactions.isTouchProtected=!1,this.plotContainer.interactions.isTouchProtected=!1)},e.prototype.handleTapToActivateDeactivation=function(){t.prototype.handleTapToActivateDeactivation.call(this),this.cursor&&(this.cursor.interactions.isTouchProtected=!0,this.plotContainer.interactions.isTouchProtected=!0)},e}(hg);ca.registeredClasses.XYChart=Hc,ub.push({relevant:Ab.maybeXS,state:function(t,e){if(t instanceof Hc&&t.scrollbarX){var i=t.states.create(e);return t.scrollbarX.states.create(e).properties.disabled=!0,i}return null}}),ub.push({relevant:Ab.maybeXS,state:function(t,e){if(t instanceof Hc&&t.scrollbarY){var i=t.states.create(e);return t.scrollbarY.states.create(e).properties.disabled=!0,i}return null}});var mg=function(e){function t(){var t=e.call(this)||this;t.className="LineSeriesSegment",t.isMeasured=!1,t.interactionsEnabled=!1,t.layout="none";var o=t.createChild(xa);t.fillSprite=o,o.shouldClone=!1,o.setElement(t.paper.add("path")),o.isMeasured=!1,t._disposers.push(o);var r=t.createChild(xa);return t.strokeSprite=r,r.shouldClone=!1,r.fill=ua(),r.setElement(t.paper.add("path")),r.isMeasured=!1,t._disposers.push(r),t}return da(t,e),t.prototype.drawSegment=function(e,t,o,r){if(!this.disabled)if(e.length>0&&t.length>0&&aa(e[0].x)&&aa(e[0].y)){var i=ma({x:e[0].x-.2,y:e[0].y-.2})+ma(e[0]),$=this.series;"bezier"==$.smoothing?i+=new Gc(o,r).smooth(e):"monotoneX"==$.smoothing?i+=new ii({closed:!1}).smooth(e):"monotoneY"==$.smoothing&&(i+=new ji({closed:!1}).smooth(e)),0==this.strokeOpacity||0==this.strokeSprite.strokeOpacity||(this.strokeSprite.path=i),(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&aa(t[0].x)&&aa(t[0].y)&&(i+=fa(t[0]),"bezier"==$.smoothing?i+=new Gc(o,r).smooth(t):"monotoneX"==$.smoothing?i+=new ii({closed:!1}).smooth(t):"monotoneY"==$.smoothing&&(i+=new ji({closed:!1}).smooth(t)),i+=fa(e[0]),i+=eb(),this.fillSprite.path=i)}else this.fillSprite.path="",this.strokeSprite.path=""},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t);var o=this.strokeSprite;gb(t,o.properties,db),o.events.copyFrom(t.strokeSprite.events),o.fillOpacity=0;var r=this.fillSprite;gb(t,r.properties,db),r.events.copyFrom(t.fillSprite.events),r.strokeOpacity=0},t}(oa);ca.registeredClasses.LineSeriesSegment=mg;var nm=function(t){function r(){var r=t.call(this)||this;return r.className="DurationAxisDataItem",r.applyTheme(),r}return da(r,t),r}(We);var ng=function(t){function r(){var r=t.call(this)||this;return r._baseUnit="second",r.className="DurationAxis",r.setPropertyValue("maxZoomFactor",1e6),r.applyTheme(),r}return da(r,t),r.prototype.formatLabel=function(t,r){return this.durationFormatter.format(t,r||this.axisDurationFormat)},r.prototype.adjustMinMax=function(r,e,a,i,o){var s,n,u,p=this.baseUnit;if(this.setPropertyValue("maxPrecision",0),"millisecond"==p||"second"==p||"minute"==p||"hour"==p){i<=1&&(i=1),i=Math.round(i);var $=r,l=e;0===a&&(a=Math.abs(e));var m,h=[60,30,20,15,10,2,1],y=1;"hour"==p&&(h=[24,12,6,4,2,1]);try{for(var c=be(h),x=c.next();!x.done;x=c.next()){var U=x.value;if(a/U>i){y=U;break}}}catch(z){s={error:z}}finally{try{x&&!x.done&&(n=c.return)&&n.call(c)}finally{if(s)throw s.error}}var f=Math.ceil((e-r)/y/i),D=Math.log(Math.abs(f))*Math.LOG10E,b=Math.pow(10,Math.floor(D))/10,d=f/b;m=y*(f=tj(h,d)*b),this.durationFormatter.getValueUnit(m,this.baseUnit),r=Math.floor(r/m)*m,e=Math.ceil(e/m)*m,o&&((r-=m)<0&&$>=0&&(r=0),(e+=m)>0&&l<=0&&(e=0)),u={min:r,max:e,step:m}}else u=t.prototype.adjustMinMax.call(this,r,e,a,i,o);return this.axisDurationFormat=this.durationFormatter.getFormat(u.step,u.max,this.baseUnit),u},Object.defineProperty(r.prototype,"tooltipDurationFormat",{get:function(){return this._tooltipDurationFormat},set:function(t){this._tooltipDurationFormat=t},enumerable:!0,configurable:!0}),r.prototype.getTooltipText=function(t){var r=ha(this.positionToValue(t),this._stepDecimalPlaces),e=this.formatLabel(r,this.tooltipDurationFormat);return this._adapterO?this._adapterO.apply("getTooltipText",e):e},Object.defineProperty(r.prototype,"baseUnit",{get:function(){return this._baseUnit},set:function(t){this._baseUnit!=t&&(this._baseUnit=t,this.durationFormatter.baseUnit=t,this.invalidate())},enumerable:!0,configurable:!0}),r.prototype.copyFrom=function(r){t.prototype.copyFrom.call(this,r),this.baseUnit=r.baseUnit},r}(Ba);ca.registeredClasses.DurationAxis=ng,ca.registeredClasses.DurationAxisDataItem=nm;var Ye=function(e){function t(){var t=e.call(this)||this;return t.className="LineSeriesDataItem",t}return da(t,e),t}(Xe);var og=function(e){function t(){var t=e.call(this)||this;return t.minDistance=.5,t.segments=new _a(t.createSegment()),t.segments.template.applyOnClones=!0,t._disposers.push(new Sa(t.segments)),t._disposers.push(t.segments.template),t._segmentsIterator=new sf(t.segments,function(){return t.segments.create()}),t._segmentsIterator.createNewItems=!0,t.className="LineSeries",t.strokeOpacity=1,t.fillOpacity=0,t.connect=!0,t.tensionX=1,t.tensionY=1,t.autoGapCount=1.1,t.smoothing="bezier",t.segmentsContainer=t.mainContainer.createChild(oa),t.segmentsContainer.isMeasured=!1,t.bulletsContainer.toFront(),t.applyTheme(),t}return da(t,e),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("Line Series"))},t.prototype.createSegment=function(){return new mg},t.prototype.createDataItem=function(){return new Ye},t.prototype.setInitialWorkingValues=function(e){var t=this._yAxis.get(),i=this._xAxis.get();if(this.appeared&&this.visible){var r=this.dataItems.getIndex(e.index-1);if(e.component=this,this.baseAxis==i&&t instanceof Ba){var s=t.minZoomed;if(r&&(s=r.values.valueY.workingValue),e.setWorkingValue("valueY",s,0),e.setWorkingValue("valueY",e.values.valueY.value),i instanceof $a)e.setWorkingLocation("dateX",e.locations.dateX-1,0),e.setWorkingLocation("dateX",e.locations.dateX);else if(i instanceof ng&&r){var a=e.valueX;e.setWorkingValue("valueX",r.valueX,0),e.setWorkingValue("valueX",a)}}if(this.baseAxis==t&&i instanceof Ba){var o=i.minZoomed;if(r&&(o=r.values.valueX.workingValue),e.setWorkingValue("valueX",o,0),e.setWorkingValue("valueX",e.values.valueX.value),t instanceof $a)e.setWorkingLocation("dateY",e.locations.dateX-1,0),e.setWorkingLocation("dateY",e.locations.dateY);else if(t instanceof ng&&r){a=e.valueY;e.setWorkingValue("valueY",r.valueY,0),e.setWorkingValue("valueY",a)}}}else this.baseAxis==i&&t instanceof Ba&&(i instanceof $a&&e.setWorkingLocation("dateX",e.locations.dateX),i instanceof jb&&e.setWorkingLocation("categoryX",e.locations.categoryX)),this.baseAxis==t&&i instanceof Ba&&(t instanceof $a&&e.setWorkingLocation("dateY",e.locations.dateY),t instanceof jb&&e.setWorkingLocation("categoryY",e.locations.categoryY))},t.prototype.updateLegendValue=function(t,i){e.prototype.updateLegendValue.call(this,t,i),t&&t.segment&&(this.tooltipColorSource=t.segment)},t.prototype.validate=function(){var t=this;e.prototype.validate.call(this),this.xAxis&&this.yAxis&&(this._segmentsIterator.reset(),this.openSegmentWrapper(this._adjustedStartIndex),ga(this.axisRanges.iterator(),function(e){t.openSegmentWrapper(t._adjustedStartIndex,e)}),ga(this._segmentsIterator.iterator(),function(e){e.__disabled=!0}))},t.prototype.sliceData=function(){for(var e=this.startIndex,t=this.endIndex,i=this.startIndex-1;i>=0;i--){if((s=this.dataItems.getIndex(i))&&s.hasValue(this._xValueFields)&&s.hasValue(this._yValueFields)){e=i;break}}this._adjustedStartIndex=this.findAdjustedIndex(e,["stroke","strokeWidth","strokeDasharray","strokeOpacity","fill","fillOpacity","opacity"]);i=this.endIndex;for(var r=this.dataItems.length;i<r;i++){var s;if((s=this.dataItems.getIndex(i))&&s.hasValue(this._xValueFields)&&s.hasValue(this._yValueFields)){t=i+1;break}}this._workingStartIndex=e,this._workingEndIndex=t},t.prototype.findAdjustedIndex=function(e,t){var i=this,r=this.propertyFields,s=e;return la(t,function(t){if(ba(r[t]))for(var a=s;a>=0;a--){var o=i.dataItems.getIndex(a);if(o&&ba(o.properties[t])){e>a&&(e=a);break}}}),e},t.prototype.openSegmentWrapper=function(e,t){var i={index:e,axisRange:t};do{i=this.openSegment(i.index,i.axisRange)}while(i)},t.prototype.getSegment=function(){var e=this._segmentsIterator.getFirst();return e.series=this,e.isDisposed()?(this.segments.removeValue(e),this.getSegment()):e},t.prototype.openSegment=function(e,t){var i=!1,r=[];e=Math.min(e,this.dataItems.length);var s,a=Math.min(this._workingEndIndex,this.dataItems.length);this._workingEndIndex=Math.min(this._workingEndIndex,this.dataItems.length);var o=!1,n=this.getSegment();n.strokeDasharray=void 0,n.__disabled=!1,t?(n.parent=t.contents,gb(t.contents,n,db)):(gb(this,n,db),n.filters.clear(),n.parent=this.segmentsContainer),this.group.node.removeAttribute("fill");for(var l=this.connect,p=!1,d=e;d<a;d++){var $=this.dataItems.getIndex(d);if($.segment=n,$.hasProperties&&(d==e?this.updateSegmentProperties($.properties,n):o=this.updateSegmentProperties($.properties,n,!0)),$.hasValue(this._xValueFields)&&$.hasValue(this._yValueFields))this.addPoints(r,$,this.xField,this.yField),p=!0;else{if(d==e)continue;if(!l&&p){s=d;break}}if(s=d,this.baseAxis instanceof $a){var u=this.dataItems.getIndex(d+1);if(u&&this.baseAxis.makeGap(u,$)){i=!0;break}}if(o)break}return this.closeSegment(n,r,e,s,t,i)},t.prototype.addPoints=function(e,t,i,r,s){var a=this.getPoint(t,i,r,t.workingLocations[i],t.workingLocations[r]);s||(t.point=a),e.push(a)},t.prototype.closeSegment=function(e,t,i,r,s,a){var o=[];if(this.dataFields[this._xOpenField]||this.dataFields[this._yOpenField]||this.stacked)for(var n=r;n>=i;n--){var l=this.dataItems.getIndex(n);l.hasValue(this._xValueFields)&&l.hasValue(this._yValueFields)&&this.addPoints(o,l,this.xOpenField,this.yOpenField,!0)}else{var p=this.baseAxis,d=t.length,$=this.xAxis,u=this.yAxis;d>0&&(p==$?(o.push({x:t[d-1].x,y:u.basePoint.y}),o.push({x:t[0].x,y:u.basePoint.y})):(o.push({x:$.basePoint.x,y:t[d-1].y}),o.push({x:$.basePoint.x,y:t[0].y})))}return this.drawSegment(e,t,o),a&&r++,r<this._workingEndIndex-1?{index:r,axisRange:s}:null},t.prototype.drawSegment=function(e,t,i){e.drawSegment(t,i,this.tensionX,this.tensionY)},t.prototype.updateSegmentProperties=function(e,t,i){var r=!1;return sa(e,function(e,s){if(ba(s)){var a=t[e],o=void 0;a&&(o=a.toString?a.toString():a);var n=void 0;s&&(n=s.toString?s.toString():s),a==s||null!=o&&null!=n&&o==n||(i||(t[e]=s),r=!0)}}),r},Object.defineProperty(t.prototype,"connect",{get:function(){return this.getPropertyValue("connect")},set:function(e){this.setPropertyValue("connect",e)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tensionX",{get:function(){return this.getPropertyValue("tensionX")},set:function(e){this.setPropertyValue("tensionX",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tensionY",{get:function(){return this.getPropertyValue("tensionY")},set:function(e){this.setPropertyValue("tensionY",e,!0)},enumerable:!0,configurable:!0}),t.prototype.createLegendMarker=function(e){var t=this,i=e.pixelWidth,r=e.pixelHeight;e.disposeChildren();var s=e.createChild(cc);if(s.shouldClone=!1,gb(this,s,db),s.x2=i,s.y=r/2,s.y2=1e-5,s.visible=!0,this.fillOpacity>0){var a=e.createChild(Ie);gb(this,a,db),a.width=i,a.height=r,a.y=0,a.strokeOpacity=0,a.visible=!0,s.y=0}var o=e.dataItem;o.color=this.stroke,o.colorOrig=this.fill,Pb(this.bullets.iterator(),function(s){if(s instanceof nc&&!s.copyToLegendMarker)return!1;var a=!1;if(s instanceof oa&&ga(s.children.iterator(),function(e){if(e instanceof Gb)return a=!0,!0}),!a){var o=s.clone();return o.parent=e,o.isMeasured=!0,o.tooltipText=void 0,o.x=i/2,t.fillOpacity>0?o.y=0:o.y=r/2,o.visible=!0,ba(o.fill)||(o.fill=t.fill),ba(o.stroke)||(o.stroke=t.stroke),!1}})},t.prototype.disposeData=function(){e.prototype.disposeData.call(this),this.segments.clear()},Object.defineProperty(t.prototype,"autoGapCount",{get:function(){return this.getPropertyValue("autoGapCount")},set:function(e){this.setPropertyValue("autoGapCount",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"smoothing",{get:function(){return this.getPropertyValue("smoothing")},set:function(e){this.setPropertyValue("smoothing",e,!0)},enumerable:!0,configurable:!0}),t}(Yc);ca.registeredClasses.LineSeries=og,ca.registeredClasses.LineSeriesDataItem=Ye;var Ci=function(e){function t(){var t=e.call(this)||this;return t.className="RadarSeriesDataItem",t.setLocation("dateX",0,0),t.setLocation("dateY",0,0),t.setLocation("categoryX",0,0),t.setLocation("categoryY",0,0),t.applyTheme(),t}return da(t,e),t}(Ye);var Di=function(e){function t(){var t=e.call(this)||this;return t.className="RadarSeries",t.connectEnds=!0,t.applyTheme(),t}return da(t,e),t.prototype.validate=function(){this.chart.invalid&&this.chart.validate(),e.prototype.validate.call(this)},t.prototype.createDataItem=function(){return new Ci},t.prototype.getPoint=function(e,t,r,i,a,s,n){s||(s="valueX"),n||(n="valueY");var o=this.yAxis.getX(e,r,a,n),p=this.yAxis.getY(e,r,a,n),$=Ka({x:o,y:p});0==$&&($=1e-5);var c=this.xAxis.getAngle(e,t,i,s),d=this.chart.startAngle,l=this.chart.endAngle;return c<d||c>l?void 0:{x:$*ka(c),y:$*ja(c)}},t.prototype.addPoints=function(e,t,r,i,a){var s=this.getPoint(t,r,i,t.locations[r],t.locations[i]);s&&e.push(s)},t.prototype.getMaskPath=function(){var e=this.yAxis.renderer;return pd(e.startAngle,e.endAngle-e.startAngle,e.pixelRadius,e.pixelInnerRadius)},t.prototype.drawSegment=function(t,r,i){var a=this.yAxis.renderer;this.connectEnds&&360==Math.abs(a.endAngle-a.startAngle)&&(this.dataFields[this._xOpenField]||this.dataFields[this._yOpenField]||this.stacked)&&(r.push(r[0]),i.length>0&&i.unshift(i[i.length-1])),e.prototype.drawSegment.call(this,t,r,i)},Object.defineProperty(t.prototype,"connectEnds",{get:function(){return this.getPropertyValue("connectEnds")},set:function(e){this.setPropertyValue("connectEnds",e,!0)},enumerable:!0,configurable:!0}),t.prototype.positionBulletReal=function(e,t,r){var i=this.xAxis,a=this.yAxis;(t<i.start||t>i.end||r<a.start||r>a.end)&&(e.visible=!1),e.moveTo(this.xAxis.renderer.positionToPoint(t,r))},t.prototype.setXAxis=function(t){e.prototype.setXAxis.call(this,t),this.updateRendererRefs()},t.prototype.setYAxis=function(t){e.prototype.setYAxis.call(this,t),this.updateRendererRefs()},t.prototype.updateRendererRefs=function(){var e=this.xAxis.renderer,t=this.yAxis.renderer;e.axisRendererY=t},t}(og);ca.registeredClasses.RadarSeries=Di,ca.registeredClasses.RadarSeriesDataItem=Ci;var Ei=function(e){function r(r){var i=e.call(this,r)||this;return i.className="AxisFillCircular",i.element=i.paper.add("path"),i.radius=ia(100),i.applyTheme(),i}return da(r,e),r.prototype.draw=function(){if(e.prototype.draw.call(this),!this.__disabled&&!this.disabled&&this.axis){var r=this.axis.renderer;this.fillPath=r.getPositionRangePath(this.startPosition,this.endPosition,this.radius,ba(this.innerRadius)?this.innerRadius:r.innerRadius,this.cornerRadius),this.path=this.fillPath}},Object.defineProperty(r.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(e){this.setPercentProperty("innerRadius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPercentProperty("radius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(e){this.setPropertyValue("cornerRadius",e,!0)},enumerable:!0,configurable:!0}),r}(ig);ca.registeredClasses.AxisFillCircular=Ei;var Fi=function(r){function e(){var e=r.call(this)||this;return e.className="GridCircular",e.pixelPerfect=!1,e.applyTheme(),e}return da(e,r),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(r){this.setPercentProperty("innerRadius",r,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(r){this.setPercentProperty("radius",r,!0,!1,10,!1)},enumerable:!0,configurable:!0}),e}(Vd);ca.registeredClasses.GridCircular=Fi;var Ze=function(t){function i(){var i=t.call(this)||this;return i.fdx=0,i.fdy=0,i.className="AxisLabelCircular",i.padding(0,0,0,0),i.location=.5,i.locationOnPath=.5,i.radius=0,i.isMeasured=!1,i.applyTheme(),i}return da(i,t),Object.defineProperty(i.prototype,"relativeRotation",{get:function(){return this.getPropertyValue("relativeRotation")},set:function(t){if(this.setPropertyValue("relativeRotation",t,!0),!ba(t)){this.rotation=void 0;var i=this.dataItem;i&&i.component&&i.component.invalidateDataItems()}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bent",{get:function(){return this.getPropertyValue("bent")},set:function(t){this.setPropertyValue("bent",t,!0),this.setPropertyValue("wrap",!1),this.setPropertyValue("horizontalCenter","none"),this.setPropertyValue("verticalCenter","none"),t?(this.setPropertyValue("dx",0),this.setPropertyValue("dy",0),this.setPropertyValue("x",0),this.setPropertyValue("y",0),this.setPropertyValue("rotation",0),this.fdx=0,this.fdy=0,this.textAlign="middle"):this.textPathElement&&(this.textPathElement.dispose(),this.textPathElement=void 0)},enumerable:!0,configurable:!0}),i.prototype.pixelRadius=function(t){var i=1;return this.inside&&(i=-1),Xa(this.radius,t)*i},i.prototype.pixelRadiusY=function(t,i){var e=1;this.inside&&(e=-1);var r=this.radius;return aa(r)?(r*=i/t,Xa(r,t)*e):Xa(r,i)*e},i.prototype.fixPosition=function(t,i,e,r,$){aa(e)||(e=i),aa(r)||(r=0),aa($)||($=0);var o={x:i*ka(t),y:e*ja(t)};this.invalid&&this.validate();var s=!1,a=this.radius;a instanceof Da&&a.value<0?s=!0:a<0&&(s=!0);var h=this.relativeRotation,n=this.pixelRadius(i);if(this.bent){var p={x:(i+n)*ka(t+180),y:(e+n*e/i)*ja(t+180)};return this.path=ma(p)+ob(t+180,360,i+n,e+n*e/i),void(this.textPathElement&&this.textPathElement.attr({startOffset:100*this.locationOnPath+"%"}))}if(aa(h)){this.horizontalCenter="none",this.verticalCenter="none",t=fc(t,-180,180);var l=this.bbox.width,m=this.bbox.height,u=this.pixelPaddingBottom,d=this.pixelPaddingTop,c=this.pixelPaddingLeft,A=this.pixelPaddingRight;t>90||t<-90?-90==h&&(h=90,l=0):(-90==h&&(m=-m),90==h&&(h=-90,l=-c-A,m=-m-d-u)),this.rotation=h+t+90;var z=ja(h)/2,I=ka(h)/2,F=this.rotation;this.dx=m*z*ja(F)-l*I*ka(F),this.dy=-m*z*ka(F)-l*I*ja(F),this.inside?t>90||t<-90?n-=(u+d)*ka(h)+(c+A)*ja(h):n+=(u+this.bbox.height+d)*ka(h)+(c+A+this.bbox.width)*ja(h):n+=(m+u+d)*ka(h)+(l+c+A)*ja(h),o.x+=ka(t)*n,o.y+=ja(t)*n*e/i}else this.horizontalCenter="middle",this.verticalCenter="middle",s?(this.dx=0,this.dy=0,o.x=(i+n)*ka(t),o.y=(e+n*e/i)*ja(t)):(this.dy=this._measuredHeight/2*ja(t),this.dx=this._measuredWidth/2*ka(t),o.x+=ka(t)*n,o.y+=ja(t)*n*e/i);o.x+=r,o.y+=$,this.fdx=this.dx,this.fdy=this.dy,this.moveTo(o)},i}(jg);ca.registeredClasses.AxisLabelCircular=Ze;var Gi=function(t){function e(){var e=t.call(this)||this;return e.pixelRadiusReal=0,e.layout="none",e.className="AxisRendererCircular",e.isMeasured=!1,e.startAngle=-90,e.endAngle=270,e.useChartAngles=!0,e.radius=ia(100),e.isMeasured=!1,e.grid.template.location=0,e.labels.template.location=0,e.labels.template.radius=15,e.ticks.template.location=0,e.ticks.template.pixelPerfect=!1,e.tooltipLocation=0,e.line.strokeOpacity=0,e.applyTheme(),e}return da(e,t),e.prototype.setAxis=function(e){var i=this;t.prototype.setAxis.call(this,e),e.isMeasured=!1;var r=e.tooltip;r.adapter.add("dx",function(t,e){var r=ac({x:e.pixelX,y:e.pixelY},i);return i.pixelRadius*Math.cos(Math.atan2(r.y,r.x))-r.x}),r.adapter.add("dy",function(t,e){var r=ac({x:e.pixelX,y:e.pixelY},i);return i.pixelRadius*Math.sin(Math.atan2(r.y,r.x))-r.y})},e.prototype.validate=function(){this.chart&&this.chart.invalid&&this.chart.validate(),t.prototype.validate.call(this)},Object.defineProperty(e.prototype,"axisLength",{get:function(){return 2*Math.PI*this.pixelRadius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!1,!1,10,!1)&&this.axis&&this.axis.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelRadius",{get:function(){return qb(this.radius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){var t=this.chart,e=this.getPropertyValue("innerRadius");if(t){if(ba(e)){if(e instanceof Da&&t){var i=t.mr,r=e.value;r=Math.max(i*r,i-Math.min(t.plotContainer.innerHeight,t.plotContainer.innerWidth))/i,e=ia(100*r)}}else(e=t.innerRadius)instanceof Da&&t&&(e=ia(e.value*t.innerRadiusModifyer*100));return e}},set:function(t){this.setPercentProperty("innerRadius",t,!1,!1,10,!1)&&this.axis&&this.axis.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useChartAngles",{get:function(){return this.getPropertyValue("useChartAngles")},set:function(t){this.setPropertyValue("useChartAngles",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){return qb(this.innerRadius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t,e){aa(e)||(e=1);var i=this.positionToCoordinate(t),r=this.startAngle+(this.endAngle-this.startAngle)*i/this.axisLength,s=this.pixelRadius,a=this.pixelInnerRadius;if(this.axisRendererY){var o=na(this.axisRendererY.positionToCoordinate(e),0,1/0);return{x:o*ka(r),y:o*ja(r)}}return{x:ka(r)*a+(s-a)*ka(r)*e,y:ja(r)*a+(s-a)*ja(r)*e}},e.prototype.positionToAngle=function(t){var e,i=this.axis,r=(this.endAngle-this.startAngle)/(i.end-i.start);return e=i.renderer.inversed?this.startAngle+(i.end-t)*r:this.startAngle+(t-i.start)*r,ha(e,3)},e.prototype.angleToPosition=function(t){var e,i=this.axis,r=(this.endAngle-this.startAngle)/(i.end-i.start);return e=i.renderer.inversed?i.end-(t-this.startAngle)/r:(t-this.startAngle)/r+i.start,ha(e,5)},e.prototype.updateAxisLine=function(){var t=this.pixelRadius,e=this.startAngle,i=this.endAngle,r=Ea(360,i-e);this.line.path=ma({x:t*ka(e),y:t*ja(e)})+ob(e,r,t,t)},e.prototype.updateGridElement=function(t,e,i){e+=(i-e)*t.location;var r=this.positionToPoint(e);if(aa(r.x)&&aa(r.y)&&t.element){var s=zc*Math.atan2(r.y,r.x),a=qb(ba(t.radius)?t.radius:ia(100),this.pixelRadius),o=qb(t.innerRadius,this.pixelRadius);t.zIndex=0;var n=qb(aa(o)?o:this.innerRadius,this.pixelRadiusReal,!0);aa(n)||(n=0),t.path=ma({x:n*ka(s),y:n*ja(s)})+fa({x:a*ka(s),y:a*ja(s)})}this.toggleVisibility(t,e,0,1)},e.prototype.updateTickElement=function(t,e,i){e+=(i-e)*t.location;var r=this.positionToPoint(e);if(t.element){var s=this.pixelRadius,a=zc*Math.atan2(r.y,r.x),o=t.length;t.inside&&(o=-o),t.zIndex=1,t.path=ma({x:s*ka(a),y:s*ja(a)})+fa({x:(s+o)*ka(a),y:(s+o)*ja(a)})}this.toggleVisibility(t,e,0,1)},e.prototype.updateBullet=function(t,e,i){var r=.5;t instanceof Xd&&(r=t.location),e+=(i-e)*r;var s=this.positionToPoint(e),a=this.pixelRadius,o=zc*Math.atan2(s.y,s.x);s={x:a*ka(o),y:a*ja(o)},this.positionItem(t,s),this.toggleVisibility(t,e,0,1)},e.prototype.updateLabelElement=function(t,e,i,r){ba(r)||(r=t.location),e+=(i-e)*r,t.fixPosition(this.positionToAngle(e),this.pixelRadius),t.zIndex=2,this.toggleVisibility(t,e,this.minLabelPosition,this.maxLabelPosition)},e.prototype.fitsToBounds=function(t){return!0},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t)&&(this.invalidateAxisItems(),this.axis&&this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t)&&(this.invalidateAxisItems(),this.axis&&this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),e.prototype.getPositionRangePath=function(t,e,i,r,s){var a="";if(aa(t)&&aa(e)){ba(i)||(i=this.radius),t=wa(t,this.axis.start),(e=Ea(e,this.axis.end))<t&&(e=t);var o=qb(i,this.pixelRadius),n=qb(r,this.pixelRadius,!0),l=this.positionToAngle(t),$=this.positionToAngle(e)-l;a=pd(l,$,o,n,o,s)}return a},e.prototype.createGrid=function(){return new Fi},e.prototype.createFill=function(t){return new Ei(t)},e.prototype.createLabel=function(){return new Ze},e.prototype.pointToPosition=function(t){var e=fc(xb(t),this.startAngle,this.endAngle);return this.coordinateToPosition((e-this.startAngle)/360*this.axisLength)},e}(Ve);ca.registeredClasses.AxisRendererCircular=Gi;var Hi=function(t){function e(){var e=t.call(this)||this;return e._chart=new nb,e.pixelRadiusReal=0,e.className="AxisRendererRadial",e.isMeasured=!1,e.startAngle=-90,e.endAngle=270,e.minGridDistance=30,e.gridType="circles",e.axisAngle=-90,e.isMeasured=!1,e.layout="none",e.radius=ia(100),e.line.strokeOpacity=0,e.labels.template.horizontalCenter="middle",e._disposers.push(e._chart),e.applyTheme(),e}return da(e,t),e.prototype.validate=function(){this.chart&&this.chart.invalid&&this.chart.validate(),t.prototype.validate.call(this)},Object.defineProperty(e.prototype,"axisLength",{get:function(){return this.pixelRadius-this.pixelInnerRadius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelRadius",{get:function(){return qb(this.radius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){var t=this.chart,e=this.getPropertyValue("innerRadius");if(t)if(ba(e)){if(e instanceof Da&&t){var i=t.mr,r=e.value;r=Math.max(i*r,i-Math.min(t.plotContainer.innerHeight,t.plotContainer.innerWidth))/i,e=ia(100*r)}}else(e=t.innerRadius)instanceof Da&&t&&(e=ia(e.value*t.innerRadiusModifyer*100));return e},set:function(t){this.setPercentProperty("innerRadius",t,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){return qb(this.innerRadius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t,e){var i=na(this.positionToCoordinate(t),0,1/0);return{x:i*ka(this.axisAngle),y:i*ja(this.axisAngle)}},e.prototype.updateAxisLine=function(){this.line.path=ma({x:this.pixelInnerRadius*ka(this.axisAngle),y:this.pixelInnerRadius*ja(this.axisAngle)})+fa({x:this.pixelRadius*ka(this.axisAngle),y:this.pixelRadius*ja(this.axisAngle)});var t=this.axis.title;t.valign="none",t.horizontalCenter="middle",t.verticalCenter="bottom",t.y=-this.axisLength/2;var e=90;this.opposite?this.inside||(e=-90):this.inside&&(e=-90),t.rotation=e},e.prototype.updateGridElement=function(t,e,i){e+=(i-e)*t.location;var r,o=this.positionToPoint(e),n=Ka(o),a=this.startAngle,p=this.endAngle,s=this.chart;if(aa(n)&&t.element&&s){var $=s.xAxes.getIndex(0),l=0,h=s.series.getIndex(0);if(h&&(l=h.dataItems.length),"polygons"==this.gridType&&l>0&&h&&$&&$ instanceof jb){var u=$.renderer.grid.template.location,m=$.getAngle(h.dataItems.getIndex(0),"categoryX",u);r=ma({x:n*ka(m),y:n*ja(m)});for(var c=1;c<l;c++)m=$.getAngle(h.dataItems.getIndex(c),"categoryX",u),r+=fa({x:n*ka(m),y:n*ja(m)});m=$.getAngle(h.dataItems.getIndex(l-1),"categoryX",$.renderer.cellEndLocation),r+=fa({x:n*ka(m),y:n*ja(m)})}else r=ma({x:n*ka(a),y:n*ja(a)})+ob(a,p-a,n,n);t.path=r}this.toggleVisibility(t,e,0,1)},e.prototype.updateLabelElement=function(t,e,i,r){ba(r)||(r=t.location),e+=(i-e)*r;var o=this.positionToPoint(e);this.positionItem(t,o),this.toggleVisibility(t,e,this.minLabelPosition,this.maxLabelPosition)},e.prototype.updateBaseGridElement=function(){},e.prototype.fitsToBounds=function(t){return!0},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t)&&this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t)&&this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisAngle",{get:function(){return this.getPropertyValue("axisAngle")},set:function(t){this.setPropertyValue("axisAngle",Mc(t)),this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridType",{get:function(){return this.chart.xAxes.getIndex(0)instanceof jb?this.getPropertyValue("gridType"):"circles"},set:function(t){this.setPropertyValue("gridType",t,!0)},enumerable:!0,configurable:!0}),e.prototype.getPositionRangePath=function(t,e){var i,r=this.pixelInnerRadius,o=this.axisLength+r,n=na(this.positionToCoordinate(t),r,o),a=na(this.positionToCoordinate(e),r,o),p=this.startAngle,s=this.endAngle-p,$=this.chart,l=$.xAxes.getIndex(0),h=$.series.getIndex(0),u=0;if(h&&(u=h.dataItems.length),"polygons"==this.gridType&&u>0&&h&&l&&l instanceof jb){var m=l.renderer.grid.template.location,c=l.getAngle(h.dataItems.getIndex(0),"categoryX",m);i=ma({x:a*ka(c),y:a*ja(c)});for(var d=1;d<u;d++)c=l.getAngle(h.dataItems.getIndex(d),"categoryX",m),i+=fa({x:a*ka(c),y:a*ja(c)});c=l.getAngle(h.dataItems.getIndex(u-1),"categoryX",l.renderer.cellEndLocation),i+=fa({x:a*ka(c),y:a*ja(c)}),i+=ma({x:n*ka(c),y:n*ja(c)});for(d=u-1;d>=0;d--)c=l.getAngle(h.dataItems.getIndex(d),"categoryX",m),i+=fa({x:n*ka(c),y:n*ja(c)})}else i=pd(p,s,a,n);return i},e.prototype.updateBreakElement=function(t){var e=t.startLine,i=t.endLine,r=t.fillShape,o=t.startPoint,n=t.endPoint;e.radius=Math.abs(o.y),i.radius=Math.abs(n.y),r.radius=Math.abs(n.y),r.innerRadius=Math.abs(o.y)},e.prototype.createBreakSprites=function(t){t.startLine=new Ne,t.endLine=new Ne,t.fillShape=new Ne},e.prototype.updateTooltip=function(){if(this.axis){var t=this.axisAngle;t<0&&(t+=360);var e="vertical";(t>45&&t<135||t>225&&t<315)&&(e="horizontal"),this.axis.updateTooltip(e,{x:-4e3,y:-4e3,width:8e3,height:8e3})}},e.prototype.updateTickElement=function(t,e,i){e+=(i-e)*t.location;var r=this.positionToPoint(e);if(t.element){var o=Mc(this.axisAngle+90);o/90!=Math.round(o/90)?t.pixelPerfect=!1:t.pixelPerfect=!0;var n=-t.length;t.inside&&(n*=-1),t.path=ma({x:0,y:0})+fa({x:n*ka(o),y:n*ja(o)})}this.positionItem(t,r),this.toggleVisibility(t,e,0,1)},e.prototype.updateBullet=function(t,e,i){var r=.5;t instanceof Xd&&(r=t.location),e+=(i-e)*r;var o=this.positionToPoint(e);this.positionItem(t,o),this.toggleVisibility(t,e,0,1)},e.prototype.positionToCoordinate=function(t){var e,i=this.axis,r=i.axisFullLength,o=this.pixelInnerRadius;return e=i.renderer.inversed?(i.end-t)*r+o:(t-i.start)*r+o,ha(e,1)},e.prototype.pointToPosition=function(t){var e=Ka(t)-this.pixelInnerRadius;return this.coordinateToPosition(e)},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){this._chart.set(t,null)},enumerable:!0,configurable:!0}),e}(dc);ca.registeredClasses.AxisRendererRadial=Hi;var om=function(e){function r(){var r=e.call(this)||this;return r.className="RadarChartDataItem",r.applyTheme(),r}return da(r,e),r}(lg);var Ii=function(e){function r(){var r=e.call(this)||this;r._axisRendererX=Gi,r._axisRendererY=Hi,r.innerRadiusModifyer=1,r.mr=1,r.className="RadarChart",r.startAngle=-90,r.endAngle=270,r.radius=ia(80),r.innerRadius=0;var t=r.plotContainer.createChild(oa);return t.shouldClone=!1,t.layout="absolute",t.align="center",t.valign="middle",r.seriesContainer.parent=t,r.radarContainer=t,r.bulletsContainer.parent=t,r.axisBulletsContainer=t,r._cursorContainer=t,r.chartContainer.events.on("maxsizechanged",r.invalidate,r,!1),r._bulletMask=t.createChild(Tc),r._bulletMask.shouldClone=!1,r._bulletMask.element=r.paper.add("path"),r._bulletMask.opacity=0,r.applyTheme(),r}return da(r,e),r.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("Radar chart"))},r.prototype.processAxis=function(r){e.prototype.processAxis.call(this,r);var t=r.renderer;t.gridContainer.parent=t,t.breakContainer.parent=t,r.parent=this.radarContainer,t.toBack()},r.prototype.handleXAxisRangeChange=function(){e.prototype.handleXAxisRangeChange.call(this),ga(this.yAxes.iterator(),function(e){e.invalidate()})},r.prototype.handleYAxisRangeChange=function(){e.prototype.handleYAxisRangeChange.call(this),ga(this.xAxes.iterator(),function(e){e.invalidate()})},r.prototype.processConfig=function(r){if(r&&(ba(r.cursor)&&!ba(r.cursor.type)&&(r.cursor.type="RadarCursor"),ba(r.series)&&mb(r.series)))for(var t=0,i=r.series.length;t<i;t++)r.series[t].type=r.series[t].type||"RadarSeries";e.prototype.processConfig.call(this,r)},r.prototype.beforeDraw=function(){e.prototype.beforeDraw.call(this);var r=this.plotContainer,t=gc(this.startAngle,this.endAngle,1),i={x:0,y:0,width:0,height:0},a=r.innerWidth/t.width,n=r.innerHeight/t.height,p=this.innerRadius;if(p instanceof Da){var s=p.value,o=Math.min(a,n);this.mr=o,s=Math.max(o*s,o-Math.min(r.innerHeight,r.innerWidth))/o,i=gc(this.startAngle,this.endAngle,s),this.innerRadiusModifyer=s/p.value,p=ia(100*s)}t=zd([t,i]);var l=Math.min(r.innerWidth/t.width,r.innerHeight/t.height),$=2*qb(this.radius,l)||0,h=$/2,u=this.startAngle,d=this.endAngle;this._pixelInnerRadius=qb(p,h),this._bulletMask.path=pd(u,d-u,h,this._pixelInnerRadius),ga(this.xAxes.iterator(),function(e){e.renderer.useChartAngles&&(e.renderer.startAngle=u,e.renderer.endAngle=d),e.width=$,e.height=$,e.renderer.pixelRadiusReal=h}),ga(this.yAxes.iterator(),function(e){e.renderer.startAngle=u,e.renderer.endAngle=d,e.width=$,e.height=$,e.renderer.pixelRadiusReal=h});var c=this.cursor;c&&(c.width=$,c.height=$,c.startAngle=u,c.endAngle=d),this.radarContainer.definedBBox={x:h*t.x,y:h*t.y,width:h*t.width,height:h*t.height},this.radarContainer.validatePosition()},r.prototype.createSeries=function(){return new Di},Object.defineProperty(r.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(e){this.setPropertyValue("startAngle",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(e){this.setPropertyValue("endAngle",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPercentProperty("radius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pixelInnerRadius",{get:function(){return this._pixelInnerRadius},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(e){this.setPercentProperty("innerRadius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),r.prototype.updateXAxis=function(e){e&&e.processRenderer()},r.prototype.updateYAxis=function(e){e&&e.processRenderer()},r}(Hc);ca.registeredClasses.RadarChart=Ii;var Ji=function(e){function t(){var t=e.call(this)||this;t._axis=new nb,t.className="ClockHand";var i=new Ia;t.fill=i.getFor("alternativeBackground"),t.stroke=t.fill;var r=new Tc;r.radius=5,t.pin=r,t.isMeasured=!1,t.startWidth=5,t.endWidth=1,t.width=ia(100),t.height=ia(100),t.radius=ia(100),t.innerRadius=ia(0);var n=new di;return t.hand=n,t._disposers.push(t._axis),t.applyTheme(),t}return da(t,e),t.prototype.validate=function(){e.prototype.validate.call(this);var t=this.hand;t.width=this.pixelWidth;var i=Math.max(this.startWidth,this.endWidth);if(t.height=i,t.leftSide=ia(this.startWidth/i*100),t.rightSide=ia(this.endWidth/i*100),this.axis){var r=this.axis.renderer,n=qb(this.innerRadius,r.pixelRadius),o=qb(this.radius,r.pixelRadius);t.x=n,t.y=-i/2,t.width=o-n}},Object.defineProperty(t.prototype,"pin",{get:function(){return this._pin},set:function(e){this._pin&&this.removeDispose(this._pin),e&&(this._pin=e,e.parent=this,this._disposers.push(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hand",{get:function(){return this._hand},set:function(e){this._hand&&this.removeDispose(this._hand),e&&(this._hand=e,e.parent=this,this._disposers.push(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPercentProperty("radius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(e){this.setPercentProperty("innerRadius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startWidth",{get:function(){return this.getPropertyValue("startWidth")},set:function(e){this.setPropertyValue("startWidth",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endWidth",{get:function(){return this.getPropertyValue("endWidth")},set:function(e){this.setPropertyValue("endWidth",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationDirection",{get:function(){return this.getPropertyValue("rotationDirection")},set:function(e){this.setPropertyValue("rotationDirection",e)},enumerable:!0,configurable:!0}),t.prototype.showValue=function(e,t,i){if(this._value=e,null!=e&&(aa(t)||(t=0),this.axis)){var r=this.axis.renderer.positionToAngle(this.axis.anyToPosition(e)),n=this.rotation;"clockWise"==this.rotationDirection&&r<n&&(this.rotation=n-360),"counterClockWise"==this.rotationDirection&&r>n&&(this.rotation=n+360),this.animate({property:"rotation",to:r},t,i)}},Object.defineProperty(t.prototype,"currentPosition",{get:function(){if(this.axis)return this.axis.renderer.angleToPosition(this.rotation)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this.showValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axis",{get:function(){return this._axis.get()},set:function(e){if(this.axis!=e&&this._axis.set(e,new Ya([e.events.on("datavalidated",this.updateValue,this,!1),e.events.on("datarangechanged",this.updateValue,this,!1),e.events.on("dataitemsvalidated",this.updateValue,this,!1),e.events.on("propertychanged",this.invalidate,this,!1)])),e){var t=e.chart;t&&(this.rotation=t.startAngle)}this.parent=e.renderer,this.zIndex=5},enumerable:!0,configurable:!0}),t.prototype.updateValue=function(){this.value=this.value},t.prototype.processConfig=function(t){t&&ba(t.axis)&&Ca(t.axis)&&this.map.hasKey(t.axis)&&(t.axis=this.map.getKey(t.axis)),e.prototype.processConfig.call(this,t)},t}(oa);ca.registeredClasses.ClockHand=Ji;var h=function(e){function t(){var t=e.call(this)||this;return t.className="GaugeChartDataItem",t.applyTheme(),t}return da(t,e),t}(om);var pm=function(e){function t(){var t=e.call(this)||this;return t.className="GaugeChart",t.startAngle=180,t.endAngle=360,t.hands=new _a(new Ji()),t.hands.events.on("inserted",t.processHand,t,!1),t._disposers.push(new Sa(t.hands)),t._disposers.push(t.hands.template),t.applyTheme(),t}return da(t,e),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("Gauge chart"))},t.prototype.processHand=function(e){var t=e.newValue;t.axis||(t.axis=this.xAxes.getIndex(0))},t.prototype.configOrder=function(t,r){return t==r?0:"hands"==t?1:"hands"==r?-1:e.prototype.configOrder.call(this,t,r)},t}(Ii);ca.registeredClasses.GaugeChart=pm;var $e=function(e){function t(){var t=e.call(this)||this;return t.className="PercentSeriesDataItem",t.applyTheme(),t}return da(t,e),t.prototype.uidAttr=function(){return this.slice.uidAttr()},t.prototype.hide=function(t,r,i,o){return o||(o=["value"]),e.prototype.hide.call(this,t,r,0,o)},t.prototype.setVisibility=function(t,r){r||(t?this.setWorkingValue("value",this.values.value.value,0,0):this.setWorkingValue("value",0,0,0)),e.prototype.setVisibility.call(this,t,r)},t.prototype.show=function(t,r,i){return i||(i=["value"]),e.prototype.show.call(this,t,r,i)},Object.defineProperty(t.prototype,"category",{get:function(){return this.properties.category},set:function(e){this.setProperty("category",e)},enumerable:!0,configurable:!0}),t.prototype.createLegendMarker=function(e){this.component.createLegendMarker(e,this)},Object.defineProperty(t.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(e){this._legendDataItem=e,e.label&&(e.label.dataItem=this),e.valueLabel&&(e.valueLabel.dataItem=this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tick",{get:function(){var e=this;if(!this._tick){var t=this.component.ticks.create();this._tick=t,this.addSprite(t),this._disposers.push(t),t.parent=this.component.ticksContainer,this._disposers.push(new La(function(){e.component&&e.component.ticks.removeValue(t)})),t.visible=this.visible}return this._tick},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){var e=this;if(!this._label){var t=this.component.labels.create();this.addSprite(t),this._label=t,this._disposers.push(t),t.parent=this.component.labelsContainer,this._disposers.push(new La(function(){e.component&&e.component.labels.removeValue(t)})),t.visible=this.visible}return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"slice",{get:function(){var e=this;if(!this._slice){var t=this.component,r=t.slices.create();this.addSprite(r),this._slice=r,this._disposers.push(r),r.parent=t.slicesContainer,this._disposers.push(new La(function(){t.slices.removeValue(r)})),r.visible=this.visible,t.itemsFocusable()?(ba(this.component.role)||(this.component.role="menu"),ba(r.role)||(r.role="menuitem"),r.focusable=!0):(ba(this.component.role)||(this.component.role="list"),ba(r.role)||(r.role="listitem"),r.focusable=!1),r.focusable&&(r.events.on("focus",function(i){r.readerTitle=t.populateString(t.itemReaderText,e)},void 0,!1),r.events.on("blur",function(e){r.readerTitle=""},void 0,!1)),r.hoverable&&(r.events.on("over",function(i){r.readerTitle=t.populateString(t.itemReaderText,e)},void 0,!1),r.events.on("out",function(e){r.readerTitle=""},void 0,!1))}return this._slice},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hiddenInLegend",{get:function(){return this.properties.hiddenInLegend},set:function(e){this.setProperty("hiddenInLegend",e)},enumerable:!0,configurable:!0}),t}(Re);var Yd=function(e){function t(){var t=e.call(this)||this;t.className="PercentSeries",t._addAllDataItems=!1,t.colors=new Sd,t.colors.step=1,t.isMeasured=!0,t.calculatePercent=!0;var r=t.createChild(oa);r.shouldClone=!1,r.isMeasured=!1,t.slicesContainer=r;var i=t.createChild(oa);i.shouldClone=!1,i.isMeasured=!1,i.layout="none",t.ticksContainer=i;var o=t.createChild(oa);return o.shouldClone=!1,o.isMeasured=!1,o.layout="none",t.labelsContainer=o,t.alignLabels=!1,t.bulletsContainer.toFront(),t.skipFocusThreshold=50,t.defaultState.transitionEasing=wh,t.itemReaderText="{category}: {value.percent.formatNumber('#.#')}%",t.applyTheme(),t}return da(t,e),t.prototype.createSlice=function(){return new xa},t.prototype.createTick=function(){return new Wd},t.prototype.createLabel=function(){return new Gb},Object.defineProperty(t.prototype,"slices",{get:function(){if(!this._slices){var e=this.createSlice();e.applyOnClones=!0,this._disposers.push(e),this.initSlice(e),this._slices=new _a(e),this._disposers.push(new Sa(this._slices))}return this._slices},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ticks",{get:function(){if(!this._ticks){var e=this.createTick();e.applyOnClones=!0,this._disposers.push(e),this.initTick(e),this._ticks=new _a(e),this._disposers.push(new Sa(this._ticks))}return this._ticks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labels",{get:function(){if(!this._labels){var e=this.createLabel();e.applyOnClones=!0,this._disposers.push(e),this.initLabel(e),this._labels=new _a(e),this._disposers.push(new Sa(this._labels))}return this._labels},enumerable:!0,configurable:!0}),t.prototype.createDataItem=function(){return new $e},t.prototype.initSlice=function(e){},t.prototype.initLabel=function(e){e.text="{category}: {value.percent.formatNumber('#.0')}%",e.isMeasured=!1,e.padding(5,5,5,5)},t.prototype.initTick=function(e){},t.prototype.validateDataItems=function(){this.colors.reset(),this.patterns&&this.patterns.reset(),e.prototype.validateDataItems.call(this)},t.prototype.validateDataElement=function(t){var r=t.slice;r&&(null==r.fill?this.patterns?(ba(r.stroke)||(r.stroke=this.colors.next()),r.fill=this.patterns.next(),ba(r.fillOpacity)&&(r.fill.backgroundOpacity=r.fillOpacity),r.stroke instanceof Ga&&(r.fill.stroke=r.stroke,r.fill.fill=r.stroke)):r.fill=this.colors.next():this.colors.currentStep+=this.colors.step,null==r.stroke&&(r.stroke=r.fill)),e.prototype.validateDataElement.call(this,t),r&&t.bullets.each(function(e,t){null==t.fill&&(t.fill=r.fill),null==t.stroke&&(t.stroke=r.stroke)}),this.updateLegendValue(t)},t.prototype.validateData=function(){e.prototype.validateData.call(this),this.chart&&this.chart.feedLegend()},t.prototype.arrangeLabels=function(e){for(var t=0,r=e.length;t<r;t++){var i=e[t].label;if(i){i.invalid&&i.validate();var o=i.measuredHeight;i.visible||(o=0),i.pixelY-o/2<-this.maxHeight/2&&(i.y=-this.maxHeight/2+o/2);var s=this.getNextLabel(t+1,e),l=i.pixelY+o;s&&s.y<l&&(s.y=l)}}},t.prototype.arrangeLabels2=function(e){for(var t=this.maxHeight/2,r=e.length-1;r>=0;r--){var i=e[r].label;if(i){i.invalid&&i.validate();var o=i.measuredHeight;i.visible||(o=0),r==e.length-1&&(t+=o/2),i.pixelY+o>t&&(i.y=t-o,t=i.y)}}},t.prototype.getNextLabel=function(e,t){if(t.length>=e){var r=t[e];if(r)return r.label&&r.visible?r.label:this.getNextLabel(e+1,t)}},Object.defineProperty(t.prototype,"colors",{get:function(){return this.getPropertyValue("colors")},set:function(e){this.setPropertyValue("colors",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"patterns",{get:function(){return this.getPropertyValue("patterns")},set:function(e){this.setPropertyValue("patterns",e,!0)},enumerable:!0,configurable:!0}),t.prototype.createLegendMarker=function(e,t){ga(e.children.iterator(),function(r){var i=t.slice;r.defaultState.properties.fill=i.fill,r.defaultState.properties.stroke=i.stroke,r.defaultState.properties.fillOpacity=i.fillOpacity,r.defaultState.properties.strokeOpacity=i.strokeOpacity,r.fill=i.fill,r.stroke=i.stroke,r.fillOpacity=i.fillOpacity,r.strokeOpacity=i.strokeOpacity,null==r.fill&&(r.__disabled=!0);var o=e.dataItem;o.color=i.fill,o.colorOrig=i.fill,r.addDisposer(i.events.on("propertychanged",function(e){"fill"==e.property&&(r.__disabled=!1,r.isActive||(r.fill=i.fill),r.defaultState.properties.fill=i.fill,o.color=i.fill,o.colorOrig=i.fill),"stroke"==e.property&&(r.isActive||(r.stroke=i.stroke),r.defaultState.properties.stroke=i.stroke)},void 0,!1))})},t.prototype.handleSliceScale=function(e){var t=this,r=e.target.dataItem;ga(r.bullets.iterator(),function(e){var r=e[1];t.positionBullet(r)})},t.prototype.handleSliceMove=function(e){},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.slices.template.copyFrom(t.slices.template),this.labels.template.copyFrom(t.labels.template),this.ticks.template.copyFrom(t.ticks.template),this.colors=t.colors.clone()},Object.defineProperty(t.prototype,"alignLabels",{get:function(){return this.getPropertyValue("alignLabels")},set:function(e){this.setAlignLabels(e)},enumerable:!0,configurable:!0}),t.prototype.setAlignLabels=function(e){this.setPropertyValue("alignLabels",e,!0)},Object.defineProperty(t.prototype,"ignoreZeroValues",{get:function(){return this.getPropertyValue("ignoreZeroValues")},set:function(e){this.setPropertyValue("ignoreZeroValues",e,!0)},enumerable:!0,configurable:!0}),t.prototype.updateLegendValue=function(e){if(e){var t=e.legendDataItem,r=e.legendSettings;t&&r&&r&&(r.labelText&&(t.label.text=r.labelText),r.itemLabelText&&(t.label.text=r.itemLabelText),r.valueText&&(t.valueLabel.text=r.valueText),r.itemValueText&&(t.valueLabel.text=r.itemValueText))}},t}(Se);ca.registeredClasses.PercentSeries=Yd,ca.registeredClasses.PercentSeriesDataItem=$e,ub.push({relevant:Ab.maybeXS,state:function(e,t){if(e instanceof Yd){var r=e.states.create(t);return e.labels.template.states.create(t).properties.disabled=!0,e.ticks.template.states.create(t).properties.disabled=!0,r}return null}});var pg=function(e){function t(){var t=e.call(this)||this;return t.className="PercentChartDataItem",t.applyTheme(),t}return da(t,e),t}(vi);var qg=function(e){function t(){var t=e.call(this)||this;return t.className="PercentChart",t.align="none",t.valign="none",t.chartContainer.minHeight=50,t.chartContainer.minWidth=50,t.applyTheme(),t}return da(t,e),t.prototype.validateData=function(){e.prototype.validateData.call(this),this.feedLegend()},t.prototype.feedLegend=function(){var e=this.legend;if(e){var t=[];ga(this.series.iterator(),function(e){e.hiddenInLegend||ga(e.dataItems.iterator(),function(r){r.hiddenInLegend||(t.push(r),r.legendSettings||(r.legendSettings=e.legendSettings))})}),e.data=t,e.dataFields.name="category"}},t.prototype.createSeries=function(){return new Yd},t.prototype.setLegend=function(t){e.prototype.setLegend.call(this,t),t&&(t.labels.template.text="{category}",t.valueLabels.template.text="{value.percent.formatNumber('#.0')}%",t.itemContainers.template.events.on("over",function(e){var t=e.target.dataItem.dataContext;if(t.visible&&!t.isHiding){var r=t.slice;r.dispatchImmediately("over"),r.isHover=!0,r.interactions.isRealHover=!0}}),t.itemContainers.template.events.on("out",function(e){var t=e.target.dataItem.dataContext.slice;t.dispatchImmediately("out"),t.isHover=!1}))},t}(hg);ca.registeredClasses.PercentChart=qg,ca.registeredClasses.PercentChartDataItem=pg;var Ki=function(e){function i(){var i=e.call(this)||this;return i._label=new nb,i._slice=new nb,i.className="PieTick",i.element=i.paper.add("polyline"),i._disposers.push(i._label),i._disposers.push(i._slice),i.applyTheme(),i}return da(i,e),i.prototype.draw=function(){e.prototype.draw.call(this);var i=this.slice,t=this.label,r=i.dataItem.component;if(i&&i.radius>0&&t&&t.text){var s=i.dx+i.slice.dx+i.pixelX+i.ix*i.radius*i.scale,o=i.dy+i.slice.dy+i.pixelY+i.iy*i.radiusY*i.scale,l=void 0,p=void 0,a=void 0,n=void 0;if(r.alignLabels)l=t.pixelX-this.length,p=t.pixelY,a=t.pixelX,n=p,"right"==t.horizontalCenter&&(a=(l+=2*this.length)-this.length);else{var c=t.pixelRadius(i.radius);a=l=s+c*i.ix,n=p=o+c*i.iy}this.element.attr({points:[s,o,l,p,a,n]})}},Object.defineProperty(i.prototype,"slice",{get:function(){return this._slice.get()},set:function(e){this._slice.set(e,new Ya([e.events.on("transformed",this.invalidate,this),e.events.on("validated",this.invalidate,this)]))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"label",{get:function(){return this._label.get()},set:function(e){this._label.set(e,e.events.on("transformed",this.invalidate,this,!1))},enumerable:!0,configurable:!0}),i}(Wd);ca.registeredClasses.PieTick=Ki;var rg=function(e){function t(){var t=e.call(this)||this;return t.className="PieSeriesDataItem",t.values.radiusValue={},t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"radiusValue",{get:function(){return this.values.radiusValue.value},set:function(e){this.setValue("radiusValue",e)},enumerable:!0,configurable:!0}),t.prototype.hide=function(t,i,r,a){return e.prototype.hide.call(this,t,i,0,["value","radiusValue"])},t.prototype.show=function(t,i,r){return e.prototype.show.call(this,t,i,["value","radiusValue"])},t}($e);var _e=function(e){function t(){var t=e.call(this)||this;return t.className="PieSeries",t.alignLabels=!0,t.layout="none",t.labels.template.radius=ia(5),t.addDisposer(t.labels.template.events.on("enabled",t.invalidate,t,!1)),t.applyTheme(),t}return da(t,e),t.prototype.createSlice=function(){return new Vc},t.prototype.createTick=function(){return new Ki},t.prototype.createLabel=function(){return new Ze},t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("Pie Slice Series"))},t.prototype.createDataItem=function(){return new rg},t.prototype.initSlice=function(e){e.isMeasured=!1,e.defaultState.properties.scale=1,e.observe("scale",this.handleSliceScale,this),e.observe(["dx","dy","x","y","shiftRadius"],this.handleSliceMove,this),e.tooltipText="{category}: {value.percent.formatNumber('#.#')}% ({value.value})",e.states.create("hover").properties.scale=1.05,e.defaultState.properties.shiftRadius=0,e.togglable=!0,e.events.on("toggled",function(e){e.target.hideTooltip(),e.target.interactions.lastHitPointer&&e.target.interactions.lastHitPointer.touch&&!e.target.isActive&&(e.target.isHover=!1)}),e.states.create("active").properties.shiftRadius=.1},t.prototype.validate=function(){this._leftItems=[],this._rightItems=[],this._currentStartAngle=this.startAngle,this._arcRect=gc(this.startAngle,this.endAngle),this._maxRadiusPercent=0;for(var t=this.startIndex;t<this.endIndex;t++){var i=this.dataItems.getIndex(t).values.radiusValue.percent;i>this._maxRadiusPercent&&(this._maxRadiusPercent=i)}e.prototype.validate.call(this),this.alignLabels&&(this.startAngle>this.endAngle?this._rightItems.reverse():this._leftItems.reverse(),this._rightItems.sort(function(e,t){var i=(e.slice.middleAngle+360)%360,r=(t.slice.middleAngle+360)%360;return i>270&&(i-=360),r>270&&(r-=360),i<r?-1:i>r?1:0}),this._leftItems.sort(function(e,t){var i=(e.slice.middleAngle+360)%360,r=(t.slice.middleAngle+360)%360;return i<r?1:i>r?-1:0}),this.arrangeLabels(this._rightItems),this.arrangeLabels2(this._rightItems),this.arrangeLabels(this._leftItems),this.arrangeLabels2(this._leftItems))},t.prototype.validateDataElement=function(t){if(this.pixelRadius>0){!this.ignoreZeroValues||0!=t.value&&null!=t.value?t.__disabled=!1:t.__disabled=!0;var i=t.slice;if(i.radius=this.pixelRadius,aa(t.radiusValue)&&(i.radius=this.pixelInnerRadius+(this.pixelRadius-this.pixelInnerRadius)*t.values.radiusValue.percent/this._maxRadiusPercent),i.innerRadius instanceof Da||(i.innerRadius=this.pixelInnerRadius),i.startAngle=this._currentStartAngle,i.arc=Math.abs(t.values.value.percent)*(this.endAngle-this.startAngle)/100,!this.labels.template.disabled){var r=t.label,a=t.tick;a.slice=i,a.label=r;var s=(i.middleAngle+360)%360,n=void 0;if(this.alignLabels){var l=r.pixelRadius(i.radius),o=a.length+l;r.dx=0,r.dy=0,r.verticalCenter="middle";var u=this._arcRect;s>270||s<=90?(o+=(u.width+u.x)*this.pixelRadius,r.horizontalCenter="left",this._rightItems.push(t)):(o-=u.x*this.pixelRadius,r.horizontalCenter="right",this._leftItems.push(t),o*=-1);var p=i.radius+a.length+l;n={x:o,y:i.iy*p},r.moveTo(n)}else{var c=i.depth;aa(c)||(c=0),r.fixPosition(i.middleAngle,i.radius,i.radiusY,0,-c)}}this._currentStartAngle+=i.arc,e.prototype.validateDataElement.call(this,t)}},Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPercentProperty("radius",e,!0,!1,10,!1)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelRadius",{get:function(){return this._pixelRadius},set:function(e){this._pixelRadius!=e&&(this._pixelRadius=e,this.invalidateDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelInnerRadius",{get:function(){return this._pixelInnerRadius},set:function(e){this._pixelInnerRadius!=e&&(this._pixelInnerRadius=e,this.invalidateDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(e){this.setPercentProperty("innerRadius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startAngle",{get:function(){var e=this.getPropertyValue("startAngle");return aa(e)?e:this._startAngleInternal},set:function(e){this.setPropertyValue("startAngle",Mc(e),!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endAngle",{get:function(){var e=this.getPropertyValue("endAngle");return aa(e)?e:this._endAngleInternal},set:function(e){this.setPropertyValue("endAngle",e,!0)},enumerable:!0,configurable:!0}),t.prototype.positionBullet=function(t){e.prototype.positionBullet.call(this,t);var i=t.dataItem.slice,r=t.locationX;aa(r)||(r=.5);var a=t.locationY;aa(a)||(a=1);var s=i.startAngle+i.arc*r;t.x=a*i.radius*ka(s),t.y=a*i.radiusY*ja(s)},t.prototype.handleSliceMove=function(e){if(!this.alignLabels){var t=e.target,i=t.dataItem;if(i){var r=i.label;r&&(r.dx=r.fdx+t.dx+t.pixelX,r.dy=r.fdy+t.dy+t.pixelY)}}},Object.defineProperty(t.prototype,"bbox",{get:function(){if(this.definedBBox)return this.definedBBox;var e=this.chart;return e?gc(e.startAngle,e.endAngle,this.pixelRadius):gc(this.startAngle,this.endAngle,this.pixelRadius)},enumerable:!0,configurable:!0}),t}(Yd);ca.registeredClasses.PieSeries=_e,ca.registeredClasses.PieSeriesDataItem=rg;var Li=function(e){function t(){var t=e.call(this)||this;return t.className="PieChartDataItem",t.applyTheme(),t}return da(t,e),t}(pg);var sg=function(e){function t(){var t=e.call(this)||this;t.className="PieChart",t.innerRadius=0,t.radius=ia(80),t.align="none",t.valign="none",t.startAngle=-90,t.endAngle=270;var r=t.seriesContainer;return r.isMeasured=!0,r.valign="middle",r.align="center",r.layout="absolute",r.width=void 0,r.height=void 0,t.chartContainer.minHeight=50,t.chartContainer.minWidth=50,t.chartContainer.events.on("maxsizechanged",t.updateRadius,t,!1),t.applyTheme(),t}return da(t,e),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("Pie chart"))},t.prototype.validateLayout=function(){e.prototype.validateLayout.call(this),this.updateRadius()},t.prototype.handleSeriesAdded=function(t){e.prototype.handleSeriesAdded.call(this,t),this._chartPixelRadius=void 0,this.updateSeriesAngles()},t.prototype.updateSeriesAngles=function(){var e=this;this.series.each(function(t){t._startAngleInternal=e.startAngle,t._endAngleInternal=e.endAngle})},t.prototype.updateRadius=function(){var e=this.chartContainer,t=gc(this.startAngle,this.endAngle,1),r={x:0,y:0,width:0,height:0},i=this.innerRadius;i instanceof Da&&(r=gc(this.startAngle,this.endAngle,i.value)),t=zd([t,r]);var a=Math.min(e.innerWidth/t.width,e.innerHeight/t.height);aa(a)||(a=0);var n=qb(this.radius,a),s=qb(this.innerRadius,a),p=(n-s)/this.series.length;n==this._chartPixelRadius&&s==this._chartPixelInnerRadius||(this._chartPixelRadius=n,this._chartPixelInnerRadius=s,ga(Oc(this.series.iterator()),function(e){var t=e[0],r=e[1],i=s+qb(r.radius,n-s),a=s+qb(r.innerRadius,n-s);aa(i)||(i=s+p*(t+1)),aa(a)||(a=s+p*t),r.pixelRadius=i,r.pixelInnerRadius=a}),this.seriesContainer.definedBBox={x:n*t.x,y:n*t.y,width:n*t.width,height:n*t.height},this.seriesContainer.invalidateLayout(),this.bulletsContainer.x=this.seriesContainer.x,this.bulletsContainer.y=this.seriesContainer.y)},Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPercentProperty("radius",e,!0,!1,10,!1)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(e){this.setPercentProperty("innerRadius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),t.prototype.createSeries=function(){return new _e},Object.defineProperty(t.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(e){this.setPropertyValue("startAngle",e)&&(this.updateRadius(),this.updateSeriesAngles())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(e){this.setPropertyValue("endAngle",e)&&(this.updateRadius(),this.updateSeriesAngles())},enumerable:!0,configurable:!0}),t}(qg);ca.registeredClasses.PieChart=sg,ca.registeredClasses.PieChartDataItem=Li;var Mi=function(e){function t(){var t=e.call(this)||this;return t.className="PieSeries3DDataItem",t.values.depthValue={},t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"depthValue",{get:function(){return this.values.depthValue.value},set:function(e){this.setValue("depthValue",e)},enumerable:!0,configurable:!0}),t}(rg);var Ni=function(e){function t(){var t=e.call(this)||this;return t.className="PieSeries3D",t.applyTheme(),t}return da(t,e),t.prototype.createDataItem=function(){return new Mi},t.prototype.createSlice=function(){return new bm},t.prototype.validateDataElement=function(t){var r=t.slice,i=this.depth;aa(i)||(i=this.chart.depth);var a=t.values.depthValue.percent;aa(a)||(a=100),r.depth=a*i/100;var l=this.angle;aa(l)||(l=this.chart.angle),r.angle=l,e.prototype.validateDataElement.call(this,t)},t.prototype.validate=function(){e.prototype.validate.call(this);for(var t=this._workingStartIndex;t<this._workingEndIndex;t++){var r=this.dataItems.getIndex(t).slice,i=r.startAngle;i>=-90&&i<90?r.toFront():i>=90&&r.toBack()}},Object.defineProperty(t.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(e){this.setPropertyValue("depth",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(e){this.setPropertyValue("angle",e)},enumerable:!0,configurable:!0}),t.prototype.positionBullet=function(t){e.prototype.positionBullet.call(this,t);var r=t.dataItem.slice;t.y=t.pixelY-r.depth},t}(_e);ca.registeredClasses.PieSeries3D=Ni,ca.registeredClasses.PieSeries3DDataItem=Mi;var i=function(e){function t(){var t=e.call(this)||this;return t.className="PieChart3DDataItem",t.applyTheme(),t}return da(t,e),t}(Li);var qm=function(e){function t(){var t=e.call(this)||this;return t.className="PieChart3D",t.depth=20,t.angle=10,t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(e){this.setPropertyValue("depth",e)&&this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(e){e=na(e,0,90),this.setPropertyValue("angle",e)&&this.invalidateDataUsers()},enumerable:!0,configurable:!0}),t.prototype.createSeries=function(){return new Ni},t}(sg);ca.registeredClasses.PieChart3D=qm;var rm=function(t){function e(){var e=t.call(this)||this;return e.className="SlicedChartDataItem",e.applyTheme(),e}return da(e,t),e}(pg);var sm=function(t){function e(){var e=t.call(this)||this;return e.className="SlicedChart",e.seriesContainer.layout="horizontal",e.padding(15,15,15,15),e.applyTheme(),e}return da(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("Sliced chart"))},e.prototype.validate=function(){t.prototype.validate.call(this)},e}(qg);ca.registeredClasses.SlicedChart=sm,ca.registeredClasses.SlicedChartDataItem=rm;var af=function(e){function t(){var t=e.call(this)||this;return t.legendSettings=new ui,t.className="FlowDiagramNode",t.isMeasured=!1,new Ia,t.draggable=!0,t.inert=!0,t.setStateOnChildren=!0,t.events.on("positionchanged",t.invalidateLinks,t,!1),t.events.on("sizechanged",t.invalidateLinks,t,!1),t}return da(t,e),t.prototype.handleHit=function(e){this.isHidden||this.isHiding?this.show():this.hide()},t.prototype.show=function(t){var r=e.prototype.show.call(this,t);return this.outgoingDataItems.each(function(e){(!e.toNode||e.toNode&&!e.toNode.isHidden)&&e.setWorkingValue("value",e.getValue("value"),t)}),this.incomingDataItems.each(function(e){(!e.fromNode||e.fromNode&&!e.fromNode.isHidden)&&e.setWorkingValue("value",e.getValue("value"),t)}),r},t.prototype.hide=function(t){var r=e.prototype.hide.call(this,t);return this.outgoingDataItems.each(function(e){e.setWorkingValue("value",0,t)}),this.incomingDataItems.each(function(e){e.setWorkingValue("value",0,t)}),r},t.prototype.validate=function(){this.isDisposed()||(e.prototype.validate.call(this),this.invalidateLinks())},t.prototype.invalidateLinks=function(){var e=this;this.outgoingDataItems.each(function(t){var r=t.link;if("fromNode"==r.colorMode&&(r.fill=r.dataItem.fromNode.color),"gradient"==r.colorMode){r.fill=r.gradient,r.stroke=r.gradient;var o=r.gradient.stops.getIndex(0);o&&(o.color=e.color,r.gradient.validate())}}),this.incomingDataItems.each(function(t){var r=t.link;if("toNode"==r.colorMode&&(r.fill=r.dataItem.toNode.color),"gradient"==r.colorMode){r.fill=r.gradient,r.stroke=r.gradient;var o=r.gradient.stops.getIndex(1);o&&(o.color=e.color,r.gradient.validate())}})},Object.defineProperty(t.prototype,"incomingDataItems",{get:function(){var e=this;if(!this._incomingDataItems){var t=new Fa;t.events.on("inserted",function(){"name"==e.chart.sortBy?e._incomingSorted=hd(e._incomingDataItems.iterator(),function(e,t){return tf(e.fromName,t.fromName)}):"value"==e.chart.sortBy?e._incomingSorted=hd(e._incomingDataItems.iterator(),function(e,t){return vf(ic(e.value,t.value))}):e._incomingSorted=e._incomingDataItems.iterator()},void 0,!1),this._incomingDataItems=t}return this._incomingDataItems},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outgoingDataItems",{get:function(){var e=this;if(!this._outgoingDataItems){var t=new Fa;t.events.on("inserted",function(){"name"==e.chart.sortBy?e._outgoingSorted=hd(e._outgoingDataItems.iterator(),function(e,t){return tf(e.fromName,t.fromName)}):"value"==e.chart.sortBy?e._outgoingSorted=hd(e._outgoingDataItems.iterator(),function(e,t){return vf(ic(e.value,t.value))}):e._outgoingSorted=e._outgoingDataItems.iterator()},void 0,!1),this._outgoingDataItems=t}return this._outgoingDataItems},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.getPropertyValue("name")},set:function(e){this.setPropertyValue("name",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"total",{get:function(){return this.getPropertyValue("total")},set:function(e){this.setPropertyValue("total",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalIncoming",{get:function(){return this.getPropertyValue("totalIncoming")},set:function(e){this.setPropertyValue("totalIncoming",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalOutgoing",{get:function(){return this.getPropertyValue("totalOutgoing")},set:function(e){this.setPropertyValue("totalOutgoing",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.getPropertyValue("color")},set:function(e){this.setColorProperty("color",e),this._background&&(this._background.fill=e),this.fill=e},enumerable:!0,configurable:!0}),t.prototype.createLegendMarker=function(e){var t=e.pixelWidth,r=e.pixelHeight;e.removeChildren();var o=e.createChild(mc);o.shouldClone=!1,gb(this,o,db),o.stroke=this.fill,o.copyFrom(this),o.padding(0,0,0,0),o.width=t,o.height=r;var i=e.dataItem;i.color=o.fill,i.colorOrig=o.fill},Object.defineProperty(t.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(e){this._legendDataItem=e,this._legendDataItem.itemContainer.deepInvalidate()},enumerable:!0,configurable:!0}),t}(oa);ca.registeredClasses.FlowDiagramNode=af;var bf=function(e){function t(){var t=e.call(this)||this;t.className="FlowDiagramLink";var o=new Ia;return t.maskBullets=!1,t.colorMode="fromNode",t.layout="none",t.isMeasured=!1,t.startAngle=0,t.endAngle=0,t.strokeOpacity=0,t.verticalCenter="none",t.horizontalCenter="none",t.tooltipText="{fromName}\u2192{toName}:{value.value}",t.tooltipLocation=.5,t.link=t.createChild(xa),t.link.shouldClone=!1,t.link.setElement(t.paper.add("path")),t.link.isMeasured=!1,t.fillOpacity=.2,t.fill=o.getFor("alternativeBackground"),t.applyTheme(),t}return da(t,e),t.prototype.positionBullets=function(){var e=this;ga(this.bullets.iterator(),function(t){t.parent=e.bulletsContainer,t.maxWidth=e.maxWidth,t.maxHeight=e.maxHeight,e.positionBullet(t)})},Object.defineProperty(t.prototype,"bulletsContainer",{get:function(){if(!this._bulletsContainer){var e=this.createChild(oa);e.shouldClone=!1,e.layout="none",this._bulletsContainer=e}return this._bulletsContainer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bulletsMask",{get:function(){if(!this._bulletsMask){var e=this.createChild(xa);e.shouldClone=!1,e.setElement(this.paper.add("path")),e.isMeasured=!1,this._bulletsMask=e}return this._bulletsMask},enumerable:!0,configurable:!0}),t.prototype.positionBullet=function(e){var t=e.locationX;aa(t)||(t=e.locationY),aa(t)||(t=.5);var o=this.middleLine.positionToPoint(t);e.moveTo(o);var i,r=e.propertyFields.rotation;e.dataItem&&(i=e.dataItem.dataContext[r]);aa(i)||(i=o.angle),e.rotation=i},Object.defineProperty(t.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(e){this.setPropertyValue("startAngle",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(e){this.setPropertyValue("endAngle",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colorMode",{get:function(){return this.getPropertyValue("colorMode")},set:function(e){if("gradient"==e){var t=this.fill;this.gradient.stops.clear(),t instanceof Ga&&(this.gradient.addColor(t),this.gradient.addColor(t)),this.fill=this.gradient,this.stroke=this.gradient}this.setPropertyValue("colorMode",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(e){this.setPropertyValue("maskBullets",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipLocation",{get:function(){return this.getPropertyValue("tooltipLocation")},set:function(e){this.setPropertyValue("tooltipLocation",e,!0)},enumerable:!0,configurable:!0}),t.prototype.setFill=function(t){e.prototype.setFill.call(this,t);var o=this._gradient;o&&t instanceof Ga&&(o.stops.clear(),o.addColor(t),o.addColor(t))},t.prototype.measureElement=function(){},Object.defineProperty(t.prototype,"bullets",{get:function(){var e=this;return this._bullets||(this._bullets=new _a(new nc()),this._disposers.push(new Sa(this._bullets)),this._disposers.push(this._bullets.template),this._bullets.events.on("inserted",function(t){t.newValue.events.on("propertychanged",function(t){"locationX"!=t.property&&"locationY"!=t.property||e.positionBullet(t.target)},void 0,!1)},void 0,!1)),this._bullets},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.bullets.copyFrom(t.bullets);var o=this.middleLine;o&&(o instanceof cc&&t.middleLine instanceof cc&&o.copyFrom(t.middleLine),o instanceof Qd&&t.middleLine instanceof Qd&&o.copyFrom(t.middleLine)),this.link.copyFrom(t.link)},t.prototype.getTooltipX=function(){if(this.middleLine)return this.middleLine.positionToPoint(this.tooltipLocation).x},t.prototype.getTooltipY=function(){if(this.middleLine)return this.middleLine.positionToPoint(this.tooltipLocation).y},Object.defineProperty(t.prototype,"gradient",{get:function(){return this._gradient||(this._gradient=new Zb),this._gradient},enumerable:!0,configurable:!0}),t}(oa);ca.registeredClasses.FlowDiagramLink=bf;var tg=function(e){function t(){var t=e.call(this)||this;return t.className="FlowDiagramDataItem",t.values.value={},t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"fromName",{get:function(){return this.properties.fromName},set:function(e){this.setProperty("fromName",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toName",{get:function(){return this.properties.toName},set:function(e){this.setProperty("toName",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.properties.color},set:function(e){this.setProperty("color",Xb(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.values.value.value},set:function(e){this.setValue("value",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"link",{get:function(){var e=this;if(!this._link){var t=this.component.links.create();this._link=t,this.addSprite(t),this._disposers.push(new La(function(){e.component&&e.component.links.removeValue(t)}))}return this._link},enumerable:!0,configurable:!0}),t}(ti);var ug=function(e){function t(){var t=e.call(this)||this;t.colors=new Sd,t.className="FlowDiagram",t.nodePadding=20,t.sortBy="none",t.sequencedInterpolation=!0,t.colors.step=2,t.minNodeSize=.02;var r=t.chartContainer.createChild(oa);r.shouldClone=!1,r.layout="none",r.isMeasured=!1,t.linksContainer=r;var o=t.chartContainer.createChild(oa);return o.shouldClone=!1,o.layout="none",o.isMeasured=!1,t.nodesContainer=o,t.dataItem=t.createDataItem(),t.dataItem.component=t,t.applyTheme(),t}return da(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this.dataItem.dispose()},t.prototype.validateData=function(){var t=this;0==this._parseDataFrom&&this.nodes.clear(),this.sortNodes(),this.colors.reset(),e.prototype.validateData.call(this);var r,o,i=0,a=0;ga(this.dataItems.iterator(),function(e){var n=e.fromName;n&&((s=t.nodes.getKey(n))||((s=t.nodes.create(n)).name=n,s.chart=t,s.dataItem=e),e.fromNode=s,e.fromNode.outgoingDataItems.push(e));var s,l=e.toName;l&&((s=t.nodes.getKey(l))||((s=t.nodes.create(l)).name=l,s.chart=t,s.dataItem=e),e.toNode=s,e.toNode.incomingDataItems.push(e));if(!e.fromNode){var p=new Oe;p.opacities=[0,1],e.link.strokeModifier=p}if(!e.toNode){var u=new Oe;u.opacities=[1,0],e.link.strokeModifier=u}var $=e.value;aa($)&&(i+=$,a++,(r>$||!aa(r))&&(r=$),(o<$||!aa(o))&&(o=$))});var n="value";this.dataItem.setCalculatedValue(n,o,"high"),this.dataItem.setCalculatedValue(n,r,"low"),this.dataItem.setCalculatedValue(n,i,"sum"),this.dataItem.setCalculatedValue(n,i/a,"average"),this.dataItem.setCalculatedValue(n,a,"count"),ga(this.nodes.iterator(),function(e){var r=e[1];r.fill instanceof Ga&&(r.color=r.fill),null==r.color&&(r.color=t.colors.next()),null!=r.dataItem.color&&(r.color=r.dataItem.color),r.dataItem.visible||r.hide(0),t.getNodeValue(r)}),this.sortNodes(),this.feedLegend()},t.prototype.handleDataItemWorkingValueChange=function(e,t){this.invalidate()},t.prototype.sortNodes=function(){"name"==this.sortBy?this._sorted=this.nodes.sortedIterator():"value"==this.sortBy?this._sorted=hd(this.nodes.iterator(),function(e,t){return vf(ic(e[1].total,t[1].total))}):this._sorted=this.nodes.iterator()},t.prototype.getNodeValue=function(e){var t=0,r=0;ga(e.incomingDataItems.iterator(),function(e){var r=e.getWorkingValue("value");aa(r)&&(t+=r)}),ga(e.outgoingDataItems.iterator(),function(e){var t=e.getWorkingValue("value");aa(t)&&(r+=t)}),e.total=t+r,e.totalIncoming=t,e.totalOutgoing=r},t.prototype.changeSorting=function(){this.sortNodes()},t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("Flow diagram"))},t.prototype.createDataItem=function(){return new tg},Object.defineProperty(t.prototype,"nodePadding",{get:function(){return this.getPropertyValue("nodePadding")},set:function(e){this.setPropertyValue("nodePadding",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortBy",{get:function(){return this.getPropertyValue("sortBy")},set:function(e){this.setPropertyValue("sortBy",e),this.changeSorting()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minNodeSize",{get:function(){return this.getPropertyValue("minNodeSize")},set:function(e){this.setPropertyValue("minNodeSize",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodes",{get:function(){if(!this._nodes){var e=this.createNode();e.events.on("hit",function(e){e.target.handleHit(e)}),this._nodes=new Dd(e),this._disposers.push(new Pc(this._nodes))}return this._nodes},enumerable:!0,configurable:!0}),t.prototype.createNode=function(){var e=new af;return this._disposers.push(e),e},Object.defineProperty(t.prototype,"links",{get:function(){return this._links||(this._links=new _a(this.createLink()),this._disposers.push(new Sa(this._links))),this._links},enumerable:!0,configurable:!0}),t.prototype.createLink=function(){var e=new bf;return this._disposers.push(e),e},t.prototype.feedLegend=function(){var e=this.legend;if(e){var t=[];this.nodes.each(function(e,r){t.push(r)}),e.data=t,e.dataFields.name="name"}},t.prototype.disposeData=function(){e.prototype.disposeData.call(this),this.nodes.clear()},t}(Xc);ca.registeredClasses.FlowDiagram=ug;var vg=function(e){function t(){var t=e.call(this)||this;t.className="LabelBullet";var r=t.createChild(Gb);return r.shouldClone=!1,r.verticalCenter="middle",r.horizontalCenter="middle",r.truncate=!0,r.hideOversized=!1,r.maxWidth=500,r.maxHeight=500,r.stroke=ua(),r.strokeOpacity=0,r.fill=new Ia().getFor("text"),t.events.on("maxsizechanged",t.handleMaxSize,t,!1),t.label=r,t.applyTheme(),t}return da(t,e),t.prototype.handleMaxSize=function(){this.label.maxWidth=this.maxWidth,this.label.maxHeight=this.maxHeight},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.label.copyFrom(t.label)},t}(nc);ca.registeredClasses.LabelBullet=vg;var Oi=function(e){function t(){var t=e.call(this)||this;t.nextInCoord=0,t.nextOutCoord=0,t.className="SankeyNode",t.width=10,t.height=10;var i=t.createChild(vg);i.shouldClone=!1,i.locationX=1,i.locationY=.5,i.label.text="{name}",i.width=150,i.height=150,i.label.horizontalCenter="left",i.label.padding(0,5,0,5),t.nameLabel=i;var o=t.createChild(vg);o.shouldClone=!1,o.label.hideOversized=!1,o.locationX=.5,o.locationY=.5,o.width=150,o.height=150,o.label.horizontalCenter="middle",t.valueLabel=o;var r=t.hiddenState;return r.properties.fill=new Ia().getFor("disabledBackground"),r.properties.opacity=.5,r.properties.visible=!0,t.background.hiddenState.copyFrom(r),t}return da(t,e),t.prototype.invalidateLinks=function(){var t=this;e.prototype.invalidateLinks.call(this),this.nextInCoord=0,this.nextOutCoord=0;var i=this.chart;if(i){var o=i.orientation;this._incomingSorted&&ga(this._incomingSorted,function(e){var r=e.link,a=e.getWorkingValue("value");if(aa(a)){r.parent=t.chart.linksContainer;var l=void 0,n=void 0,d=void 0;if("horizontal"==o?(l=t.pixelX+t.dx,n=t.nextInCoord+t.pixelY+t.dy,d=0):(n=t.pixelY+t.dy,l=t.nextInCoord+t.pixelX+t.dx,d=90),r.endX=l,r.endY=n,r.startAngle=d,r.endAngle=d,r.gradient.rotation=d,r.linkWidth=a*i.valueHeight,!e.fromNode){"horizontal"==o?(r.maxWidth=200,r.startX=t.pixelX+t.dx-r.maxWidth,r.startY=r.endY):(r.maxHeight=200,r.startX=r.endX,r.startY=t.pixelY+t.dy-r.maxHeight),Fb(r.gradient),r.fill=e.toNode.color;var u=r.gradient.stops.getIndex(0);u&&("gradient"==r.colorMode&&(u.color=t.color),u.opacity=0,r.fill=r.gradient,r.stroke=r.gradient,r.gradient.validate())}t.nextInCoord+=r.linkWidth}}),this._outgoingSorted&&ga(this._outgoingSorted,function(e){var i=e.link;i.parent=t.chart.linksContainer;var r=e.getWorkingValue("value");if(aa(r)){var a=void 0,l=void 0,n=void 0;if("horizontal"==o?(n=0,a=t.pixelX+t.pixelWidth+t.dx-1,l=t.nextOutCoord+t.pixelY+t.dy):(n=90,a=t.nextOutCoord+t.pixelX+t.dx,l=t.pixelY+t.pixelHeight+t.dy-1),i.startX=a,i.startY=l,i.startAngle=n,i.endAngle=n,i.gradient.rotation=n,i.linkWidth=r*t.chart.valueHeight,!e.toNode){"horizontal"==o?(i.maxWidth=200,i.endX=t.pixelX+i.maxWidth+t.dx,i.endY=i.startY):(i.maxHeight=200,i.endX=i.startX,i.endY=t.pixelY+i.maxHeight+t.dy),i.opacity=t.opacity;var d=i.gradient.stops.getIndex(1);d&&("gradient"==i.colorMode&&(d.color=t.color),d.opacity=0,i.fill=i.gradient,i.stroke=i.gradient,i.gradient.validate())}t.nextOutCoord+=i.linkWidth}})}this.positionBullet(this.nameLabel),this.positionBullet(this.valueLabel)},t.prototype.positionBullet=function(e){e&&(e.x=this.measuredWidth*e.locationX,e.y=this.measuredHeight*e.locationY)},Object.defineProperty(t.prototype,"level",{get:function(){return this.getPropertyValue("level")},set:function(e){this.setPropertyValue("level",e,!0)},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.nameLabel.copyFrom(t.nameLabel),this.valueLabel.copyFrom(t.valueLabel)},t}(af);ca.registeredClasses.SankeyNode=Oi;var Pi=function(t){function e(){var e=t.call(this)||this;return e.className="SankeyLink",new Ia,e.tension=.8,e.controlPointDistance=.2,e.startAngle=0,e.endAngle=0,e.linkWidth=0,e.startX=0,e.endX=0,e.startY=0,e.endY=0,e.middleLine=e.createChild(Ke),e.middleLine.shouldClone=!1,e.middleLine.strokeOpacity=0,e.applyTheme(),e}return da(e,t),e.prototype.makeBackwards=function(){null!=this.states.getKey("backwards")&&this.setState("backwards")},e.prototype.validate=function(){var e,i,$,r;if(t.prototype.validate.call(this),!this.isTemplate){var o=this.startX,n=this.startY,a=this.endX,s=this.endY;if(this.states.getKey("backwards")&&this.setState("default"),this.dataItem){var J=this.dataItem.component;J&&("horizontal"==J.orientation?a<o&&(o=(e=dd([a,o],2))[0],a=e[1],n=(i=dd([s,n],2))[0],s=i[1],this.makeBackwards()):s<n&&(n=($=dd([s,n],2))[0],s=$[1],o=(r=dd([a,o],2))[0],a=r[1],this.makeBackwards()))}aa(a)||(a=o),aa(s)||(s=n);var y=this.startAngle,m=this.endAngle,p=this.linkWidth,h="",l=o,u=n,c=a,Y=s,d=o+p*ja(y),g=a+p*ja(m),f=n+p*ka(y),b=s+p*ka(m),k=o+p/2*ja(y),P=a+p/2*ja(m),x=n+p/2*ka(y),L=s+p/2*ka(m);this.zIndex=this.zIndex||this.dataItem.index;var V=this.tension+(1-this.tension)*ja(y),v=this.tension+(1-this.tension)*ka(y);if(this.middleLine.tensionX=V,this.middleLine.tensionY=v,aa(p)&&aa(o)&&aa(a)&&aa(n)&&aa(s)){ha(l,3)==ha(c,3)&&(c+=.01),ha(u,3)==ha(Y,3)&&(Y+=.01),ha(d,3)==ha(g,3)&&(g+=.01),ha(f,3)==ha(b,3)&&(b+=.01);var w=Math.min(d,g,l,c),S=Math.min(f,b,u,Y),X=Math.max(d,g,l,c),_=Math.max(f,b,u,Y);this._bbox={x:w,y:S,width:X-w,height:_-S};var q=this.controlPointDistance,N=l+(c-l)*q*ka(y),O=u+(Y-u)*q*ja(y),j=c-(c-l)*q*ka(m),D=Y-(Y-u)*q*ja(m),I=k+(P-k)*q*ka(y),M=x+(L-x)*q*ja(y),T=P-(P-k)*q*ka(m),C=L-(L-x)*q*ja(m),A=xb({x:N,y:O},{x:j,y:D}),B=(p/ka(A)-p)/Rg(A)*ka(y),W=(p/ja(A)-p)*Rg(A)*ja(y),z=-B/2+d+(g-d)*q*ka(y),F=-W/2+f+(b-f)*q*ja(y),K=-B/2+g-(g-d)*q*ka(m),R=-W/2+b-(b-f)*q*ja(m);this.middleLine.segments=[[{x:k,y:x},{x:I,y:M},{x:T,y:C},{x:P,y:L}]],N+=B/2,O+=W/2,j+=B/2,D+=W/2,h+=ma({x:l,y:u}),h+=new Gc(V,v).smooth([{x:l,y:u},{x:N,y:O},{x:j,y:D},{x:c,y:Y}]),h+=fa({x:g,y:b}),h+=new Gc(V,v).smooth([{x:g,y:b},{x:K,y:R},{x:z,y:F},{x:d,y:f}]),h+=eb()}this.link.path=h,this.maskBullets&&(this.bulletsMask.path=h,this.bulletsContainer.mask=this.bulletsMask),this.positionBullets()}},Object.defineProperty(e.prototype,"startX",{get:function(){return this.getPropertyValue("startX")},set:function(t){this.setPropertyValue("startX",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endX",{get:function(){return this.getPropertyValue("endX")},set:function(t){this.setPropertyValue("endX",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startY",{get:function(){return this.getPropertyValue("startY")},set:function(t){this.setPropertyValue("startY",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endY",{get:function(){return this.getPropertyValue("endY")},set:function(t){this.setPropertyValue("endY",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linkWidth",{get:function(){return this.getPropertyValue("linkWidth")},set:function(t){this.setPropertyValue("linkWidth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controlPointDistance",{get:function(){return this.getPropertyValue("controlPointDistance")},set:function(t){this.setPropertyValue("controlPointDistance",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(t){this.setPropertyValue("tension",t,!0)},enumerable:!0,configurable:!0}),e}(bf);ca.registeredClasses.SankeyLink=Pi;var tm=function(e){function t(){var t=e.call(this)||this;return t.className="SankeyDiagramDataItem",t.applyTheme(),t}return da(t,e),t}(tg);var um=function(e){function t(){var t=e.call(this)||this;return t.className="SankeyDiagram",t.orientation="horizontal",t.nodeAlign="middle",t.nodesContainer.width=ia(100),t.nodesContainer.height=ia(100),t.linksContainer.width=ia(100),t.linksContainer.height=ia(100),t.applyTheme(),t}return da(t,e),t.prototype.validateData=function(){var t=this;e.prototype.validateData.call(this),this._levelCount=0,this.nodes.each(function(e,t){t.level=void 0}),this.nodes.each(function(e,i){i.level=t.getNodeLevel(i,0),t._levelCount=wa(t._levelCount,i.level)})},t.prototype.getNodeLevel=function(e,t){var i=this,o=[t];return ga(e.incomingDataItems.iterator(),function(e){e.fromNode&&(aa(e.fromNode.level)?o.push(e.fromNode.level+1):(i._counter=0,i.checkLoop(e.fromNode),i._counter<i.dataItems.length&&o.push(i.getNodeLevel(e.fromNode,t+1))))}),Math.max.apply(Math,Lc(o))},t.prototype.checkLoop=function(e){var t=this;this._counter++,this._counter>this.dataItems.length||ga(e.incomingDataItems.iterator(),function(e){t.checkLoop(e.fromNode)})},t.prototype.calculateValueHeight=function(){var e=this;this._levelSum={},this._levelNodesCount={},this.maxSum=0;var t,i,o,a=this.dataItem.values.value.sum;ga(this._sorted,function(t){var i=t[1];e.getNodeValue(i)}),this.nodes.each(function(t,i){var o=i.level,n=Math.max(i.totalIncoming,i.totalOutgoing);n/a<e.minNodeSize&&(n=a*e.minNodeSize),aa(e._levelSum[o])?e._levelSum[o]+=n:e._levelSum[o]=n,aa(e._levelNodesCount[o])?e._levelNodesCount[o]++:e._levelNodesCount[o]=1}),t="horizontal"==this.orientation?this.chartContainer.maxHeight-1:this.chartContainer.maxWidth-1,sa(this._levelSum,function(a,n){var r=n,l=e._levelNodesCount[a],s=(t-(l-1)*e.nodePadding)/r;s==1/0&&(s=0),(o>s||!aa(o))&&(o=s,e.maxSum=r,i=Ra(a))}),this._maxSumLevel=i;var n=this._levelNodesCount[this._maxSumLevel],r=(t-(n-1)*this.nodePadding)/this.maxSum;if(r==1/0&&(r=0),aa(this.valueHeight)){var l=void 0;try{l=this._heightAnimation.animationOptions[0].to}catch(h){}if(l!=r){var s=this.interpolationDuration;try{s=this.nodes.template.states.getKey("active").transitionDuration}catch(h){}this._heightAnimation=new bc(this,{property:"valueHeight",from:this.valueHeight,to:r},s,this.interpolationEasing).start(),this._disposers.push(this._heightAnimation)}}else this.valueHeight=r},t.prototype.validate=function(){var t=this;e.prototype.validate.call(this),this.calculateValueHeight();var i,o=this.nodesContainer,a={},n=this._levelNodesCount[this._maxSumLevel],r=this.dataItem.values.value.sum;i="horizontal"==this.orientation?this.chartContainer.maxHeight-1:this.chartContainer.maxWidth-1,ga(this._sorted,function(e){var l,s,h,p=e[1],m=p.level,u=0,$=t._levelNodesCount[m];switch(t.nodeAlign){case"bottom":u=(t.maxSum-t._levelSum[m])*t.valueHeight-($-n)*t.nodePadding;break;case"middle":u=(t.maxSum-t._levelSum[m])*t.valueHeight/2-($-n)*t.nodePadding/2;}if(0==t.maxSum)switch(t.nodeAlign){case"bottom":u=i-$*(t.minNodeSize*i+t.nodePadding);break;case"middle":u=i/2-$/2*(t.minNodeSize*i+t.nodePadding);}p.parent=o;var d=Math.max(p.totalIncoming,p.totalOutgoing);if(d/r<t.minNodeSize&&(d=r*t.minNodeSize),"horizontal"==t.orientation){s=(l=(t.innerWidth-p.pixelWidth)/t._levelCount)*p.level,h=a[m]||u;var c=d*t.valueHeight;0==r&&0==c&&(c=t.minNodeSize*i),p.height=c,p.minX=s,p.maxX=s,a[m]=h+c+t.nodePadding}else{l=(t.innerHeight-p.pixelHeight)/t._levelCount,s=a[m]||u,h=l*p.level;var v=d*t.valueHeight;0==r&&0==v&&(v=t.minNodeSize*i),p.width=v,p.minY=h,p.maxY=h,a[m]=s+v+t.nodePadding}p.x=s,p.y=h})},t.prototype.showReal=function(t){var i=this;if(!this.preventShow){if(this.interpolationDuration>0){var o=this.nodesContainer,a=0;ga(this.links.iterator(),function(e){e.hide(0)}),ga(this._sorted,function(e){var t,n=e[1];"horizontal"==i.orientation?(n.dx=-(o.pixelWidth-n.pixelWidth)/Math.max(i._levelCount,1),t="dx"):(n.dy=-(o.pixelHeight-n.pixelHeight)/Math.max(i._levelCount,1),t="dy");var r=0,l=i.interpolationDuration;i.sequencedInterpolation&&(r=i.sequencedInterpolationDelay*a+l*a/Ij(i.nodes.iterator())),n.opacity=0,n.invalidateLinks(),n.animate([{property:"opacity",from:0,to:1},{property:t,to:0}],i.interpolationDuration,i.interpolationEasing).delay(r),ga(n.outgoingDataItems.iterator(),function(e){var t=e.link.show(i.interpolationDuration);t&&!t.isFinished()&&t.delay(r)}),ga(n.incomingDataItems.iterator(),function(e){if(!e.fromNode){var t=e.link.show(i.interpolationDuration);t&&!t.isFinished()&&t.delay(r)}}),a++})}return e.prototype.showReal.call(this)}},t.prototype.changeSorting=function(){var e=this;this.sortNodes();var t={};ga(this._sorted,function(i){var o,a,n=i[1],r=n.level,l=(e.maxSum-e._levelSum[r])*e.valueHeight/2;"horizontal"==e.orientation?(o="y",a=n.pixelHeight):(o="x",a=n.pixelWidth),n.animate({property:o,to:t[r]||l},e.interpolationDuration,e.interpolationEasing),t[r]=(t[r]||l)+a+e.nodePadding,n.invalidateLinks()})},t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("Sankey diagram"))},t.prototype.createDataItem=function(){return new tm},Object.defineProperty(t.prototype,"nodeAlign",{get:function(){return this.getPropertyValue("nodeAlign")},set:function(e){this.setPropertyValue("nodeAlign",e),this.changeSorting()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(e){this.setPropertyValue("orientation",e,!0);var t=this.nodes.template.nameLabel;"vertical"==e?(this.nodes.template.width=void 0,t.label.horizontalCenter="middle",t.locationX=.5):(this.nodes.template.height=void 0,t.label.horizontalCenter="left",t.locationX=1)},enumerable:!0,configurable:!0}),t.prototype.createNode=function(){var e=new Oi;return this._disposers.push(e),e},t.prototype.createLink=function(){var e=new Pi;return this._disposers.push(e),e},Object.defineProperty(t.prototype,"valueHeight",{get:function(){return this._valueHeight},set:function(e){e!=this._valueHeight&&(this._valueHeight=e,this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.disposeData=function(){e.prototype.disposeData.call(this),this._sorted=this.nodes.iterator()},t}(ug);ca.registeredClasses.SankeyDiagram=um;var Qi=function(e){function t(){var t=e.call(this)||this;t.className="ChordNode";var i=t.createChild(Ze);i.location=.5,i.radius=5,i.text="{name}",i.zIndex=1,i.shouldClone=!1,t.label=i,t.layout="none",t.events.on("positionchanged",t.updateRotation,t,!1),t.isMeasured=!1,t.slice=t.createChild(Vc),t.slice.isMeasured=!1;var r=t.hiddenState;return r.properties.fill=new Ia().getFor("disabledBackground"),r.properties.opacity=.5,r.properties.visible=!0,t.setStateOnChildren=!1,t.slice.hiddenState.properties.visible=!0,t.adapter.add("tooltipX",function(e,t){return t.slice.ix*(t.slice.radius-(t.slice.radius-t.slice.pixelInnerRadius)/2)}),t.adapter.add("tooltipY",function(e,t){return t.slice.iy*(t.slice.radius-(t.slice.radius-t.slice.pixelInnerRadius)/2)}),t}return da(t,e),t.prototype.invalidateLinks=function(){var t=this;e.prototype.invalidateLinks.call(this);var i=this.label,r=this.slice,o=this.chart;if(o&&r){var a=this.total,l=r.arc,n=r.startAngle;this.children.each(function(e){if(e instanceof nc){var t=e.locationX;aa(t)||(t=.5);var i=e.locationY;aa(i)||(i=1);var o=n+l*t,a=i*r.radius;e.x=a*ka(o),e.y=a*ja(o)}});var s=n+l*i.location,$=n+(1-a/this.adjustedTotal)*l*.5;yb($)&&($=n),i.fixPosition(s,r.radius),this.nextAngle=$,this._outgoingSorted&&ga(this._outgoingSorted,function(e){var i=e.link;i.parent=t.chart.linksContainer;var a=e.getWorkingValue("value");if(aa(a)){if(o.nonRibbon){var s=i.percentWidth;aa(s)||(s=5),s/=100,i.startAngle=n+l/2-l/2*s,i.arc=l*s}else i.arc=a*o.valueAngle,i.startAngle=t.nextAngle,t.nextAngle+=i.arc;e.toNode||(i.endAngle=i.startAngle),i.radius=r.pixelInnerRadius}}),this._incomingSorted&&ga(this._incomingSorted,function(e){var i=e.link;if(i.radius=r.pixelInnerRadius,o.nonRibbon){var a=i.percentWidth;aa(a)||(a=5),a/=100,i.endAngle=n+l/2-l/2*a,i.arc=l*a}else{i.endAngle=t.nextAngle;var s=e.getWorkingValue("value");aa(s)&&(i.arc=s*o.valueAngle,t.nextAngle+=i.arc)}e.fromNode||(i.startAngle=i.endAngle)})}},t.prototype.updateRotation=function(){var e=this.slice,t=this.trueStartAngle+e.arc/2,i=e.radius,r=i*ka(t),o=i*ja(t),a=xb({x:r+this.pixelX,y:o+this.pixelY});e.startAngle=this.trueStartAngle+(a-t),this.dx=-this.pixelX,this.dy=-this.pixelY},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.label.copyFrom(t.label),this.slice.copyFrom(t.slice)},t}(af);ca.registeredClasses.ChordNode=Qi;var vm=function(t){function e(){var e=t.call(this)||this;return e.className="QuadraticCurve",e.element=e.paper.add("path"),e.pixelPerfect=!1,e.fill=ua(),e.applyTheme(),e}return da(e,t),e.prototype.draw=function(){if(aa(this.x1+this.x2+this.y1+this.y2+this.cpx+this.cpy)){var t={x:this.x1,y:this.y1},e={x:this.x2,y:this.y2},r={x:this.cpx,y:this.cpy},i=ma(t)+Uc(e,r);this.path=i}},Object.defineProperty(e.prototype,"cpx",{get:function(){return this.getPropertyValue("cpx")},set:function(t){this.setPropertyValue("cpx",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cpy",{get:function(){return this.getPropertyValue("cpy")},set:function(t){this.setPropertyValue("cpy",t,!0)},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t){var e={x:this.x1,y:this.y1},r={x:this.cpx,y:this.cpy},i={x:this.x2,y:this.y2},p=Sg(e,i,r,t),$=Sg(e,i,r,t+.001);return{x:p.x,y:p.y,angle:xb(p,$)}},e}(cc);var Ri=function(i){function t(){var t=i.call(this)||this;return t.className="ChordLink",t.middleLine=t.createChild(vm),t.middleLine.shouldClone=!1,t.middleLine.strokeOpacity=0,t.applyTheme(),t}return da(t,i),t.prototype.validate=function(){if(i.prototype.validate.call(this),!this.isTemplate){var t=this.startAngle,e=this.endAngle,r=this.arc,$=this.radius,a=this.dataItem.fromNode,o=this.dataItem.toNode,s=0,p=0;a&&(s=a.pixelX+a.dx,p=a.pixelY+a.dy);var l=0,n=0;if(o&&(l=o.pixelX+o.dx,n=o.pixelY+o.dy),$>0){var h=$*ka(t)+s,x=$*ja(t)+p,u=$*ka(e)+l,m=$*ja(e)+n,c={x:0,y:0},d=ma({x:h,y:x});d+=ob(t,r,$),d+=Uc({x:u,y:m},c),d+=ob(e,r,$),d+=Uc({x:h,y:x},c),this.link.path=r>0?d:"",this.maskBullets&&(this.bulletsMask.path=d,this.bulletsContainer.mask=this.bulletsMask);var q=t+r/2,w=e+r/2,y=this.middleLine;y.x1=$*ka(q)+s,y.y1=$*ja(q)+p,y.x2=$*ka(w)+l,y.y2=$*ja(w)+n,y.cpx=0,y.cpy=0,y.stroke=this.fill,this.positionBullets()}}},Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(i){this.setPropertyValue("radius",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"arc",{get:function(){return this.getPropertyValue("arc")},set:function(i){this.setPropertyValue("arc",i,!0)},enumerable:!0,configurable:!0}),t}(bf);ca.registeredClasses.ChordLink=Ri;var wm=function(e){function t(){var t=e.call(this)||this;return t.className="ChordDiagramDataItem",t.applyTheme(),t}return da(t,e),t}(tg);var xm=function(e){function t(){var t=e.call(this)||this;t.valueAngle=0,t.className="ChordDiagram",t.startAngle=-90,t.endAngle=270,t.radius=ia(80),t.innerRadius=-15,t.nodePadding=5;var r=t.chartContainer.createChild(oa);return r.align="center",r.valign="middle",r.shouldClone=!1,r.layout="absolute",t.chordContainer=r,t.nodesContainer.parent=r,t.linksContainer.parent=r,t.chartContainer.events.on("maxsizechanged",t.invalidate,t,!1),t.applyTheme(),t}return da(t,e),t.prototype.validate=function(){var t=this,r=this.chartContainer,i=this.endAngle,a=this.startAngle+this.nodePadding/2,n=gc(this.startAngle,this.endAngle,1);n=zd([n,{x:0,y:0,width:0,height:0}]);var o=Math.min(r.innerWidth/n.width,r.innerHeight/n.height);aa(o)||(o=0);var s=qb(this.radius,o),l=qb(this.innerRadius,s,!0),u=this.dataItem.values.value.sum,$=0,d=0;ga(this._sorted,function(e){var r=e[1];t.getNodeValue(r),$++;var i=r.total;r.total/u<t.minNodeSize&&(i=u*t.minNodeSize),d+=i}),this.valueAngle=(i-this.startAngle-this.nodePadding*$)/d,ga(this._sorted,function(e){var r=e[1],n=r.slice;n.radius=s,n.innerRadius=l;var o,d=r.total;r.total/u<t.minNodeSize&&(d=u*t.minNodeSize),r.adjustedTotal=d,o=t.nonRibbon?(i-t.startAngle)/$-t.nodePadding:t.valueAngle*d,n.arc=o,n.startAngle=a,r.trueStartAngle=a,r.parent=t.nodesContainer,r.validate(),a+=o+t.nodePadding}),this.chordContainer.definedBBox={x:s*n.x,y:s*n.y,width:s*n.width,height:s*n.height},this.chordContainer.invalidateLayout(),e.prototype.validate.call(this)},t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("Chord diagram"))},t.prototype.createDataItem=function(){return new wm},Object.defineProperty(t.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(e){this.setPropertyValue("startAngle",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(e){this.setPropertyValue("endAngle",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPercentProperty("radius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(e){this.setPercentProperty("innerRadius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonRibbon",{get:function(){return this.getPropertyValue("nonRibbon")},set:function(e){this.setPropertyValue("nonRibbon",e,!0),this.links.template.middleLine.strokeOpacity=1,this.links.template.link.fillOpacity=0},enumerable:!0,configurable:!0}),t.prototype.createNode=function(){var e=new Qi;return this._disposers.push(e),e},t.prototype.createLink=function(){var e=new Ri;return this._disposers.push(e),e},t}(ug);ca.registeredClasses.ChordDiagram=xm;var $c=function(e){function t(){var t=e.call(this)||this;return t.className="Column",t.width=ia(80),t.height=ia(80),t.events.disableType("transformed"),t.applyOnClones=!0,t.strokeOpacity=1,t.layout="none",t.createAssets(),t.events.on("childadded",t.handleKidAdded,t,!1),t}return da(t,e),t.prototype.handleKidAdded=function(){"none"==this.layout&&(this.layout="absolute")},t.prototype.createAssets=function(){this.column=this.createChild(mc),this.column.shouldClone=!1,this.column.isMeasured=!1,this.column.cornerRadius(0,0,0,0),this._disposers.push(this.column)},t.prototype.validate=function(){e.prototype.validate.call(this);var t=this.column;t&&(t.width=Ea(this.pixelWidth,this.maxWidth),t.height=Ea(this.pixelHeight,this.maxHeight),t.invalid&&t.validate())},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.column&&this.column.copyFrom(t.column)},Object.defineProperty(t.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.column?{x:0,y:0,width:this.column.measuredWidth,height:this.column.measuredHeight}:{x:0,y:0,width:Ea(this.pixelWidth,this.maxWidth),height:Ea(this.pixelHeight,this.maxHeight)}},enumerable:!0,configurable:!0}),t}(oa);ca.registeredClasses.Column=$c;var Ic=function(t){function e(){var e=t.call(this)||this;return e.className="ColumnSeriesDataItem",e.locations.dateX=.5,e.locations.dateY=.5,e.locations.categoryX=.5,e.locations.categoryY=.5,e.applyTheme(),e}return da(e,t),Object.defineProperty(e.prototype,"column",{get:function(){return this._column},set:function(t){this.setColumn(t)},enumerable:!0,configurable:!0}),e.prototype.setColumn=function(t){var e=this;if(this._column&&t!=this._column&&ta(this.sprites,this._column),this._column=t,t){var i=t.dataItem;i&&i!=this&&(i.column=void 0),this.addSprite(t),this._disposers.push(new La(function(){e.component&&e.component.columns.removeValue(t)}))}},Object.defineProperty(e.prototype,"width",{get:function(){var t=this.properties.width;return this._adapterO&&(t=this._adapterO.apply("width",t)),t},set:function(t){this.properties.width!=t&&(this.properties.width=t,this.component&&this.component.validateDataElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=this.properties.height;return this._adapterO&&(t=this._adapterO.apply("height",t)),t},set:function(t){this.properties.height!=t&&(this.properties.height=t,this.component&&this.component.validateDataElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangesColumns",{get:function(){return this._rangesColumns||(this._rangesColumns=new Ta),this._rangesColumns},enumerable:!0,configurable:!0}),e}(Xe);var _c=function(t){function e(){var e=t.call(this)||this;e._startLocation=0,e._endLocation=1,e.className="ColumnSeries",e.width=ia(100),e.height=ia(100),e.strokeOpacity=0,e.fillOpacity=1,e.clustered=!0;var i=e.mainContainer.createChild(oa);return i.shouldClone=!1,i.isMeasured=!1,i.layout="none",e._columnsContainer=i,e.columns.template.pixelPerfect=!1,e.tooltipColorSource=e.columns.template,e.applyTheme(),e}return da(e,t),Object.defineProperty(e.prototype,"columnsContainer",{get:function(){return this._columnsContainer},enumerable:!0,configurable:!0}),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("Column Series"))},e.prototype.createDataItem=function(){return new Ic},e.prototype.validate=function(){var i=this;if(this.group.node.removeAttribute("fill"),this.chart&&this.xAxis&&this.yAxis){var r,o=this.chart.series,s=0,a=0,n=[];ga(o.iterator(),function(t){var r;t instanceof e&&i.baseAxis==t.baseAxis&&(r=i.baseAxis==i.xAxis?i.chart.yAxes.indexOf(t.yAxis):i.chart.xAxes.indexOf(t.xAxis),n.push({series:t,axis:r}))}),n.sort(function(t,e){return t.axis-e.axis}),la(n,function(t){var o=t.series;o instanceof e&&((!o.stacked&&o.clustered||r!=t.axis&&o.clustered)&&s++,o==i&&(a=s-1)),r=t.axis}),this.clustered||(a=0,s=1);var p=this.baseAxis.renderer,l=p.cellStartLocation,h=p.cellEndLocation;this._startLocation=l+a/s*(h-l),this._endLocation=l+(a+1)/s*(h-l);var u=this.xAxis,$=this.yAxis;u instanceof jb&&$ instanceof Ba&&u.sortBySeries==this&&this.sortCategoryAxis(u,"valueY"),$ instanceof jb&&u instanceof Ba&&$.sortBySeries==this&&this.sortCategoryAxis($,"valueX")}t.prototype.validate.call(this);for(var m=0;m<this.startIndex;m++){var c=this.dataItems.getIndex(m);this.disableUnusedColumns(c)}for(m=this.dataItems.length-1;m>this.endIndex;m--){c=this.dataItems.getIndex(m);this.disableUnusedColumns(c)}this._propertiesChanged=!1},e.prototype.sortCategoryAxis=function(t,e){var i=this;this.dataItems.values.sort(function(t,i){return i.values[e].workingValue-t.values[e].workingValue});var r=0;this.dataItems.each(function(t){t._index=r,r++}),t.dataItems.each(function(t){var e=t.component,r=e.categoryToPosition(t.category)-t.deltaPosition,o=e.getSeriesDataItemByCategory(t.category,i);if(o){var s=i.dataItems.indexOf(o);t._index=s;var a=ha((s+.5)/i.dataItems.length-r,3);t.deltaAnimation&&!t.deltaAnimation.isDisposed()&&t.deltaAnimation.animationOptions[0].to==a||a!=ha(t.deltaPosition,3)&&(t.deltaAnimation&&t.deltaAnimation.stop(),t.deltaAnimation=t.animate({property:"deltaPosition",from:-a,to:0},e.interpolationDuration,e.interpolationEasing),i._disposers.push(t.deltaAnimation))}}),t.dataItems.values.sort(function(t,e){return t.index-e.index})},e.prototype.validateDataElement=function(e){this.chart&&this.xAxis&&this.yAxis&&(this.validateDataElementReal(e),t.prototype.validateDataElement.call(this,e))},e.prototype.getStartLocation=function(t){var e=this._startLocation;return this.baseAxis==this.xAxis?e+=t.locations[this.xOpenField]-.5:e+=t.locations[this.yOpenField]-.5,e},e.prototype.getEndLocation=function(t){var e=this._endLocation;return this.baseAxis==this.xAxis?e+=t.locations[this.xField]-.5:e+=t.locations[this.yField]-.5,e},e.prototype.validateDataElementReal=function(t){var e,i,r,o,s=this,a=this.getStartLocation(t),n=this.getEndLocation(t),p=this.xField,l=this.xOpenField,h=this.yField,u=this.yOpenField,$=this.columns.template,m=$.percentWidth,c=$.percentHeight,d=$.pixelWidth,b=$.pixelHeight,x=$.maxWidth,y=$.maxHeight,f=$.pixelPaddingLeft,L=$.pixelPaddingRight,g=$.pixelPaddingTop,R=$.pixelPaddingBottom,v=!1,z=t.width;ba(z)&&(aa(z)&&(d=z),z instanceof Da&&(m=100*z.value));var S=t.height;if(ba(S)&&(aa(S)&&(b=S),S instanceof Da&&(c=100*S.value)),this.xAxis instanceof jb&&this.yAxis instanceof jb){if(!t.hasValue(this._xValueFields)||!t.hasValue(this._yValueFields))return;if(a=0,n=1,!yb(m))a+=C=ha((n-a)*(1-m/100)/2,5),n-=C;if(e=this.xAxis.getX(t,l,a),i=this.xAxis.getX(t,p,n),yb(m))e+=C=(i-e-d)/2,i-=C;if(!yb(x)&&x<Math.abs(i-e))e+=C=(i-e-x)/2,i-=C;if(a=0,n=1,!yb(c))a+=C=ha((1-c/100)/2,5),n-=C;if(r=this.yAxis.getY(t,u,a),o=this.yAxis.getY(t,h,n),yb(c))o+=C=(o-r-b)/2,r-=C;if(!yb(y)&&y<Math.abs(o-r))o+=C=(o-r-y)/2,r-=C;i=this.fixHorizontalCoordinate(i),e=this.fixHorizontalCoordinate(e),r=this.fixVerticalCoordinate(r),o=this.fixVerticalCoordinate(o)}else if(this.baseAxis==this.xAxis){if(!t.hasValue(this._yValueFields))return;if(!yb(m))a+=C=ha((n-a)*(1-m/100)/2,5),n-=C;if(e=this.xAxis.getX(t,l,a),i=this.xAxis.getX(t,p,n),yb(m))e+=C=(i-e-d)/2,i-=C;if(!yb(x)&&x<Math.abs(i-e))e+=C=(i-e-x)/2,i-=C;var _=t.locations[u],F=t.locations[h];this.yAxis instanceof Ba&&this.dataFields[this.yField]!=this.dataFields[this.yOpenField]&&(_=0,F=0),o=this.yAxis.getY(t,u,_),r=this.yAxis.getY(t,h,F);var A=Math.ceil(this.yAxis.axisLength);(r<0&&o<0||r>A&&o>A)&&(v=!0),r=this.fixVerticalCoordinate(r),o=this.fixVerticalCoordinate(o),Math.abs(i-e)-f-L==0&&(v=!0)}else{if(!t.hasValue(this._xValueFields))return;var C;if(!yb(c))a+=C=ha((n-a)*(1-c/100)/2,5),n-=C;if(r=this.yAxis.getY(t,u,a),o=this.yAxis.getY(t,h,n),yb(c))o-=C=(o-r-b)/2,r+=C;if(!yb(y)&&y<Math.abs(o-r))o-=C=(o-r-y)/2,r+=C;var P=t.locations[p],O=t.locations[l];this.xAxis instanceof Ba&&this.dataFields[this.xField]!=this.dataFields[this.xOpenField]&&(P=0,O=0),i=this.xAxis.getX(t,p,P),e=this.xAxis.getX(t,l,O);A=Math.ceil(this.xAxis.axisLength);(i<0&&e<0||i>A&&e>A)&&(v=!0),i=this.fixHorizontalCoordinate(i),e=this.fixHorizontalCoordinate(e),Math.abs(r-o)-g-R==0&&(v=!0)}var V,I=Math.abs(i-e),N=Math.abs(o-r),D=Math.min(e,i),j=Math.min(r,o);v?this.disableUnusedColumns(t):(t.column?(V=t.column,this._propertiesChanged&&(gb(this,V,db),gb(this.columns.template,V,db),la(db,function(t){V[t]=V[t]}))):(V=this.columns.create(),gb(this,V,db),gb(this.columns.template,V,db),t.addSprite(V),t.column=V,V.paper=this.paper,this.itemsFocusable()?(ba(this.role)||(this.role="menu"),ba(V.role)||(V.role="menuitem"),V.focusable=!0):(ba(this.role)||(this.role="list"),ba(V.role)||(V.role="listitem"),V.focusable=!1),V.focusable&&(V.events.on("focus",function(e){V.readerTitle=s.populateString(s.itemReaderText,t)},void 0,!1),V.events.on("blur",function(t){V.readerTitle=""},void 0,!1)),V.hoverable&&(V.events.on("over",function(e){V.readerTitle=s.populateString(s.itemReaderText,t)},void 0,!1),V.events.on("out",function(t){V.readerTitle=""},void 0,!1)),V.parent=this.columnsContainer,V.virtualParent=this),V.width=I,V.height=N,V.x=D,V.y=j,V.realX=e,V.realY=r,V.realWidth=i-e,V.realHeight=o-r,this.setColumnStates(V),V.invalid&&V.validate(),V.__disabled=!1,ga(this.axisRanges.iterator(),function(e){var i=t.rangesColumns.getKey(e.uid);i||(i=s.columns.create(),gb(e.contents,i,db),t.addSprite(i),t.rangesColumns.setKey(e.uid,i),i.paper=s.paper),i.parent=e.contents,i.width=I,i.height=N,i.x=D,i.y=j,s.setColumnStates(i),i.invalid&&i.validate(),i.__disabled=!1}));t.itemWidth=I,t.itemHeight=N},e.prototype.disableUnusedColumns=function(t){t&&(t.column&&(t.column.width=0,t.column.height=0,t.column.__disabled=!0),ga(this.axisRanges.iterator(),function(e){var i=t.rangesColumns.getKey(e.uid);i&&(i.width=0,i.height=0,i.__disabled=!0)}))},e.prototype.setColumnStates=function(t){if(this._dropFromOpenState||this._dropFromPreviousState||this._riseFromOpenState||this._riseFromPreviousState){var e=t.dataItem;if(this.xAxis instanceof Ba||this.yAxis instanceof Ba){var i,r=void 0,o=void 0;this.baseAxis==this.yAxis?(this.xOpenField&&this.xField&&this.xAxis instanceof Ba&&(i=e.getValue(this.xOpenField),r=e.getValue(this.xField)),o=e.getValue(this.xAxis.axisFieldName+"X","previousChange")):(this.yOpenField&&this.yField&&this.yAxis instanceof Ba&&(i=e.getValue(this.yOpenField),r=e.getValue(this.yField)),o=e.getValue(this.yAxis.axisFieldName+"Y","previousChange")),r<i?(e.droppedFromOpen=!0,t.defaultState.copyFrom(this._dropFromOpenState),t.setState(this._dropFromOpenState,0)):(e.droppedFromOpen=!1,t.defaultState.copyFrom(this._riseFromOpenState),t.setState(this._riseFromOpenState,0)),o<0?(e.droppedFromPrevious=!0,t.defaultState.copyFrom(this._dropFromPreviousState),t.setState(this._dropFromPreviousState,0)):(e.droppedFromPrevious=!1,t.defaultState.copyFrom(this._riseFromPreviousState),t.setState(this._riseFromPreviousState,0))}}},Object.defineProperty(e.prototype,"columns",{get:function(){return this._columns||(this._columns=new _a(this.createColumnTemplate()),this._disposers.push(new Sa(this._columns)),this._disposers.push(this._columns.template)),this._columns},enumerable:!0,configurable:!0}),e.prototype.createColumnTemplate=function(){return new $c},Object.defineProperty(e.prototype,"clustered",{get:function(){return this.getPropertyValue("clustered")},set:function(t){this.setPropertyValue("clustered",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropFromOpenState",{get:function(){return this._dropFromOpenState||(this._dropFromOpenState=this.states.create("dropFromOpenState")),this._dropFromOpenState},set:function(t){this._dropFromOpenState=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropFromPreviousState",{get:function(){return this._dropFromPreviousState||(this._dropFromPreviousState=this.states.create("dropFromPreviousState")),this._dropFromPreviousState},set:function(t){this._dropFromPreviousState=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"riseFromOpenState",{get:function(){return this._riseFromOpenState||(this._riseFromOpenState=this.states.create("riseFromOpenState")),this._riseFromOpenState},set:function(t){this._riseFromOpenState=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"riseFromPreviousState",{get:function(){return this._riseFromPreviousState||(this._riseFromPreviousState=this.states.create("riseFromPreviousState")),this._riseFromPreviousState},set:function(t){this._riseFromPreviousState=t},enumerable:!0,configurable:!0}),e.prototype.updateLegendValue=function(e,i){var r=this;if(t.prototype.updateLegendValue.call(this,e,i),this.legendDataItem){var o,s,a=this.legendDataItem.marker;e&&(o=e.droppedFromOpen?this._dropFromOpenState:this._riseFromOpenState,s=e.droppedFromPrevious?this._dropFromPreviousState:this._riseFromPreviousState),ga(a.children.iterator(),function(t){e?(t.setState(s),t.setState(o)):(t.setState(r._riseFromPreviousState),t.setState(r._riseFromOpenState))})}},e.prototype.createLegendMarker=function(t){var e=t.pixelWidth,i=t.pixelHeight;t.removeChildren();var r=t.createChild(mc);r.shouldClone=!1,gb(this,r,db),r.copyFrom(this.columns.template),r.padding(0,0,0,0),r.width=e,r.height=i;var o=t.dataItem;o.color=this.fill,o.colorOrig=this.fill},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.columns.template.copyFrom(e.columns.template)},e.prototype.getBulletLocationX=function(e,i){if(this.baseAxis==this.xAxis){var r=e.locationX;aa(r)||(r=.5);var o=this.getEndLocation(e.dataItem);return o-(o-this.getStartLocation(e.dataItem))*r}return t.prototype.getBulletLocationX.call(this,e,i)},e.prototype.getBulletLocationY=function(e,i){if(this.baseAxis==this.yAxis){var r=e.locationY;aa(r)||(r=.5);var o=this.getEndLocation(e.dataItem);return o-(o-this.getStartLocation(e.dataItem))*r}return t.prototype.getBulletLocationY.call(this,e,i)},e.prototype.getAdjustedXLocation=function(t,e,i){return aa(i)||(i=t?t.locations[e]:.5),this._endLocation-(this._endLocation-this._startLocation)*(1-i)},e.prototype.getAdjustedYLocation=function(t,e,i){return aa(i)||(i=t?t.locations[e]:.5),this._endLocation-(this._endLocation-this._startLocation)*i},e.prototype.fixVerticalCoordinate=function(t){var e=this.columns.template.pixelPaddingBottom,i=-this.columns.template.pixelPaddingTop,r=this.yAxis.axisLength+e;return na(t,i,r)},e.prototype.fixHorizontalCoordinate=function(t){var e=this.columns.template.pixelPaddingLeft,i=this.columns.template.pixelPaddingRight,r=-e,o=this.xAxis.axisLength+i;return na(t,r,o)},e.prototype.disposeData=function(){t.prototype.disposeData.call(this),this.columns.clear()},e}(Yc);ca.registeredClasses.ColumnSeries=_c,ca.registeredClasses.ColumnSeriesDataItem=Ic;var Si=function(e){function t(){var t=e.call(this)||this;return t.className="TreeMapSeriesDataItem",t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"parentName",{get:function(){var e=this.treeMapDataItem;if(e&&e.parent)return e.parent.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var e=this.treeMapDataItem;if(e)return e.value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"treeMapDataItem",{get:function(){return this._dataContext},enumerable:!0,configurable:!0}),t.prototype.hide=function(t,r,a,p){var o=this.treeMapDataItem;return o&&o.hide(t),e.prototype.hide.call(this,t,r,a,p)},t.prototype.show=function(t,r,a){var p=this.treeMapDataItem;return p&&p.show(t,r,a),e.prototype.show.call(this,t,r,a)},t}(Ic);var wg=function(e){function t(){var t=e.call(this)||this;t.className="TreeMapSeries",t.applyTheme(),t.fillOpacity=1,t.strokeOpacity=1,t.minBulletDistance=0,t.columns.template.tooltipText="{parentName} {name}: {value}",t.columns.template.configField="config";var r=new Ia;return t.stroke=r.getFor("background"),t.dataFields.openValueX="x0",t.dataFields.valueX="x1",t.dataFields.openValueY="y0",t.dataFields.valueY="y1",t.sequencedInterpolation=!1,t.showOnInit=!1,t.columns.template.pixelPerfect=!1,t}return da(t,e),t.prototype.processDataItem=function(t,r){r.seriesDataItem=t,e.prototype.processDataItem.call(this,t,r)},t.prototype.createDataItem=function(){return new Si},t.prototype.show=function(t){if(!this.preventShow){var r=this.defaultState.transitionDuration;return aa(t)&&(r=t),this.dataItems.each(function(e){e.show(t)}),e.prototype.showReal.call(this,r)}},t.prototype.hide=function(t){var r=this.defaultState.transitionDuration;aa(t)&&(r=t);var a=e.prototype.hideReal.call(this,r);return this.dataItems.each(function(e){e.hide(t)}),a},t.prototype.processValues=function(){},t.prototype.getStartLocation=function(e){return 0},t.prototype.getEndLocation=function(e){return 1},t.prototype.dataChangeUpdate=function(){},t.prototype.processConfig=function(t){t&&(ba(t.dataFields)&&Wa(t.dataFields)||(t.dataFields={})),e.prototype.processConfig.call(this,t)},t.prototype.createLegendMarker=function(e){var t=e.pixelWidth,r=e.pixelHeight;e.removeChildren();var a=e.createChild(mc);a.shouldClone=!1,gb(this,a,db),a.padding(0,0,0,0),a.width=t,a.height=r;var p=e.dataItem;p.color=a.fill,p.colorOrig=a.fill},t.prototype.disableUnusedColumns=function(t){e.prototype.disableUnusedColumns.call(this,t),t.column&&(t.column.__disabled=!1)},t}(_c);ca.registeredClasses.TreeMapSeries=wg,ca.registeredClasses.TreeMapSeriesDataItem=Si;var ym=function(e){function t(){var t=e.call(this)||this;return t.rows=[],t.className="TreeMapDataItem",t.values.value={},t.values.x0={},t.values.y0={},t.values.x1={},t.values.y1={},t.hasChildren.children=!0,t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(e){this._legendDataItem=e,e.label&&(e.label.dataItem=this),e.valueLabel&&(e.valueLabel.dataItem=this)},enumerable:!0,configurable:!0}),t.prototype.getDuration=function(){return 0},Object.defineProperty(t.prototype,"value",{get:function(){var e=0;return this.children&&0!=this.children.length?ga(this.children.iterator(),function(t){var i=t.value;aa(i)&&(e+=i)}):e=this.values.value.workingValue,e},set:function(e){this.setValue("value",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"percent",{get:function(){return this.parent?this.value/this.parent.value*100:100},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x0",{get:function(){return this.values.x0.value},set:function(e){this.setValue("x0",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x1",{get:function(){return this.values.x1.value},set:function(e){this.setValue("x1",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y0",{get:function(){return this.values.y0.value},set:function(e){this.setValue("y0",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y1",{get:function(){return this.values.y1.value},set:function(e){this.setValue("y1",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.properties.name},set:function(e){this.setProperty("name",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this.properties.children},set:function(e){this.setProperty("children",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this.parent?this.parent.level+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){var e=this.properties.color;return null==e&&this.parent&&(e=this.parent.color),null==e&&this.component&&(e=this.component.colors.getIndex(this.component.colors.step*this.index)),e},set:function(e){this.setProperty("color",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this.color},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"series",{get:function(){return this._series},set:function(e){e!=this._series&&(this._series&&(this.component.series.removeValue(this._series),this._series.dispose()),this._series=e,this._disposers.push(e))},enumerable:!0,configurable:!0}),t.prototype.hide=function(t,i,r,a){this.setWorkingValue("value",0),this.children&&this.children.each(function(e){e.hide(t,i,r,a)});var n=this.seriesDataItem;return n&&n.bullets.each(function(e,t){t.hide(),t.preventShow=!0}),e.prototype.hide.call(this,t,i,r,a)},t.prototype.show=function(t,i,r){this.setWorkingValue("value",this.values.value.value),this.children&&this.children.each(function(e){e.show(t,i,r)});var a=this.seriesDataItem;return a&&a.bullets.each(function(e,t){t.preventShow=!1}),e.prototype.show.call(this,t,i,r)},t}(lg);var zm=function(e){function t(){var t=e.call(this)||this;t.layoutAlgorithm=t.squarify,t.zoomable=!0,t.className="TreeMap",t._usesData=!0,t.maxLevels=2,t.currentLevel=0,t.hideParentColumns=!1,t.colors=new Sd,t.sorting="descending";var i=t.xAxes.push(new Ba);i.title.disabled=!0,i.strictMinMax=!0;var r=i.renderer;r.inside=!0,r.labels.template.disabled=!0,r.ticks.template.disabled=!0,r.grid.template.disabled=!0,r.axisFills.template.disabled=!0,r.minGridDistance=100,r.line.disabled=!0,r.baseGrid.disabled=!0;var a=t.yAxes.push(new Ba);a.title.disabled=!0,a.strictMinMax=!0;var n=a.renderer;n.inside=!0,n.labels.template.disabled=!0,n.ticks.template.disabled=!0,n.grid.template.disabled=!0,n.axisFills.template.disabled=!0,n.minGridDistance=100,n.line.disabled=!0,n.baseGrid.disabled=!0,n.inversed=!0,t.xAxis=i,t.yAxis=a;var o=new wg;return t.seriesTemplates=new Dd(o),o.virtualParent=t,t._disposers.push(new Pc(t.seriesTemplates)),t._disposers.push(o),t.zoomOutButton.events.on("hit",function(){t.zoomToChartDataItem(t._homeDataItem)},void 0,!1),t.seriesTemplates.events.on("insertKey",function(e){e.newValue.isTemplate=!0},void 0,!1),t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"navigationBar",{get:function(){return this._navigationBar},set:function(e){var t=this;this._navigationBar!=e&&(this._navigationBar=e,e.parent=this,e.toBack(),e.links.template.events.on("hit",function(e){var i=e.target.dataItem.dataContext;i.isDisposed()||(t.zoomToChartDataItem(i),t.createTreeSeries(i))},void 0,!0),this._disposers.push(e))},enumerable:!0,configurable:!0}),t.prototype.validateData=function(){this.series.clear(),this._tempSeries=[],e.prototype.validateData.call(this),this._homeDataItem&&this._homeDataItem.dispose();var t=this.dataItems.template.clone();this._homeDataItem=t,ga(this.dataItems.iterator(),function(e){e.parent=t}),t.children=this.dataItems,t.x0=0,t.y0=0,t.name=this._homeText;var i=10*Math.round(1e3*this.pixelHeight/this.pixelWidth/10)||1e3;t.x1=1e3,t.y1=i,this.xAxis.min=0,this.xAxis.max=1e3,this.xAxis.getMinMax(),this.yAxis.min=0,this.yAxis.max=i,this.yAxis.getMinMax(),this.layoutItems(t),this.createTreeSeries(t),this.feedLegend()},t.prototype.layoutItems=function(e,t){if(e){var i=e.children;t||(t=this.sorting),"ascending"==t&&i.values.sort(function(e,t){return e.value-t.value}),"descending"==t&&i.values.sort(function(e,t){return t.value-e.value}),this._updateDataItemIndexes(0),this.layoutAlgorithm(e);for(var r=0,a=i.length;r<a;r++){var n=i.getIndex(r);n.children&&this.layoutItems(n)}}},t.prototype.createTreeSeries=function(e){var t=this;this._tempSeries=[];for(var i=[e],r=e.parent;null!=r;)this.initSeries(r),i.push(r),r=r.parent;i.reverse(),this.navigationBar&&(this.navigationBar.data=i),this.createTreeSeriesReal(e),la(this._tempSeries,function(e){-1==t.series.indexOf(e)&&t.series.push(e),e.zIndex=e.level})},t.prototype.createTreeSeriesReal=function(e){if(e.children&&e.level<this.currentLevel+this.maxLevels){this.initSeries(e);for(var t=0;t<e.children.length;t++){var i=e.children.getIndex(t);i.children&&this.createTreeSeriesReal(i)}}},t.prototype.setData=function(t){this.currentLevel=0,this.currentlyZoomed=void 0,this.xAxis.start=0,this.xAxis.end=1,this.yAxis.start=0,this.yAxis.end=1,e.prototype.setData.call(this,t)},t.prototype.seriesAppeared=function(){return!0},t.prototype.initSeries=function(e){var t=this;if(!e.series){var i=void 0,r=this.seriesTemplates.getKey(e.level.toString());(i=r?r.clone():this.series.create()).dataItem.dataContext=e,i.name=e.name,i.parentDataItem=e,e.series=i;var a=e.level;i.level=a;var n=e.dataContext;n&&(i.config=n.config),this.dataUsers.removeValue(i),i.data=e.children.values,i.fill=e.color,i.columnsContainer.hide(0),i.bulletsContainer.hide(0),i.columns.template.adapter.add("fill",function(e,t){var i=t.dataItem;if(i){var r=i.treeMapDataItem;if(r)return t.fill=r.color,t.adapter.remove("fill"),r.color}}),this.zoomable&&(e.level>this.currentLevel||e.children&&e.children.length>0)&&(i.columns.template.cursorOverStyle=tb.pointer,this.zoomable&&i.columns.template.events.on("hit",function(i){var r=i.target.dataItem;e.level>t.currentLevel?t.zoomToChartDataItem(r.treeMapDataItem.parent):t.zoomToSeriesDataItem(r)},this,void 0))}this._tempSeries.push(e.series)},t.prototype.toggleBullets=function(e){var t=this;ga(this.series.iterator(),function(i){-1==t._tempSeries.indexOf(i)?(i.columnsContainer.hide(),i.bulletsContainer.hide(e)):(i.columnsContainer.show(),i.bulletsContainer.show(e),i.dataItems.each(function(e){e.bullets.each(function(e,t){t.show()})}),i.level<t.currentLevel?(t.hideParentColumns&&i.columnsContainer.hide(),i.bulletsContainer.hide(e)):i.level==t.currentLevel&&t.maxLevels>1&&i.dataItems.each(function(e){e.treeMapDataItem.children&&e.bullets.each(function(e,t){t.hide()})}))})},t.prototype.zoomToSeriesDataItem=function(e){this.zoomToChartDataItem(e.treeMapDataItem)},t.prototype.zoomToChartDataItem=function(e){var t=this;e||(e=this._homeDataItem);var i=this.zoomOutButton;if(i&&(e!=this._homeDataItem?i.show():i.hide()),e&&e.children){this.xAxis.zoomToValues(e.x0,e.x1),this.yAxis.zoomToValues(e.y0,e.y1),this.currentLevel=e.level,this.currentlyZoomed=e,this.createTreeSeries(e);var r=this.xAxis.rangeChangeAnimation||this.yAxis.rangeChangeAnimation;!r||r.isDisposed()||r.isFinished()?this.toggleBullets():(this._dataDisposers.push(r),r.events.once("animationended",function(){t.toggleBullets()}))}},t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("TreeMap chart"))},t.prototype.createDataItem=function(){return new ym},Object.defineProperty(t.prototype,"maxLevels",{get:function(){return this.getPropertyValue("maxLevels")},set:function(e){this.setPropertyValue("maxLevels",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLevel",{get:function(){return this.getPropertyValue("currentLevel")},set:function(e){this.setPropertyValue("currentLevel",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideParentColumns",{get:function(){return this.getPropertyValue("hideParentColumns")},set:function(e){this.setPropertyValue("hideParentColumns",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sorting",{get:function(){return this.getPropertyValue("sorting")},set:function(e){this.setPropertyValue("sorting",e,!0)},enumerable:!0,configurable:!0}),t.prototype.createSeries=function(){return new wg},Object.defineProperty(t.prototype,"homeText",{get:function(){return this._homeText},set:function(e){this._homeText=e,this._homeDataItem&&(this._homeDataItem.name=this._homeText)},enumerable:!0,configurable:!0}),t.prototype.processConfig=function(t){if(t){if(ba(t.layoutAlgorithm)&&Ca(t.layoutAlgorithm))switch(t.layoutAlgorithm){case"squarify":t.layoutAlgorithm=this.squarify;break;case"binaryTree":t.layoutAlgorithm=this.binaryTree;break;case"slice":t.layoutAlgorithm=this.slice;break;case"dice":t.layoutAlgorithm=this.dice;break;case"sliceDice":t.layoutAlgorithm=this.sliceDice;break;default:delete t.layoutAlgorithm;}ba(t.navigationBar)&&!ba(t.navigationBar.type)&&(t.navigationBar.type="NavigationBar"),e.prototype.processConfig.call(this,t)}},t.prototype.validateLayout=function(){e.prototype.validateLayout.call(this),this.layoutItems(this.currentlyZoomed)},t.prototype.validateDataItems=function(){e.prototype.validateDataItems.call(this),this.layoutItems(this._homeDataItem),ga(this.series.iterator(),function(e){e.validateRawData()}),this.zoomToChartDataItem(this._homeDataItem)},t.prototype.binaryTree=function(e){var t,i,r=e.children,a=r.length,n=new Array(a+1);for(n[0]=i=t=0;t<a;++t)n[t+1]=i+=r.getIndex(t).value;a>0&&function e(t,i,a,o,s,l,u){if(t>=i-1){var h=r.getIndex(t);return h.x0=o,h.y0=s,h.x1=l,void(h.y1=u)}var p=n[t],c=a/2+p,d=t+1,m=i-1;for(;d<m;){var y=d+m>>>1;n[y]<c?d=y+1:m=y}c-n[d-1]<n[d]-c&&t+1<d&&--d;var f=n[d]-p,v=a-f;if(l-o>u-s){var g=(o*v+l*f)/a;e(t,d,f,o,s,g,u),e(d,i,v,g,s,l,u)}else{var $=(s*v+u*f)/a;e(t,d,f,o,s,l,$),e(d,i,v,o,$,l,u)}}(0,a,e.value,e.x0,e.y0,e.x1,e.y1)},t.prototype.slice=function(e){for(var t,i=e.x0,r=e.x1,a=e.y0,n=e.y1,o=e.children,s=-1,l=o.length,u=e.value&&(n-a)/e.value;++s<l;)(t=o.getIndex(s)).x0=i,t.x1=r,t.y0=a,a+=t.value*u,t.y1=a},t.prototype.dice=function(e){for(var t,i=e.x0,r=e.x1,a=e.y0,n=e.y1,o=e.children,s=-1,l=o.length,u=e.value&&(r-i)/e.value;++s<l;)(t=o.getIndex(s)).y0=a,t.y1=n,t.x0=i,i+=t.value*u,t.x1=i},t.prototype.sliceDice=function(e){1&e.level?this.slice(e):this.dice(e)},t.prototype.squarify=function(e){for(var t,i,r,a,n,o,s,l,u,h,p=(1+Math.sqrt(5))/2,c=e.x0,d=e.x1,m=e.y0,y=e.y1,f=e.children,v=0,g=0,$=f.length,x=e.value;v<$;){i=d-c,r=y-m;do{a=f.getIndex(g++).value}while(!a&&g<$);for(n=o=a,h=a*a*(u=Math.max(r/i,i/r)/(x*p)),l=Math.max(o/h,h/n);g<$;++g){if(a+=t=f.getIndex(g).value,t<n&&(n=t),t>o&&(o=t),h=a*a*u,(s=Math.max(o/h,h/n))>l){a-=t;break}l=s}var b=this.dataItems.template.clone();b.value=a,b.dice=i<r,b.children=f.slice(v,g),b.x0=c,b.y0=m,b.x1=d,b.y1=y,b.dice?(b.y1=x?m+=r*a/x:y,this.dice(b)):(b.x1=x?c+=i*a/x:d,this.slice(b)),x-=a,v=g}},t.prototype.handleSeriesAdded2=function(){},t.prototype.handleDataItemValueChange=function(e,t){"value"==t&&this.invalidateDataItems()},t.prototype.handleDataItemWorkingValueChange=function(e,t){"value"==t&&this.invalidateDataItems()},t.prototype.getLegendLevel=function(e){if(e&&e.children){if(e.children.length>1)return e;if(1==e.children.length){var t=e.children.getIndex(0);return t.children?this.getLegendLevel(t):e}return e}},t.prototype.handleLegendSeriesAdded=function(e){},Object.defineProperty(t.prototype,"homeDataItem",{get:function(){return this._homeDataItem},enumerable:!0,configurable:!0}),t.prototype.feedLegend=function(){var e=this.legend;if(e){e.dataFields.name="name";var t=this.getLegendLevel(this._homeDataItem);if(t){var i=[];t.children.each(function(e){i.push(e)}),e.data=i}}},t.prototype.disposeData=function(){e.prototype.disposeData.call(this),this._homeDataItem=void 0,this.series.clear(),this.navigationBar&&this.navigationBar.disposeData(),this.xAxis.disposeData(),this.yAxis.disposeData()},t.prototype.getExporting=function(){var t=this,i=e.prototype.getExporting.call(this);return i.adapter.add("formatDataFields",function(e){return"csv"!=e.format&&"xlsx"!=e.format||ba(t.dataFields.children)&&delete e.dataFields[t.dataFields.children],e}),i},t}(Hc);ca.registeredClasses.TreeMap=zm;var Ti=function(e){function t(){var t=e.call(this)||this;return t._chart=new nb,t.className="AxisRendererX3D",t._disposers.push(t._chart),t.applyTheme(),t}return da(t,e),t.prototype.updateGridElement=function(e,t,r){t+=(r-t)*e.location;var i=this.positionToPoint(t);if(e.element){var s=this.chart.dx3D||0,o=this.chart.dy3D||0,$=this.getHeight();e.path=ma({x:s,y:o})+fa({x:s,y:$+o})+fa({x:0,y:$})}this.positionItem(e,i),this.toggleVisibility(e,t,0,1)},t.prototype.updateBaseGridElement=function(){e.prototype.updateBaseGridElement.call(this);var t=this.getHeight(),r=this.chart.dx3D||0,i=this.chart.dy3D||0;this.baseGrid.path=ma({x:r,y:i})+fa({x:0,y:0})+fa({x:0,y:t})},Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart.get()},set:function(e){e&&this._chart.set(e,e.events.on("propertychanged",this.handle3DChanged,this,!1))},enumerable:!0,configurable:!0}),t.prototype.handle3DChanged=function(e){"depth"!=e.property&&"angle"!=e.property||this.invalidate()},t}(vc);ca.registeredClasses.AxisRendererX3D=Ti;var Am=function(i){function e(){var e=i.call(this)||this;return e._chart=new nb,e.className="AxisRendererY3D",e._disposers.push(e._chart),e.applyTheme(),e}return da(e,i),e.prototype.updateGridElement=function(i,e,t){e+=(t-e)*i.location;var r=this.positionToPoint(e);if(i.element){var o=this.chart.dx3D||0,p=this.chart.dy3D||0,a=this.getWidth();i.path=ma({x:0,y:0})+fa({x:o,y:p})+fa({x:a+o,y:p})}this.positionItem(i,r),this.toggleVisibility(i,e,0,1)},e.prototype.updateBaseGridElement=function(){i.prototype.updateBaseGridElement.call(this);var e=this.chart.dx3D||0,t=this.chart.dy3D||0,r=this.getWidth();this.baseGrid.path=ma({x:0,y:0})+fa({x:r,y:0})+fa({x:r+e,y:t})},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(i){i&&this._chart.set(i,i.events.on("propertychanged",this.handle3DChanged,this,!1))},enumerable:!0,configurable:!0}),e.prototype.handle3DChanged=function(i){"depth"!=i.property&&"angle"!=i.property||this.invalidate()},e}(dc);var Ui=function(t){function o(){var o=t.call(this)||this;return o.className="Column3D",o}return da(o,t),o.prototype.createAssets=function(){this.column3D=this.createChild(am),this.column3D.shouldClone=!1,this.column3D.strokeOpacity=0,this.column=this.column3D},o.prototype.validate=function(){t.prototype.validate.call(this),this.column3D&&(this.column3D.width=this.pixelWidth,this.column3D.height=this.pixelHeight,this.column3D.invalid&&this.column3D.validate())},o.prototype.copyFrom=function(o){t.prototype.copyFrom.call(this,o),this.column3D&&this.column3D.copyFrom(o.column3D)},o.prototype.setFill=function(o){t.prototype.setFill.call(this,o),this.column.fill=o},o}($c);ca.registeredClasses.Column3D=Ui;var Bm=function(e){function t(){var t=e.call(this)||this;return t.className="ColumnSeries3DDataItem",t.applyTheme(),t}return da(t,e),t}(Ic);var xg=function(e){function t(){var t=e.call(this)||this;return t.className="ColumnSeries3D",t.columns.template.column3D.applyOnClones=!0,t.columns.template.hiddenState.properties.visible=!0,t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"columnsContainer",{get:function(){var e=this.chart;return e&&e.columnsContainer&&"vertical"!=e.leftAxesContainer.layout&&"vertical"!=e.rightAxesContainer.layout&&"horizontal"!=e.bottomAxesContainer.layout&&"horizontal"!=e.topAxesContainer.layout?e.columnsContainer:this._columnsContainer},enumerable:!0,configurable:!0}),t.prototype.validateDataElementReal=function(t){e.prototype.validateDataElementReal.call(this,t),t.column&&(t.column.dx=this.dx,t.column.dy=this.dy)},t.prototype.validateDataElements=function(){e.prototype.validateDataElements.call(this),this.chart&&this.chart.invalidateLayout()},t.prototype.createColumnTemplate=function(){return new Ui},Object.defineProperty(t.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(e){this.setPropertyValue("depth",e,!0),this.columns.template.column3D.depth=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(e){this.setPropertyValue("angle",e),this.columns.template.column3D.angle=e},enumerable:!0,configurable:!0}),t}(_c);ca.registeredClasses.ColumnSeries3D=xg,ca.registeredClasses.ColumnSeries3DDataItem=Bm;var j=function(e){function t(){var t=e.call(this)||this;return t.className="XYChart3DDataItem",t.applyTheme(),t}return da(t,e),t}(lg);var Cm=function(e){function t(){var t=e.call(this)||this;t._axisRendererX=Ti,t._axisRendererY=Am,t.className="XYChart3D",t.depth=30,t.angle=30;var r=t.seriesContainer.createChild(oa);return r.shouldClone=!1,r.isMeasured=!1,r.layout="none",t.columnsContainer=r,t.columnsContainer.mask=t.createChild(xa),t.applyTheme(),t}return da(t,e),t.prototype.updateSeriesMasks=function(){if(e.prototype.updateSeriesMasks.call(this),Id()){var t=this.columnsContainer,r=t.mask;t.mask=void 0,t.mask=r}},Object.defineProperty(t.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(e){this.setPropertyValue("depth",e),this.fixLayout(),this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(e){this.setPropertyValue("angle",e),this.fixLayout(),this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dx3D",{get:function(){return ka(this.angle)*this.depth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dy3D",{get:function(){return-ja(this.angle)*this.depth},enumerable:!0,configurable:!0}),t.prototype.validateLayout=function(){e.prototype.validateLayout.call(this),this.fixColumns()},t.prototype.fixLayout=function(){this.chartContainer.marginTop=-this.dy3D,this.chartContainer.paddingRight=this.dx3D,this.scrollbarX&&(this.scrollbarX.dy=this.dy3D,this.scrollbarX.dx=this.dx3D),this.scrollbarY&&(this.scrollbarY.dy=this.dy3D,this.scrollbarY.dx=this.dx3D),this.fixColumns(),e.prototype.fixLayout.call(this)},t.prototype.fixColumns=function(){var e=this,t=1,r=0;ga(this.series.iterator(),function(e){e instanceof xg&&(!e.clustered&&r>0&&t++,e.depthIndex=t-1,r++)});var i=0;ga(this.series.iterator(),function(r){if(r instanceof xg){r.depth=e.depth/t,r.angle=e.angle,r.columnsContainer==e.columnsContainer&&(r.dx=e.depth/t*ka(e.angle)*r.depthIndex,r.dy=-e.depth/t*ja(e.angle)*r.depthIndex);var a=!1;(r.baseAxis==r.xAxis&&r.xAxis.renderer.inversed||r.baseAxis==r.yAxis&&r.yAxis.renderer.inversed)&&(a=!0);var o=1;r.dataItems.each(function(e){var t=e.column;t&&(t.zIndex=a?1e3*(1e3-o)+i-100*r.depthIndex:1e3*o+i-100*r.depthIndex),o++}),a?i--:i++}}),this.maskColumns()},t.prototype.processConfig=function(t){if(t&&ba(t.series)&&mb(t.series))for(var r=0,i=t.series.length;r<i;r++)t.series[r].type=t.series[r].type||"ColumnSeries3D";e.prototype.processConfig.call(this,t)},t.prototype.maskColumns=function(){var e=this.plotContainer.pixelWidth,t=this.plotContainer.pixelHeight,r=this.dx3D,i=this.dy3D,a=ma({x:0,y:0})+fa({x:r,y:i})+fa({x:e+r,y:i})+fa({x:e+r,y:t+i})+fa({x:e,y:t})+fa({x:e,y:t})+fa({x:0,y:t})+eb(),o=this.columnsContainer;o&&o.mask&&(o.mask.path=a)},t}(Hc);ca.registeredClasses.XYChart3D=Cm;var Dm=function(e){function t(){var t=e.call(this)||this;t.className="HeatLegend",t.markerContainer=t.createChild(oa),t.markerContainer.shouldClone=!1,t.markerCount=1;var r=new mc;return r.minHeight=20,r.minWidth=20,r.interactionsEnabled=!1,r.fillOpacity=1,r.cornerRadius(0,0,0,0),t.markerContainer.minHeight=20,t.markerContainer.minWidth=20,t.orientation="horizontal",t.markers=new _a(r),t._disposers.push(new Sa(t.markers)),t._disposers.push(t.markers.template),t.applyTheme(),t}return da(t,e),t.prototype.getMinFromRules=function(e){var t,r=this.series;if(r)return Pb(r.heatRules.iterator(),function(r){return r.property!=e||(t=r.min,!1)}),t},t.prototype.getMaxFromRules=function(e){var t,r=this.series;if(r)return ga(r.heatRules.iterator(),function(r){return r.property!=e||(t=r.max,!1)}),t},t.prototype.validate=function(){e.prototype.validate.call(this),this.valueAxis.renderer.inversed=this.reverseOrder;var t=this.series,r=this.minColor,i=this.maxColor;if(ba(r)||(r=Xb(this.getMinFromRules("fill"))),ba(i)||(i=Xb(this.getMaxFromRules("fill"))),t){var o=t.fill;!ba(r)&&o instanceof Ga&&(r=o),!ba(i)&&o instanceof Ga&&(i=o)}ba(i)||(i=Xb(this.getMaxFromRules("fill")));var a=Ra(this.getMinFromRules("fillOpacity"));aa(a)||(a=1);var s=Ra(this.getMaxFromRules("fillOpacity"));aa(s)||(s=1);var n=Ra(this.getMinFromRules("strokeOpacity"));aa(n)||(n=1);var u=Ra(this.getMaxFromRules("strokeOpacity"));aa(u)||(u=1);for(var $=Xb(this.getMinFromRules("stroke")),l=Xb(this.getMaxFromRules("stroke")),p=0;p<this.markerCount;p++){var h=this.markers.getIndex(p);if(h||((h=this.markers.create()).parent=this.markerContainer,h.height=ia(100),h.width=ia(100)),1==this.markerCount){var m=new Zb;if(this.reverseOrder?(m.addColor(i,s),m.addColor(r,a)):(m.addColor(r,a),m.addColor(i,s)),"vertical"==this.orientation&&(m.rotation=-90),h.fill=m,ba($)&&ba(l)){var d=new Zb;this.reverseOrder?(d.addColor(l,u),d.addColor($,n)):(d.addColor($,n),d.addColor(l,u)),"vertical"==this.orientation&&(d.rotation=-90),h.stroke=d}}else{var c=p;this.reverseOrder&&(c=this.markerCount-p-1);var O=new Ga(me(r.rgb,i.rgb,c/this.markerCount));h.fill=O;var v=a+(s-a)*c/this.markerCount;if(h.fillOpacity=v,ba($)&&ba(l)){var y=new Ga(me($.rgb,l.rgb,c/this.markerCount));h.stroke=y;var B=n+(u-n)*c/this.markerCount;h.strokeOpacity=B}}}var g=this.valueAxis.renderer;this.markerCount>1&&("horizontal"==this.orientation?g.minGridDistance=this.measuredWidth/this.markerCount:g.minGridDistance=this.measuredHeight/this.markerCount),this.valueAxis.invalidate();p=this.markerCount;for(var f=this.markers.length;p<f;p++)this.markers.getIndex(p).parent=void 0},Object.defineProperty(t.prototype,"minColor",{get:function(){return this.getPropertyValue("minColor")},set:function(e){e instanceof Ga||(e=Xb(e)),this.setColorProperty("minColor",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxColor",{get:function(){return this.getPropertyValue("maxColor")},set:function(e){e instanceof Ga||(e=Xb(e)),this.setColorProperty("maxColor",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"markerCount",{get:function(){return this.getPropertyValue("markerCount")},set:function(e){this.setPropertyValue("markerCount",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minValue",{get:function(){return this.getPropertyValue("minValue")},set:function(e){this.setPropertyValue("minValue",e),this.valueAxis.min=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.getPropertyValue("maxValue")},set:function(e){this.setPropertyValue("maxValue",e),this.valueAxis.max=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(e){this.setPropertyValue("orientation",e,!0);var t=this.markerContainer,r=this.valueAxis;"horizontal"==e?(ba(this.width)||(this.width=200),this.height=void 0,r.width=ia(100),r.height=void 0,r.tooltip.pointerOrientation="vertical",this.layout="vertical",t.width=ia(100),t.height=void 0,r.renderer instanceof vc||(r.renderer=new vc)):(ba(this.height)||(this.height=200),this.width=void 0,this.layout="horizontal",t.width=void 0,t.height=ia(100),r.height=ia(100),r.width=void 0,r.tooltip.pointerOrientation="horizontal",r.renderer instanceof dc||(r.renderer=new dc),r.renderer.inside=!0,r.renderer.labels.template.inside=!0,this.markerContainer.reverseOrder=!0);var i=r.renderer;i.grid.template.disabled=!0,i.axisFills.template.disabled=!0,i.baseGrid.disabled=!0,i.labels.template.padding(2,3,2,3),i.minHeight=void 0,i.minWidth=void 0,this.markerContainer.layout=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valueAxis",{get:function(){return this._valueAxis||(this.valueAxis=this.createChild(Ba),this.valueAxis.shouldClone=!1),this._valueAxis},set:function(e){this._valueAxis=e,e.parent=this,e.strictMinMax=!0,this.orientation=this.orientation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"series",{get:function(){return this._series},set:function(e){var t=this;this._series=e;var r="value";try{var i=e.heatRules.getIndex(0).dataField;i&&(r=i)}catch(o){}this.updateMinMax(e.dataItem.values[r].low,e.dataItem.values[r].high),e.dataItem.events.on("calculatedvaluechanged",function(i){t.updateMinMax(e.dataItem.values[r].low,e.dataItem.values[r].high)},void 0,!1),e.heatRules.events.on("inserted",this.invalidate,this,!1),e.heatRules.events.on("removed",this.invalidate,this,!1)},enumerable:!0,configurable:!0}),t.prototype.updateMinMax=function(e,t){var r=this.valueAxis;aa(this.minValue)||(r.min=e,r.invalidate()),aa(this.maxValue)||(r.max=t,r.invalidate())},t.prototype.processConfig=function(t){if(t&&ba(t.series)&&Ca(t.series)&&Ca(t.series))if(this.map.hasKey(t.series))t.series=this.map.getKey(t.series);else{var r=t.series,i=this.map.events.on("insertKey",function(e){e.key==r&&(this.series=e.newValue,i.dispose())},this);this._disposers.push(i),delete t.series}e.prototype.processConfig.call(this,t)},t}(oa);ca.registeredClasses.HeatLegend=Dm;var cf=function(e){function i(){var i=e.call(this)||this;return i.className="Candlestick",i.layout="none",i}return da(i,e),i.prototype.createAssets=function(){e.prototype.createAssets.call(this),this.lowLine=this.createChild(cc),this.lowLine.shouldClone=!1,this.highLine=this.createChild(cc),this.highLine.shouldClone=!1},i.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.lowLine&&this.lowLine.copyFrom(i.lowLine),this.highLine&&this.highLine.copyFrom(i.highLine)},i}($c);ca.registeredClasses.Candlestick=cf;var yg=function(e){function i(){var i=e.call(this)||this;return i.values.lowValueX={},i.values.lowValueY={},i.values.highValueX={},i.values.highValueY={},i.className="CandlestickSeriesDataItem",i.applyTheme(),i}return da(i,e),Object.defineProperty(i.prototype,"lowValueX",{get:function(){return this.values.lowValueX.value},set:function(e){this.setValue("lowValueX",e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lowValueY",{get:function(){return this.values.lowValueY.value},set:function(e){this.setValue("lowValueY",e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"highValueX",{get:function(){return this.values.highValueX.value},set:function(e){this.setValue("highValueX",e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"highValueY",{get:function(){return this.values.highValueY.value},set:function(e){this.setValue("highValueY",e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"closeValueX",{get:function(){return this.values.valueX.value},set:function(e){this.setValue("valueX",e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"closeValueY",{get:function(){return this.values.valueY.value},set:function(e){this.setValue("valueY",e)},enumerable:!0,configurable:!0}),i}(Ic);var Vi=function(e){function i(){var i=e.call(this)||this;i.className="CandlestickSeries",i.groupFields.lowValueX="low",i.groupFields.lowValueY="low",i.groupFields.highValueX="high",i.groupFields.highValueY="high",i.strokeOpacity=1;var t=new Ia,r=t.getFor("positive"),l=t.getFor("negative");return i.dropFromOpenState.properties.fill=l,i.dropFromOpenState.properties.stroke=l,i.riseFromOpenState.properties.fill=r,i.riseFromOpenState.properties.stroke=r,i.applyTheme(),i}return da(i,e),i.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("Candlestick Series"))},i.prototype.createDataItem=function(){return new yg},i.prototype.validateDataElementReal=function(i){e.prototype.validateDataElementReal.call(this,i),this.validateCandlestick(i)},i.prototype.validateCandlestick=function(e){var i=e.column;if(i){var t=i.lowLine,r=i.highLine;if(this.baseAxis==this.xAxis){var l=i.pixelWidth/2;t.x=l,r.x=l;var s=e.getWorkingValue(this.yOpenField),a=e.getWorkingValue(this.yField),o=this.yAxis.getY(e,this.yOpenField),n=this.yAxis.getY(e,this.yField),u=this.yAxis.getY(e,this.yLowField),p=this.yAxis.getY(e,this.yHighField),h=i.pixelY;t.y1=u-h,r.y1=p-h,s<a?(t.y2=o-h,r.y2=n-h):(t.y2=n-h,r.y2=o-h)}if(this.baseAxis==this.yAxis){var c=i.pixelHeight/2;t.y=c,r.y=c;var d=e.getWorkingValue(this.xOpenField),$=e.getWorkingValue(this.xField),y=this.xAxis.getX(e,this.xOpenField),x=this.xAxis.getX(e,this.xField),g=this.xAxis.getX(e,this.xLowField),V=this.xAxis.getX(e,this.xHighField),f=i.pixelX;t.x1=g-f,r.x1=V-f,d<$?(t.x2=y-f,r.x2=x-f):(t.x2=x-f,r.x2=y-f)}ga(this.axisRanges.iterator(),function(i){var l=e.rangesColumns.getKey(i.uid);if(l){var s=l.lowLine;s.x=t.x,s.y=t.y,s.x1=t.x1,s.x2=t.x2,s.y1=t.y1,s.y2=t.y2;var a=l.highLine;a.x=r.x,a.y=r.y,a.x1=r.x1,a.x2=r.x2,a.y1=r.y1,a.y2=r.y2}})}},Object.defineProperty(i.prototype,"xLowField",{get:function(){return this._xLowField},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"yLowField",{get:function(){return this._yLowField},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"xHighField",{get:function(){return this._xHighField},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"yHighField",{get:function(){return this._yHighField},enumerable:!0,configurable:!0}),i.prototype.defineFields=function(){e.prototype.defineFields.call(this);var i=this.xAxis,t=this.yAxis;if(i&&t){if(this.baseAxis==i){var r=qe(t.axisFieldName);this._yLowField="low"+r+"Y",this._yHighField="high"+r+"Y"}if(this.baseAxis==t){var l=qe(i.axisFieldName);this._xLowField="low"+l+"X",this._xHighField="high"+l+"X"}this.addValueField(i,this._xValueFields,this._xLowField),this.addValueField(i,this._xValueFields,this._xHighField),this.addValueField(t,this._yValueFields,this._yLowField),this.addValueField(t,this._yValueFields,this._yHighField)}},i.prototype.createLegendMarker=function(e){var i=e.pixelWidth,t=e.pixelHeight;e.removeChildren();var r,l,s=e.createChild(cf);s.shouldClone=!1,s.copyFrom(this.columns.template);var a=s.lowLine,o=s.highLine;this.baseAxis==this.yAxis?(r=i/3,l=t,a.y=t/2,o.y=t/2,a.x2=i/3,o.x2=i/3,o.x=i/3*2,s.column.x=i/3):(r=i,l=t/3,a.x=i/2,o.x=i/2,a.y2=t/3,o.y2=t/3,o.y=t/3*2,s.column.y=t/3),s.width=r,s.height=l,gb(this,e,db),gb(this.columns.template,s,db),s.stroke=this.riseFromOpenState.properties.stroke,s.fill=s.stroke;var n=e.dataItem;n.color=s.fill,n.colorOrig=s.fill},i.prototype.createColumnTemplate=function(){return new cf},i}(_c);ca.registeredClasses.CandlestickSeries=Vi,ca.registeredClasses.CandlestickSeriesDataItem=yg;var zg=function(e){function i(){var i=e.call(this)||this;return i.className="OHLC",i.layout="none",i}return da(i,e),i.prototype.createAssets=function(){this.openLine=this.createChild(cc),this.openLine.shouldClone=!1,this.highLowLine=this.createChild(cc),this.highLowLine.shouldClone=!1,this.closeLine=this.createChild(cc),this.closeLine.shouldClone=!1},i.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.openLine&&this.openLine.copyFrom(i.openLine),this.highLowLine&&this.highLowLine.copyFrom(i.highLowLine),this.closeLine&&this.closeLine.copyFrom(i.closeLine)},i}(cf);ca.registeredClasses.OHLC=zg;var Wi=function(e){function t(){var t=e.call(this)||this;return t.className="OHLCSeriesDataItem",t.applyTheme(),t}return da(t,e),t}(yg);var Em=function(e){function t(){var t=e.call(this)||this;return t.className="OHLCSeries",t.applyTheme(),t}return da(t,e),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("OHLC Series"))},t.prototype.createDataItem=function(){return new Wi},t.prototype.validateCandlestick=function(e){var t=e.column;if(t){var i=t.openLine,r=t.highLowLine,s=t.closeLine;if(this.baseAxis==this.xAxis){var a=t.pixelWidth/2;r.x=a,e.getWorkingValue(this.yOpenField),e.getWorkingValue(this.yField);var o=this.yAxis.getY(e,this.yOpenField),$=this.yAxis.getY(e,this.yField),l=this.yAxis.getY(e,this.yLowField),p=this.yAxis.getY(e,this.yHighField),x=t.pixelY;i.y1=o-x,i.y2=o-x,i.x1=0,i.x2=a,s.y1=$-x,s.y2=$-x,s.x1=a,s.x2=2*a,r.y1=p-x,r.y2=l-x}if(this.baseAxis==this.yAxis){var u=t.pixelHeight/2;r.y=u,e.getWorkingValue(this.xOpenField),e.getWorkingValue(this.xField);var n=this.xAxis.getX(e,this.xOpenField),y=this.xAxis.getX(e,this.xField),h=this.xAxis.getX(e,this.xLowField),H=this.xAxis.getX(e,this.xHighField),c=t.pixelX;i.x1=n-c,i.x2=n-c,i.y1=u,i.y2=2*u,s.x1=y-c,s.x2=y-c,s.y1=0,s.y2=u,r.x1=H-c,r.x2=h-c}ga(this.axisRanges.iterator(),function(t){var a=e.rangesColumns.getKey(t.uid);if(a){var o=a.openLine;o.x=i.x,o.y=i.y,o.x1=i.x1,o.x2=i.x2,o.y1=i.y1,o.y2=i.y2;var $=a.closeLine;$.x=s.x,$.y=s.y,$.x1=s.x1,$.x2=s.x2,$.y1=s.y1,$.y2=s.y2;var l=a.highLowLine;l.x=r.x,l.y=r.y,l.x1=r.x1,l.x2=r.x2,l.y1=r.y1,l.y2=r.y2}})}},t.prototype.createLegendMarker=function(e){var t=e.pixelWidth,i=e.pixelHeight;e.removeChildren();var r,s,a=e.createChild(zg);a.shouldClone=!1,a.copyFrom(this.columns.template);var o=a.openLine,$=a.closeLine,l=a.highLowLine;this.baseAxis==this.yAxis?(r=t/3,s=i,l.y=i/2,l.x2=t,o.x=t/3*2,o.y2=i/2,$.x=t/3,$.y2=i,$.y1=i/2):(r=t,s=i/3,l.x=t/2,l.y2=i,o.y=i/3*2,o.x2=t/2,$.y=i/3,$.x2=t,$.x1=t/2),a.width=r,a.height=s,gb(this,e,db),gb(this.columns.template,a,db),a.stroke=this.riseFromOpenState.properties.stroke;var p=e.dataItem;p.color=a.stroke,p.colorOrig=a.stroke},t.prototype.createColumnTemplate=function(){return new zg},t}(Vi);ca.registeredClasses.OHLCSeries=Em,ca.registeredClasses.OHLCSeriesDataItem=Wi;var Xi=function(e){function t(){var t=e.call(this)||this;return t.className="StepLineSeriesSegment",t}return da(t,e),t.prototype.drawSegment=function(e,t,$,i,r,l){if(e.length>0&&t.length>0)if(r){var p=ma(e[0]);if(e.length>0)for(var o=1;o<e.length;o++){var a=e[o];o/2==Math.round(o/2)?p+=ma(a):p+=fa(a)}this.strokeSprite.path=p,(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&(p=ma(e[0])+Pd(e),p+=fa(t[0])+Pd(t),p+=fa(e[0]),p+=eb(),this.fillSprite.path=p)}else{p=ma(e[0])+Pd(e);this.strokeSprite.path=p,(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&(p+=fa(t[0])+Pd(t),p+=fa(e[0]),p+=eb(),this.fillSprite.path=p)}},t}(mg);ca.registeredClasses.StepLineSeriesSegment=Xi;var Yi=function(e){function t(){var t=e.call(this)||this;return t.className="StepLineSeriesDataItem",t.applyTheme(),t}return da(t,e),t}(Ye);var Fm=function(e){function t(){var t=e.call(this)||this;return t.className="StepLineSeries",t.applyTheme(),t.startLocation=0,t.endLocation=1,t}return da(t,e),t.prototype.createDataItem=function(){return new Yi},t.prototype.addPoints=function(e,t,i,r,s){var a,n,o,u;this.baseAxis==this.xAxis&&(a=this.startLocation,n=this.endLocation,o=this.getAdjustedXLocation(t,this.yOpenField),u=this.getAdjustedXLocation(t,this.yField)),this.baseAxis==this.yAxis&&(o=this.startLocation,u=this.endLocation,a=this.getAdjustedXLocation(t,this.xOpenField),n=this.getAdjustedXLocation(t,this.xField));var p=this.xAxis.getX(t,i,a),$=this.yAxis.getY(t,r,o),h=this.xAxis.getX(t,i,n),c=this.yAxis.getY(t,r,u);if(p=na(p,-1e5,1e5),$=na($,-1e5,1e5),h=na(h,-1e5,1e5),c=na(c,-1e5,1e5),!this.noRisers&&e.length>1){var x=e[e.length-1];this.baseAxis==this.xAxis&&(s?e.push({x:x.x,y:c}):e.push({x:p,y:x.y})),this.baseAxis==this.yAxis&&(s?e.push({x:h,y:x.y}):e.push({x:x.x,y:$}))}var S={x:p,y:$},m={x:h,y:c};s?e.push(m,S):e.push(S,m)},t.prototype.drawSegment=function(e,t,i){var r=!1;this.yAxis==this.baseAxis&&(r=!0),e.drawSegment(t,i,this.tensionX,this.tensionY,this.noRisers,r)},t.prototype.createSegment=function(){return new Xi},Object.defineProperty(t.prototype,"noRisers",{get:function(){return this.getPropertyValue("noRisers")},set:function(e){this.setPropertyValue("noRisers",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(e){this.setPropertyValue("startLocation",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(e){this.setPropertyValue("endLocation",e,!0)},enumerable:!0,configurable:!0}),t}(og);ca.registeredClasses.StepLineSeries=Fm,ca.registeredClasses.StepLineSeriesDataItem=Yi;var Zi=function(r){function t(){var t=r.call(this)||this;return t.className="RadarColumn",t}return da(t,r),t.prototype.createAssets=function(){this.radarColumn=this.createChild(Vc),this.radarColumn.shouldClone=!1,this.radarColumn.strokeOpacity=void 0,this.column=this.radarColumn},t.prototype.copyFrom=function(t){r.prototype.copyFrom.call(this,t),this.radarColumn&&this.radarColumn.copyFrom(t.radarColumn)},t.prototype.getTooltipX=function(){var r=this.getPropertyValue("tooltipX");return aa(r)?r:this.radarColumn.getTooltipX()},t.prototype.getTooltipY=function(){var r=this.getPropertyValue("tooltipX");return aa(r)?r:this.radarColumn.getTooltipY()},t}($c);ca.registeredClasses.RadarColumn=Zi;var Gm=function(e){function t(){var t=e.call(this)||this;return t.className="ColumnSeriesDataItem",t.applyTheme(),t}return da(t,e),t}(Ic);var Hm=function(e){function t(){var t=e.call(this)||this;return t.className="RadarColumnSeries",t.applyTheme(),t}return da(t,e),t.prototype.createColumnTemplate=function(){return new Zi},t.prototype.validate=function(){this.chart.invalid&&this.chart.validate(),e.prototype.validate.call(this)},t.prototype.disableUnusedColumns=function(e){e&&(e.column&&(e.column.__disabled=!0),ga(this.axisRanges.iterator(),function(t){var i=e.rangesColumns.getKey(t.uid);i&&(i.__disabled=!0)}))},t.prototype.validateDataElementReal=function(e){var t,i,r,a,s=this,o=this.chart.startAngle,p=this.chart.endAngle,$=this.yField,n=this.yOpenField,l=this.xField,u=this.xOpenField,m=this.getStartLocation(e),c=this.getEndLocation(e),h=(p-o)/(this.dataItems.length*(this.end-this.start)),C=e.column;C||(C=this.columns.create(),e.column=C,gb(this,C,db),gb(this.columns.template,C,db),e.addSprite(C),C.paper=this.paper,this.setColumnStates(C));var d=C.width,x=100;d instanceof Da&&(x=d.percent);var b=ha((c-m)*(1-x/100)/2,5);if(m+=b,c-=b,this.xAxis instanceof jb&&this.yAxis instanceof jb?(r=Ka({x:this.yAxis.getX(e,$,0,"valueY"),y:this.yAxis.getY(e,$,0,"valueY")}),a=Ka({x:this.yAxis.getX(e,n,1,"valueY"),y:this.yAxis.getY(e,n,1,"valueY")}),t=this.xAxis.getAngle(e,u,0,"valueX"),i=this.xAxis.getAngle(e,l,1,"valueX"),o+=m*h,p-=(1-c)*h):this.baseAxis==this.xAxis?(r=Ka({x:this.yAxis.getX(e,$,e.locations[$],"valueY"),y:this.yAxis.getY(e,$,e.locations[$],"valueY")}),a=Ka({x:this.yAxis.getX(e,n,e.locations[n],"valueY"),y:this.yAxis.getY(e,n,e.locations[n],"valueY")}),t=this.xAxis.getAngle(e,u,m,"valueX"),i=this.xAxis.getAngle(e,l,c,"valueX"),o+=m*h,p-=(1-c)*h):(r=Ka({x:this.yAxis.getX(e,$,m,"valueY"),y:this.yAxis.getY(e,$,m,"valueY")}),a=Ka({x:this.yAxis.getX(e,n,c,"valueY"),y:this.yAxis.getY(e,n,c,"valueY")}),t=this.xAxis.getAngle(e,l,e.locations[l],"valueX"),i=this.xAxis.getAngle(e,u,e.locations[u],"valueX")),i<t){var g=i;i=t,t=g}t=na(t,o,p),i=na(i,o,p);var y=C.radarColumn;y.startAngle=t;var w=i-t;w>0?(y.arc=w,y.radius=r,y.innerRadius=a,C.__disabled=!1,C.parent=this.columnsContainer,ga(this.axisRanges.iterator(),function(i){var o=e.rangesColumns.getKey(i.uid);o||(o=s.columns.create(),Hj(s.columns.template,o,db),gb(i.contents,o,db),o.dataItem&&ta(o.dataItem.sprites,o),e.addSprite(o),o.paper=s.paper,s.setColumnStates(o),e.rangesColumns.setKey(i.uid,o));var p=o.radarColumn;p.startAngle=t,p.arc=w,p.radius=r,p.innerRadius=a,p.invalid&&(p.paper=s.paper,p.validate()),o.__disabled=!1,o.parent=i.contents})):this.disableUnusedColumns(e)},t.prototype.getPoint=function(e,t,i,r,a,s,o){s||(s="valueX"),o||(o="valueY");var p=this.yAxis.getX(e,i,a,o),$=this.yAxis.getY(e,i,a,o),n=Ka({x:p,y:$});0==n&&(n=1e-5);var l=this.xAxis.getAngle(e,t,r,s);return{x:n*ka(l),y:n*ja(l)}},t.prototype.getMaskPath=function(){var e=this.yAxis.renderer;return pd(e.startAngle,e.endAngle-e.startAngle,e.pixelRadius,e.pixelInnerRadius)},t.prototype.positionBulletReal=function(e,t,i){var r=this.xAxis,a=this.yAxis;(t<r.start||t>r.end||i<a.start||i>a.end)&&(e.visible=!1),e.moveTo(this.xAxis.renderer.positionToPoint(t,i))},t.prototype.setXAxis=function(t){e.prototype.setXAxis.call(this,t),this.updateRendererRefs()},t.prototype.setYAxis=function(t){e.prototype.setYAxis.call(this,t),this.updateRendererRefs()},t.prototype.updateRendererRefs=function(){var e=this.xAxis.renderer,t=this.yAxis.renderer;e.axisRendererY=t},t}(_c);ca.registeredClasses.RadarColumnSeries=Hm,ca.registeredClasses.RadarColumnSeriesDataItem=Gm;var Ag=function(t){function e(){var e=t.call(this)||this;return e.slice=e.createChild(xa),e.slice.shouldClone=!1,e.slice.setElement(e.paper.add("path")),e.slice.isMeasured=!1,e.orientation="vertical",e.bottomWidth=ia(100),e.topWidth=ia(100),e.isMeasured=!1,e.width=10,e.height=10,e.expandDistance=0,e.className="FunnelSlice",e.applyTheme(),e}return da(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.pixelPaddingTop,i=this.pixelPaddingBottom,r=this.pixelPaddingRight,o=this.pixelPaddingLeft,$=this.pixelWidth-r-o,p=this.pixelHeight-e-i,a=this.expandDistance,n="";if("vertical"==this.orientation){var l={x:($-(m=Xa(this.topWidth,$)))/2+o,y:e},s={x:($+m)/2+o,y:e},h={x:($+(F=Xa(this.bottomWidth,$)))/2+o,y:e+p},u={x:($-F)/2+o,y:e+p},c={x:s.x+(h.x-s.x)/2+a*p,y:s.y+.5*p},y={x:l.x+(u.x-l.x)/2-a*p,y:l.y+.5*p},x=fa(h),d="";0!=a&&(x=Uc(h,c),d=Uc(l,y)),n=ma(l)+fa(s)+x+fa(u)+d,this.tickPoint={x:s.x+(h.x-s.x)/2,y:s.y+(h.y-s.y)/2}}else{var m,F,R={x:o,y:(p-(m=Xa(this.topWidth,p)))/2+e},B={x:o,y:(p+m)/2+e},Z={x:o+$,y:(p-(F=Xa(this.bottomWidth,p)))/2+e},g={x:o+$,y:(p+F)/2+e};c={y:R.y+(Z.y-R.y)/2-a*$,x:R.x+.5*$},y={y:B.y+(g.y-B.y)/2+a*$,x:B.x+.5*$},x=fa(Z),d="";0!=a&&(x=Uc(Z,c),d=Uc(B,y)),n=ma(B)+fa(R)+x+fa(g)+d,this.tickPoint={y:B.y+(g.y-B.y)/2,x:B.x+(g.x-B.x)/2}}this.slice.path=n,this.invalidateLayout()},e.prototype.getPoint=function(t,e){var i=this.pixelPaddingTop,r=this.pixelPaddingBottom,o=this.pixelPaddingRight,$=this.pixelPaddingLeft,p=this.pixelWidth-o-$,a=this.pixelHeight-i-r;if("vertical"==this.orientation){var n={x:(p-(u=Xa(this.topWidth,p)))/2+$,y:i},l={x:(p+u)/2+$,y:i},s={x:(p+(c=Xa(this.bottomWidth,p)))/2+$,y:i+a},h=n.x+({x:(p-c)/2+$,y:i+a}.x-n.x)*e;return{x:h+(l.x+(s.x-l.x)*e-h)*t,y:l.y+(s.y-l.y)*e}}var u,c,y={x:$,y:(a-(u=Xa(this.topWidth,a)))/2+i},x={x:$,y:(a+u)/2+i},d={x:$+p,y:(a-(c=Xa(this.bottomWidth,a)))/2+i},m=y.y+(d.y-y.y)*t;return{y:m+(x.y+({x:$+p,y:(a+c)/2+i}.y-x.y)*t-m)*e,x:y.x+(d.x-y.x)*t}},Object.defineProperty(e.prototype,"bottomWidth",{get:function(){return this.getPropertyValue("bottomWidth")},set:function(t){this.setPercentProperty("bottomWidth",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topWidth",{get:function(){return this.getPropertyValue("topWidth")},set:function(t){this.setPercentProperty("topWidth",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expandDistance",{get:function(){return this.getPropertyValue("expandDistance")},set:function(t){this.setPropertyValue("expandDistance",t,!0)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.slice&&this.slice.copyFrom(e.slice)},e}(oa);ca.registeredClasses.FunnelSlice=Ag;var $i=function(e){function t(){var t=e.call(this)||this;return t._label=new nb,t._slice=new nb,t.className="FunnelTick",t.element=t.paper.add("path"),t._disposers.push(t._label),t._disposers.push(t._slice),t.setPropertyValue("locationX",0),t.setPropertyValue("locationY",0),t.applyTheme(),t}return da(t,e),t.prototype.draw=function(){e.prototype.draw.call(this);var t=this.slice,i=t.getPoint(this.locationX,this.locationY);if(i){var r=this.label,o=t.dataItem.component,n=void 0,l=void 0,s=void 0;if("vertical"==o.orientation){var p=r.pixelX,a=r.pixelY;o.labelsOpposite||(p+=r.maxRight),n=Hb(i,t,this.parent),s=Hb({x:p,y:a},r.parent,this.parent),l={x:r.parent.pixelX-this.length,y:s.y},o.labelsOpposite||(l.x=r.parent.measuredWidth+this.length)}else{p=r.pixelX,a=r.pixelY;o.labelsOpposite||(a+=r.maxBottom),n=Hb(i,t,this.parent),l={x:(s=Hb({x:p,y:a},r.parent,this.parent)).x,y:r.parent.pixelY-this.length},o.labelsOpposite||(l.y=r.parent.measuredHeight+this.length)}this.path=ma(n)+fa(l)+fa(s)}},Object.defineProperty(t.prototype,"slice",{get:function(){return this._slice.get()},set:function(e){this._slice.set(e,new Ya([e.events.on("transformed",this.invalidate,this,!1),e.events.on("validated",this.invalidate,this,!1)]))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this._label.get()},set:function(e){this._label.set(e,e.events.on("transformed",this.invalidate,this,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locationX",{get:function(){return this.getPropertyValue("locationX")},set:function(e){this.setPropertyValue("locationX",e,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locationY",{get:function(){return this.getPropertyValue("locationY")},set:function(e){this.setPropertyValue("locationY",e,!1,!0)},enumerable:!0,configurable:!0}),t}(Wd);ca.registeredClasses.FunnelTick=$i;var Bg=function(e){function t(){var t=e.call(this)||this;return t.className="FunnelSeriesDataItem",t.events.on("visibilitychanged",function(){t.component&&t.component.invalidateDataItems()},t,!1),t.applyTheme(),t}return da(t,e),Object.defineProperty(t.prototype,"sliceLink",{get:function(){var e=this;if(!this._sliceLink){var t=this.component.sliceLinks.create();this._sliceLink=t,this._disposers.push(t),t.parent=this.component.slicesContainer,this._disposers.push(new La(function(){e.component&&e.component.sliceLinks.removeValue(t)})),this.addSprite(t),t.visible=this.visible}return this._sliceLink},enumerable:!0,configurable:!0}),t}($e);var _i=function(e){function t(){var t=e.call(this)||this;return t._nextY=0,t.className="FunnelSeries",t.orientation="vertical",t.width=ia(100),t.height=ia(100),t.slicesContainer.width=ia(100),t.slicesContainer.height=ia(100),t._disposers.push(t.slicesContainer.events.on("maxsizechanged",t.invalidateDataItems,t,!1)),t.labelsOpposite=!0,t.labelsContainer.layout="absolute",t.bottomRatio=0,t.applyTheme(),t}return da(t,e),t.prototype.createSlice=function(){return new Ag},t.prototype.createTick=function(){return new $i},t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("Funnel Series"))},t.prototype.createDataItem=function(){return new Bg},t.prototype.initSlice=function(e){e.isMeasured=!1,e.defaultState.properties.scale=1,e.observe("scale",this.handleSliceScale,this),e.observe(["dx","dy","x","y"],this.handleSliceMove,this),e.tooltipText="{category}: {value.percent.formatNumber('#.#')}% ({value.value})",e.states.create("hover").properties.expandDistance=.2},t.prototype.initLabel=function(t){e.prototype.initLabel.call(this,t),t.verticalCenter="middle",t.horizontalCenter="middle",t.isMeasured=!0,t.padding(5,5,5,5)},t.prototype.validate=function(){e.prototype.validate.call(this),this._nextY=0},t.prototype.validateDataElements=function(){var t=this,i=this.slicesContainer,a=this.labelsContainer,s=this.labels.template;this.alignLabels?(s.interactionsEnabled=!0,i.isMeasured=!0,a.isMeasured=!0):(s.interactionsEnabled=!1,i.isMeasured=!1,a.isMeasured=!1);var r=0,n=0;this.dataItems.each(function(e){ba(e.value)&&(n++,e.value>0?r+=Math.abs(e.getWorkingValue("value")/e.value):t.ignoreZeroValues?n--:!e.visible||e.__disabled||e.isHiding?n--:r+=1)}),this._total=1/n*r,this._count=n,e.prototype.validateDataElements.call(this),this.arrangeLabels()},t.prototype.getNextValue=function(e){var t=e.index,i=e.getWorkingValue("value");if(t<this.dataItems.length-1){var a=this.dataItems.getIndex(t+1);if(i=a.getWorkingValue("value"),!a.visible||a.isHiding||a.__disabled||0==a.value&&this.ignoreZeroValues)return this.getNextValue(a)}return i},t.prototype.formDataElement=function(){},t.prototype.validateDataElement=function(t){var i=this,a=t.slice;a.orientation=this.orientation;var s=t.sliceLink;s.orientation=this.orientation;var r=t.tick,n=t.label;r.slice=a,r.label=n,ba(t.value)?(this.decorateSlice(t),la(t.sprites,function(e){0==t.value&&i.ignoreZeroValues?e.__disabled=!0:e.__disabled=!1})):la(t.sprites,function(e){e.__disabled=!0}),t.index==this.dataItems.length-1&&(s.disabled=!0),e.prototype.validateDataElement.call(this,t),s.fill=a.fill},t.prototype.decorateSlice=function(e){var t=e.slice,i=e.sliceLink,a=e.label,s=e.tick,r=this.slicesContainer.innerWidth,n=this.slicesContainer.innerHeight,l=this.getNextValue(e),o=Math.abs(e.getWorkingValue("value")),p=this.bottomRatio,h=1;if(0!=e.value?h=o/Math.abs(e.value):(e.__disabled||e.isHiding||!e.visible)&&(h=1e-6),this.ignoreZeroValues&&0==e.value)e.__disabled=!0;else if(e.__disabled=!1,this._nextY==1/0&&(this._nextY=0),"vertical"==this.orientation){var c=i.pixelHeight*h;n+=c,t.topWidth=o/this.dataItem.values.value.high*r,t.bottomWidth=(o-(o-l)*p)/this.dataItem.values.value.high*r,i.topWidth=t.bottomWidth,i.bottomWidth=(o-(o-l))/this.dataItem.values.value.high*r,t.y=this._nextY,t.height=Math.min(1e5,wa(0,n/this._count*h/this._total-c)),t.x=r/2,this.alignLabels?a.x=void 0:a.x=t.x,a.y=t.pixelY+t.pixelHeight*s.locationY,this._nextY+=t.pixelHeight+c,i.y=this._nextY-c,i.x=t.x}else{var u=i.pixelWidth*h;r+=u,t.topWidth=o/this.dataItem.values.value.high*n,t.bottomWidth=(o-(o-l)*p)/this.dataItem.values.value.high*n,i.topWidth=t.bottomWidth,i.bottomWidth=(o-(o-l))/this.dataItem.values.value.high*n,t.x=this._nextY,t.width=Math.min(1e5,r/this._count*h*1/this._total-u),t.y=n/2,this.alignLabels?a.y=this.labelsContainer.measuredHeight:a.y=t.y,a.x=t.pixelX+t.pixelWidth*s.locationX,this._nextY+=t.pixelWidth+u,i.x=this._nextY-u,i.y=t.y}},t.prototype.getLastLabel=function(e){if(e>0){var t=this.labels.getIndex(e);return t.__disabled||!t.visible?this.getLastLabel(e-1):t}},t.prototype.arrangeLabels=function(){if(this.alignLabels){var e=this.labels.length;if(e>1){var t=this.getLastLabel(e-1);if(t){var i=t.pixelY,a=t.pixelX;if(e>1){for(var s=e-2;s>=0;s--){(r=this.labels.getIndex(s)).visible&&!r.__disabled&&(r.invalid&&r.validate(),"vertical"==this.orientation?r.pixelY+r.measuredHeight>i&&(r.y=Math.min(1e6,i-r.measuredHeight)):r.pixelX+r.measuredWidth>a&&(r.x=Math.min(1e6,a-r.measuredWidth)),i=r.pixelY,a=r.pixelX)}i=0,a=0;for(s=0;s<e;s++){var r;(r=this.labels.getIndex(s)).visible&&!r.__disabled&&(r.invalid&&r.validate(),"vertical"==this.orientation?r.pixelY<i&&(r.y=Math.min(1e6,i)):r.pixelX<a&&(r.x=Math.min(1e6,a)),i+=r.measuredHeight,a+=r.measuredWidth)}}}}}},t.prototype.positionBullet=function(t){e.prototype.positionBullet.call(this,t);var i=t.dataItem.slice,a=t.locationX;aa(a)||(a=.5);var s=t.locationY;aa(s)||(s=1),t.x=i.pixelX+i.measuredWidth*a,t.y=i.pixelY+i.measuredHeight*s},Object.defineProperty(t.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(e){this.setPropertyValue("orientation",e)&&(this.labelsOpposite=this.labelsOpposite,this.invalidate(),"vertical"==e?(this.ticks.template.locationX=1,this.ticks.template.locationY=.5,this.labels.template.rotation=0,this.layout="horizontal"):(this.ticks.template.locationX=.5,this.ticks.template.locationY=1,this.labels.template.rotation=-90,this.layout="vertical"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRatio",{get:function(){return this.getPropertyValue("bottomRatio")},set:function(e){this.setPropertyValue("bottomRatio",e)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sliceLinks",{get:function(){if(!this._sliceLinks){var e=new Ag;e.applyOnClones=!0,e.fillOpacity=.5,e.expandDistance=-.3,e.hiddenState.properties.opacity=0,this._disposers.push(e),this._sliceLinks=new _a(e),this._disposers.push(new Sa(this._sliceLinks))}return this._sliceLinks},enumerable:!0,configurable:!0}),t.prototype.show=function(t){var i=this,a=this.startIndex,s=this.endIndex,r=this.defaultState.transitionDuration;aa(t)&&(r=t),za.animationsEnabled||(r=0);var n=0;return ga(Oc(this.dataItems.iterator()),function(e){var t=e[0],l=e[1];i.sequencedInterpolation&&(n=i.sequencedInterpolationDelay*t+r*(t-a)/(s-a)),l.show(r,n,["value"])}),e.prototype.show.call(this,t)},t.prototype.hide=function(t){var i=this,a=["value"],s=this.startIndex,r=this.endIndex,n=0,l=this.hiddenState.transitionDuration;aa(t)&&(l=t),za.animationsEnabled||(l=0),ga(Oc(this.dataItems.iterator()),function(e){var t=e[0],o=e[1];i.sequencedInterpolation&&(n=i.sequencedInterpolationDelay*t+l*(t-s)/(r-s)),o.hide(l,n,0,a)});var o=e.prototype.hide.call(this,t);return o&&!o.isFinished()&&o.delay(n),o},t.prototype.setAlignLabels=function(t){e.prototype.setAlignLabels.call(this,t),this.ticks.template.disabled=!t;var i=this.labelsContainer;i&&(t?(i.height=void 0,i.width=void 0,i.margin(10,10,10,10)):(i.width=ia(100),i.height=ia(100))),this.labelsOpposite=this.labelsOpposite},Object.defineProperty(t.prototype,"labelsOpposite",{get:function(){return this.getPropertyValue("labelsOpposite")},set:function(e){this.setPropertyValue("labelsOpposite",e);var t=this.labels.template,i="none",a="none";this.alignLabels?e?(this.labelsContainer.toFront(),"vertical"==this.orientation?(this.ticks.template.locationX=1,t.horizontalCenter="left",i="right"):(this.ticks.template.locationY=1,t.horizontalCenter="right",a="bottom")):(this.labelsContainer.toBack(),"vertical"==this.orientation?(this.ticks.template.locationX=0,i="left"):(a="top",this.ticks.template.locationY=0)):"vertical"==this.orientation?i="center":a="middle",t.align=i,t.valign=a,this.validateLayout(),this.ticks.each(function(e){e.invalidate()}),this.invalidateDataItems()},enumerable:!0,configurable:!0}),t}(Yd);ca.registeredClasses.FunnelSeries=_i,ca.registeredClasses.FunnelSeriesDataItem=Bg;var Cg=function(t){function e(){var e=t.call(this)||this;return e.className="PyramidSeriesDataItem",e.applyTheme(),e}return da(e,t),e}(Bg);var aj=function(t){function e(){var e=t.call(this)||this;return e.className="PyramidSeries",e.topWidth=ia(0),e.bottomWidth=ia(100),e.pyramidHeight=ia(100),e.valueIs="area",e.sliceLinks.template.width=0,e.sliceLinks.template.height=0,e.applyTheme(),e}return da(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("Pyramid Series"))},e.prototype.createDataItem=function(){return new Cg},e.prototype.validate=function(){t.prototype.validate.call(this),this._nextWidth=void 0},e.prototype.getNextValue=function(t){var e=t.index,i=t.getWorkingValue("value");e<this.dataItems.length-1&&(i=this.dataItems.getIndex(e+1).getWorkingValue("value"));return 0==i&&(i=1e-6),i},e.prototype.validateDataElements=function(){var e=this,i=this.slicesContainer.innerWidth,r=this.slicesContainer.innerHeight;if(this.dataItems.each(function(t){if(t.value>0){var a=t.getWorkingValue("value")/t.value,s=t.sliceLink;"vertical"==e.orientation?r-=s.pixelHeight*a:i-=s.pixelWidth*a}}),this._pyramidHeight=Xa(this.pyramidHeight,r),this._pyramidWidth=Xa(this.pyramidHeight,i),"vertical"==this.orientation){var a=(r-this._pyramidHeight)/2;this.slicesContainer.y=a,this.labelsContainer.y=a,this.ticksContainer.y=a}else{var s=(i-this._pyramidWidth)/2;this.slicesContainer.x=s,this.labelsContainer.x=s,this.ticksContainer.x=s}t.prototype.validateDataElements.call(this)},e.prototype.decorateSlice=function(t){var e=this.dataItem.values.value.absoluteSum;if(0!=e){var i=t.slice,r=t.sliceLink,a=t.label,s=t.tick;this.getNextValue(t);var o=Math.abs(t.getWorkingValue("value")),n=this._pyramidWidth,h=this._pyramidHeight,l=this.slicesContainer.innerWidth,p=this.slicesContainer.innerHeight,d=r.pixelWidth,$=r.pixelHeight;if(0!=t.value&&null!=t.value||!this.ignoreZeroValues?t.__disabled=!1:t.__disabled=!0,"vertical"==this.orientation){var u=Xa(this.topWidth,l);aa(this._nextWidth)||(this._nextWidth=u);var m=Xa(this.bottomWidth,l),c=this._nextWidth,y=Math.atan2(h,u-m);0==(x=Math.tan(Math.PI/2-y))&&(x=1e-8);var f=void 0,v=void 0;if("area"==this.valueIs){var g=(u+m)/2*h*o/e,V=Math.abs(c*c-2*g*x);v=(f=(c-Math.sqrt(V))/x)>0?(2*g-f*c)/f:c}else v=c-(f=h*o/e)*x;i.height=f,i.width=l,i.bottomWidth=v,i.topWidth=c,r.topWidth=i.bottomWidth,r.bottomWidth=i.bottomWidth,i.y=this._nextY,this.alignLabels?a.x=0:a.x=l/2,a.y=i.pixelY+i.pixelHeight*s.locationY+i.dy,this._nextY+=i.pixelHeight+$*o/Math.max(Math.abs(t.value),1e-8),r.y=this._nextY-$,r.x=l/2}else{u=Xa(this.topWidth,p);aa(this._nextWidth)||(this._nextWidth=u);var x;m=Xa(this.bottomWidth,p),c=this._nextWidth,y=Math.atan2(n,u-m);0==(x=Math.tan(Math.PI/2-y))&&(x=1e-8);var W=void 0;v=void 0;if("area"==this.valueIs)v=(2*(g=(u+m)/2*n*o/e)-(W=(c-Math.sqrt(c*c-2*g*x))/x)*c)/W;else v=c-(W=n*o/e)*x;i.width=W,i.height=p,i.bottomWidth=v,i.topWidth=c,r.topWidth=i.bottomWidth,r.bottomWidth=i.bottomWidth,i.x=this._nextY,this.alignLabels?a.y=this.labelsContainer.measuredHeight:a.y=p/2,a.x=i.pixelX+i.pixelWidth*s.locationX+i.dx,this._nextY+=i.pixelWidth+d*o/Math.max(Math.abs(t.value),1e-8),r.x=this._nextY-d,r.y=p/2}this._nextWidth=i.bottomWidth}},Object.defineProperty(e.prototype,"topWidth",{get:function(){return this.getPropertyValue("topWidth")},set:function(t){this.setPercentProperty("topWidth",t,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pyramidHeight",{get:function(){return this.getPropertyValue("pyramidHeight")},set:function(t){this.setPercentProperty("pyramidHeight",t,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomWidth",{get:function(){return this.getPropertyValue("bottomWidth")},set:function(t){this.setPercentProperty("bottomWidth",t,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueIs",{get:function(){return this.getPropertyValue("valueIs")},set:function(t){this.setPropertyValue("valueIs",t)&&this.invalidate()},enumerable:!0,configurable:!0}),e}(_i);ca.registeredClasses.PyramidSeries=aj,ca.registeredClasses.PyramidSeriesDataItem=Cg;var bj=function(t){function e(){var e=t.call(this)||this;return e.className="PictorialStackedSeriesDataItem",e.applyTheme(),e}return da(e,t),e}(Cg);var Im=function(t){function e(){var e=t.call(this)||this;return e.className="PictorialStackedSeries",e.topWidth=ia(100),e.bottomWidth=ia(100),e.valueIs="height",e.applyTheme(),e.startLocation=0,e.endLocation=1,e.align="center",e.valign="middle",e._maskSprite=e.slicesContainer.createChild(xa),e._maskSprite.visible=!1,e._maskSprite.zIndex=100,e._maskSprite.shouldClone=!1,e}return da(e,t),e.prototype.validateDataElements=function(){var e=this.slicesContainer.maxWidth,i=this.slicesContainer.maxHeight,r=this._maskSprite,a=r.measuredWidth/r.scale,s=r.measuredHeight/r.scale,o=Ea(i/s,e/a);o==1/0&&(o=1),o=wa(.001,o);var n,l,c=this.startLocation,p=this.endLocation,$=Ea(e,a*o),h=Ea(i,s*o);r.scale=o,"vertical"==this.orientation?(this.topWidth=$+4,this.bottomWidth=$+4,this.pyramidHeight=h*(p-c),r.x=e/2,r.y=h/2):(this.topWidth=h+4,this.bottomWidth=h+4,this.pyramidHeight=$*(p-c),r.valign="middle",r.x=$/2,r.y=i/2),r.verticalCenter="middle",r.horizontalCenter="middle",t.prototype.validateDataElements.call(this),"vertical"==this.orientation?("bottom"==this.valign&&(n=i-h),"middle"==this.valign&&(n=(i-h)/2),"top"==this.valign&&(n=0),"left"==this.align&&(l=-(e-$)/2),"center"==this.align&&(l=0),"right"==this.align&&(l=(e-$)/2),this.slices.template.dy=c*h,this.alignLabels&&(this.slicesContainer.dx=l)):("bottom"==this.valign&&(n=(i-h)/2),"middle"==this.valign&&(n=0),"top"==this.valign&&(n=-(i-h)/2),"left"==this.align&&(l=0),"center"==this.align&&(l=(e-$)/2),"right"==this.align&&(l=e-$),this.slices.template.dx=c*$,this.alignLabels&&(this.slicesContainer.dy=n)),this.slicesContainer.x=l,this.labelsContainer.x=l,this.ticksContainer.x=l,this.slicesContainer.y=n,this.labelsContainer.y=n,this.ticksContainer.y=n,$>0&&h>0&&(this.slicesContainer.mask=r)},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),ba(this.readerTitle)||(this.readerTitle=this.language.translate("Pyramid Series"))},e.prototype.createDataItem=function(){return new bj},Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},enumerable:!0,configurable:!0}),e.prototype.initSlice=function(e){t.prototype.initSlice.call(this,e);var i=e.states.getKey("hover");i&&(i.properties.expandDistance=0)},Object.defineProperty(e.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(t){this.setPropertyValue("startLocation",t)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(t){this.setPropertyValue("endLocation",t)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),e}(aj);ca.registeredClasses.PictorialStackedSeries=Im,ca.registeredClasses.PictorialStackedSeriesDataItem=bj;var cj=function(o){function e(){var e=o.call(this)||this;return e.className="ConeColumn",e}return da(e,o),e.prototype.createAssets=function(){this.coneColumn=this.createChild(_l),this.coneColumn.shouldClone=!1,this.column=this.coneColumn},e.prototype.copyFrom=function(e){o.prototype.copyFrom.call(this,e),this.coneColumn&&this.coneColumn.copyFrom(e.coneColumn)},e}($c);ca.registeredClasses.ConeColumn=cj;var Jm=function(e){function t(){var t=e.call(this)||this;return t.className="ConeSeriesDataItem",t.applyTheme(),t}return da(t,e),t}(Ic);var Km=function(e){function t(){var t=e.call(this)||this;return t.className="ConeSeries",t.applyTheme(),t}return da(t,e),t.prototype.createColumnTemplate=function(){return new cj},t.prototype.getMaskPath=function(){var e=0,t=0,r=this.columns.getIndex(0);if(r)return this.baseAxis==this.xAxis?t=r.coneColumn.innerWidth/2+1:e=r.coneColumn.innerHeight/2+1,Fc({x:-e,y:0,width:this.xAxis.axisLength+e,height:this.yAxis.axisLength+t})},t.prototype.validateDataElementReal=function(t){if(e.prototype.validateDataElementReal.call(this,t),t.column){var r=t.column.coneColumn;r.fill=t.column.fill,this.baseAxis==this.yAxis?r.orientation="horizontal":r.orientation="vertical"}},t}(_c);ca.registeredClasses.ConeSeries=Km,ca.registeredClasses.ConeSeriesDataItem=Jm;var dj=function(e){function t(){var t=e.call(this)||this;return t.className="CurvedColumn",t}return da(t,e),t.prototype.createAssets=function(){this.curvedColumn=this.createChild(xa),this.curvedColumn.shouldClone=!1,this.setPropertyValue("tension",.7),this.width=ia(120),this.height=ia(120),this.column=this.curvedColumn},t.prototype.draw=function(){e.prototype.draw.call(this);var t,r=this.realWidth,o=this.realHeight,i=this.realX-this.pixelX,u=this.realY-this.pixelY;Fb(this.width);var n=1,p=1;"vertical"==this.orientation?(n=this.tension,t=[{x:0,y:o+u},{x:r/2,y:u},{x:r,y:o+u}]):(p=this.tension,t=[{x:i,y:o=Math.abs(o)},{x:i+r,y:o/2},{x:i,y:0}]);var h=ma(t[0])+new Gc(n,p).smooth(t);this.column.path=h},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.curvedColumn&&this.curvedColumn.copyFrom(t.curvedColumn)},Object.defineProperty(t.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(e){this.setPropertyValue("tension",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(e){this.setPropertyValue("orientation",e,!0)},enumerable:!0,configurable:!0}),t}($c);ca.registeredClasses.CurvedColumn=dj;var Lm=function(e){function r(){var r=e.call(this)||this;return r.className="CurvedColumnSeriesDataItem",r.applyTheme(),r}return da(r,e),r}(Ic);var Mm=function(e){function r(){var r=e.call(this)||this;return r.className="CurvedColumnSeries",r.applyTheme(),r}return da(r,e),r.prototype.createColumnTemplate=function(){return new dj},r.prototype.validateDataElementReal=function(r){e.prototype.validateDataElementReal.call(this,r);var t=r.column;(t=r.column)&&(r.column.curvedColumn.fill=r.column.fill,this.baseAxis==this.yAxis?t.orientation="horizontal":t.orientation="vertical")},r}(_c);ca.registeredClasses.CurvedColumnSeries=Mm,ca.registeredClasses.CurvedColumnSeriesDataItem=Lm;var Nm=function(e){function r(){var r=e.call(this)||this;r.className="CircleBullet";var l=r.createChild(Tc);return l.shouldClone=!1,l.radius=5,l.isMeasured=!1,r.circle=l,r.applyTheme(),r}return da(r,e),r.prototype.copyFrom=function(r){e.prototype.copyFrom.call(this,r),this.circle.copyFrom(r.circle)},r}(nc);ca.registeredClasses.CircleBullet=Nm;var Om=function(r){function e(){var e=r.call(this)||this;return e.className="ErrorBullet",e.errorLine=e.createChild(xa),e.errorLine.shouldClone=!1,e.width=20,e.height=20,e.strokeOpacity=1,e.isDynamic=!0,e}return da(e,r),e.prototype.validatePosition=function(){r.prototype.validatePosition.call(this);var e=this.pixelWidth/2,t=this.pixelHeight/2;this.errorLine.path=ma({x:-e,y:-t})+fa({x:e,y:-t})+ma({x:0,y:-t})+fa({x:0,y:t})+ma({x:-e,y:t})+fa({x:e,y:t})},e.prototype.copyFrom=function(e){r.prototype.copyFrom.call(this,e),this.errorLine.copyFrom(e.errorLine)},e}(nc);ca.registeredClasses.ErrorBullet=Om;var Pm=function(e){function r(){var r=e.call(this)||this;return r.className="NavigationBarDataItem",r.applyTheme(),r}return da(r,e),Object.defineProperty(r.prototype,"name",{get:function(){return this.properties.name},set:function(e){this.setProperty("name",e)},enumerable:!0,configurable:!0}),r}(Rc);var Qm=function(e){function r(){var r=e.call(this)||this;r.className="NavigationBar";var t=new Ia,a=new cg;a.valign="middle",a.paddingTop=8,a.paddingBottom=8,r.paddingBottom=2,r.links=new _a(a),r._disposers.push(new Sa(r.links)),r._disposers.push(a),r._linksIterator=new sf(r.links,function(){return r.links.create()}),r._linksIterator.createNewItems=!0;var i=new dg;i.direction="right",i.width=8,i.height=12,i.fill=t.getFor("alternativeBackground"),i.fillOpacity=.5,i.valign="middle",i.marginLeft=10,i.marginRight=10,r.separators=new _a(i),r._disposers.push(new Sa(r.separators)),r._disposers.push(i);var l=new cg;return r.activeLink=l,l.copyFrom(a),l.valign="middle",l.fontWeight="bold",r.width=ia(100),r.layout="grid",r.dataFields.name="name",r.applyTheme(),r}return da(r,e),r.prototype.validateDataElements=function(){this.removeChildren(),this._linksIterator.reset(),e.prototype.validateDataElements.call(this)},r.prototype.validateDataElement=function(r){var t;if(e.prototype.validateDataElement.call(this,r),r.index<this.dataItems.length-1){(t=this._linksIterator.getLast()).parent=this;var a=this.separators.create();a.parent=this,a.valign="middle"}else(t=this.activeLink).events.copyFrom(this.links.template.events),t.hide(0),t.show(),t.parent=this;t.dataItem=r,t.text=r.name,t.validate()},r}(Sc);ca.registeredClasses.NavigationBar=Qm,ca.registeredClasses.NavigationBarDataItem=Pm;var ej=function(t){function i(){var i=t.call(this)||this;i.point={x:0,y:0},i._stick="none",i.className="Cursor",i.width=ia(100),i.height=ia(100),i.shouldClone=!1,i.hide(0),i.trackable=!0,i.clickable=!0,i.isMeasured=!1;var e=va();return i._disposers.push(e.body.events.on("down",i.handleCursorDown,i)),i._disposers.push(e.body.events.on("up",i.handleCursorUp,i)),i._disposers.push(e.body.events.on("track",i.handleCursorMove,i)),i.applyTheme(),i}return da(i,t),i.prototype.handleCursorMove=function(t){if(!(!this.interactionsEnabled||this.interactions.isTouchProtected&&t.touch)){if(("zoom"==this._generalBehavior||"pan"==this._generalBehavior)&&this.downPoint||va().isLocalElement(t.pointer,this.paper.svg,this.uid)){var i=id(t.pointer.point,this);return"hard"==this._stick&&this._stickPoint&&(i=this._stickPoint),"soft"==this._stick&&this._stickPoint&&(this.fitsToBounds(i)||(i=this._stickPoint)),this._adapterO&&this._adapterO.apply("cursorPoint",i),this.triggerMove(i),i}this.isHidden&&this.isHiding||this.hide()}},i.prototype.hideReal=function(i){if("hard"!=this._stick&&"soft"!=this._stick||!this._stickPoint)return t.prototype.hideReal.call(this,i)},i.prototype.triggerMove=function(t,i,e){t.x=ha(t.x,1),t.y=ha(t.y,1),i&&(this._stick=i),"hard"!=i&&"soft"!=i||(this._stickPoint=t),this.triggerMoveReal(t,e)},i.prototype.triggerMoveReal=function(t,i){(this.point.x!=t.x||this.point.y!=t.y||i)&&(this.point=t,this.invalidatePosition(),this.fitsToBounds(t)?this.show(0):this.downPoint||this.hide(0),this.visible&&(this.getPositions(),this.dispatch("cursorpositionchanged")))},i.prototype.triggerDown=function(t){this.triggerDownReal(t)},i.prototype.triggerDownReal=function(t){switch(this._generalBehavior){case"zoom":this.dispatchImmediately("zoomstarted");break;case"select":this.dispatchImmediately("selectstarted");break;case"pan":this.dispatchImmediately("panstarted"),va().setGlobalStyle(tb.grabbing);}},i.prototype.triggerUp=function(t){this.triggerUpReal(t)},i.prototype.triggerUpReal=function(t){Aa.requestFrame(),this.updatePoint(this.upPoint);var i=va();if(Ka(this._upPointOrig,this._downPointOrig)>i.getHitOption(this.interactions,"hitTolerance")){switch(this._generalBehavior){case"zoom":this.dispatch("zoomended");break;case"select":this.dispatch("selectended");break;case"pan":this.dispatch("panended"),i.setGlobalStyle(tb.default);}this.downPoint=void 0,this.updateSelection()}},i.prototype.updateSelection=function(){},i.prototype.getPositions=function(){this.xPosition=this.point.x/this.innerWidth,this.yPosition=1-this.point.y/this.innerHeight},i.prototype.handleCursorDown=function(t){if(!(!this.interactionsEnabled||this.interactions.isTouchProtected&&t.touch)&&va().isLocalElement(t.pointer,this.paper.svg,this.uid)){Be();var i=id(t.pointer.point,this);"hard"==this._stick&&this._stickPoint&&(i=this._stickPoint),this._adapterO&&this._adapterO.apply("cursorPoint",i),this.fitsToBounds(i)&&(this._downPointOrig={x:i.x,y:i.y},t.event.cancelable&&this.shouldPreventGestures(t.touch)&&this.fitsToBounds(i)&&t.event.preventDefault(),this.triggerMove(i),this.triggerDown(i))}},i.prototype.shouldPreventGestures=function(t){return!0},i.prototype.updatePoint=function(t){},i.prototype.handleCursorUp=function(t){if(this.interactionsEnabled&&(this.downPoint||va().isLocalElement(t.pointer,this.paper.svg,this.uid))){var i=id(t.pointer.point,this);this._adapterO&&this._adapterO.apply("cursorPoint",i),this.downPoint&&this.fitsToBounds(this.downPoint)&&("hard"==this._stick&&this._stickPoint&&(i=this._stickPoint),this._upPointOrig={x:i.x,y:i.y},this.triggerMove(i),this.triggerUp(i))}},Object.defineProperty(i.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart=t,ba(this._chart.plotContainer)&&va().lockElement(this._chart.plotContainer.interactions)},enumerable:!0,configurable:!0}),i}(oa);ca.registeredClasses.Cursor=ej;var fj=function(i){function t(){var t=i.call(this)||this;t._lineX=new nb,t._lineY=new nb,t._xAxis=new nb,t._yAxis=new nb,t._snapToDisposers=[],t.className="XYCursor",t.behavior="zoomX",t.maxPanOut=.1;var e=new Ia,s=t.createChild(xa);s.shouldClone=!1,s.fillOpacity=.2,s.fill=e.getFor("alternativeBackground"),s.isMeasured=!1,s.visible=!1,s.interactionsEnabled=!1,t.selection=s,t._disposers.push(t.selection);var o=t.createChild(xa);o.shouldClone=!1,o.stroke=e.getFor("grid"),o.fill=ua(),o.strokeDasharray="3,3",o.isMeasured=!1,o.strokeOpacity=.4,o.interactionsEnabled=!1,o.y=0,t.lineX=o,t._disposers.push(t.lineX);var n=t.createChild(xa);return n.shouldClone=!1,n.stroke=e.getFor("grid"),n.fill=ua(),n.strokeDasharray="3,3",n.isMeasured=!1,n.strokeOpacity=.4,n.interactionsEnabled=!1,n.x=0,t.lineY=n,t._disposers.push(t.lineY),t.events.on("sizechanged",t.updateSize,t,!1),t._disposers.push(t._lineX),t._disposers.push(t._lineY),t._disposers.push(t._xAxis),t._disposers.push(t._yAxis),t.mask=t,t.hideSeriesTooltipsOnSelection=!0,t.applyTheme(),t}return da(t,i),t.prototype.updateSize=function(){this.lineX&&(this.lineX.path=ma({x:0,y:0})+fa({x:0,y:this.innerHeight})),this.lineY&&(this.lineY.path=ma({x:0,y:0})+fa({x:this.innerWidth,y:0}))},t.prototype.updateSelection=function(){if(this._usesSelection){var i=this.downPoint,t=this.behavior;if(i){var e=this.point;this.lineX&&(e.x=this.lineX.pixelX),this.lineY&&(e.y=this.lineY.pixelY);var s=this.selection,o=Math.min(e.x,i.x),n=Math.min(e.y,i.y),r=ha(Math.abs(i.x-e.x),this._positionPrecision),a=ha(Math.abs(i.y-e.y),this._positionPrecision);switch(t){case"zoomX":n=0,a=this.pixelHeight;break;case"zoomY":o=0,r=this.pixelWidth;break;case"selectX":n=0,a=this.pixelHeight;break;case"selectY":o=0,r=this.pixelWidth;}s.x=o,s.y=n,s.path=ag(r,a),s.validatePosition()}else"select"!=this._generalBehavior&&this.selection.hide()}},t.prototype.fixPoint=function(i){return i.x=Math.max(0,i.x),i.y=Math.max(0,i.y),i.x=Math.min(this.pixelWidth,i.x),i.y=Math.min(this.pixelHeight,i.y),i},t.prototype.triggerMoveReal=function(t,e){i.prototype.triggerMoveReal.call(this,t,e);var s=this.snapToSeries;if(s&&!this.downPoint){if(s instanceof Yc)s.isHidden&&this.updateLinePositions(t);else{var o=!0;la(s,function(i){i.isHidden||(o=!1)}),o&&this.updateLinePositions(t)}}else this.updateLinePositions(t);this.downPoint&&Ka(this.downPoint,t)>3&&"pan"==this._generalBehavior&&(this.getPanningRanges(),this.dispatch("panning"))},t.prototype.updateLinePositions=function(i){i=this.fixPoint(this.point),this.lineX&&this.lineX.visible&&!this.xAxis&&(this.lineX.x=i.x),this.lineY&&this.lineY.visible&&!this.yAxis&&(this.lineY.y=i.y),this.updateSelection()},t.prototype.triggerDownReal=function(t){if(this.visible&&!this.isHiding){if("select"==this._generalBehavior&&(this.selection.parent=this.parent),this.fitsToBounds(t)){this.downPoint={x:t.x,y:t.y},this.updatePoint(t),this.point.x=this.downPoint.x,this.point.y=this.downPoint.y;var e=this.selection,s=this.downPoint.x,o=this.downPoint.y;this._usesSelection&&(e.x=s,e.y=o,e.path="",e.show()),i.prototype.triggerDownReal.call(this,t)}else this.downPoint=void 0;}else this.downPoint=void 0},t.prototype.updatePoint=function(i){this.lineX&&(i.x=this.lineX.pixelX),this.lineY&&(i.y=this.lineY.pixelY)},t.prototype.triggerUpReal=function(t){if(this.hasMoved())this.downPoint&&(this.upPoint=t,this.updatePoint(this.upPoint),"pan"!=this._generalBehavior&&this.getRanges(),"select"!=this._generalBehavior&&this.selection.hide(),i.prototype.triggerUpReal.call(this,t));else{if("select"!=this._generalBehavior?this.selection.hide(0):(this.xRange=void 0,this.yRange=void 0,this.dispatchImmediately("selectended")),"pan"==this._generalBehavior)va().setGlobalStyle(tb.default);this.dispatchImmediately("behaviorcanceled")}this.downPoint=void 0,this.dispatch("cursorpositionchanged")},t.prototype.hasMoved=function(){return("zoomX"==this.behavior||"panX"==this.behavior?vj(this._upPointOrig,this._downPointOrig):"zoomY"==this.behavior||"panY"==this.behavior?wj(this._upPointOrig,this._downPointOrig):Ka(this._upPointOrig,this._downPointOrig))>va().getHitOption(this.interactions,"hitTolerance")},t.prototype.getPanningRanges=function(){var i=ha(this.downPoint.x/this.innerWidth,5),t=1-ha(this.downPoint.y/this.innerHeight,5),e=i-ha(this.point.x/this.innerWidth,5),s=t-(1-ha(this.point.y/this.innerHeight,5));this.xRange={start:e,end:1+e},this.yRange={start:s,end:1+s},"panX"==this.behavior&&(this.yRange.start=0,this.yRange.end=1),"panY"==this.behavior&&(this.xRange.start=0,this.xRange.end=1)},t.prototype.getRanges=function(){this.lineX&&(this.upPoint.x=this.lineX.pixelX),this.lineY&&(this.upPoint.y=this.lineY.pixelY),Fb(this.selection);var i=ha(this.downPoint.x/this.innerWidth,5),t=ha(this.upPoint.x/this.innerWidth,5),e=1-ha(this.downPoint.y/this.innerHeight,5),s=1-ha(this.upPoint.y/this.innerHeight,5);this.xRange={start:Ea(i,t),end:wa(i,t)},this.yRange={start:Ea(e,s),end:wa(e,s)}},Object.defineProperty(t.prototype,"behavior",{get:function(){return this.getPropertyValue("behavior")},set:function(i){this.setPropertyValue("behavior",i,!0),this._usesSelection=!1,-1!=i.indexOf("zoom")&&(this._generalBehavior="zoom",this._usesSelection=!0),-1!=i.indexOf("select")&&(this._generalBehavior="select",this._usesSelection=!0),-1!=i.indexOf("pan")&&(this._generalBehavior="pan",this._usesSelection=!1)},enumerable:!0,configurable:!0}),t.prototype.shouldPreventGestures=function(i){return!(this.interactions.isTouchProtected&&i||"none"==this.behavior)},Object.defineProperty(t.prototype,"fullWidthLineX",{get:function(){return this.getPropertyValue("fullWidthLineX")},set:function(i){this.setPropertyValue("fullWidthLineX",i),i||this.updateSize()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullWidthLineY",{get:function(){return this.getPropertyValue("fullWidthLineY")},set:function(i){this.setPropertyValue("fullWidthLineY",i),i||this.updateSize()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideSeriesTooltipsOnSelection",{get:function(){return this.getPropertyValue("hideSeriesTooltipsOnSelection")},set:function(i){this.setPropertyValue("hideSeriesTooltipsOnSelection",i)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxTooltipDistance",{get:function(){return this.getPropertyValue("maxTooltipDistance")},set:function(i){this.setPropertyValue("maxTooltipDistance",i)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxPanOut",{get:function(){return this.getPropertyValue("maxPanOut")},set:function(i){this.setPropertyValue("maxPanOut",i)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xAxis",{get:function(){return this._xAxis.get()},set:function(i){var t=this;this._xAxis.get()!=i&&this._xAxis.set(i,new Ya([i.tooltip.events.on("positionchanged",this.handleXTooltipPosition,this,!1),i.events.on("rangechangestarted",function(i){t.hide(0),t.preventShow=!0},void 0,!1),i.events.on("rangechangeended",function(i){t.preventShow=!1,t.hide(0),t.dispatch("cursorpositionchanged")},void 0,!1)]))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yAxis",{get:function(){return this._yAxis.get()},set:function(i){var t=this;this._yAxis.get()!=i&&this._yAxis.set(i,new Ya([i.tooltip.events.on("positionchanged",this.handleYTooltipPosition,this,!1),i.events.on("rangechangestarted",function(i){t.hide(0),t.__disabled=!0},void 0,!1),i.events.on("rangechangeended",function(i){t.__disabled=!1,t.hide(0),t.dispatch("cursorpositionchanged")},void 0,!1)]))},enumerable:!0,configurable:!0}),t.prototype.handleXTooltipPosition=function(i){var t=this.xAxis.tooltip,e=ac({x:t.pixelX,y:t.pixelY},this),s=e.x;if(e.y=1,this.lineX&&(this.lineX.x=s,this.fitsToBounds(e)||this.hide()),this.xAxis&&this.fullWidthLineX){var o=this.xAxis.currentItemStartPoint,n=this.xAxis.currentItemEndPoint;if(o&&n){this.lineX.x=s;var r=n.x-o.x;this.lineX.path=ag(r,this.innerHeight,-r/2)}}},t.prototype.handleYTooltipPosition=function(i){var t=this.yAxis.tooltip,e=ac({x:t.pixelX,y:t.pixelY},this),s=e.y;if(e.x=1,this.lineY&&(this.lineY.y=s,this.fitsToBounds(e)||this.hide()),this.yAxis&&this.fullWidthLineY){var o=this.yAxis.currentItemStartPoint,n=this.yAxis.currentItemEndPoint;if(o&&n){this.lineY.y=s;var r=n.y-o.y;this.lineY.path=ag(this.innerWidth,r,0,-r/2)}}},Object.defineProperty(t.prototype,"lineX",{get:function(){return this._lineX.get()},set:function(i){i?(i.setElement(this.paper.add("path")),this._lineX.set(i,i.events.on("positionchanged",this.updateSelection,this,!1)),i.interactionsEnabled=!1,i.parent=this):this._lineX.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineY",{get:function(){return this._lineY.get()},set:function(i){i?(i.setElement(this.paper.add("path")),this._lineY.set(i,i.events.on("positionchanged",this.updateSelection,this,!1)),i.parent=this,i.interactionsEnabled=!1):this._lineY.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){return this._selection},set:function(i){this._selection=i,i&&(i.element=this.paper.add("path"),i.parent=this)},enumerable:!0,configurable:!0}),t.prototype.processConfig=function(t){var e=this;if(t&&(ba(t.xAxis)&&Ca(t.xAxis)&&(this.map.hasKey(t.xAxis)?t.xAxis=this.map.getKey(t.xAxis):(this.processingErrors.push("[XYCursor] No axis with id \""+t.xAxis+"\" found for `xAxis`"),delete t.xAxis)),ba(t.yAxis)&&Ca(t.yAxis)&&(this.map.hasKey(t.yAxis)?t.yAxis=this.map.getKey(t.yAxis):(this.processingErrors.push("[XYCursor] No axis with id \""+t.yAxis+"\" found for `yAxis`"),delete t.yAxis)),ba(t.snapToSeries))){var s=mb(t.snapToSeries)?t.snapToSeries:[t.snapToSeries],o=!1;la(s,function(i,t){Ca(i)&&(e.map.hasKey(i)?s[t]=e.map.getKey(i):(e.processingErrors.push("[XYCursor] No series with id \""+i+"\" found for `series`"),o=!0))}),o?delete t.snapToSeries:t.snapToSeries=s}i.prototype.processConfig.call(this,t)},Object.defineProperty(t.prototype,"snapToSeries",{get:function(){return this.getPropertyValue("snapToSeries")},set:function(i){var t=this;this.setPropertyValue("snapToSeries",i)&&(i instanceof Yc&&(i=[i]),this._snapToDisposers&&la(this._snapToDisposers,function(i){i.dispose()}),this._snapToDisposers=[],i&&la(i,function(i){t._snapToDisposers.push(i.events.on("tooltipshownat",function(){t.handleSnap(i)},void 0,!1))}))},enumerable:!0,configurable:!0}),t.prototype.handleSnap=function(i){if(!this.downPoint){var t=i.getTooltipX()+i.xAxis.pixelX,e=i.getTooltipY()+i.yAxis.pixelY;this.xAxis&&this.xAxis.renderer.opposite&&(e-=this.pixelHeight),this.point={x:t,y:e},this.getPositions();var s=t,o=e;t-=this.pixelWidth,this.yAxis&&this.yAxis.renderer.opposite&&(t+=this.pixelWidth);var n=i.tooltip,r=n.animationDuration,a=n.animationEasing,h=i.xAxis,p=i.yAxis;h instanceof Ba&&!(h instanceof $a)&&p instanceof Ba&&!(p instanceof $a)?(i.yAxis.showTooltipAtPosition(this.yPosition),i.xAxis.showTooltipAtPosition(this.xPosition)):(i.baseAxis==i.xAxis&&i.yAxis.showTooltipAtPosition(this.yPosition),i.baseAxis==i.yAxis&&i.xAxis.showTooltipAtPosition(this.xPosition)),this.lineX.animate([{property:"y",to:e}],r,a),this.lineY.animate([{property:"x",to:t}],r,a),this.xAxis||this.lineX.animate([{property:"x",to:s}],r,a),this.yAxis||this.lineY.animate([{property:"y",to:o}],r,a)}},t.prototype.dispose=function(){this.hide(0),i.prototype.dispose.call(this)},t}(ej);ca.registeredClasses.XYCursor=fj;var Rm=function(t){function i(){var i=t.call(this)||this;return i.className="RadarCursor",i.radius=ia(100),i.innerRadius=ia(0),i.applyTheme(),i.mask=void 0,i}return da(i,t),i.prototype.fitsToBounds=function(t){var i=Ka(t);return i<this.truePixelRadius+1&&i>this.pixelInnerRadius-1},Object.defineProperty(i.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),i.prototype.triggerMoveReal=function(i,$){this.xAxis&&(!this.xAxis||this.xAxis.cursorTooltipEnabled&&!this.xAxis.tooltip.disabled)||this.updateLineX(this.point),this.yAxis&&(!this.yAxis||this.yAxis.cursorTooltipEnabled&&!this.yAxis.tooltip.disabled)||this.updateLineY(this.point),this.updateSelection(),t.prototype.triggerMoveReal.call(this,i,$)},i.prototype.updateLineX=function(t){var i=this.pixelRadius,$=this.startAngle,e=this.endAngle,r=this.pixelInnerRadius;if(i>0&&aa($)&&aa(e)&&aa(r)){var o=fc(xb(t),$,e),a=void 0;if(this.lineX&&this.lineX.visible){if(this.lineX.moveTo({x:0,y:0}),this.xAxis&&this.fullWidthLineX){var n=this.xAxis.currentItemStartPoint,s=this.xAxis.currentItemEndPoint;if(n&&s){var p=fc(xb(n),$,e),h=fc(xb(s),$,e)-p;$<e?h<0&&(h+=360):h>0&&(h-=360),o-=h/2,a=ma({x:r*ka(o),y:r*ja(o)})+fa({x:i*ka(o),y:i*ja(o)})+ob(o,h,i)+fa({x:r*ka(o+h),y:r*ja(o+h)})+ob(o+h,-h,r)}}a||(a=ma({x:r*ka(o),y:r*ja(o)})+fa({x:i*ka(o),y:i*ja(o)})),this.lineX.path=a}}},i.prototype.updateLineY=function(t){if(this.lineY&&this.lineY.visible){var i=this.startAngle,$=this.endAngle,e=this.truePixelRadius,r=na(Ka(t),0,this.truePixelRadius);if(aa(r)&&aa(i)){this.lineY.moveTo({x:0,y:0});var o=void 0,a=$-i;if(this.yAxis&&this.fullWidthLineY){var n=this.yAxis.currentItemStartPoint,s=this.yAxis.currentItemEndPoint;if(n&&s){var p=na(Ka(n),0,e);r=na(Ka(s),0,e),o=ma({x:r*ka(i),y:r*ja(i)})+ob(i,a,r),o+=ma({x:p*ka($),y:p*ja($)})+ob($,-a,p)}}o||(o=ma({x:r*ka(i),y:r*ja(i)})+ob(i,$-i,r)),this.lineY.path=o}}},i.prototype.updateSelection=function(){if(this._usesSelection){var t=this.downPoint;if(t){var i=this.point,$=this.pixelRadius,e=this.truePixelRadius,r=this.pixelInnerRadius,o=Math.min(this.startAngle,this.endAngle),a=Math.max(this.startAngle,this.endAngle),n=fc(xb(t),o,a),s=fc(xb(i),o,a),p=Ka(t);if(p<e){var h=na(Ka(i),0,e);this._prevAngle=s;var m=ma({x:0,y:0}),R=ja(n),l=ka(n),u=ja(s),z=ka(s),E=this.behavior;"zoomX"==E||"selectX"==E?m+=fa({x:$*l,y:$*R})+ob(n,s-n,$)+fa({x:r*z,y:r*u})+ob(s,n-s,r):"zoomY"==E||"selectY"==E?m=ma({x:h*ka(o),y:h*ja(o)})+ob(o,a-o,h)+fa({x:p*ka(a),y:p*ja(a)})+ob(a,o-a,p)+eb():"zoomXY"==E&&(m=ma({x:h*ka(n),y:h*ja(n)})+ob(n,s-n,h)+fa({x:p*ka(s),y:p*ja(s)})+ob(s,n-s,p)+eb()),this.selection.path=m}this.selection.moveTo({x:0,y:0})}}},i.prototype.getPositions=function(){if(this.chart){var t=this.pixelInnerRadius,i=this.truePixelRadius-t,$=this.startAngle,e=this.endAngle,r=(fc(xb(this.point),$,e)-$)/(e-$);this.xPosition=r,this.yPosition=na((Ka(this.point)-t)/i,0,1)}},i.prototype.updatePoint=function(t){},i.prototype.handleXTooltipPosition=function(t){if(this.xAxis.cursorTooltipEnabled){var i=this.xAxis.tooltip;this.updateLineX(ac({x:i.pixelX,y:i.pixelY},this))}},i.prototype.handleYTooltipPosition=function(t){if(this.yAxis.cursorTooltipEnabled){var i=this.yAxis.tooltip;this.updateLineY(ac({x:i.pixelX,y:i.pixelY},this))}},i.prototype.updateLinePositions=function(t){},i.prototype.getRanges=function(){var t=this.downPoint;if(t){var i=this.upPoint;if(this.chart){var $=this.pixelRadius,e=this.startAngle,r=this.endAngle,o=fc(xb(t),this.startAngle,this.endAngle),a=fc(xb(i),this.startAngle,this.endAngle),n=na(Ka(t),0,$),s=na(Ka(i),0,$),p=0,h=1,m=0,R=1,l=this.behavior;if("zoomX"==l||"selectX"==l||"zoomXY"==l||"selectXY"==l){var u=r-e;p=ha((o-e)/u,5),h=ha((a-e)/u,5)}"zoomY"!=l&&"selectY"!=l&&"zoomXY"!=l&&"selectXY"!=l||(m=ha(n/$,5),R=ha(s/$,5)),this.xRange={start:Math.min(p,h),end:Math.max(p,h)},this.yRange={start:Math.min(m,R),end:Math.max(m,R)},"selectX"==this.behavior||"selectY"==this.behavior||"selectXY"==this.behavior||this.selection.hide()}}},i.prototype.updateSize=function(){},Object.defineProperty(i.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pixelRadius",{get:function(){return qb(this.radius,this.truePixelRadius)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"truePixelRadius",{get:function(){return Xa(ia(100),Ea(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pixelInnerRadius",{get:function(){var t=this.innerRadius;return t instanceof Da&&(t=ia(100*t.value*this.chart.innerRadiusModifyer)),qb(t,this.truePixelRadius)||0},enumerable:!0,configurable:!0}),i.prototype.fixPoint=function(t){return t},i}(fj);ca.registeredClasses.RadarCursor=Rm;var pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError("\"this\" is null or not defined");var t=Object(this),o=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],n=0;n<o;){var a=t[n];if(e.call(i,a,n,t))return n;n++}return-1}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError("\"this\" is null or not defined");var t=Object(this),o=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],n=0;n<o;){var a=t[n];if(e.call(i,a,n,t))return a;n++}}}),String.prototype.includes||(String.prototype.includes=function(e,t){if(e instanceof RegExp)throw TypeError("first argument must not be a RegExp");return void 0===t&&(t=0),-1!==this.indexOf(e,t)}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError("\"this\" is null or not defined");var o=Object(this),i=o.length>>>0;if(0===i)return!1;var n,a,r=0|t,s=Math.max(r>=0?r:i-Math.abs(r),0);for(;s<i;){if((n=o[s])===(a=e)||"number"==typeof n&&"number"==typeof a&&isNaN(n)&&isNaN(a))return!0;s++}return!1}}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(o[a]=n[a])}return o},writable:!0,configurable:!0});var Ma=function(e){this.table=e,this.blockHozScrollEvent=!1,this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.rowManager=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.element.insertBefore(this.headersElement,this.element.firstChild)};Ma.prototype.createHeadersElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-headers"),e},Ma.prototype.createHeaderElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-header"),this.table.options.headerVisible||e.classList.add("tabulator-header-hidden"),e},Ma.prototype.initialize=function(){},Ma.prototype.setRowManager=function(e){this.rowManager=e},Ma.prototype.getElement=function(){return this.element},Ma.prototype.getHeadersElement=function(){return this.headersElement},Ma.prototype.scrollHorizontal=function(e){var t=0,o=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=e,e>o?(t=e-o,this.element.style.marginLeft=-t+"px"):this.element.style.marginLeft=0,this.scrollLeft=e,this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.scrollHorizontal()},Ma.prototype.generateColumnsFromRowData=function(e){var t,o,i=[],n=this.table.options.autoColumnsDefinitions;if(e&&e.length){for(var a in t=e[0]){var r={field:a,title:a},s=t[a];switch(void 0===s?"undefined":pa(s)){case"undefined":o="string";break;case"boolean":o="boolean";break;case"object":o=Array.isArray(s)?"array":"string";break;default:o=isNaN(s)||""===s?s.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number";}r.sorter=o,i.push(r)}if(n)switch(void 0===n?"undefined":pa(n)){case"function":this.table.options.columns=n.call(this.table,i);break;case"object":Array.isArray(n)?i.forEach(function(e){var t=n.find(function(t){return t.field===e.field});t&&Object.assign(e,t)}):i.forEach(function(e){n[e.field]&&Object.assign(e,n[e.field])}),this.table.options.columns=i;}else this.table.options.columns=i;this.setColumns(this.table.options.columns)}},Ma.prototype.setColumns=function(e,t){for(var o=this;o.headersElement.firstChild;)o.headersElement.removeChild(o.headersElement.firstChild);o.columns=[],o.columnsByIndex=[],o.columnsByField={},o.table.modExists("frozenColumns")&&o.table.modules.frozenColumns.reset(),e.forEach(function(e,t){o._addColumn(e)}),o._reIndexColumns(),o.table.options.responsiveLayout&&o.table.modExists("responsiveLayout",!0)&&o.table.modules.responsiveLayout.initialize(),this.table.options.virtualDomHoz&&this.table.vdomHoz.reinitialize(!1,!0),o.redraw(!0)},Ma.prototype._addColumn=function(e,t,o){var i=new ra(e,this),n=i.getElement(),a=o?this.findColumnIndex(o):o;if(o&&a>-1){var r=this.columns.indexOf(o.getTopColumn()),s=o.getElement();t?(this.columns.splice(r,0,i),s.parentNode.insertBefore(n,s)):(this.columns.splice(r+1,0,i),s.parentNode.insertBefore(n,s.nextSibling))}else t?(this.columns.unshift(i),this.headersElement.insertBefore(i.getElement(),this.headersElement.firstChild)):(this.columns.push(i),this.headersElement.appendChild(i.getElement())),i.columnRendered();return i},Ma.prototype.registerColumnField=function(e){e.definition.field&&(this.columnsByField[e.definition.field]=e)},Ma.prototype.registerColumnPosition=function(e){this.columnsByIndex.push(e)},Ma.prototype._reIndexColumns=function(){this.columnsByIndex=[],this.columns.forEach(function(e){e.reRegisterPosition()})},Ma.prototype._verticalAlignHeaders=function(){var e=this,t=0;e.columns.forEach(function(e){var o;e.clearVerticalAlign(),(o=e.getHeight())>t&&(t=o)}),e.columns.forEach(function(o){o.verticalAlign(e.table.options.columnHeaderVertAlign,t)}),e.rowManager.adjustTableSize()},Ma.prototype.findColumn=function(e){return"object"!=(void 0===e?"undefined":pa(e))?this.columnsByField[e]||!1:e instanceof ra?e:e instanceof ab?e._getSelf()||!1:"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&this.columns.find(function(t){return t.element===e})||!1},Ma.prototype.getColumnByField=function(e){return this.columnsByField[e]},Ma.prototype.getColumnsByFieldRoot=function(e){var t=this,o=[];return Object.keys(this.columnsByField).forEach(function(i){i.split(".")[0]===e&&o.push(t.columnsByField[i])}),o},Ma.prototype.getColumnByIndex=function(e){return this.columnsByIndex[e]},Ma.prototype.getFirstVisibileColumn=function(e){return(e=this.columnsByIndex.findIndex(function(e){return e.visible}))>-1&&this.columnsByIndex[e]},Ma.prototype.getColumns=function(){return this.columns},Ma.prototype.findColumnIndex=function(e){return this.columnsByIndex.findIndex(function(t){return e===t})},Ma.prototype.getRealColumns=function(){return this.columnsByIndex},Ma.prototype.traverse=function(e){this.columnsByIndex.forEach(function(t,o){e(t,o)})},Ma.prototype.getDefinitions=function(e){var t=[];return this.columnsByIndex.forEach(function(o){(!e||e&&o.visible)&&t.push(o.getDefinition())}),t},Ma.prototype.getDefinitionTree=function(){var e=[];return this.columns.forEach(function(t){e.push(t.getDefinition(!0))}),e},Ma.prototype.getComponents=function(e){var t=[];return(e?this.columns:this.columnsByIndex).forEach(function(e){t.push(e.getComponent())}),t},Ma.prototype.getWidth=function(){var e=0;return this.columnsByIndex.forEach(function(t){t.visible&&(e+=t.getWidth())}),e},Ma.prototype.moveColumn=function(e,t,o){this.moveColumnActual(e,t,o),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),t.element.parentNode.insertBefore(e.element,t.element),o&&t.element.parentNode.insertBefore(t.element,e.element),this._verticalAlignHeaders(),this.table.rowManager.reinitialize()},Ma.prototype.moveColumnActual=function(e,t,o){e.parent.isGroup?this._moveColumnInArray(e.parent.columns,e,t,o):this._moveColumnInArray(this.columns,e,t,o),this._moveColumnInArray(this.columnsByIndex,e,t,o,!0),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this.table.options.virtualDomHoz&&this.table.vdomHoz.reinitialize(!0),this.table.options.columnMoved&&this.table.options.columnMoved.call(this.table,e.getComponent(),this.table.columnManager.getComponents()),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns")},Ma.prototype._moveColumnInArray=function(e,t,o,i,n){var a,r=this,s=e.indexOf(t),l=[];s>-1&&(e.splice(s,1),(a=e.indexOf(o))>-1?i&&(a+=1):a=s,e.splice(a,0,t),n&&(this.table.options.dataTree&&this.table.modExists("dataTree",!0)&&this.table.rowManager.rows.forEach(function(e){l=l.concat(r.table.modules.dataTree.getTreeChildren(e,!1,!0))}),(l=l.concat(this.table.rowManager.rows)).forEach(function(e){if(e.cells.length){var t=e.cells.splice(s,1)[0];e.cells.splice(a,0,t)}})))},Ma.prototype.scrollToColumn=function(e,t,o){var i=this,n=0,a=0,r=0,s=e.getElement();return new Promise(function(l,u){if(void 0===t&&(t=i.table.options.scrollToColumnPosition),void 0===o&&(o=i.table.options.scrollToColumnIfVisible),e.visible){switch(t){case"middle":case"center":r=-i.element.clientWidth/2;break;case"right":r=s.clientWidth-i.headersElement.clientWidth;}if(!o&&(a=s.offsetLeft)>0&&a+s.offsetWidth<i.element.clientWidth)return!1;n=s.offsetLeft+r,n=Math.max(Math.min(n,i.table.rowManager.element.scrollWidth-i.table.rowManager.element.clientWidth),0),i.table.rowManager.scrollHorizontal(n),i.scrollHorizontal(n),l()}else console.warn("Scroll Error - Column not visible"),u("Scroll Error - Column not visible")})},Ma.prototype.generateCells=function(e){var t=[];return this.columnsByIndex.forEach(function(o){t.push(o.generateCell(e))}),t},Ma.prototype.getFlexBaseWidth=function(){var e=this,t=e.table.element.clientWidth,o=0;return e.rowManager.element.scrollHeight>e.rowManager.element.clientHeight&&(t-=e.rowManager.element.offsetWidth-e.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(i){var n,a,r;i.visible&&(n=i.definition.width||0,a=void 0===i.minWidth?e.table.options.columnMinWidth:parseInt(i.minWidth),r="string"==typeof n?n.indexOf("%")>-1?t/100*parseInt(n):parseInt(n):n,o+=r>a?r:a)}),o},Ma.prototype.addColumn=function(e,t,o){var i=this;return new Promise(function(n,a){var r=i._addColumn(e,t,o);i._reIndexColumns(),i.table.options.responsiveLayout&&i.table.modExists("responsiveLayout",!0)&&i.table.modules.responsiveLayout.initialize(),i.table.modExists("columnCalcs")&&i.table.modules.columnCalcs.recalc(i.table.rowManager.activeRows),i.redraw(!0),"fitColumns"!=i.table.modules.layout.getMode()&&r.reinitializeWidth(),i._verticalAlignHeaders(),i.table.rowManager.reinitialize(),i.table.options.virtualDomHoz&&i.table.vdomHoz.reinitialize(),n(r)})},Ma.prototype.deregisterColumn=function(e){var t,o=e.getField();o&&delete this.columnsByField[o],(t=this.columnsByIndex.indexOf(e))>-1&&this.columnsByIndex.splice(t,1),(t=this.columns.indexOf(e))>-1&&this.columns.splice(t,1),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this._verticalAlignHeaders(),this.redraw()},Ma.prototype.redraw=function(e){e&&(ea.prototype.helpers.elVisible(this.element)&&this._verticalAlignHeaders(),this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),["fitColumns","fitDataStretch"].indexOf(this.table.modules.layout.getMode())>-1?this.table.modules.layout.layout():e?this.table.modules.layout.layout():this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout(),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),e&&(this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns"),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.redraw()),this.table.footerManager.redraw()};var ab=function(e){this._column=e,this.type="ColumnComponent"};ab.prototype.getElement=function(){return this._column.getElement()},ab.prototype.getDefinition=function(){return this._column.getDefinition()},ab.prototype.getField=function(){return this._column.getField()},ab.prototype.getCells=function(){var e=[];return this._column.cells.forEach(function(t){e.push(t.getComponent())}),e},ab.prototype.getVisibility=function(){return console.warn("getVisibility function is deprecated, you should now use the isVisible function"),this._column.visible},ab.prototype.isVisible=function(){return this._column.visible},ab.prototype.show=function(){this._column.isGroup?this._column.columns.forEach(function(e){e.show()}):this._column.show()},ab.prototype.hide=function(){this._column.isGroup?this._column.columns.forEach(function(e){e.hide()}):this._column.hide()},ab.prototype.toggle=function(){this._column.visible?this.hide():this.show()},ab.prototype.delete=function(){return this._column.delete()},ab.prototype.getSubColumns=function(){var e=[];return this._column.columns.length&&this._column.columns.forEach(function(t){e.push(t.getComponent())}),e},ab.prototype.getParentColumn=function(){return this._column.parent instanceof ra&&this._column.parent.getComponent()},ab.prototype._getSelf=function(){return this._column},ab.prototype.scrollTo=function(){return this._column.table.columnManager.scrollToColumn(this._column)},ab.prototype.getTable=function(){return this._column.table},ab.prototype.headerFilterFocus=function(){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.setHeaderFilterFocus(this._column)},ab.prototype.reloadHeaderFilter=function(){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.reloadHeaderFilter(this._column)},ab.prototype.getHeaderFilterValue=function(){if(this._column.table.modExists("filter",!0))return this._column.table.modules.filter.getHeaderFilterValue(this._column)},ab.prototype.setHeaderFilterValue=function(e){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.setHeaderFilterValue(this._column,e)},ab.prototype.move=function(e,t){var o=this._column.table.columnManager.findColumn(e);o?this._column.table.columnManager.moveColumn(this._column,o,t):console.warn("Move Error - No matching column found:",o)},ab.prototype.getNextColumn=function(){var e=this._column.nextColumn();return!!e&&e.getComponent()},ab.prototype.getPrevColumn=function(){var e=this._column.prevColumn();return!!e&&e.getComponent()},ab.prototype.updateDefinition=function(e){return this._column.updateDefinition(e)},ab.prototype.getWidth=function(){return this._column.getWidth()},ab.prototype.setWidth=function(e){var t;return t=!0===e?this._column.reinitializeWidth(!0):this._column.setWidth(e),this._column.table.options.virtualDomHoz&&this._column.table.vdomHoz.reinitialize(!0),t},ab.prototype.validate=function(){return this._column.validate()};var ra=function e(t,o){var i=this;this.table=o.table,this.definition=t,this.parent=o,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.setField(this.definition.field),this.table.options.invalidOptionWarnings&&this.checkDefinition(),this.modules={},this.cellEvents={cellClick:!1,cellDblClick:!1,cellContext:!1,cellTap:!1,cellDblTap:!1,cellTapHold:!1,cellMouseEnter:!1,cellMouseLeave:!1,cellMouseOver:!1,cellMouseOut:!1,cellMouseMove:!1},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this._mapDepricatedFunctionality(),t.columns?(this.isGroup=!0,t.columns.forEach(function(t,o){var n=new e(t,i);i.attachColumn(n)}),i.checkColumnVisibility()):o.registerColumnField(this),t.rowHandle&&!1!==this.table.options.movableRows&&this.table.modExists("moveRow")&&this.table.modules.moveRow.setHandle(!0),this._buildHeader(),this.bindModuleColumns()};ra.prototype.createElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.setAttribute("role","columnheader"),e.setAttribute("aria-sort","none"),e},ra.prototype.createGroupElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-col-group-cols"),e},ra.prototype.checkDefinition=function(){var e=this;Object.keys(this.definition).forEach(function(t){-1===e.defaultOptionList.indexOf(t)&&console.warn("Invalid column definition option in '"+(e.field||e.definition.title)+"' column:",t)})},ra.prototype.setField=function(e){this.field=e,this.fieldStructure=e?this.table.options.nestedFieldSeparator?e.split(this.table.options.nestedFieldSeparator):[e]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData},ra.prototype.registerColumnPosition=function(e){this.parent.registerColumnPosition(e)},ra.prototype.registerColumnField=function(e){this.parent.registerColumnField(e)},ra.prototype.reRegisterPosition=function(){this.isGroup?this.columns.forEach(function(e){e.reRegisterPosition()}):this.registerColumnPosition(this)},ra.prototype._mapDepricatedFunctionality=function(){void 0!==this.definition.hideInHtml&&(this.definition.htmlOutput=!this.definition.hideInHtml,console.warn("hideInHtml column definition property is deprecated, you should now use htmlOutput")),void 0!==this.definition.align&&(this.definition.hozAlign=this.definition.align,console.warn("align column definition property is deprecated, you should now use hozAlign")),void 0!==this.definition.downloadTitle&&(this.definition.titleDownload=this.definition.downloadTitle,console.warn("downloadTitle definition property is deprecated, you should now use titleDownload"))},ra.prototype.setTooltip=function(){var e=this,t=e.definition,o=t.headerTooltip||!1===t.tooltip?t.headerTooltip:e.table.options.tooltipsHeader;o?!0===o?t.field?e.table.modules.localize.bind("columns|"+t.field,function(o){e.element.setAttribute("title",o||t.title)}):e.element.setAttribute("title",t.title):("function"==typeof o&&!1===(o=o(e.getComponent()))&&(o=""),e.element.setAttribute("title",o)):e.element.setAttribute("title","")},ra.prototype._buildHeader=function(){for(var e=this,t=e.definition;e.element.firstChild;)e.element.removeChild(e.element.firstChild);t.headerVertical&&(e.element.classList.add("tabulator-col-vertical"),"flip"===t.headerVertical&&e.element.classList.add("tabulator-col-vertical-flip")),e.contentElement=e._bindEvents(),e.contentElement=e._buildColumnHeaderContent(),e.element.appendChild(e.contentElement),e.isGroup?e._buildGroupHeader():e._buildColumnHeader(),e.setTooltip(),e.table.options.resizableColumns&&e.table.modExists("resizeColumns")&&e.table.modules.resizeColumns.initializeColumn("header",e,e.element),t.headerFilter&&e.table.modExists("filter")&&e.table.modExists("edit")&&(void 0!==t.headerFilterPlaceholder&&t.field&&e.table.modules.localize.setHeaderFilterColumnPlaceholder(t.field,t.headerFilterPlaceholder),e.table.modules.filter.initializeColumn(e)),e.table.modExists("frozenColumns")&&e.table.modules.frozenColumns.initializeColumn(e),e.table.options.movableColumns&&!e.isGroup&&e.table.modExists("moveColumn")&&e.table.modules.moveColumn.initializeColumn(e),(t.topCalc||t.bottomCalc)&&e.table.modExists("columnCalcs")&&e.table.modules.columnCalcs.initializeColumn(e),e.table.modExists("persistence")&&e.table.modules.persistence.config.columns&&e.table.modules.persistence.initializeColumn(e),e.element.addEventListener("mouseenter",function(t){e.setTooltip()})},ra.prototype._bindEvents=function(){var e,t,o,i=this,n=i.definition;"function"==typeof n.headerClick&&i.element.addEventListener("click",function(e){n.headerClick(e,i.getComponent())}),"function"==typeof n.headerDblClick&&i.element.addEventListener("dblclick",function(e){n.headerDblClick(e,i.getComponent())}),"function"==typeof n.headerContext&&i.element.addEventListener("contextmenu",function(e){n.headerContext(e,i.getComponent())}),"function"==typeof n.headerTap&&(o=!1,i.element.addEventListener("touchstart",function(e){o=!0},{passive:!0}),i.element.addEventListener("touchend",function(e){o&&n.headerTap(e,i.getComponent()),o=!1})),"function"==typeof n.headerDblTap&&(e=null,i.element.addEventListener("touchend",function(t){e?(clearTimeout(e),e=null,n.headerDblTap(t,i.getComponent())):e=setTimeout(function(){clearTimeout(e),e=null},300)})),"function"==typeof n.headerTapHold&&(t=null,i.element.addEventListener("touchstart",function(e){clearTimeout(t),t=setTimeout(function(){clearTimeout(t),t=null,o=!1,n.headerTapHold(e,i.getComponent())},1e3)},{passive:!0}),i.element.addEventListener("touchend",function(e){clearTimeout(t),t=null})),"function"==typeof n.cellClick&&(i.cellEvents.cellClick=n.cellClick),"function"==typeof n.cellDblClick&&(i.cellEvents.cellDblClick=n.cellDblClick),"function"==typeof n.cellContext&&(i.cellEvents.cellContext=n.cellContext),"function"==typeof n.cellMouseEnter&&(i.cellEvents.cellMouseEnter=n.cellMouseEnter),"function"==typeof n.cellMouseLeave&&(i.cellEvents.cellMouseLeave=n.cellMouseLeave),"function"==typeof n.cellMouseOver&&(i.cellEvents.cellMouseOver=n.cellMouseOver),"function"==typeof n.cellMouseOut&&(i.cellEvents.cellMouseOut=n.cellMouseOut),"function"==typeof n.cellMouseMove&&(i.cellEvents.cellMouseMove=n.cellMouseMove),"function"==typeof n.cellTap&&(i.cellEvents.cellTap=n.cellTap),"function"==typeof n.cellDblTap&&(i.cellEvents.cellDblTap=n.cellDblTap),"function"==typeof n.cellTapHold&&(i.cellEvents.cellTapHold=n.cellTapHold),"function"==typeof n.cellEdited&&(i.cellEvents.cellEdited=n.cellEdited),"function"==typeof n.cellEditing&&(i.cellEvents.cellEditing=n.cellEditing),"function"==typeof n.cellEditCancelled&&(i.cellEvents.cellEditCancelled=n.cellEditCancelled)},ra.prototype._buildColumnHeader=function(){var e=this,t=this.definition,o=this.table;(o.modExists("sort")&&o.modules.sort.initializeColumn(this,this.titleHolderElement),(t.headerContextMenu||t.headerClickMenu||t.headerMenu)&&o.modExists("menu")&&o.modules.menu.initializeColumnHeader(this),o.modExists("format")&&o.modules.format.initializeColumn(this),void 0!==t.editor&&o.modExists("edit")&&o.modules.edit.initializeColumn(this),void 0!==t.validator&&o.modExists("validate")&&o.modules.validate.initializeColumn(this),o.modExists("mutator")&&o.modules.mutator.initializeColumn(this),o.modExists("accessor")&&o.modules.accessor.initializeColumn(this),pa(o.options.responsiveLayout)&&o.modExists("responsiveLayout")&&o.modules.responsiveLayout.initializeColumn(this),void 0!==t.visible&&(t.visible?this.show(!0):this.hide(!0)),t.cssClass)&&t.cssClass.split(" ").forEach(function(t){e.element.classList.add(t)});t.field&&this.element.setAttribute("tabulator-field",t.field),this.setMinWidth(void 0===t.minWidth?this.table.options.columnMinWidth:parseInt(t.minWidth)),(t.maxWidth||this.table.options.columnMaxWidth)&&!1!==t.maxWidth&&this.setMaxWidth(void 0===t.maxWidth?this.table.options.columnMaxWidth:parseInt(t.maxWidth)),this.reinitializeWidth(),this.tooltip=this.definition.tooltip||!1===this.definition.tooltip?this.definition.tooltip:this.table.options.tooltips,this.hozAlign=void 0===this.definition.hozAlign?this.table.options.cellHozAlign:this.definition.hozAlign,this.vertAlign=void 0===this.definition.vertAlign?this.table.options.cellVertAlign:this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign||this.table.options.headerHozAlign},ra.prototype._buildColumnHeaderContent=function(){this.definition,this.table;var e=document.createElement("div");return e.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),e.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),e},ra.prototype._buildColumnHeaderTitle=function(){var e=this,t=e.definition,o=e.table,i=document.createElement("div");if(i.classList.add("tabulator-col-title"),t.editableTitle){var n=document.createElement("input");n.classList.add("tabulator-title-editor"),n.addEventListener("click",function(e){e.stopPropagation(),n.focus()}),n.addEventListener("change",function(){t.title=n.value,o.options.columnTitleChanged.call(e.table,e.getComponent())}),i.appendChild(n),t.field?o.modules.localize.bind("columns|"+t.field,function(e){n.value=e||t.title||"&nbsp;"}):n.value=t.title||"&nbsp;"}else t.field?o.modules.localize.bind("columns|"+t.field,function(o){e._formatColumnHeaderTitle(i,o||t.title||"&nbsp;")}):e._formatColumnHeaderTitle(i,t.title||"&nbsp;");return i},ra.prototype._formatColumnHeaderTitle=function(e,t){var o,i,n,a,r,s=this;if(this.definition.titleFormatter&&this.table.modExists("format"))switch(o=this.table.modules.format.getFormatter(this.definition.titleFormatter),r=function(e){s.titleFormatterRendered=e},a={getValue:function(){return t},getElement:function(){return e}},n="function"==typeof(n=this.definition.titleFormatterParams||{})?n():n,void 0===(i=o.call(this.table.modules.format,a,n,r))?"undefined":pa(i)){case"object":i instanceof Node?e.appendChild(i):(e.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",i));break;case"undefined":case"null":e.innerHTML="";break;default:e.innerHTML=i;}else e.innerHTML=t},ra.prototype._buildGroupHeader=function(){var e=this;(this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass)&&this.definition.cssClass.split(" ").forEach(function(t){e.element.classList.add(t)});(this.definition.headerContextMenu||this.definition.headerMenu)&&this.table.modExists("menu")&&this.table.modules.menu.initializeColumnHeader(this),this.titleElement.style.textAlign=this.definition.headerHozAlign||this.table.options.headerHozAlign,this.element.appendChild(this.groupElement)},ra.prototype._getFlatData=function(e){return e[this.field]},ra.prototype._getNestedData=function(e){for(var t,o=e,i=this.fieldStructure,n=i.length,a=0;a<n&&(t=o=o[i[a]],o);a++);return t},ra.prototype._setFlatData=function(e,t){this.field&&(e[this.field]=t)},ra.prototype._setNestedData=function(e,t){for(var o=e,i=this.fieldStructure,n=i.length,a=0;a<n;a++)if(a==n-1)o[i[a]]=t;else{if(!o[i[a]]){if(void 0===t)break;o[i[a]]={}}o=o[i[a]]}},ra.prototype.attachColumn=function(e){this.groupElement?(this.columns.push(e),this.groupElement.appendChild(e.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")},ra.prototype.verticalAlign=function(e,t){var o=this.parent.isGroup?this.parent.getGroupElement().clientHeight:t||this.parent.getHeadersElement().clientHeight;this.element.style.height=o+"px",this.isGroup&&(this.groupElement.style.minHeight=o-this.contentElement.offsetHeight+"px"),this.isGroup||"top"===e||(this.element.style.paddingTop="bottom"===e?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach(function(t){t.verticalAlign(e)})},ra.prototype.clearVerticalAlign=function(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(e){e.clearVerticalAlign()})},ra.prototype.bindModuleColumns=function(){"rownum"==this.definition.formatter&&(this.table.rowManager.rowNumColumn=this)},ra.prototype.getElement=function(){return this.element},ra.prototype.getGroupElement=function(){return this.groupElement},ra.prototype.getField=function(){return this.field},ra.prototype.getFirstColumn=function(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this},ra.prototype.getLastColumn=function(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this},ra.prototype.getColumns=function(){return this.columns},ra.prototype.getCells=function(){return this.cells},ra.prototype.getTopColumn=function(){return this.parent.isGroup?this.parent.getTopColumn():this},ra.prototype.getDefinition=function(e){var t=[];return this.isGroup&&e&&(this.columns.forEach(function(e){t.push(e.getDefinition(!0))}),this.definition.columns=t),this.definition},ra.prototype.checkColumnVisibility=function(){var e=!1;this.columns.forEach(function(t){t.visible&&(e=!0)}),e?(this.show(),this.parent.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!1)):this.hide()},ra.prototype.show=function(e,t){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(e){e.show()}),this.isGroup||null!==this.width||this.reinitializeWidth(),this.table.columnManager._verticalAlignHeaders(),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns"),!t&&this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.updateColumnVisibility(this,this.visible),e||this.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),!this.silent&&this.table.options.virtualDomHoz&&this.table.vdomHoz.reinitialize())},ra.prototype.hide=function(e,t){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager._verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(e){e.hide()}),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns"),!t&&this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.updateColumnVisibility(this,this.visible),e||this.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),!this.silent&&this.table.options.virtualDomHoz&&this.table.vdomHoz.reinitialize())},ra.prototype.matchChildWidths=function(){var e=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(t){t.visible&&(e+=t.getWidth())}),this.contentElement.style.maxWidth=e-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())},ra.prototype.removeChild=function(e){var t=this.columns.indexOf(e);t>-1&&this.columns.splice(t,1),this.columns.length||this.delete()},ra.prototype.setWidth=function(e){this.widthFixed=!0,this.setWidthActual(e)},ra.prototype.setWidthActual=function(e){isNaN(e)&&(e=Math.floor(this.table.element.clientWidth/100*parseInt(e))),e=Math.max(this.minWidth,e),this.maxWidth&&(e=Math.min(this.maxWidth,e)),this.width=e,this.widthStyled=e?e+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(e){e.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()},ra.prototype.checkCellHeights=function(){var e=[];this.cells.forEach(function(t){t.row.heightInitialized&&(null!==t.row.getElement().offsetParent?(e.push(t.row),t.row.clearCellHeight()):t.row.heightInitialized=!1)}),e.forEach(function(e){e.calcHeight()}),e.forEach(function(e){e.setCellHeight()})},ra.prototype.getWidth=function(){var e=0;return this.isGroup?this.columns.forEach(function(t){t.visible&&(e+=t.getWidth())}):e=this.width,e},ra.prototype.getHeight=function(){return this.element.offsetHeight},ra.prototype.setMinWidth=function(e){this.minWidth=e,this.minWidthStyled=e?e+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(e){e.setMinWidth()})},ra.prototype.setMaxWidth=function(e){this.maxWidth=e,this.maxWidthStyled=e?e+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(e){e.setMaxWidth()})},ra.prototype.delete=function(){var e=this;return new Promise(function(t,o){e.isGroup&&e.columns.forEach(function(e){e.delete()}),e.table.modExists("edit")&&e.table.modules.edit.currentCell.column===e&&e.table.modules.edit.cancelEdit();for(var i=e.cells.length,n=0;n<i;n++)e.cells[0].delete();e.element.parentNode&&e.element.parentNode.removeChild(e.element),e.element=!1,e.contentElement=!1,e.titleElement=!1,e.groupElement=!1,e.parent.isGroup&&e.parent.removeChild(e),e.table.columnManager.deregisterColumn(e),e.table.options.virtualDomHoz&&e.table.vdomHoz.reinitialize(!0),t()})},ra.prototype.columnRendered=function(){this.titleFormatterRendered&&this.titleFormatterRendered()},ra.prototype.validate=function(){var e=[];return this.cells.forEach(function(t){t.validate()||e.push(t.getComponent())}),!e.length||e},ra.prototype.generateCell=function(e){var t=new Na(this,e);return this.cells.push(t),t},ra.prototype.nextColumn=function(){var e=this.table.columnManager.findColumnIndex(this);return e>-1&&this._nextVisibleColumn(e+1)},ra.prototype._nextVisibleColumn=function(e){var t=this.table.columnManager.getColumnByIndex(e);return!t||t.visible?t:this._nextVisibleColumn(e+1)},ra.prototype.prevColumn=function(){var e=this.table.columnManager.findColumnIndex(this);return e>-1&&this._prevVisibleColumn(e-1)},ra.prototype._prevVisibleColumn=function(e){var t=this.table.columnManager.getColumnByIndex(e);return!t||t.visible?t:this._prevVisibleColumn(e-1)},ra.prototype.reinitializeWidth=function(e){this.widthFixed=!1,void 0===this.definition.width||e||this.setWidth(this.definition.width),this.table.modExists("filter")&&this.table.modules.filter.hideHeaderFilterElements(),this.fitToData(),this.table.modExists("filter")&&this.table.modules.filter.showHeaderFilterElements()},ra.prototype.fitToData=function(){this.widthFixed||(this.element.style.width="",this.cells.forEach(function(e){e.clearWidth()}));var e=this.element.offsetWidth;this.width&&this.widthFixed||(this.cells.forEach(function(t){var o=t.getWidth();o>e&&(e=o)}),e&&this.setWidthActual(e+1))},ra.prototype.updateDefinition=function(e){var t=this;return new Promise(function(o,i){var n;t.isGroup?(console.warn("Column Update Error - The updateDefinition function is only available on ungrouped columns"),i("Column Update Error - The updateDefinition function is only available on columns, not column groups")):t.parent.isGroup?(console.warn("Column Update Error - The updateDefinition function is only available on ungrouped columns"),i("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(n=Object.assign({},t.getDefinition()),n=Object.assign(n,e),t.table.columnManager.addColumn(n,!1,t).then(function(e){n.field==t.field&&(t.field=!1),t.delete().then(function(){o(e.getComponent())}).catch(function(e){i(e)})}).catch(function(e){i(e)}))})},ra.prototype.deleteCell=function(e){var t=this.cells.indexOf(e);t>-1&&this.cells.splice(t,1)},ra.prototype.defaultOptionList=["title","field","columns","visible","align","hozAlign","vertAlign","width","minWidth","maxWidth","widthGrow","widthShrink","resizable","frozen","responsive","tooltip","cssClass","rowHandle","hideInHtml","print","htmlOutput","sorter","sorterParams","formatter","formatterParams","variableHeight","editable","editor","editorParams","validator","mutator","mutatorParams","mutatorData","mutatorDataParams","mutatorEdit","mutatorEditParams","mutatorClipboard","mutatorClipboardParams","accessor","accessorParams","accessorData","accessorDataParams","accessorDownload","accessorDownloadParams","accessorClipboard","accessorClipboardParams","accessorPrint","accessorPrintParams","accessorHtmlOutput","accessorHtmlOutputParams","clipboard","download","downloadTitle","topCalc","topCalcParams","topCalcFormatter","topCalcFormatterParams","bottomCalc","bottomCalcParams","bottomCalcFormatter","bottomCalcFormatterParams","cellClick","cellDblClick","cellContext","cellTap","cellDblTap","cellTapHold","cellMouseEnter","cellMouseLeave","cellMouseOver","cellMouseOut","cellMouseMove","cellEditing","cellEdited","cellEditCancelled","headerSort","headerSortStartingDir","headerSortTristate","headerClick","headerDblClick","headerContext","headerTap","headerDblTap","headerTapHold","headerTooltip","headerVertical","headerHozAlign","editableTitle","titleFormatter","titleFormatterParams","headerFilter","headerFilterPlaceholder","headerFilterParams","headerFilterEmptyCheck","headerFilterFunc","headerFilterFuncParams","headerFilterLiveFilter","print","headerContextMenu","headerMenu","contextMenu","clickMenu","formatterPrint","formatterPrintParams","formatterClipboard","formatterClipboardParams","formatterHtmlOutput","formatterHtmlOutputParams","titlePrint","titleClipboard","titleHtmlOutput","titleDownload"],ra.prototype.getComponent=function(){return this.component||(this.component=new ab(this)),this.component};var qa=function(e){this.table=e,this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.columnManager=null,this.height=0,this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[],this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1};qa.prototype.createHolderElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-tableHolder"),e.setAttribute("tabindex",0),e},qa.prototype.createTableElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-table"),e},qa.prototype.getElement=function(){return this.element},qa.prototype.getTableElement=function(){return this.tableElement},qa.prototype.getRowPosition=function(e,t){return t?this.activeRows.indexOf(e):this.rows.indexOf(e)},qa.prototype.setColumnManager=function(e){this.columnManager=e},qa.prototype.initialize=function(){var e=this;e.setRenderMode(),e.element.appendChild(e.tableElement),e.firstRender=!0,e.element.addEventListener("scroll",function(){var t=e.element.scrollLeft;e.scrollLeft!=t&&(e.columnManager.scrollHorizontal(t),e.table.options.groupBy&&e.table.modules.groupRows.scrollHeaders(t),e.table.modExists("columnCalcs")&&e.table.modules.columnCalcs.scrollHorizontal(t),e.table.options.scrollHorizontal(t)),e.scrollLeft=t}),"virtual"===this.renderMode&&e.element.addEventListener("scroll",function(){var t=e.element.scrollTop,o=e.scrollTop>t;e.scrollTop!=t?(e.scrollTop=t,e.scrollVertical(o),"scroll"==e.table.options.ajaxProgressiveLoad&&e.table.modules.ajax.nextPage(e.element.scrollHeight-e.element.clientHeight-t),e.table.options.scrollVertical(t)):e.scrollTop=t})},qa.prototype.findRow=function(e){var t=this;return"object"!=(void 0===e?"undefined":pa(e))?null!=e&&(t.rows.find(function(o){return o.data[t.table.options.index]==e})||!1):e instanceof ya?e:e instanceof Oa?e._getSelf()||!1:"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&t.rows.find(function(t){return t.getElement()===e})||!1},qa.prototype.getRowFromDataObject=function(e){return this.rows.find(function(t){return t.data===e})||!1},qa.prototype.getRowFromPosition=function(e,t){return t?this.activeRows[e]:this.rows[e]},qa.prototype.scrollToRow=function(e,t,o){var i,n=this,a=this.getDisplayRows().indexOf(e),r=e.getElement(),s=0;return new Promise(function(e,l){if(a>-1){if(void 0===t&&(t=n.table.options.scrollToRowPosition),void 0===o&&(o=n.table.options.scrollToRowIfVisible),"nearest"===t)switch(n.renderMode){case"classic":i=ea.prototype.helpers.elOffset(r).top,t=Math.abs(n.element.scrollTop-i)>Math.abs(n.element.scrollTop+n.element.clientHeight-i)?"bottom":"top";break;case"virtual":t=Math.abs(n.vDomTop-a)>Math.abs(n.vDomBottom-a)?"bottom":"top";}if(!o&&ea.prototype.helpers.elVisible(r)&&(s=ea.prototype.helpers.elOffset(r).top-ea.prototype.helpers.elOffset(n.element).top)>0&&s<n.element.clientHeight-r.offsetHeight)return!1;switch(n.renderMode){case"classic":n.element.scrollTop=ea.prototype.helpers.elOffset(r).top-ea.prototype.helpers.elOffset(n.element).top+n.element.scrollTop;break;case"virtual":n._virtualRenderFill(a,!0);}switch(t){case"middle":case"center":n.element.scrollHeight-n.element.scrollTop==n.element.clientHeight?n.element.scrollTop=n.element.scrollTop+(r.offsetTop-n.element.scrollTop)-(n.element.scrollHeight-r.offsetTop)/2:n.element.scrollTop=n.element.scrollTop-n.element.clientHeight/2;break;case"bottom":n.element.scrollHeight-n.element.scrollTop==n.element.clientHeight?n.element.scrollTop=n.element.scrollTop-(n.element.scrollHeight-r.offsetTop)+r.offsetHeight:n.element.scrollTop=n.element.scrollTop-n.element.clientHeight+r.offsetHeight;}e()}else console.warn("Scroll Error - Row not visible"),l("Scroll Error - Row not visible")})},qa.prototype.setData=function(e,t,o){var i=this,n=this;return new Promise(function(a,r){t&&i.getDisplayRows().length?n.table.options.pagination?n._setDataActual(e,!0):i.reRenderInPosition(function(){n._setDataActual(e)}):(i.table.options.autoColumns&&o&&i.table.columnManager.generateColumnsFromRowData(e),i.resetScroll(),i._setDataActual(e)),a()})},qa.prototype._setDataActual=function(e,t){var o=this;o.table.options.dataLoading.call(this.table,e),this._wipeElements(),this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.clear(),Array.isArray(e)?(this.table.modExists("selectRow")&&this.table.modules.selectRow.clearSelectionData(),this.table.options.reactiveData&&this.table.modExists("reactiveData",!0)&&this.table.modules.reactiveData.watchData(e),e.forEach(function(e,t){if(e&&"object"===(void 0===e?"undefined":pa(e))){var i=new ya(e,o);o.rows.push(i)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",e)}),o.refreshActiveData(!1,!1,t),o.table.options.dataLoaded.call(this.table,e)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",void 0===e?"undefined":pa(e),"\nData:     ",e)},qa.prototype._wipeElements=function(){this.rows.forEach(function(e){e.wipe()}),this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.wipe(),this.rows=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.adjustTableSize()},qa.prototype.deleteRow=function(e,t){var o=this.rows.indexOf(e),i=this.activeRows.indexOf(e);i>-1&&this.activeRows.splice(i,1),o>-1&&this.rows.splice(o,1),this.setActiveRows(this.activeRows),this.displayRowIterator(function(t){var o=t.indexOf(e);o>-1&&t.splice(o,1)}),t||this.reRenderInPosition(),this.regenerateRowNumbers(),this.table.options.rowDeleted.call(this.table,e.getComponent()),this.table.options.dataChanged&&this.table.options.dataChanged.call(this.table,this.getData()),this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.updateGroupRows(!0):this.table.options.pagination&&this.table.modExists("page")?this.refreshActiveData(!1,!1,!0):this.table.options.pagination&&this.table.modExists("page")&&this.refreshActiveData("page")},qa.prototype.addRow=function(e,t,o,i){var n=this.addRowActual(e,t,o,i);return this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("rowAdd",n,{data:e,pos:t,index:o}),n},qa.prototype.addRows=function(e,t,o){var i=this,n=this,a=[];return new Promise(function(r,s){t=i.findAddRowPos(t),Array.isArray(e)||(e=[e]),e.length-1,(void 0===o&&t||void 0!==o&&!t)&&e.reverse(),e.forEach(function(e,i){var r=n.addRow(e,t,o,!0);a.push(r)}),i.table.options.groupBy&&i.table.modExists("groupRows")?i.table.modules.groupRows.updateGroupRows(!0):i.table.options.pagination&&i.table.modExists("page")?i.refreshActiveData(!1,!1,!0):i.reRenderInPosition(),i.table.modExists("columnCalcs")&&i.table.modules.columnCalcs.recalc(i.table.rowManager.activeRows),i.regenerateRowNumbers(),r(a)})},qa.prototype.findAddRowPos=function(e){return void 0===e&&(e=this.table.options.addRowPos),"pos"===e&&(e=!0),"bottom"===e&&(e=!1),e},qa.prototype.addRowActual=function(e,t,o,i){var n,a,r=e instanceof ya?e:new ya(e||{},this),s=this.findAddRowPos(t),l=-1;if(!o&&this.table.options.pagination&&"page"==this.table.options.paginationAddRow&&(a=this.getDisplayRows(),s?a.length?o=a[0]:this.activeRows.length&&(o=this.activeRows[this.activeRows.length-1],s=!1):a.length&&(o=a[a.length-1],s=!(a.length<this.table.modules.page.getPageSize()))),void 0!==o&&(o=this.findRow(o)),this.table.options.groupBy&&this.table.modExists("groupRows")){this.table.modules.groupRows.assignRowToGroup(r);var u=r.getGroup().rows;u.length>1&&(!o||o&&-1==u.indexOf(o)?s?u[0]!==r&&(o=u[0],this._moveRowInArray(r.getGroup().rows,r,o,!s)):u[u.length-1]!==r&&(o=u[u.length-1],this._moveRowInArray(r.getGroup().rows,r,o,!s)):this._moveRowInArray(r.getGroup().rows,r,o,!s))}return o&&(l=this.rows.indexOf(o)),o&&l>-1?(n=this.activeRows.indexOf(o),this.displayRowIterator(function(e){var t=e.indexOf(o);t>-1&&e.splice(s?t:t+1,0,r)}),n>-1&&this.activeRows.splice(s?n:n+1,0,r),this.rows.splice(s?l:l+1,0,r)):s?(this.displayRowIterator(function(e){e.unshift(r)}),this.activeRows.unshift(r),this.rows.unshift(r)):(this.displayRowIterator(function(e){e.push(r)}),this.activeRows.push(r),this.rows.push(r)),this.setActiveRows(this.activeRows),this.table.options.rowAdded.call(this.table,r.getComponent()),this.table.options.dataChanged&&this.table.options.dataChanged.call(this.table,this.getData()),i||this.reRenderInPosition(),r},qa.prototype.moveRow=function(e,t,o){this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("rowMove",e,{posFrom:this.getRowPosition(e),posTo:this.getRowPosition(t),to:t,after:o}),this.moveRowActual(e,t,o),this.regenerateRowNumbers(),this.table.options.rowMoved.call(this.table,e.getComponent())},qa.prototype.moveRowActual=function(e,t,o){var i=this;if(this._moveRowInArray(this.rows,e,t,o),this._moveRowInArray(this.activeRows,e,t,o),this.displayRowIterator(function(n){i._moveRowInArray(n,e,t,o)}),this.table.options.groupBy&&this.table.modExists("groupRows")){!o&&t instanceof Ha&&(t=this.table.rowManager.prevDisplayRow(e)||t);var n=t.getGroup(),a=e.getGroup();n===a?this._moveRowInArray(n.rows,e,t,o):(a&&a.removeRow(e),n.insertRow(e,t,o))}},qa.prototype._moveRowInArray=function(e,t,o,i){var n,a,r;if(t!==o&&((n=e.indexOf(t))>-1&&(e.splice(n,1),(a=e.indexOf(o))>-1?i?e.splice(a+1,0,t):e.splice(a,0,t):e.splice(n,0,t)),e===this.getDisplayRows())){r=a>n?a:n+1;for(var s=n<a?n:a;s<=r;s++)e[s]&&this.styleRow(e[s],s)}},qa.prototype.clearData=function(){this.setData([])},qa.prototype.getRowIndex=function(e){return this.findRowIndex(e,this.rows)},qa.prototype.getDisplayRowIndex=function(e){var t=this.getDisplayRows().indexOf(e);return t>-1&&t},qa.prototype.nextDisplayRow=function(e,t){var o=this.getDisplayRowIndex(e),i=!1;return!1!==o&&o<this.displayRowsCount-1&&(i=this.getDisplayRows()[o+1]),!i||i instanceof ya&&"row"==i.type?i:this.nextDisplayRow(i,t)},qa.prototype.prevDisplayRow=function(e,t){var o=this.getDisplayRowIndex(e),i=!1;return o&&(i=this.getDisplayRows()[o-1]),!t||!i||i instanceof ya&&"row"==i.type?i:this.prevDisplayRow(i,t)},qa.prototype.findRowIndex=function(e,t){var o;return!!((e=this.findRow(e))&&(o=t.indexOf(e))>-1)&&o},qa.prototype.getData=function(e,t){var o=[];return this.getRows(e).forEach(function(e){"row"==e.type&&o.push(e.getData(t||"data"))}),o},qa.prototype.getComponents=function(e){var t=[];return this.getRows(e).forEach(function(e){t.push(e.getComponent())}),t},qa.prototype.getDataCount=function(e){return this.getRows(e).length},qa.prototype._genRemoteRequest=function(){var e=this,t=this.table,o=t.options,i={};if(t.modExists("page")){if(o.ajaxSorting){var n=this.table.modules.sort.getSort();n.forEach(function(e){delete e.column}),i[this.table.modules.page.paginationDataSentNames.sorters]=n}if(o.ajaxFiltering){var a=this.table.modules.filter.getFilters(!0,!0);i[this.table.modules.page.paginationDataSentNames.filters]=a}this.table.modules.ajax.setParams(i,!0)}t.modules.ajax.sendRequest().then(function(t){e._setDataActual(t,!0)}).catch(function(e){})},qa.prototype.filterRefresh=function(){var e=this.table,t=e.options,o=this.scrollLeft;t.ajaxFiltering?"remote"==t.pagination&&e.modExists("page")?(e.modules.page.reset(!0),e.modules.page.setPage(1).then(function(){}).catch(function(){})):t.ajaxProgressiveLoad?e.modules.ajax.loadData().then(function(){}).catch(function(){}):this._genRemoteRequest():this.refreshActiveData("filter"),this.scrollHorizontal(o)},qa.prototype.sorterRefresh=function(e){var t=this.table,o=this.table.options,i=this.scrollLeft;o.ajaxSorting?("remote"==o.pagination||o.progressiveLoad)&&t.modExists("page")?(t.modules.page.reset(!0),t.modules.page.setPage(1).then(function(){}).catch(function(){})):o.ajaxProgressiveLoad?t.modules.ajax.loadData().then(function(){}).catch(function(){}):this._genRemoteRequest():this.refreshActiveData(e?"filter":"sort"),this.scrollHorizontal(i)},qa.prototype.scrollHorizontal=function(e){this.scrollLeft=e,this.element.scrollLeft=e,this.table.options.groupBy&&this.table.modules.groupRows.scrollHeaders(e),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.scrollHorizontal(e)},qa.prototype.refreshActiveData=function(e,t,o){var i,n=this.table,a=["all","filter","sort","display","freeze","group","tree","page"];if(this.redrawBlock)(!this.redrawBlockRestoreConfig||a.indexOf(e)<a.indexOf(this.redrawBlockRestoreConfig.stage))&&(this.redrawBlockRestoreConfig={stage:e,skipStage:t,renderInPosition:o});else{switch(this.table.modExists("edit")&&this.table.modules.edit.cancelEdit(),e||(e="all"),n.options.selectable&&!n.options.selectablePersistence&&n.modExists("selectRow")&&n.modules.selectRow.deselectRows(),e){case"all":case"filter":t?t=!1:n.modExists("filter")?this.setActiveRows(n.modules.filter.filter(this.rows)):this.setActiveRows(this.rows.slice(0));case"sort":t?t=!1:n.modExists("sort")&&n.modules.sort.sort(this.activeRows),this.regenerateRowNumbers();case"display":this.resetDisplayRows();case"freeze":t?t=!1:this.table.modExists("frozenRows")&&n.modules.frozenRows.isFrozen()&&(n.modules.frozenRows.getDisplayIndex()||n.modules.frozenRows.setDisplayIndex(this.getNextDisplayIndex()),i=n.modules.frozenRows.getDisplayIndex(),!0!==(i=this.setDisplayRows(n.modules.frozenRows.getRows(this.getDisplayRows(i-1)),i))&&n.modules.frozenRows.setDisplayIndex(i));case"group":t?t=!1:n.options.groupBy&&n.modExists("groupRows")&&(n.modules.groupRows.getDisplayIndex()||n.modules.groupRows.setDisplayIndex(this.getNextDisplayIndex()),i=n.modules.groupRows.getDisplayIndex(),!0!==(i=this.setDisplayRows(n.modules.groupRows.getRows(this.getDisplayRows(i-1)),i))&&n.modules.groupRows.setDisplayIndex(i));case"tree":t?t=!1:n.options.dataTree&&n.modExists("dataTree")&&(n.modules.dataTree.getDisplayIndex()||n.modules.dataTree.setDisplayIndex(this.getNextDisplayIndex()),i=n.modules.dataTree.getDisplayIndex(),!0!==(i=this.setDisplayRows(n.modules.dataTree.getRows(this.getDisplayRows(i-1)),i))&&n.modules.dataTree.setDisplayIndex(i)),n.options.pagination&&n.modExists("page")&&!o&&"local"==n.modules.page.getMode()&&n.modules.page.reset();case"page":t?t=!1:n.options.pagination&&n.modExists("page")&&(n.modules.page.getDisplayIndex()||n.modules.page.setDisplayIndex(this.getNextDisplayIndex()),i=n.modules.page.getDisplayIndex(),"local"==n.modules.page.getMode()&&n.modules.page.setMaxRows(this.getDisplayRows(i-1).length),!0!==(i=this.setDisplayRows(n.modules.page.getRows(this.getDisplayRows(i-1)),i))&&n.modules.page.setDisplayIndex(i));}ea.prototype.helpers.elVisible(this.element)&&(o?this.reRenderInPosition():("all"===e&&this.table.options.virtualDomHoz&&this.table.vdomHoz.dataChange(),this.renderTable(),n.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0))),n.modExists("columnCalcs")&&n.modules.columnCalcs.recalc(this.activeRows)}},qa.prototype.regenerateRowNumbers=function(){var e=this;this.rowNumColumn&&this.activeRows.forEach(function(t){var o=t.getCell(e.rowNumColumn);o&&o._generateContents()})},qa.prototype.setActiveRows=function(e){this.activeRows=e,this.activeRowsCount=this.activeRows.length},qa.prototype.resetDisplayRows=function(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length,this.table.modExists("frozenRows")&&this.table.modules.frozenRows.setDisplayIndex(0),this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.setDisplayIndex(0),this.table.options.pagination&&this.table.modExists("page")&&this.table.modules.page.setDisplayIndex(0)},qa.prototype.getNextDisplayIndex=function(){return this.displayRows.length},qa.prototype.setDisplayRows=function(e,t){var o=!0;return t&&void 0!==this.displayRows[t]?(this.displayRows[t]=e,o=!0):(this.displayRows.push(e),o=t=this.displayRows.length-1),t==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),o},qa.prototype.getDisplayRows=function(e){return void 0===e?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[e]||[]},qa.prototype.getVisibleRows=function(e){var t=this.element.scrollTop,o=this.element.clientHeight+t,i=!1,n=0,a=0,r=this.getDisplayRows();if(e){this.getDisplayRows();for(var s=this.vDomTop;s<=this.vDomBottom;s++)if(r[s])if(i){if(!(o-r[s].getElement().offsetTop>=0))break;a=s}else if(t-r[s].getElement().offsetTop>=0)n=s;else{if(i=!0,!(o-r[s].getElement().offsetTop>=0))break;a=s}}else n=this.vDomTop,a=this.vDomBottom;return r.slice(n,a+1)},qa.prototype.displayRowIterator=function(e){this.displayRows.forEach(e),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length},qa.prototype.getRows=function(e){var t;switch(e){case"active":t=this.activeRows;break;case"display":t=this.table.rowManager.getDisplayRows();break;case"visible":t=this.getVisibleRows(!0);break;case"selected":t=this.table.modules.selectRow.selectedRows;break;default:t=this.rows;}return t},qa.prototype.reRenderInPosition=function(e){if("virtual"==this.getRenderMode()){if(this.redrawBlock)e?e():this.redrawBlockRederInPosition=!0;else{for(var t=this.element.scrollTop,o=!1,i=!1,n=this.scrollLeft,a=this.getDisplayRows(),r=this.vDomTop;r<=this.vDomBottom;r++)if(a[r]){var s=t-a[r].getElement().offsetTop;if(!(!1===i||Math.abs(s)<i))break;i=s,o=r}e&&e(),this._virtualRenderFill(!1===o?this.displayRowsCount-1:o,!0,i||0),this.scrollHorizontal(n)}}else this.renderTable(),e&&e()},qa.prototype.setRenderMode=function(){this.table.options.virtualDom?(this.renderMode="virtual",this.table.element.clientHeight||this.table.options.height?this.fixedHeight=!0:this.fixedHeight=!1):this.renderMode="classic"},qa.prototype.getRenderMode=function(){return this.renderMode},qa.prototype.renderTable=function(){switch(this.table.options.renderStarted.call(this.table),this.element.scrollTop=0,this.renderMode){case"classic":this._simpleRender();break;case"virtual":this._virtualRenderFill();}this.firstRender&&(this.displayRowsCount?(this.firstRender=!1,this.table.modules.layout.layout()):this.renderEmptyScroll()),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout(),this.displayRowsCount||this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px"),this.table.options.renderComplete.call(this.table)},qa.prototype._simpleRender=function(){this._clearVirtualDom(),this.displayRowsCount?this.checkClassicModeGroupHeaderWidth():this.renderEmptyScroll()},qa.prototype.checkClassicModeGroupHeaderWidth=function(){var e=this,t=this.tableElement,o=!0;e.getDisplayRows().forEach(function(i,n){e.styleRow(i,n),t.appendChild(i.getElement()),i.initialize(!0),"group"!==i.type&&(o=!1)}),t.style.minWidth=o?e.table.columnManager.getWidth()+"px":""},qa.prototype.renderEmptyScroll=function(){this.table.options.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"},qa.prototype._clearVirtualDom=function(){var e=this.tableElement;for(this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder);e.firstChild;)e.removeChild(e.firstChild);e.style.paddingTop="",e.style.paddingBottom="",e.style.minWidth="",e.style.minHeight="",e.style.display="",e.style.visibility="",this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0},qa.prototype.styleRow=function(e,t){var o=e.getElement();t%2?(o.classList.add("tabulator-row-even"),o.classList.remove("tabulator-row-odd")):(o.classList.add("tabulator-row-odd"),o.classList.remove("tabulator-row-even"))},qa.prototype._virtualRenderFill=function(e,t,o){var i=this.tableElement,n=this.element,a=0,r=0,s=0,l=0,u=!0,c=this.getDisplayRows();if(o=o||0,e=e||0){for(;i.firstChild;)i.removeChild(i.firstChild);var d=(this.displayRowsCount-e+1)*this.vDomRowHeight;d<this.height&&(e-=Math.ceil((this.height-d)/this.vDomRowHeight))<0&&(e=0),e-=a=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),e)}else this._clearVirtualDom();if(this.displayRowsCount&&ea.prototype.helpers.elVisible(this.element)){for(this.vDomTop=e,this.vDomBottom=e-1;(r<=this.height+this.vDomWindowBuffer||l<this.vDomWindowMinTotalRows)&&this.vDomBottom<this.displayRowsCount-1;){var h,p=this.vDomBottom+1,m=c[p];this.styleRow(m,p),i.appendChild(m.getElement()),m.initialize(),m.heightInitialized||m.normalizeHeight(!0),h=m.getHeight(),l<a?s+=h:r+=h,h>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*h),"group"!==m.type&&(u=!1),this.vDomBottom++,l++}e?(this.vDomTopPad=t?this.vDomRowHeight*this.vDomTop+o:this.scrollTop-s,this.vDomBottomPad=this.vDomBottom==this.displayRowsCount-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-r-s,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((r+s)/l),this.vDomBottomPad=this.vDomRowHeight*(this.displayRowsCount-this.vDomBottom-1),this.vDomScrollHeight=s+r+this.vDomBottomPad-this.height),i.style.paddingTop=this.vDomTopPad+"px",i.style.paddingBottom=this.vDomBottomPad+"px",t&&(this.scrollTop=this.vDomTopPad+s+o-(this.element.scrollWidth>this.element.clientWidth?this.element.offsetHeight-this.element.clientHeight:0)),this.scrollTop=Math.min(this.scrollTop,this.element.scrollHeight-this.height),this.element.scrollWidth>this.element.offsetWidth&&t&&(this.scrollTop+=this.element.offsetHeight-this.element.clientHeight),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,n.scrollTop=this.scrollTop,i.style.minWidth=u?this.table.columnManager.getWidth()+"px":"",this.table.options.groupBy&&"fitDataFill"!=this.table.modules.layout.getMode()&&this.displayRowsCount==this.table.modules.groupRows.countGroups()&&(this.tableElement.style.minWidth=this.table.columnManager.getWidth())}else this.renderEmptyScroll();this.fixedHeight||this.adjustTableSize()},qa.prototype.scrollVertical=function(e){var t=this.scrollTop-this.vDomScrollPosTop,o=this.scrollTop-this.vDomScrollPosBottom,i=2*this.vDomWindowBuffer;if(-t>i||o>i){var n=this.scrollLeft;this._virtualRenderFill(Math.floor(this.element.scrollTop/this.element.scrollHeight*this.displayRowsCount)),this.scrollHorizontal(n)}else e?(t<0&&this._addTopRow(-t),o<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(-o):this.vDomScrollPosBottom=this.scrollTop)):(t>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(t):this.vDomScrollPosTop=this.scrollTop),o>=0&&this._addBottomRow(o))},qa.prototype._addTopRow=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this.tableElement,i=this.getDisplayRows();if(this.vDomTop){var n=this.vDomTop-1,a=i[n],r=a.getHeight()||this.vDomRowHeight;e>=r&&(this.styleRow(a,n),o.insertBefore(a.getElement(),o.firstChild),a.initialized&&a.heightInitialized||(this.vDomTopNewRows.push(a),a.heightInitialized||a.clearCellHeight()),a.initialize(),this.vDomTopPad-=r,this.vDomTopPad<0&&(this.vDomTopPad=n*this.vDomRowHeight),n||(this.vDomTopPad=0),o.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=r,this.vDomTop--),e=-(this.scrollTop-this.vDomScrollPosTop),a.getHeight()>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*a.getHeight()),t<this.vDomMaxRenderChain&&this.vDomTop&&e>=(i[this.vDomTop-1].getHeight()||this.vDomRowHeight)?this._addTopRow(e,t+1):this._quickNormalizeRowHeight(this.vDomTopNewRows)}},qa.prototype._removeTopRow=function(e){var t=this.tableElement,o=this.getDisplayRows()[this.vDomTop],i=o.getHeight()||this.vDomRowHeight;if(e>=i){var n=o.getElement();n.parentNode.removeChild(n),this.vDomTopPad+=i,t.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?i:i+this.vDomWindowBuffer,this.vDomTop++,e=this.scrollTop-this.vDomScrollPosTop,this._removeTopRow(e)}},qa.prototype._addBottomRow=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this.tableElement,i=this.getDisplayRows();if(this.vDomBottom<this.displayRowsCount-1){var n=this.vDomBottom+1,a=i[n],r=a.getHeight()||this.vDomRowHeight;e>=r&&(this.styleRow(a,n),o.appendChild(a.getElement()),a.initialized&&a.heightInitialized||(this.vDomBottomNewRows.push(a),a.heightInitialized||a.clearCellHeight()),a.initialize(),this.vDomBottomPad-=r,(this.vDomBottomPad<0||n==this.displayRowsCount-1)&&(this.vDomBottomPad=0),o.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=r,this.vDomBottom++),e=this.scrollTop-this.vDomScrollPosBottom,a.getHeight()>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*a.getHeight()),t<this.vDomMaxRenderChain&&this.vDomBottom<this.displayRowsCount-1&&e>=(i[this.vDomBottom+1].getHeight()||this.vDomRowHeight)?this._addBottomRow(e,t+1):this._quickNormalizeRowHeight(this.vDomBottomNewRows)}},qa.prototype._removeBottomRow=function(e){var t=this.tableElement,o=this.getDisplayRows()[this.vDomBottom],i=o.getHeight()||this.vDomRowHeight;if(e>=i){var n=o.getElement();n.parentNode&&n.parentNode.removeChild(n),this.vDomBottomPad+=i,this.vDomBottomPad<0&&(this.vDomBottomPad=0),t.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=i,this.vDomBottom--,e=-(this.scrollTop-this.vDomScrollPosBottom),this._removeBottomRow(e)}},qa.prototype._quickNormalizeRowHeight=function(e){e.forEach(function(e){e.calcHeight()}),e.forEach(function(e){e.setCellHeight()}),e.length=0},qa.prototype.normalizeHeight=function(){this.activeRows.forEach(function(e){e.normalizeHeight()})},qa.prototype.adjustTableSize=function(){var e,t=this.element.clientHeight;if("virtual"===this.renderMode){var o=Math.floor(this.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));this.fixedHeight?(this.element.style.minHeight="calc(100% - "+o+"px)",this.element.style.height="calc(100% - "+o+"px)",this.element.style.maxHeight="calc(100% - "+o+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-o+"px",this.element.scrollTop=this.scrollTop),this.height=this.element.clientHeight,this.vDomWindowBuffer=this.table.options.virtualDomBuffer||this.height,this.fixedHeight||t==this.element.clientHeight||((e=this.table.modExists("resizeTable"))&&!this.table.modules.resizeTable.autoResize||!e)&&this.redraw()}},qa.prototype.reinitialize=function(){this.rows.forEach(function(e){e.reinitialize(!0)})},qa.prototype.blockRedraw=function(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1},qa.prototype.restoreRedraw=function(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.stage,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1},qa.prototype.redraw=function(e){var t=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,e?this.renderTable():("classic"==this.renderMode?this.table.options.groupBy?this.refreshActiveData("group",!1,!1):this._simpleRender():(this.reRenderInPosition(),this.scrollHorizontal(t)),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))},qa.prototype.resetScroll=function(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var e=document.createEvent("Event");e.initEvent("scroll",!1,!0),this.element.dispatchEvent(e)}else this.element.dispatchEvent(new Event("scroll"))};var Bb=function(e){this.table=e,this.element=this.table.rowManager.tableElement,this.holderEl=this.table.rowManager.element,this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.window=200,this.initialized=!1,this.columns=[],this.compatabilityCheck()&&this.initialize()};Bb.prototype.compatabilityCheck=function(){var e=this.table.options,t=!0;return"fitDataTable"==e.layout&&(console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode"),t=!1),e.responsiveLayout&&(console.warn("Horizontal Vitrual DOM is not compatible with responsive columns"),t=!1),this.table.rtl&&(console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction"),t=!1),e.columns&&e.columns.find(function(e){return e.frozen})&&(console.warn("Horizontal Vitrual DOM is not compatible with frozen columns"),t=!1),t||(e.virtualDomHoz=!1),t},Bb.prototype.initialize=function(){var e=this;this.holderEl.addEventListener("scroll",function(){var t=e.holderEl.scrollLeft;e.scrollLeft!=t&&(e.scrollLeft=t,e.scroll(t-(e.vDomScrollPosLeft+e.window)))})},Bb.prototype.deinitialize=function(){this.initialized=!1},Bb.prototype.clear=function(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0},Bb.prototype.dataChange=function(){var e,t,o=!1,i=0,n=0;if("fitData"===this.table.options.layout){if(this.table.columnManager.columnsByIndex.forEach(function(e){!e.definition.width&&e.visible&&(o=!0)}),o&&o&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.holderEl.clientWidth+this.window,e=this.table.options.groupBy?this.table.modules.groupRows.getGroups(!1)[0].getRows(!1)[0]:this.table.rowManager.getDisplayRows()[0])){t=e.getElement(),e.generateCells(),this.element.appendChild(t);for(n=0;n<e.cells.length;n++){var a=e.cells[n];if(t.appendChild(a.getElement()),a.column.reinitializeWidth(),(i+=a.column.getWidth())>this.vDomScrollPosRight)break}for(t.parentNode.removeChild(t),this.fitDataColAvg=Math.floor(i/(n+1));n<this.table.columnManager.columnsByIndex.length;n++)this.table.columnManager.columnsByIndex[n].setWidth(this.fitDataColAvg);this.reinitialize(!1,!0)}}else"fitColumns"===this.table.options.layout&&(this.table.modules.layout.layout(),this.table.vdomHoz.reinitialize(!1,!0))},Bb.prototype.fitDataLayoutOverride=function(){for(var e=this.leftCol;e<=this.rightCol;e++)this.columns[e].reinitializeWidth()},Bb.prototype.reinitialize=function(e,t){var o=this,i={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol};if(!e||this.initialized){this.clear(),this.scrollLeft=this.holderEl.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.window,this.vDomScrollPosRight=this.scrollLeft+this.holderEl.clientWidth+this.window;var n=0;this.table.columnManager.columnsByIndex.forEach(function(e){var t={};if(e.visible){var i=e.getWidth();t.leftPos=n,t.rightPos=n+i,n+i>o.vDomScrollPosLeft&&n<o.vDomScrollPosRight?(-1==o.leftCol&&(o.leftCol=o.columns.length,o.vDomPadLeft=n),o.rightCol=o.columns.length):-1!==o.leftCol&&(o.vDomPadRight+=i),o.columns.push(e),e.modules.vdomHoz=t,n+=i}}),this.element.style.paddingLeft=this.vDomPadLeft+"px",this.element.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,t||e&&!this.reinitChanged(i)||this.renitializeRows(),this.holderEl.scrollLeft=this.scrollLeft}},Bb.prototype.reinitChanged=function(e){var t=this,o=!0;return e.cols.length!==this.columns.length||e.leftCol!==this.leftCol||e.rightCol!==this.rightCol||(e.cols.forEach(function(e,i){e!==t.columns[i]&&(o=!1)}),!o)},Bb.prototype.renitializeRows=function(){var e=this;this.table.rowManager.getVisibleRows().forEach(function(t){e.reinitializeRow(t,!0)})},Bb.prototype.scroll=function(e){this.vDomScrollPosLeft+=e,this.vDomScrollPosRight+=e,e>.8*this.holderEl.clientWidth?this.reinitialize():e>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())},Bb.prototype.colPositionAdjust=function(e,t,o){for(var i=e;i<t;i++){var n=this.columns[i];n.modules.vdomHoz.leftPos-=o,n.modules.vdomHoz.rightPos-=o}},Bb.prototype.addColRight=function(){var e,t,o=this.columns[this.rightCol+1];o&&o.modules.vdomHoz.leftPos<=this.vDomScrollPosRight&&(this.table.rowManager.getVisibleRows().forEach(function(e){if("group"!==e.type){var t=e.getCell(o);e.getElement().appendChild(t.getElement()),t.cellRendered()}}),this.fitDataColAvg&&(e=o.getWidth())===this.fitDataColAvg&&(o.reinitializeWidth(),(t=e-o.getWidth())&&(o.modules.vdomHoz.rightPos-=t,this.colPositionAdjust(this.rightCol+1,this.columns.length,t))),this.rightCol++,this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=o.getWidth(),this.element.style.paddingRight=this.vDomPadRight+"px",this.addColRight())},Bb.prototype.addColLeft=function(){var e=this.columns[this.leftCol-1];e&&e.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(function(t){if("group"!==t.type){var o=t.getCell(e);t.getElement().prepend(o.getElement()),o.cellRendered()}}),this.leftCol?this.vDomPadLeft-=e.getWidth():this.vDomPadLeft=0,this.element.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol--,this.addColLeft())},Bb.prototype.removeColRight=function(e){var t;(e=this.columns[this.rightCol])&&e.modules.vdomHoz.leftPos>this.vDomScrollPosRight&&(t=this.table.rowManager.getVisibleRows(),e.modules.vdomHoz.visible=!1,t.forEach(function(t){if("group"!==t.type){var o=t.getCell(e);t.getElement().removeChild(o.getElement())}}),this.vDomPadRight+=e.getWidth(),this.element.style.paddingRight=this.vDomPadRight+"px",this.rightCol--,this.removeColRight())},Bb.prototype.removeColLeft=function(){var e=this.columns[this.leftCol];e&&e.modules.vdomHoz.rightPos<this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(function(t){if("group"!==t.type){var o=t.getCell(e);t.getElement().removeChild(o.getElement())}}),this.vDomPadLeft+=e.getWidth(),this.element.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol++,this.removeColLeft())},Bb.prototype.initializeRow=function(e){if("group"!==e.type){e.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(var t=this.leftCol;t<=this.rightCol;t++){var o=this.columns[t];if(o&&o.visible){var i=e.getCell(o);e.getElement().appendChild(i.getElement()),i.cellRendered()}}}},Bb.prototype.reinitializeRow=function(e,t){if("group"!==e.type&&(t||!e.modules.vdomHoz||e.modules.vdomHoz.leftCol!==this.leftCol||e.modules.vdomHoz.rightCol!==this.rightCol)){for(var o=e.getElement();o.firstChild;)o.removeChild(o.firstChild);this.initializeRow(e)}};var Oa=function(e){this._row=e};Oa.prototype.getData=function(e){return this._row.getData(e)},Oa.prototype.getElement=function(){return this._row.getElement()},Oa.prototype.getCells=function(){var e=[];return this._row.getCells().forEach(function(t){e.push(t.getComponent())}),e},Oa.prototype.getCell=function(e){var t=this._row.getCell(e);return!!t&&t.getComponent()},Oa.prototype.getIndex=function(){return this._row.getData("data")[this._row.table.options.index]},Oa.prototype.getPosition=function(e){return this._row.table.rowManager.getRowPosition(this._row,e)},Oa.prototype.delete=function(){return this._row.delete()},Oa.prototype.scrollTo=function(){return this._row.table.rowManager.scrollToRow(this._row)},Oa.prototype.pageTo=function(){if(this._row.table.modExists("page",!0))return this._row.table.modules.page.setPageToRow(this._row)},Oa.prototype.move=function(e,t){this._row.moveToRow(e,t)},Oa.prototype.update=function(e){return this._row.updateData(e)},Oa.prototype.normalizeHeight=function(){this._row.normalizeHeight(!0)},Oa.prototype.select=function(){this._row.table.modules.selectRow.selectRows(this._row)},Oa.prototype.deselect=function(){this._row.table.modules.selectRow.deselectRows(this._row)},Oa.prototype.toggleSelect=function(){this._row.table.modules.selectRow.toggleRow(this._row)},Oa.prototype.isSelected=function(){return this._row.table.modules.selectRow.isRowSelected(this._row)},Oa.prototype._getSelf=function(){return this._row},Oa.prototype.validate=function(){return this._row.validate()},Oa.prototype.freeze=function(){this._row.table.modExists("frozenRows",!0)&&this._row.table.modules.frozenRows.freezeRow(this._row)},Oa.prototype.unfreeze=function(){this._row.table.modExists("frozenRows",!0)&&this._row.table.modules.frozenRows.unfreezeRow(this._row)},Oa.prototype.isFrozen=function(){return!!this._row.table.modExists("frozenRows",!0)&&this._row.table.modules.frozenRows.rows.indexOf(this._row)>-1},Oa.prototype.treeCollapse=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.collapseRow(this._row)},Oa.prototype.treeExpand=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.expandRow(this._row)},Oa.prototype.treeToggle=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.toggleRow(this._row)},Oa.prototype.getTreeParent=function(){return!!this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.getTreeParent(this._row)},Oa.prototype.getTreeChildren=function(){return!!this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.getTreeChildren(this._row,!0)},Oa.prototype.addTreeChild=function(e,t,o){return!!this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.addTreeChildRow(this._row,e,t,o)},Oa.prototype.reformat=function(){return this._row.reinitialize()},Oa.prototype.getGroup=function(){return this._row.getGroup().getComponent()},Oa.prototype.getTable=function(){return this._row.table},Oa.prototype.getNextRow=function(){var e=this._row.nextRow();return e?e.getComponent():e},Oa.prototype.getPrevRow=function(){var e=this._row.prevRow();return e?e.getComponent():e};var ya=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"row";this.table=t.table,this.parent=t,this.data={},this.type=o,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.component=null,this.created=!1,this.setData(e)};ya.prototype.create=function(){this.created||(this.created=!0,this.generateElement())},ya.prototype.createElement=function(){var e=document.createElement("div");e.classList.add("tabulator-row"),e.setAttribute("role","row"),this.element=e},ya.prototype.getElement=function(){return this.create(),this.element},ya.prototype.detachElement=function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)},ya.prototype.generateElement=function(){var e,t,o,i=this;this.createElement(),!1!==i.table.options.selectable&&i.table.modExists("selectRow")&&i.table.modules.selectRow.initializeRow(this),!1!==i.table.options.movableRows&&i.table.modExists("moveRow")&&i.table.modules.moveRow.initializeRow(this),!1!==i.table.options.dataTree&&i.table.modExists("dataTree")&&i.table.modules.dataTree.initializeRow(this),"collapse"===i.table.options.responsiveLayout&&i.table.modExists("responsiveLayout")&&i.table.modules.responsiveLayout.initializeRow(this),(i.table.options.rowContextMenu||i.table.options.rowClickMenu)&&this.table.modExists("menu")&&i.table.modules.menu.initializeRow(this),i.table.options.rowClick&&i.element.addEventListener("click",function(e){i.table.options.rowClick(e,i.getComponent())}),i.table.options.rowDblClick&&i.element.addEventListener("dblclick",function(e){i.table.options.rowDblClick(e,i.getComponent())}),i.table.options.rowContext&&i.element.addEventListener("contextmenu",function(e){i.table.options.rowContext(e,i.getComponent())}),i.table.options.rowMouseEnter&&i.element.addEventListener("mouseenter",function(e){i.table.options.rowMouseEnter(e,i.getComponent())}),i.table.options.rowMouseLeave&&i.element.addEventListener("mouseleave",function(e){i.table.options.rowMouseLeave(e,i.getComponent())}),i.table.options.rowMouseOver&&i.element.addEventListener("mouseover",function(e){i.table.options.rowMouseOver(e,i.getComponent())}),i.table.options.rowMouseOut&&i.element.addEventListener("mouseout",function(e){i.table.options.rowMouseOut(e,i.getComponent())}),i.table.options.rowMouseMove&&i.element.addEventListener("mousemove",function(e){i.table.options.rowMouseMove(e,i.getComponent())}),i.table.options.rowTap&&(o=!1,i.element.addEventListener("touchstart",function(e){o=!0},{passive:!0}),i.element.addEventListener("touchend",function(e){o&&i.table.options.rowTap(e,i.getComponent()),o=!1})),i.table.options.rowDblTap&&(e=null,i.element.addEventListener("touchend",function(t){e?(clearTimeout(e),e=null,i.table.options.rowDblTap(t,i.getComponent())):e=setTimeout(function(){clearTimeout(e),e=null},300)})),i.table.options.rowTapHold&&(t=null,i.element.addEventListener("touchstart",function(e){clearTimeout(t),t=setTimeout(function(){clearTimeout(t),t=null,o=!1,i.table.options.rowTapHold(e,i.getComponent())},1e3)},{passive:!0}),i.element.addEventListener("touchend",function(e){clearTimeout(t),t=null}))},ya.prototype.generateCells=function(){this.cells=this.table.columnManager.generateCells(this)},ya.prototype.initialize=function(e){var t=this;if(this.create(),!this.initialized||e){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layoutRow(this),this.generateCells(),this.table.options.virtualDomHoz&&this.table.vdomHoz.initialized?this.table.vdomHoz.initializeRow(this):this.cells.forEach(function(e){t.element.appendChild(e.getElement()),e.cellRendered()}),e&&this.normalizeHeight(),this.table.options.dataTree&&this.table.modExists("dataTree")&&this.table.modules.dataTree.layoutRow(this),"collapse"===this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout")&&this.table.modules.responsiveLayout.layoutRow(this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.table.options.resizableRows&&this.table.modExists("resizeRows")&&this.table.modules.resizeRows.initializeRow(this),this.initialized=!0}else this.table.options.virtualDomHoz&&this.table.vdomHoz.reinitializeRow(this)},ya.prototype.reinitializeHeight=function(){this.heightInitialized=!1,this.element&&null!==this.element.offsetParent&&this.normalizeHeight(!0)},ya.prototype.reinitialize=function(e){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&null!==this.element.offsetParent&&this.initialize(!0),this.table.options.dataTree&&this.table.modExists("dataTree",!0)&&this.table.modules.dataTree.getTreeChildren(this,!1,!0).forEach(function(e){e.reinitialize(!0)})},ya.prototype.calcHeight=function(e){var t=0,o=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(e){var o=e.getHeight();o>t&&(t=o)}),this.height=e?Math.max(t,o):this.manualHeight?this.height:Math.max(t,o),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight},ya.prototype.setCellHeight=function(){this.cells.forEach(function(e){e.setHeight()}),this.heightInitialized=!0},ya.prototype.clearCellHeight=function(){this.cells.forEach(function(e){e.clearHeight()})},ya.prototype.normalizeHeight=function(e){e&&this.clearCellHeight(),this.calcHeight(e),this.setCellHeight()},ya.prototype.setHeight=function(e,t){(this.height!=e||t)&&(this.manualHeight=!0,this.height=e,this.heightStyled=e?e+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)},ya.prototype.getHeight=function(){return this.outerHeight},ya.prototype.getWidth=function(){return this.element.offsetWidth},ya.prototype.deleteCell=function(e){var t=this.cells.indexOf(e);t>-1&&this.cells.splice(t,1)},ya.prototype.setData=function(e){this.table.modExists("mutator")&&(e=this.table.modules.mutator.transformRow(e,"data")),this.data=e,this.table.options.reactiveData&&this.table.modExists("reactiveData",!0)&&this.table.modules.reactiveData.watchRow(this)},ya.prototype.updateData=function(e){var t,o=this,i=this.element&&ea.prototype.helpers.elVisible(this.element),n={};return new Promise(function(a,r){for(var s in"string"==typeof e&&(e=JSON.parse(e)),o.table.options.reactiveData&&o.table.modExists("reactiveData",!0)&&o.table.modules.reactiveData.block(),o.table.modExists("mutator")?(n=Object.assign(n,o.data),n=Object.assign(n,e),t=o.table.modules.mutator.transformRow(n,"data",e)):t=e,t)o.data[s]=t[s];for(var s in o.table.options.reactiveData&&o.table.modExists("reactiveData",!0)&&o.table.modules.reactiveData.unblock(),e){o.table.columnManager.getColumnsByFieldRoot(s).forEach(function(e){var n=o.getCell(e.getField());if(n){var a=e.getFieldValue(t);n.getValue()!=a&&(n.setValueProcessData(a),i&&n.cellRendered())}})}o.table.options.groupUpdateOnCellEdit&&o.table.options.groupBy&&o.table.modExists("groupRows")&&o.table.modules.groupRows.reassignRowToGroup(o.row),i?(o.normalizeHeight(!0),o.table.options.rowFormatter&&o.table.options.rowFormatter(o.getComponent())):(o.initialized=!1,o.height=0,o.heightStyled=""),!1!==o.table.options.dataTree&&o.table.modExists("dataTree")&&o.table.modules.dataTree.redrawNeeded(e)&&(o.table.modules.dataTree.initializeRow(o),i&&(o.table.modules.dataTree.layoutRow(o),o.table.rowManager.refreshActiveData("tree",!1,!0))),o.table.options.rowUpdated.call(o.table,o.getComponent()),o.table.options.dataChanged&&o.table.options.dataChanged.call(o.table,o.table.rowManager.getData()),a()})},ya.prototype.getData=function(e){return e&&this.table.modExists("accessor")?this.table.modules.accessor.transformRow(this,e):this.data},ya.prototype.getCell=function(e){return e=this.table.columnManager.findColumn(e),this.cells.find(function(t){return t.column===e})},ya.prototype.getCellIndex=function(e){return this.cells.findIndex(function(t){return t===e})},ya.prototype.findNextEditableCell=function(e){var t=!1;if(e<this.cells.length-1)for(var o=e+1;o<this.cells.length;o++){var i=this.cells[o];if(i.column.modules.edit&&ea.prototype.helpers.elVisible(i.getElement())){var n=!0;if("function"==typeof i.column.modules.edit.check&&(n=i.column.modules.edit.check(i.getComponent())),n){t=i;break}}}return t},ya.prototype.findPrevEditableCell=function(e){var t=!1;if(e>0)for(var o=e-1;o>=0;o--){var i=this.cells[o],n=!0;if(i.column.modules.edit&&ea.prototype.helpers.elVisible(i.getElement())&&("function"==typeof i.column.modules.edit.check&&(n=i.column.modules.edit.check(i.getComponent())),n)){t=i;break}}return t},ya.prototype.getCells=function(){return this.cells},ya.prototype.nextRow=function(){return this.table.rowManager.nextDisplayRow(this,!0)||!1},ya.prototype.prevRow=function(){return this.table.rowManager.prevDisplayRow(this,!0)||!1},ya.prototype.moveToRow=function(e,t){var o=this.table.rowManager.findRow(e);o?(this.table.rowManager.moveRowActual(this,o,!t),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",e)},ya.prototype.validate=function(){var e=[];return this.cells.forEach(function(t){t.validate()||e.push(t.getComponent())}),!e.length||e},ya.prototype.delete=function(){var e=this;return new Promise(function(t,o){var i,n;e.table.options.history&&e.table.modExists("history")&&(e.table.options.groupBy&&e.table.modExists("groupRows")?(i=(n=e.getGroup().rows).indexOf(e))&&(i=n[i-1]):(i=e.table.rowManager.getRowIndex(e))&&(i=e.table.rowManager.rows[i-1]),e.table.modules.history.action("rowDelete",e,{data:e.getData(),pos:!i,index:i})),e.deleteActual(),t()})},ya.prototype.deleteActual=function(e){this.table.rowManager.getRowIndex(this);this.detatchModules(),this.table.options.reactiveData&&this.table.modExists("reactiveData",!0),this.modules.group&&this.modules.group.removeRow(this),this.table.rowManager.deleteRow(this,e),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.table.options.dataTree&&this.table.modExists("dataTree",!0)&&this.table.modules.dataTree.rowDelete(this),this.table.modExists("columnCalcs")&&(this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.columnCalcs.recalcRowGroup(this):this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows))},ya.prototype.detatchModules=function(){this.table.modExists("selectRow")&&this.table.modules.selectRow._deselectRow(this,!0),this.table.modExists("edit")&&this.table.modules.edit.currentCell.row===this&&this.table.modules.edit.cancelEdit(),this.table.modExists("frozenRows")&&this.table.modules.frozenRows.detachRow(this)},ya.prototype.deleteCells=function(){for(var e=this.cells.length,t=0;t<e;t++)this.cells[0].delete()},ya.prototype.wipe=function(){if(this.detatchModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}},ya.prototype.getGroup=function(){return this.modules.group||!1},ya.prototype.getComponent=function(){return this.component||(this.component=new Oa(this)),this.component};var kb=function(e){this._cell=e};kb.prototype.getValue=function(){return this._cell.getValue()},kb.prototype.getOldValue=function(){return this._cell.getOldValue()},kb.prototype.getInitialValue=function(){return this._cell.initialValue},kb.prototype.getElement=function(){return this._cell.getElement()},kb.prototype.getRow=function(){return this._cell.row.getComponent()},kb.prototype.getData=function(){return this._cell.row.getData()},kb.prototype.getField=function(){return this._cell.column.getField()},kb.prototype.getColumn=function(){return this._cell.column.getComponent()},kb.prototype.setValue=function(e,t){void 0===t&&(t=!0),this._cell.setValue(e,t)},kb.prototype.restoreOldValue=function(){this._cell.setValueActual(this._cell.getOldValue())},kb.prototype.restoreInitialValue=function(){this._cell.setValueActual(this._cell.initialValue)},kb.prototype.edit=function(e){return this._cell.edit(e)},kb.prototype.cancelEdit=function(){this._cell.cancelEdit()},kb.prototype.isEdited=function(){return!!this._cell.modules.edit&&this._cell.modules.edit.edited},kb.prototype.clearEdited=function(){self.table.modExists("edit",!0)&&this._cell.table.modules.edit.clearEdited(this._cell)},kb.prototype.isValid=function(){return!this._cell.modules.validate||!this._cell.modules.validate.invalid},kb.prototype.validate=function(){return this._cell.validate()},kb.prototype.clearValidation=function(){this._cell.table.modExists("validate",!0)&&this._cell.table.modules.validate.clearValidation(this._cell)},kb.prototype.nav=function(){return this._cell.nav()},kb.prototype.checkHeight=function(){this._cell.checkHeight()},kb.prototype.getTable=function(){return this._cell.table},kb.prototype._getSelf=function(){return this._cell};var Na=function(e,t){this.table=e.table,this.column=e,this.row=t,this.element=null,this.value=null,this.initialValue,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()};Na.prototype.build=function(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value},Na.prototype.generateElement=function(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element},Na.prototype._configureCell=function(){var e=this,t=e.column.cellEvents,o=e.element,i=this.column.getField();(o.style.textAlign=e.column.hozAlign,e.column.vertAlign&&(o.style.display="inline-flex",o.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[e.column.vertAlign]||"",e.column.hozAlign&&(o.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[e.column.hozAlign]||"")),i&&o.setAttribute("tabulator-field",i),e.column.definition.cssClass)&&e.column.definition.cssClass.split(" ").forEach(function(e){o.classList.add(e)});"hover"===this.table.options.tooltipGenerationMode&&o.addEventListener("mouseenter",function(t){e._generateTooltip()}),e._bindClickEvents(t),e._bindTouchEvents(t),e._bindMouseEvents(t),e.column.modules.edit&&e.table.modules.edit.bindEditor(e),e.column.definition.rowHandle&&!1!==e.table.options.movableRows&&e.table.modExists("moveRow")&&e.table.modules.moveRow.initializeCell(e),e.column.visible||e.hide()},Na.prototype._bindClickEvents=function(e){var t=this,o=t.element;(e.cellClick||t.table.options.cellClick)&&o.addEventListener("click",function(o){var i=t.getComponent();e.cellClick&&e.cellClick.call(t.table,o,i),t.table.options.cellClick&&t.table.options.cellClick.call(t.table,o,i)}),e.cellDblClick||this.table.options.cellDblClick?o.addEventListener("dblclick",function(o){var i=t.getComponent();e.cellDblClick&&e.cellDblClick.call(t.table,o,i),t.table.options.cellDblClick&&t.table.options.cellDblClick.call(t.table,o,i)}):o.addEventListener("dblclick",function(e){if(!t.table.modExists("edit")||t.table.modules.edit.currentCell!==t){e.preventDefault();try{if(document.selection)(o=document.body.createTextRange()).moveToElementText(t.element),o.select();else if(window.getSelection){var o;(o=document.createRange()).selectNode(t.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(o)}}catch(e){}}}),(e.cellContext||this.table.options.cellContext)&&o.addEventListener("contextmenu",function(o){var i=t.getComponent();e.cellContext&&e.cellContext.call(t.table,o,i),t.table.options.cellContext&&t.table.options.cellContext.call(t.table,o,i)})},Na.prototype._bindMouseEvents=function(e){var t=this,o=t.element;(e.cellMouseEnter||t.table.options.cellMouseEnter)&&o.addEventListener("mouseenter",function(o){var i=t.getComponent();e.cellMouseEnter&&e.cellMouseEnter.call(t.table,o,i),t.table.options.cellMouseEnter&&t.table.options.cellMouseEnter.call(t.table,o,i)}),(e.cellMouseLeave||t.table.options.cellMouseLeave)&&o.addEventListener("mouseleave",function(o){var i=t.getComponent();e.cellMouseLeave&&e.cellMouseLeave.call(t.table,o,i),t.table.options.cellMouseLeave&&t.table.options.cellMouseLeave.call(t.table,o,i)}),(e.cellMouseOver||t.table.options.cellMouseOver)&&o.addEventListener("mouseover",function(o){var i=t.getComponent();e.cellMouseOver&&e.cellMouseOver.call(t.table,o,i),t.table.options.cellMouseOver&&t.table.options.cellMouseOver.call(t.table,o,i)}),(e.cellMouseOut||t.table.options.cellMouseOut)&&o.addEventListener("mouseout",function(o){var i=t.getComponent();e.cellMouseOut&&e.cellMouseOut.call(t.table,o,i),t.table.options.cellMouseOut&&t.table.options.cellMouseOut.call(t.table,o,i)}),(e.cellMouseMove||t.table.options.cellMouseMove)&&o.addEventListener("mousemove",function(o){var i=t.getComponent();e.cellMouseMove&&e.cellMouseMove.call(t.table,o,i),t.table.options.cellMouseMove&&t.table.options.cellMouseMove.call(t.table,o,i)})},Na.prototype._bindTouchEvents=function(e){var t,o,i,n=this,a=n.element;(e.cellTap||this.table.options.cellTap)&&(i=!1,a.addEventListener("touchstart",function(e){i=!0},{passive:!0}),a.addEventListener("touchend",function(t){if(i){var o=n.getComponent();e.cellTap&&e.cellTap.call(n.table,t,o),n.table.options.cellTap&&n.table.options.cellTap.call(n.table,t,o)}i=!1})),(e.cellDblTap||this.table.options.cellDblTap)&&(t=null,a.addEventListener("touchend",function(o){if(t){clearTimeout(t),t=null;var i=n.getComponent();e.cellDblTap&&e.cellDblTap.call(n.table,o,i),n.table.options.cellDblTap&&n.table.options.cellDblTap.call(n.table,o,i)}else t=setTimeout(function(){clearTimeout(t),t=null},300)})),(e.cellTapHold||this.table.options.cellTapHold)&&(o=null,a.addEventListener("touchstart",function(t){clearTimeout(o),o=setTimeout(function(){clearTimeout(o),o=null,i=!1;var a=n.getComponent();e.cellTapHold&&e.cellTapHold.call(n.table,t,a),n.table.options.cellTapHold&&n.table.options.cellTapHold.call(n.table,t,a)},1e3)},{passive:!0}),a.addEventListener("touchend",function(e){clearTimeout(o),o=null}))},Na.prototype._generateContents=function(){var e;switch(void 0===(e=this.table.modExists("format")?this.table.modules.format.formatValue(this):this.element.innerHTML=this.value)?"undefined":pa(e)){case"object":if(e instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(e)}else this.element.innerHTML="",null!=e&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",e);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=e;}},Na.prototype.cellRendered=function(){this.table.modExists("format")&&this.table.modules.format.cellRendered&&this.table.modules.format.cellRendered(this)},Na.prototype._generateTooltip=function(){var e=this.column.tooltip;e?(!0===e?e=this.value:"function"==typeof e&&!1===(e=e(this.getComponent()))&&(e=""),void 0===e&&(e=""),this.element.setAttribute("title",e)):this.element.setAttribute("title","")},Na.prototype.getElement=function(e){return this.loaded||(this.loaded=!0,e||this.layoutElement()),this.element},Na.prototype.getValue=function(){return this.value},Na.prototype.getOldValue=function(){return this.oldValue},Na.prototype.setValue=function(e,t){var o;this.setValueProcessData(e,t)&&(this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("cellEdit",this,{oldValue:this.oldValue,newValue:this.value}),o=this.getComponent(),this.column.cellEvents.cellEdited&&this.column.cellEvents.cellEdited.call(this.table,o),this.table.options.groupUpdateOnCellEdit&&this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.reassignRowToGroup(this.row),this.cellRendered(),this.table.options.cellEdited.call(this.table,o),this.table.options.dataChanged&&this.table.options.dataChanged.call(this.table,this.table.rowManager.getData()))},Na.prototype.setValueProcessData=function(e,t){var o=!1;return this.value!=e&&(o=!0,t&&this.column.modules.mutate&&(e=this.table.modules.mutator.transformCell(this,e))),this.setValueActual(e),o&&this.table.modExists("columnCalcs")&&(this.column.definition.topCalc||this.column.definition.bottomCalc)&&(this.table.options.groupBy&&this.table.modExists("groupRows")?("table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs||this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),"table"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.recalcRowGroup(this.row)):this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows)),o},Na.prototype.setValueActual=function(e){this.oldValue=this.value,this.value=e,this.table.options.reactiveData&&this.table.modExists("reactiveData")&&this.table.modules.reactiveData.block(),this.column.setFieldValue(this.row.data,e),this.table.options.reactiveData&&this.table.modExists("reactiveData")&&this.table.modules.reactiveData.unblock(),this.loaded&&this.layoutElement()},Na.prototype.layoutElement=function(){this._generateContents(),this._generateTooltip(),this.table.options.resizableColumns&&this.table.modExists("resizeColumns")&&"row"===this.row.type&&this.table.modules.resizeColumns.initializeColumn("cell",this.column,this.element),(this.column.definition.contextMenu||this.column.definition.clickMenu)&&this.table.modExists("menu")&&this.table.modules.menu.initializeCell(this),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layoutElement(this.element,this.column)},Na.prototype.setWidth=function(){this.width=this.column.width,this.element.style.width=this.column.widthStyled},Na.prototype.clearWidth=function(){this.width="",this.element.style.width=""},Na.prototype.getWidth=function(){return this.width||this.element.offsetWidth},Na.prototype.setMinWidth=function(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled},Na.prototype.setMaxWidth=function(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled},Na.prototype.checkHeight=function(){this.row.reinitializeHeight()},Na.prototype.clearHeight=function(){this.element.style.height="",this.height=null},Na.prototype.setHeight=function(){this.height=this.row.height,this.element.style.height=this.row.heightStyled},Na.prototype.getHeight=function(){return this.height||this.element.offsetHeight},Na.prototype.show=function(){this.element.style.display=this.column.vertAlign?"inline-flex":""},Na.prototype.hide=function(){this.element.style.display="none"},Na.prototype.edit=function(e){if(this.table.modExists("edit",!0))return this.table.modules.edit.editCell(this,e)},Na.prototype.cancelEdit=function(){if(this.table.modExists("edit",!0)){var e=this.table.modules.edit.getCurrentCell();e&&e._getSelf()===this?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}},Na.prototype.validate=function(){return!this.column.modules.validate||!this.table.modExists("validate",!0)||!0===this.table.modules.validate.validate(this.column.modules.validate,this,this.getValue())},Na.prototype.delete=function(){!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.modules.validate&&this.modules.validate.invalid&&this.table.modules.validate.clearValidation(this),this.modules.edit&&this.modules.edit.edited&&this.table.modules.edit.clearEdited(this),this.table.options.history&&this.table.modules.history.clearComponentHistory(this),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}},Na.prototype.nav=function(){var e=this,t=!1,o=this.row.getCellIndex(this);return{next:function(){var t,o=this.right();return!!o||!(!(t=e.table.rowManager.nextDisplayRow(e.row,!0))||!(o=t.findNextEditableCell(-1)))&&(o.edit(),!0)},prev:function(){var t,o=this.left();return!!o||!(!(t=e.table.rowManager.prevDisplayRow(e.row,!0))||!(o=t.findPrevEditableCell(t.cells.length)))&&(o.edit(),!0)},left:function(){return!!(t=e.row.findPrevEditableCell(o))&&(t.edit(),!0)},right:function(){return!!(t=e.row.findNextEditableCell(o))&&(t.edit(),!0)},up:function(){var t=e.table.rowManager.prevDisplayRow(e.row,!0);t&&t.cells[o].edit()},down:function(){var t=e.table.rowManager.nextDisplayRow(e.row,!0);t&&t.cells[o].edit()}}},Na.prototype.getIndex=function(){this.row.getCellIndex(this)},Na.prototype.getComponent=function(){return this.component||(this.component=new kb(this)),this.component};var oc=function(e){this.table=e,this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this._initialize()};oc.prototype.createElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-footer"),e},oc.prototype._initialize=function(e){if(this.table.options.footerElement)switch(pa(this.table.options.footerElement)){case"string":"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement));break;default:this.element=this.table.options.footerElement;}},oc.prototype.getElement=function(){return this.element},oc.prototype.append=function(e,t){this.activate(t),this.element.appendChild(e),this.table.rowManager.adjustTableSize()},oc.prototype.prepend=function(e,t){this.activate(t),this.element.insertBefore(e,this.element.firstChild),this.table.rowManager.adjustTableSize()},oc.prototype.remove=function(e){e.parentNode.removeChild(e),this.deactivate()},oc.prototype.deactivate=function(e){this.element.firstChild&&!e||(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)},oc.prototype.activate=function(e){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),e&&this.links.push(e)},oc.prototype.redraw=function(){this.links.forEach(function(e){e.footerRedraw()})};var ea=function e(t,o){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.vdomHoz=null,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.modules={},this.initializeElement(t)&&(this.initializeOptions(o||{}),this._create()),e.prototype.comms.register(this)};ea.prototype.defaultOptions={height:!1,minHeight:!1,maxHeight:!1,layout:"fitData",layoutColumnsOnNewData:!1,columnMinWidth:40,columnMaxWidth:!1,columnHeaderVertAlign:"top",columnVertAlign:!1,resizableColumns:!0,resizableRows:!1,autoResize:!0,columns:[],cellHozAlign:"",cellVertAlign:"",headerHozAlign:"",data:[],autoColumns:!1,autoColumnsDefinitions:!1,reactiveData:!1,nestedFieldSeparator:".",tooltips:!1,tooltipsHeader:!1,tooltipGenerationMode:"load",initialSort:!1,initialFilter:!1,initialHeaderFilter:!1,columnHeaderSortMulti:!0,sortOrderReverse:!1,headerSort:!0,headerSortTristate:!1,headerSortElement:"<div class='tabulator-arrow'></div>",footerElement:!1,index:"id",textDirection:"auto",keybindings:[],tabEndNewRow:!1,invalidOptionWarnings:!0,clipboard:!1,clipboardCopyStyled:!0,clipboardCopyConfig:!1,clipboardCopyFormatter:!1,clipboardCopyRowRange:"active",clipboardPasteParser:"table",clipboardPasteAction:"insert",clipboardCopied:function(){},clipboardPasted:function(){},clipboardPasteError:function(){},downloadDataFormatter:!1,downloadReady:function(e,t){return t},downloadComplete:!1,downloadConfig:{},downloadRowRange:"active",dataTree:!1,dataTreeFilter:!0,dataTreeSort:!0,dataTreeElementColumn:!1,dataTreeBranchElement:!0,dataTreeChildIndent:9,dataTreeChildField:"_children",dataTreeCollapseElement:!1,dataTreeExpandElement:!1,dataTreeStartExpanded:!1,dataTreeRowExpanded:function(){},dataTreeRowCollapsed:function(){},dataTreeChildColumnCalcs:!1,dataTreeSelectPropagate:!1,printAsHtml:!1,printFormatter:!1,printHeader:!1,printFooter:!1,printCopyStyle:!0,printStyled:!0,printVisibleRows:!0,printRowRange:"visible",printConfig:{},addRowPos:"bottom",selectable:"highlight",selectableRangeMode:"drag",selectableRollingSelection:!0,selectablePersistence:!0,selectableCheck:function(e,t){return!0},headerFilterLiveFilterDelay:300,headerFilterPlaceholder:!1,headerVisible:!0,history:!1,locale:!1,langs:{},virtualDom:!0,virtualDomBuffer:0,virtualDomHoz:!1,persistentLayout:!1,persistentSort:!1,persistentFilter:!1,persistenceID:"",persistenceMode:!0,persistenceReaderFunc:!1,persistenceWriterFunc:!1,persistence:!1,responsiveLayout:!1,responsiveLayoutCollapseStartOpen:!0,responsiveLayoutCollapseUseFormatters:!0,responsiveLayoutCollapseFormatter:!1,pagination:!1,paginationSize:!1,paginationInitialPage:1,paginationButtonCount:5,paginationSizeSelector:!1,paginationElement:!1,paginationDataSent:{},paginationDataReceived:{},paginationAddRow:"page",ajaxURL:!1,ajaxURLGenerator:!1,ajaxParams:{},ajaxConfig:"get",ajaxContentType:"form",ajaxRequestFunc:!1,ajaxLoader:!0,ajaxLoaderLoading:!1,ajaxLoaderError:!1,ajaxFiltering:!1,ajaxSorting:!1,ajaxProgressiveLoad:!1,ajaxProgressiveLoadDelay:0,ajaxProgressiveLoadScrollMargin:0,groupBy:!1,groupStartOpen:!0,groupValues:!1,groupUpdateOnCellEdit:!1,groupHeader:!1,groupHeaderPrint:null,groupHeaderClipboard:null,groupHeaderHtmlOutput:null,groupHeaderDownload:null,htmlOutputConfig:!1,movableColumns:!1,movableRows:!1,movableRowsConnectedTables:!1,movableRowsConnectedElements:!1,movableRowsSender:!1,movableRowsReceiver:"insert",movableRowsSendingStart:function(){},movableRowsSent:function(){},movableRowsSentFailed:function(){},movableRowsSendingStop:function(){},movableRowsReceivingStart:function(){},movableRowsReceived:function(){},movableRowsReceivedFailed:function(){},movableRowsReceivingStop:function(){},movableRowsElementDrop:function(){},scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,tableBuilding:function(){},tableBuilt:function(){},renderStarted:function(){},renderComplete:function(){},rowClick:!1,rowDblClick:!1,rowContext:!1,rowTap:!1,rowDblTap:!1,rowTapHold:!1,rowMouseEnter:!1,rowMouseLeave:!1,rowMouseOver:!1,rowMouseOut:!1,rowMouseMove:!1,rowContextMenu:!1,rowClickMenu:!1,rowAdded:function(){},rowDeleted:function(){},rowMoved:function(){},rowUpdated:function(){},rowSelectionChanged:function(){},rowSelected:function(){},rowDeselected:function(){},rowResized:function(){},cellClick:!1,cellDblClick:!1,cellContext:!1,cellTap:!1,cellDblTap:!1,cellTapHold:!1,cellMouseEnter:!1,cellMouseLeave:!1,cellMouseOver:!1,cellMouseOut:!1,cellMouseMove:!1,cellEditing:function(){},cellEdited:function(){},cellEditCancelled:function(){},columnMoved:!1,columnResized:function(){},columnTitleChanged:function(){},columnVisibilityChanged:function(){},htmlImporting:function(){},htmlImported:function(){},dataLoading:function(){},dataLoaded:function(){},dataEdited:!1,dataChanged:!1,ajaxRequesting:function(){},ajaxResponse:!1,ajaxError:function(){},dataFiltering:!1,dataFiltered:!1,dataSorting:function(){},dataSorted:function(){},groupToggleElement:"arrow",groupClosedShowCalcs:!1,dataGrouping:function(){},dataGrouped:!1,groupVisibilityChanged:function(){},groupClick:!1,groupDblClick:!1,groupContext:!1,groupContextMenu:!1,groupClickMenu:!1,groupTap:!1,groupDblTap:!1,groupTapHold:!1,columnCalcs:!0,pageLoaded:function(){},localized:function(){},validationMode:"blocking",validationFailed:function(){},historyUndo:function(){},historyRedo:function(){},scrollHorizontal:function(){},scrollVertical:function(){}},ea.prototype.initializeOptions=function(e){if(!1!==e.invalidOptionWarnings)for(var t in e)void 0===this.defaultOptions[t]&&console.warn("Invalid table constructor option:",t);for(var t in this.defaultOptions)t in e?this.options[t]=e[t]:Array.isArray(this.defaultOptions[t])?this.options[t]=Object.assign([],this.defaultOptions[t]):"object"===pa(this.defaultOptions[t])&&null!==this.defaultOptions[t]?this.options[t]=Object.assign({},this.defaultOptions[t]):this.options[t]=this.defaultOptions[t]},ea.prototype.initializeElement=function(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement?(this.element=e,!0):"string"==typeof e?(this.element=document.querySelector(e),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",e),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",e),!1)},ea.prototype.rtlCheck=function(){var e=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if("rtl"!==e.direction)break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1;}},ea.prototype._mapDepricatedFunctionality=function(){(this.options.persistentLayout||this.options.persistentSort||this.options.persistentFilter)&&(this.options.persistence||(this.options.persistence={})),this.options.dataEdited&&(console.warn("DEPRECATION WARNING - dataEdited option has been deprecated, please use the dataChanged option instead"),this.options.dataChanged=this.options.dataEdited),this.options.downloadDataFormatter&&console.warn("DEPRECATION WARNING - downloadDataFormatter option has been deprecated"),void 0!==this.options.clipboardCopyHeader&&(this.options.columnHeaders=this.options.clipboardCopyHeader,console.warn("DEPRECATION WARNING - clipboardCopyHeader option has been deprecated, please use the columnHeaders property on the clipboardCopyConfig option")),!0!==this.options.printVisibleRows&&(console.warn("printVisibleRows option is deprecated, you should now use the printRowRange option"),this.options.persistence.printRowRange="active"),!0!==this.options.printCopyStyle&&(console.warn("printCopyStyle option is deprecated, you should now use the printStyled option"),this.options.persistence.printStyled=this.options.printCopyStyle),this.options.persistentLayout&&(console.warn("persistentLayout option is deprecated, you should now use the persistence option"),!0!==this.options.persistence&&void 0===this.options.persistence.columns&&(this.options.persistence.columns=!0)),this.options.persistentSort&&(console.warn("persistentSort option is deprecated, you should now use the persistence option"),!0!==this.options.persistence&&void 0===this.options.persistence.sort&&(this.options.persistence.sort=!0)),this.options.persistentFilter&&(console.warn("persistentFilter option is deprecated, you should now use the persistence option"),!0!==this.options.persistence&&void 0===this.options.persistence.filter&&(this.options.persistence.filter=!0)),this.options.columnVertAlign&&(console.warn("columnVertAlign option is deprecated, you should now use the columnHeaderVertAlign option"),this.options.columnHeaderVertAlign=this.options.columnVertAlign)},ea.prototype._clearSelection=function(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")},ea.prototype._create=function(){this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.bindModules(),this.rtlCheck(),"TABLE"===this.element.tagName&&this.modExists("htmlTableImport",!0)&&this.modules.htmlTableImport.parseTable(),this.columnManager=new Ma(this),this.rowManager=new qa(this),this.footerManager=new oc(this),this.columnManager.setRowManager(this.rowManager),this.rowManager.setColumnManager(this.columnManager),this.options.virtualDomHoz&&(this.vdomHoz=new Bb(this)),this._buildElement(),this._loadInitialData()},ea.prototype._clearObjectPointers=function(){this.options.columns=this.options.columns.slice(0),this.options.reactiveData||(this.options.data=this.options.data.slice(0))},ea.prototype._buildElement=function(){var e=this,t=this.element,o=this.modules,i=this.options;for(i.tableBuilding.call(this),t.classList.add("tabulator"),t.setAttribute("role","grid");t.firstChild;)t.removeChild(t.firstChild);for(var n in i.height&&(i.height=isNaN(i.height)?i.height:i.height+"px",t.style.height=i.height),!1!==i.minHeight&&(i.minHeight=isNaN(i.minHeight)?i.minHeight:i.minHeight+"px",t.style.minHeight=i.minHeight),!1!==i.maxHeight&&(i.maxHeight=isNaN(i.maxHeight)?i.maxHeight:i.maxHeight+"px",t.style.maxHeight=i.maxHeight),this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser(),this.modExists("layout",!0)&&o.layout.initialize(i.layout),o.localize.initialize(),!1!==i.headerFilterPlaceholder&&o.localize.setHeaderFilterPlaceholder(i.headerFilterPlaceholder),i.langs)o.localize.installLang(n,i.langs[n]);if(o.localize.setLocale(i.locale),"string"==typeof i.placeholder){var a=document.createElement("div");a.classList.add("tabulator-placeholder");var r=document.createElement("span");r.innerHTML=i.placeholder,a.appendChild(r),i.placeholder=a}if(t.appendChild(this.columnManager.getElement()),t.appendChild(this.rowManager.getElement()),i.footerElement&&this.footerManager.activate(),i.persistence&&this.modExists("persistence",!0)&&o.persistence.initialize(),i.movableRows&&this.modExists("moveRow")&&o.moveRow.initialize(),i.autoColumns&&this.options.data&&this.columnManager.generateColumnsFromRowData(this.options.data),this.modExists("columnCalcs")&&o.columnCalcs.initialize(),this.columnManager.setColumns(i.columns),i.dataTree&&this.modExists("dataTree",!0)&&o.dataTree.initialize(),this.modExists("frozenRows")&&this.modules.frozenRows.initialize(),(i.persistence&&this.modExists("persistence",!0)&&o.persistence.config.sort||i.initialSort)&&this.modExists("sort",!0)){var s=[];i.persistence&&this.modExists("persistence",!0)&&o.persistence.config.sort?!1===(s=o.persistence.load("sort"))&&i.initialSort&&(s=i.initialSort):i.initialSort&&(s=i.initialSort),o.sort.setSort(s)}if((i.persistence&&this.modExists("persistence",!0)&&o.persistence.config.filter||i.initialFilter)&&this.modExists("filter",!0)){var l=[];i.persistence&&this.modExists("persistence",!0)&&o.persistence.config.filter?!1===(l=o.persistence.load("filter"))&&i.initialFilter&&(l=i.initialFilter):i.initialFilter&&(l=i.initialFilter),o.filter.setFilter(l)}i.initialHeaderFilter&&this.modExists("filter",!0)&&i.initialHeaderFilter.forEach(function(t){var i=e.columnManager.findColumn(t.field);if(!i)return console.warn("Column Filter Error - No matching column found:",t.field),!1;o.filter.setHeaderFilterValue(i,t.value)}),this.modExists("ajax")&&o.ajax.initialize(),i.pagination&&this.modExists("page",!0)&&o.page.initialize(),i.groupBy&&this.modExists("groupRows",!0)&&o.groupRows.initialize(),this.modExists("keybindings")&&o.keybindings.initialize(),this.modExists("selectRow")&&o.selectRow.clearSelectionData(!0),i.autoResize&&this.modExists("resizeTable")&&o.resizeTable.initialize(),this.modExists("clipboard")&&o.clipboard.initialize(),i.printAsHtml&&this.modExists("print")&&o.print.initialize(),i.tableBuilt.call(this)},ea.prototype._loadInitialData=function(){var e=this;if(e.options.pagination&&e.modExists("page")){if(e.modules.page.reset(!0,!0),"local"==e.options.pagination){if(e.options.data.length)e.rowManager.setData(e.options.data,!1,!0);else{if((e.options.ajaxURL||e.options.ajaxURLGenerator)&&e.modExists("ajax"))return void e.modules.ajax.loadData(!1,!0).then(function(){}).catch(function(){e.options.paginationInitialPage&&e.modules.page.setPage(e.options.paginationInitialPage)});e.rowManager.setData(e.options.data,!1,!0)}e.options.paginationInitialPage&&e.modules.page.setPage(e.options.paginationInitialPage)}else e.options.ajaxURL?e.modules.page.setPage(e.options.paginationInitialPage).then(function(){}).catch(function(){}):e.rowManager.setData([],!1,!0);}else e.options.data.length?e.rowManager.setData(e.options.data):(e.options.ajaxURL||e.options.ajaxURLGenerator)&&e.modExists("ajax")?e.modules.ajax.loadData(!1,!0).then(function(){}).catch(function(){}):e.rowManager.setData(e.options.data,!1,!0)},ea.prototype.destroy=function(){var e=this.element;for(ea.prototype.comms.deregister(this),this.options.reactiveData&&this.modExists("reactiveData",!0)&&this.modules.reactiveData.unwatchData(),this.rowManager.rows.forEach(function(e){e.wipe()}),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[],this.options.autoResize&&this.modExists("resizeTable")&&this.modules.resizeTable.clearBindings(),this.modExists("keybindings")&&this.modules.keybindings.clearBindings();e.firstChild;)e.removeChild(e.firstChild);e.classList.remove("tabulator")},ea.prototype._detectBrowser=function(){var e=navigator.userAgent||navigator.vendor||window.opera;e.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):e.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):e.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))},ea.prototype.blockRedraw=function(){return this.rowManager.blockRedraw()},ea.prototype.restoreRedraw=function(){return this.rowManager.restoreRedraw()},ea.prototype.setDataFromLocalFile=function(e){var t=this;return new Promise(function(o,i){var n=document.createElement("input");n.type="file",n.accept=e||".json,application/json",n.addEventListener("change",function(e){var a,r=n.files[0],s=new FileReader;s.readAsText(r),s.onload=function(e){try{a=JSON.parse(s.result)}catch(e){return console.warn("File Load Error - File contents is invalid JSON",e),void i(e)}t.setData(a).then(function(e){o(e)}).catch(function(e){o(e)})},s.onerror=function(e){console.warn("File Load Error - Unable to read file"),i()}}),n.click()})},ea.prototype.setData=function(e,t,o){return this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this._setData(e,t,o,!1,!0)},ea.prototype._setData=function(e,t,o,i,n){return"string"!=typeof e?e?this.rowManager.setData(e,i,n):this.modExists("ajax")&&(this.modules.ajax.getUrl||this.options.ajaxURLGenerator)?"remote"==this.options.pagination&&this.modExists("page",!0)?(this.modules.page.reset(!0,!0),this.modules.page.setPage(1)):this.modules.ajax.loadData(i,n):this.rowManager.setData([],i,n):0==e.indexOf("{")||0==e.indexOf("[")?this.rowManager.setData(JSON.parse(e),i,n):this.modExists("ajax",!0)?(t&&this.modules.ajax.setParams(t),o&&this.modules.ajax.setConfig(o),this.modules.ajax.setUrl(e),"remote"==this.options.pagination&&this.modExists("page",!0)?(this.modules.page.reset(!0,!0),this.modules.page.setPage(1)):this.modules.ajax.loadData(i,n)):void 0},ea.prototype.clearData=function(){this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this.rowManager.clearData()},ea.prototype.getData=function(e){return!0===e&&(console.warn("passing a boolean to the getData function is deprecated, you should now pass the string 'active'"),e="active"),this.rowManager.getData(e)},ea.prototype.getDataCount=function(e){return!0===e&&(console.warn("passing a boolean to the getDataCount function is deprecated, you should now pass the string 'active'"),e="active"),this.rowManager.getDataCount(e)},ea.prototype.searchRows=function(e,t,o){if(this.modExists("filter",!0))return this.modules.filter.search("rows",e,t,o)},ea.prototype.searchData=function(e,t,o){if(this.modExists("filter",!0))return this.modules.filter.search("data",e,t,o)},ea.prototype.getHtml=function(e,t,o){if(this.modExists("export",!0))return this.modules.export.getHtml(e,t,o)},ea.prototype.print=function(e,t,o){if(this.modExists("print",!0))return this.modules.print.printFullscreen(e,t,o)},ea.prototype.getAjaxUrl=function(){if(this.modExists("ajax",!0))return this.modules.ajax.getUrl()},ea.prototype.replaceData=function(e,t,o){return this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this._setData(e,t,o,!0)},ea.prototype.updateData=function(e){var t=this,o=this,i=0;return new Promise(function(n,a){t.modExists("ajax")&&t.modules.ajax.blockActiveRequest(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach(function(e){var t=o.rowManager.findRow(e[o.options.index]);t&&(i++,t.updateData(e).then(function(){--i||n()}))}):(console.warn("Update Error - No data provided"),a("Update Error - No data provided"))})},ea.prototype.addData=function(e,t,o){var i=this;return new Promise(function(n,a){i.modExists("ajax")&&i.modules.ajax.blockActiveRequest(),"string"==typeof e&&(e=JSON.parse(e)),e?i.rowManager.addRows(e,t,o).then(function(e){var t=[];e.forEach(function(e){t.push(e.getComponent())}),n(t)}):(console.warn("Update Error - No data provided"),a("Update Error - No data provided"))})},ea.prototype.updateOrAddData=function(e){var t=this,o=this,i=[],n=0;return new Promise(function(a,r){t.modExists("ajax")&&t.modules.ajax.blockActiveRequest(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach(function(e){var t=o.rowManager.findRow(e[o.options.index]);n++,t?t.updateData(e).then(function(){n--,i.push(t.getComponent()),n||a(i)}):o.rowManager.addRows(e).then(function(e){n--,i.push(e[0].getComponent()),n||a(i)})}):(console.warn("Update Error - No data provided"),r("Update Error - No data provided"))})},ea.prototype.getRow=function(e){var t=this.rowManager.findRow(e);return t?t.getComponent():(console.warn("Find Error - No matching row found:",e),!1)},ea.prototype.getRowFromPosition=function(e,t){var o=this.rowManager.getRowFromPosition(e,t);return o?o.getComponent():(console.warn("Find Error - No matching row found:",e),!1)},ea.prototype.deleteRow=function(e){var t=this;return new Promise(function(o,i){var n=t,a=0,r=0,s=[];function l(){++a==e.length&&r&&(n.rowManager.reRenderInPosition(),o())}Array.isArray(e)||(e=[e]),e.forEach(function(e){var o=t.rowManager.findRow(e,!0);o?s.push(o):(console.warn("Delete Error - No matching row found:",e),i("Delete Error - No matching row found"),l())}),s.sort(function(e,o){return t.rowManager.rows.indexOf(e)>t.rowManager.rows.indexOf(o)?1:-1}),s.forEach(function(e){e.delete().then(function(){r++,l()}).catch(function(e){l(),i(e)})})})},ea.prototype.addRow=function(e,t,o){var i=this;return new Promise(function(n,a){"string"==typeof e&&(e=JSON.parse(e)),i.rowManager.addRows(e,t,o).then(function(e){i.modExists("columnCalcs")&&i.modules.columnCalcs.recalc(i.rowManager.activeRows),n(e[0].getComponent())})})},ea.prototype.updateOrAddRow=function(e,t){var o=this;return new Promise(function(i,n){var a=o.rowManager.findRow(e);"string"==typeof t&&(t=JSON.parse(t)),a?a.updateData(t).then(function(){o.modExists("columnCalcs")&&o.modules.columnCalcs.recalc(o.rowManager.activeRows),i(a.getComponent())}).catch(function(e){n(e)}):a=o.rowManager.addRows(t).then(function(e){o.modExists("columnCalcs")&&o.modules.columnCalcs.recalc(o.rowManager.activeRows),i(e[0].getComponent())}).catch(function(e){n(e)})})},ea.prototype.updateRow=function(e,t){var o=this;return new Promise(function(i,n){var a=o.rowManager.findRow(e);"string"==typeof t&&(t=JSON.parse(t)),a?a.updateData(t).then(function(){i(a.getComponent())}).catch(function(e){n(e)}):(console.warn("Update Error - No matching row found:",e),n("Update Error - No matching row found"))})},ea.prototype.scrollToRow=function(e,t,o){var i=this;return new Promise(function(n,a){var r=i.rowManager.findRow(e);r?i.rowManager.scrollToRow(r,t,o).then(function(){n()}).catch(function(e){a(e)}):(console.warn("Scroll Error - No matching row found:",e),a("Scroll Error - No matching row found"))})},ea.prototype.moveRow=function(e,t,o){var i=this.rowManager.findRow(e);i?i.moveToRow(t,o):console.warn("Move Error - No matching row found:",e)},ea.prototype.getRows=function(e){return!0===e&&(console.warn("passing a boolean to the getRows function is deprecated, you should now pass the string 'active'"),e="active"),this.rowManager.getComponents(e)},ea.prototype.getRowPosition=function(e,t){var o=this.rowManager.findRow(e);return o?this.rowManager.getRowPosition(o,t):(console.warn("Position Error - No matching row found:",e),!1)},ea.prototype.copyToClipboard=function(e){this.modExists("clipboard",!0)&&this.modules.clipboard.copy(e)},ea.prototype.setColumns=function(e){this.columnManager.setColumns(e)},ea.prototype.getColumns=function(e){return this.columnManager.getComponents(e)},ea.prototype.getColumn=function(e){var t=this.columnManager.findColumn(e);return t?t.getComponent():(console.warn("Find Error - No matching column found:",e),!1)},ea.prototype.getColumnDefinitions=function(){return this.columnManager.getDefinitionTree()},ea.prototype.getColumnLayout=function(){if(this.modExists("persistence",!0))return this.modules.persistence.parseColumns(this.columnManager.getColumns())},ea.prototype.setColumnLayout=function(e){return!!this.modExists("persistence",!0)&&(this.columnManager.setColumns(this.modules.persistence.mergeDefinition(this.options.columns,e)),!0)},ea.prototype.showColumn=function(e){var t=this.columnManager.findColumn(e);if(!t)return console.warn("Column Show Error - No matching column found:",e),!1;t.show(),this.options.responsiveLayout&&this.modExists("responsiveLayout",!0)&&this.modules.responsiveLayout.update()},ea.prototype.hideColumn=function(e){var t=this.columnManager.findColumn(e);if(!t)return console.warn("Column Hide Error - No matching column found:",e),!1;t.hide(),this.options.responsiveLayout&&this.modExists("responsiveLayout",!0)&&this.modules.responsiveLayout.update()},ea.prototype.toggleColumn=function(e){var t=this.columnManager.findColumn(e);if(!t)return console.warn("Column Visibility Toggle Error - No matching column found:",e),!1;t.visible?t.hide():t.show()},ea.prototype.addColumn=function(e,t,o){var i=this;return new Promise(function(n,a){var r=i.columnManager.findColumn(o);i.columnManager.addColumn(e,t,r).then(function(e){n(e.getComponent())}).catch(function(e){a(e)})})},ea.prototype.deleteColumn=function(e){var t=this;return new Promise(function(o,i){var n=t.columnManager.findColumn(e);n?n.delete().then(function(){o()}).catch(function(e){i(e)}):(console.warn("Column Delete Error - No matching column found:",e),i())})},ea.prototype.updateColumnDefinition=function(e,t){var o=this;return new Promise(function(i,n){var a=o.columnManager.findColumn(e);a?a.updateDefinition(t).then(function(e){i(e)}).catch(function(e){n(e)}):(console.warn("Column Update Error - No matching column found:",e),n())})},ea.prototype.moveColumn=function(e,t,o){var i=this.columnManager.findColumn(e),n=this.columnManager.findColumn(t);i?n?this.columnManager.moveColumn(i,n,o):console.warn("Move Error - No matching column found:",n):console.warn("Move Error - No matching column found:",e)},ea.prototype.scrollToColumn=function(e,t,o){var i=this;return new Promise(function(n,a){var r=i.columnManager.findColumn(e);r?i.columnManager.scrollToColumn(r,t,o).then(function(){n()}).catch(function(e){a(e)}):(console.warn("Scroll Error - No matching column found:",e),a("Scroll Error - No matching column found"))})},ea.prototype.setLocale=function(e){this.modules.localize.setLocale(e)},ea.prototype.getLocale=function(){return this.modules.localize.getLocale()},ea.prototype.getLang=function(e){return this.modules.localize.getLang(e)},ea.prototype.redraw=function(e){this.columnManager.redraw(e),this.rowManager.redraw(e)},ea.prototype.setHeight=function(e){"classic"!==this.rowManager.renderMode?(this.options.height=isNaN(e)?e:e+"px",this.element.style.height=this.options.height,this.rowManager.setRenderMode(),this.rowManager.redraw()):console.warn("setHeight function is not available in classic render mode")},ea.prototype.setSort=function(e,t){this.modExists("sort",!0)&&(this.modules.sort.setSort(e,t),this.rowManager.sorterRefresh())},ea.prototype.getSorters=function(){if(this.modExists("sort",!0))return this.modules.sort.getSort()},ea.prototype.clearSort=function(){this.modExists("sort",!0)&&(this.modules.sort.clear(),this.rowManager.sorterRefresh())},ea.prototype.setFilter=function(e,t,o,i){this.modExists("filter",!0)&&(this.modules.filter.setFilter(e,t,o,i),this.rowManager.filterRefresh())},ea.prototype.refreshFilter=function(){this.modExists("filter",!0)&&this.rowManager.filterRefresh()},ea.prototype.addFilter=function(e,t,o,i){this.modExists("filter",!0)&&(this.modules.filter.addFilter(e,t,o,i),this.rowManager.filterRefresh())},ea.prototype.getFilters=function(e){if(this.modExists("filter",!0))return this.modules.filter.getFilters(e)},ea.prototype.setHeaderFilterFocus=function(e){if(this.modExists("filter",!0)){var t=this.columnManager.findColumn(e);if(!t)return console.warn("Column Filter Focus Error - No matching column found:",e),!1;this.modules.filter.setHeaderFilterFocus(t)}},ea.prototype.getHeaderFilterValue=function(e){if(this.modExists("filter",!0)){var t=this.columnManager.findColumn(e);if(t)return this.modules.filter.getHeaderFilterValue(t);console.warn("Column Filter Error - No matching column found:",e)}},ea.prototype.setHeaderFilterValue=function(e,t){if(this.modExists("filter",!0)){var o=this.columnManager.findColumn(e);if(!o)return console.warn("Column Filter Error - No matching column found:",e),!1;this.modules.filter.setHeaderFilterValue(o,t)}},ea.prototype.getHeaderFilters=function(){if(this.modExists("filter",!0))return this.modules.filter.getHeaderFilters()},ea.prototype.removeFilter=function(e,t,o){this.modExists("filter",!0)&&(this.modules.filter.removeFilter(e,t,o),this.rowManager.filterRefresh())},ea.prototype.clearFilter=function(e){this.modExists("filter",!0)&&(this.modules.filter.clearFilter(e),this.rowManager.filterRefresh())},ea.prototype.clearHeaderFilter=function(){this.modExists("filter",!0)&&(this.modules.filter.clearHeaderFilter(),this.rowManager.filterRefresh())},ea.prototype.selectRow=function(e){this.modExists("selectRow",!0)&&(!0===e&&(console.warn("passing a boolean to the selectRowselectRow function is deprecated, you should now pass the string 'active'"),e="active"),this.modules.selectRow.selectRows(e))},ea.prototype.deselectRow=function(e){this.modExists("selectRow",!0)&&this.modules.selectRow.deselectRows(e)},ea.prototype.toggleSelectRow=function(e){this.modExists("selectRow",!0)&&this.modules.selectRow.toggleRow(e)},ea.prototype.getSelectedRows=function(){if(this.modExists("selectRow",!0))return this.modules.selectRow.getSelectedRows()},ea.prototype.getSelectedData=function(){if(this.modExists("selectRow",!0))return this.modules.selectRow.getSelectedData()},ea.prototype.getInvalidCells=function(){if(this.modExists("validate",!0))return this.modules.validate.getInvalidCells()},ea.prototype.clearCellValidation=function(e){var t=this;this.modExists("validate",!0)&&(e||(e=this.modules.validate.getInvalidCells()),Array.isArray(e)||(e=[e]),e.forEach(function(e){t.modules.validate.clearValidation(e._getSelf())}))},ea.prototype.validate=function(e){var t=[];return this.rowManager.rows.forEach(function(e){var o=e.validate();!0!==o&&(t=t.concat(o))}),!t.length||t},ea.prototype.setMaxPage=function(e){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.setMaxPage(e)},ea.prototype.setPage=function(e){return this.options.pagination&&this.modExists("page")?this.modules.page.setPage(e):new Promise(function(e,t){t()})},ea.prototype.setPageToRow=function(e){var t=this;return new Promise(function(o,i){t.options.pagination&&t.modExists("page")&&(e=t.rowManager.findRow(e))?t.modules.page.setPageToRow(e).then(function(){o()}).catch(function(){i()}):i()})},ea.prototype.setPageSize=function(e){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.setPageSize(e),this.modules.page.setPage(1).then(function(){}).catch(function(){})},ea.prototype.getPageSize=function(){if(this.options.pagination&&this.modExists("page",!0))return this.modules.page.getPageSize()},ea.prototype.previousPage=function(){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.previousPage()},ea.prototype.nextPage=function(){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.nextPage()},ea.prototype.getPage=function(){return!(!this.options.pagination||!this.modExists("page"))&&this.modules.page.getPage()},ea.prototype.getPageMax=function(){return!(!this.options.pagination||!this.modExists("page"))&&this.modules.page.getPageMax()},ea.prototype.setGroupBy=function(e){if(!this.modExists("groupRows",!0))return!1;this.options.groupBy=e,this.modules.groupRows.initialize(),this.rowManager.refreshActiveData("display"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group")},ea.prototype.setGroupValues=function(e){if(!this.modExists("groupRows",!0))return!1;this.options.groupValues=e,this.modules.groupRows.initialize(),this.rowManager.refreshActiveData("display"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group")},ea.prototype.setGroupStartOpen=function(e){if(!this.modExists("groupRows",!0))return!1;this.options.groupStartOpen=e,this.modules.groupRows.initialize(),this.options.groupBy?(this.rowManager.refreshActiveData("group"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group")):console.warn("Grouping Update - cant refresh view, no groups have been set")},ea.prototype.setGroupHeader=function(e){if(!this.modExists("groupRows",!0))return!1;this.options.groupHeader=e,this.modules.groupRows.initialize(),this.options.groupBy?(this.rowManager.refreshActiveData("group"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group")):console.warn("Grouping Update - cant refresh view, no groups have been set")},ea.prototype.getGroups=function(e){return!!this.modExists("groupRows",!0)&&this.modules.groupRows.getGroups(!0)},ea.prototype.getGroupedData=function(){if(this.modExists("groupRows",!0))return this.options.groupBy?this.modules.groupRows.getGroupedData():this.getData()},ea.prototype.getEditedCells=function(){if(this.modExists("edit",!0))return this.modules.edit.getEditedCells()},ea.prototype.clearCellEdited=function(e){var t=this;this.modExists("edit",!0)&&(e||(e=this.modules.edit.getEditedCells()),Array.isArray(e)||(e=[e]),e.forEach(function(e){t.modules.edit.clearEdited(e._getSelf())}))},ea.prototype.getCalcResults=function(){return!!this.modExists("columnCalcs",!0)&&this.modules.columnCalcs.getResults()},ea.prototype.recalc=function(){this.modExists("columnCalcs",!0)&&this.modules.columnCalcs.recalcAll(this.rowManager.activeRows)},ea.prototype.navigatePrev=function(){var e=!1;return!(!this.modExists("edit",!0)||!(e=this.modules.edit.currentCell))&&e.nav().prev()},ea.prototype.navigateNext=function(){var e=!1;return!(!this.modExists("edit",!0)||!(e=this.modules.edit.currentCell))&&e.nav().next()},ea.prototype.navigateLeft=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().left())},ea.prototype.navigateRight=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().right())},ea.prototype.navigateUp=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().up())},ea.prototype.navigateDown=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().down())},ea.prototype.undo=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.undo()},ea.prototype.redo=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.redo()},ea.prototype.getHistoryUndoSize=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.getHistoryUndoSize()},ea.prototype.getHistoryRedoSize=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.getHistoryRedoSize()},ea.prototype.clearHistory=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.clear()},ea.prototype.download=function(e,t,o,i){this.modExists("download",!0)&&this.modules.download.download(e,t,o,i)},ea.prototype.downloadToTab=function(e,t,o,i){this.modExists("download",!0)&&this.modules.download.download(e,t,o,i,!0)},ea.prototype.tableComms=function(e,t,o,i){this.modules.comms.receive(e,t,o,i)},ea.prototype.moduleBindings={},ea.prototype.extendModule=function(e,t,o){if(ea.prototype.moduleBindings[e]){var i=ea.prototype.moduleBindings[e].prototype[t];if(i){if("object"==(void 0===o?"undefined":pa(o)))for(var n in o)i[n]=o[n];else console.warn("Module Error - Invalid value type, it must be an object");}else console.warn("Module Error - property does not exist:",t)}else console.warn("Module Error - module does not exist:",e)},ea.prototype.registerModule=function(e,t){ea.prototype.moduleBindings[e]=t},ea.prototype.bindModules=function(){for(var e in this.modules={},ea.prototype.moduleBindings)this.modules[e]=new ea.prototype.moduleBindings[e](this)},ea.prototype.modExists=function(e,t){return!!this.modules[e]||(t&&console.error("Tabulator Module Not Installed: "+e),!1)},ea.prototype.helpers={elVisible:function(e){return!(e.offsetWidth<=0&&e.offsetHeight<=0)},elOffset:function(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft}},deepClone:function(e){var t=Object.assign(Array.isArray(e)?[]:{},e);for(var o in e)null!=e[o]&&"object"===pa(e[o])&&(e[o]instanceof Date?t[o]=new Date(e[o]):t[o]=this.deepClone(e[o]));return t}},ea.prototype.comms={tables:[],register:function(e){ea.prototype.comms.tables.push(e)},deregister:function(e){var t=ea.prototype.comms.tables.indexOf(e);t>-1&&ea.prototype.comms.tables.splice(t,1)},lookupTable:function(e,t){var o,i,n=[];if("string"==typeof e){if((o=document.querySelectorAll(e)).length)for(var a=0;a<o.length;a++)(i=ea.prototype.comms.matchElement(o[a]))&&n.push(i)}else"undefined"!=typeof HTMLElement&&e instanceof HTMLElement||e instanceof ea?(i=ea.prototype.comms.matchElement(e))&&n.push(i):Array.isArray(e)?e.forEach(function(e){n=n.concat(ea.prototype.comms.lookupTable(e))}):t||console.warn("Table Connection Error - Invalid Selector",e);return n},matchElement:function(e){return ea.prototype.comms.tables.find(function(t){return e instanceof ea?t===e:t.element===e})}},ea.prototype.findTable=function(e){var t=ea.prototype.comms.lookupTable(e,!0);return!(Array.isArray(t)&&!t.length)&&t};var Zd=function(e){this.table=e,this.mode=null};Zd.prototype.initialize=function(e){this.modes[e]?this.mode=e:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+e),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)},Zd.prototype.getMode=function(){return this.mode},Zd.prototype.layout=function(){this.modes[this.mode].call(this,this.table.columnManager.columnsByIndex),0===this.mode.indexOf("fitData")&&this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns")},Zd.prototype.modes={fitData:function(e){this.table.options.virtualDomHoz?this.table.vdomHoz.fitDataLayoutOverride():e.forEach(function(e){e.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:function(e){e.forEach(function(e){e.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataTable:function(e){e.forEach(function(e){e.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataStretch:function(e){var t=this,o=0,i=this.table.rowManager.element.clientWidth,n=0,a=!1;e.forEach(function(e,i){e.widthFixed||e.reinitializeWidth(),(t.table.options.responsiveLayout?e.modules.responsive.visible:e.visible)&&(a=e),e.visible&&(o+=e.getWidth())}),a?(n=i-o+a.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(a.setWidth(0),this.table.modules.responsiveLayout.update()),n>0?a.setWidth(n):a.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(e){var t,o,i=this.table.element.clientWidth,n=0,a=0,r=0,s=[],l=[],u=0,c=0;function d(e){return"string"==typeof e?e.indexOf("%")>-1?i/100*parseInt(e):parseInt(e):e}function h(e,t,o,i){var n=[],a=0,s=0,l=0,u=r,c=0,p=0,m=[];function v(e){return o*(e.column.definition.widthGrow||1)}function f(e){return d(e.width)-o*(e.column.definition.widthShrink||0)}return e.forEach(function(e,a){var r=i?f(e):v(e);e.column.minWidth>=r?n.push(e):e.column.maxWidth&&e.column.maxWidth<r?(e.width=e.column.maxWidth,t-=e.column.maxWidth,(u-=i?e.column.definition.widthShrink||1:e.column.definition.widthGrow||1)&&(o=Math.floor(t/u))):(m.push(e),p+=i?e.column.definition.widthShrink||1:e.column.definition.widthGrow||1)}),n.length?(n.forEach(function(e){a+=i?e.width-e.column.minWidth:e.column.minWidth,e.width=e.column.minWidth}),c=(s=t-a)-(l=p?Math.floor(s/p):s)*p,c+=h(m,s,l,i)):(c=p?t-Math.floor(t/p)*p:t,m.forEach(function(e){e.width=i?f(e):v(e)})),c}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(i-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),e.forEach(function(e){var t,o,i;e.visible&&(t=e.definition.width,o=parseInt(e.minWidth),t?(i=d(t),n+=i>o?i:o,e.definition.widthShrink&&(l.push({column:e,width:i>o?i:o}),u+=e.definition.widthShrink)):(s.push({column:e,width:0}),r+=e.definition.widthGrow||1))}),a=i-n,t=Math.floor(a/r);c=h(s,a,t,!1);s.length&&c>0&&(s[s.length-1].width+=+c),s.forEach(function(e){a-=e.width}),(o=Math.abs(c)+a)>0&&u&&(c=h(l,o,Math.floor(o/u),!0)),l.length&&(l[l.length-1].width-=c),s.forEach(function(e){e.column.setWidth(e.width)}),l.forEach(function(e){e.column.setWidth(e.width)})}},ea.prototype.registerModule("layout",Zd);var Lb=function(e){this.table=e,this.locale="default",this.lang=!1,this.bindings={},this.langList={}};Lb.prototype.initialize=function(){this.langList=ea.prototype.helpers.deepClone(this.langs)},Lb.prototype.setHeaderFilterPlaceholder=function(e){this.langList.default.headerFilters.default=e},Lb.prototype.setHeaderFilterColumnPlaceholder=function(e,t){this.langList.default.headerFilters.columns[e]=t,this.lang&&!this.lang.headerFilters.columns[e]&&(this.lang.headerFilters.columns[e]=t)},Lb.prototype.installLang=function(e,t){this.langList[e]?this._setLangProp(this.langList[e],t):this.langList[e]=t},Lb.prototype._setLangProp=function(e,t){for(var o in t)e[o]&&"object"==pa(e[o])?this._setLangProp(e[o],t[o]):e[o]=t[o]},Lb.prototype.setLocale=function(e){if(!0===(e=e||"default")&&navigator.language&&(e=navigator.language.toLowerCase()),e&&!this.langList[e]){var t=e.split("-")[0];this.langList[t]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",e,t),e=t):(console.warn("Localization Error - Matching locale not found, using default: ",e),e="default")}this.locale=e,this.lang=ea.prototype.helpers.deepClone(this.langList.default||{}),"default"!=e&&function e(t,o){for(var i in t)"object"==pa(t[i])?(o[i]||(o[i]={}),e(t[i],o[i])):o[i]=t[i]}(this.langList[e],this.lang),this.table.options.localized.call(this.table,this.locale,this.lang),this._executeBindings()},Lb.prototype.getLocale=function(e){return self.locale},Lb.prototype.getLang=function(e){return e?this.langList[e]:this.lang},Lb.prototype.getText=function(e,t){var o=(e=t?e+"|"+t:e).split("|");return this._getLangElement(o,this.locale)||""},Lb.prototype._getLangElement=function(e,t){var o=this.lang;return e.forEach(function(e){var t;o&&(t=o[e],o=void 0!==t&&t)}),o},Lb.prototype.bind=function(e,t){this.bindings[e]||(this.bindings[e]=[]),this.bindings[e].push(t),t(this.getText(e),this.lang)},Lb.prototype._executeBindings=function(){var e=this,t=function(t){e.bindings[t].forEach(function(o){o(e.getText(t),e.lang)})};for(var o in e.bindings)t(o)},Lb.prototype.langs={default:{groups:{item:"item",items:"items"},columns:{},ajax:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}},ea.prototype.registerModule("localize",Lb);var df=function(e){this.table=e};df.prototype.getConnections=function(e){var t=this,o=[];return ea.prototype.comms.lookupTable(e).forEach(function(e){t.table!==e&&o.push(e)}),o},df.prototype.send=function(e,t,o,i){var n=this,a=this.getConnections(e);a.forEach(function(e){e.tableComms(n.table.element,t,o,i)}),!a.length&&e&&console.warn("Table Connection Error - No tables matching selector found",e)},df.prototype.receive=function(e,t,o,i){if(this.table.modExists(t))return this.table.modules[t].commsReceived(e,o,i);console.warn("Inter-table Comms Error - no such module:",t)},ea.prototype.registerModule("comms",df);var $d=function(e){this.table=e,this.allowedTypes=["","data","download","clipboard","print","htmlOutput"]};$d.prototype.initializeColumn=function(e){var t=this,o=!1,i={};this.allowedTypes.forEach(function(n){var a,r="accessor"+(n.charAt(0).toUpperCase()+n.slice(1));e.definition[r]&&(a=t.lookupAccessor(e.definition[r]))&&(o=!0,i[r]={accessor:a,params:e.definition[r+"Params"]||{}})}),o&&(e.modules.accessor=i)},$d.prototype.lookupAccessor=function(e){var t=!1;switch(void 0===e?"undefined":pa(e)){case"string":this.accessors[e]?t=this.accessors[e]:console.warn("Accessor Error - No such accessor found, ignoring: ",e);break;case"function":t=e;}return t},$d.prototype.transformRow=function(e,t){var o="accessor"+(t.charAt(0).toUpperCase()+t.slice(1)),i=e.getComponent(),n=ea.prototype.helpers.deepClone(e.data||{});return this.table.columnManager.traverse(function(e){var a,r,s,l;e.modules.accessor&&(r=e.modules.accessor[o]||e.modules.accessor.accessor||!1)&&"undefined"!=(a=e.getFieldValue(n))&&(l=e.getComponent(),s="function"==typeof r.params?r.params(a,n,t,l,i):r.params,e.setFieldValue(n,r.accessor(a,n,t,s,l,i)))}),n},$d.prototype.accessors={},ea.prototype.registerModule("accessor",$d);var hb=function(e){this.table=e,this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=!1,this.errorElement=!1,this.loaderPromise=!1,this.progressiveLoad=!1,this.loading=!1,this.requestOrder=0};hb.prototype.initialize=function(){var e;this.loaderElement.appendChild(this.msgElement),this.table.options.ajaxLoaderLoading&&("string"==typeof this.table.options.ajaxLoaderLoading?((e=document.createElement("template")).innerHTML=this.table.options.ajaxLoaderLoading.trim(),this.loadingElement=e.content.firstChild):this.loadingElement=this.table.options.ajaxLoaderLoading),this.loaderPromise=this.table.options.ajaxRequestFunc||this.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||this.defaultURLGenerator,this.table.options.ajaxLoaderError&&("string"==typeof this.table.options.ajaxLoaderError?((e=document.createElement("template")).innerHTML=this.table.options.ajaxLoaderError.trim(),this.errorElement=e.content.firstChild):this.errorElement=this.table.options.ajaxLoaderError),this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.table.options.ajaxProgressiveLoad&&(this.table.options.pagination?(this.progressiveLoad=!1,console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time")):this.table.modExists("page")?(this.progressiveLoad=this.table.options.ajaxProgressiveLoad,this.table.modules.page.initializeProgressive(this.progressiveLoad)):console.error("Pagination plugin is required for progressive ajax loading"))},hb.prototype.createLoaderElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-loader"),e},hb.prototype.createMsgElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-loader-msg"),e.setAttribute("role","alert"),e},hb.prototype.setParams=function(e,t){if(t)for(var o in this.params=this.params||{},e)this.params[o]=e[o];else this.params=e},hb.prototype.getParams=function(){return this.params||{}},hb.prototype.setConfig=function(e){if(this._loadDefaultConfig(),"string"==typeof e)this.config.method=e;else for(var t in e)this.config[t]=e[t]},hb.prototype._loadDefaultConfig=function(e){if(!this.config||e)for(var t in this.config={},this.defaultConfig)this.config[t]=this.defaultConfig[t]},hb.prototype.setUrl=function(e){this.url=e},hb.prototype.getUrl=function(){return this.url},hb.prototype.loadData=function(e,t){return this.progressiveLoad?this._loadDataProgressive():this._loadDataStandard(e,t)},hb.prototype.nextPage=function(e){this.loading||e<(this.table.options.ajaxProgressiveLoadScrollMargin||2*this.table.rowManager.getElement().clientHeight)&&this.table.modules.page.nextPage().then(function(){}).catch(function(){})},hb.prototype.blockActiveRequest=function(){this.requestOrder++},hb.prototype._loadDataProgressive=function(){return this.table.rowManager.setData([]),this.table.modules.page.setPage(1)},hb.prototype._loadDataStandard=function(e,t){var o=this;return new Promise(function(i,n){o.sendRequest(e).then(function(a){o.table.rowManager.setData(a,e,t).then(function(){i()}).catch(function(e){n(e)})}).catch(function(e){n(e)})})},hb.prototype.generateParamsList=function(e,t){var o=this,i=[];if(t=t||"",Array.isArray(e))e.forEach(function(e,n){i=i.concat(o.generateParamsList(e,t?t+"["+n+"]":n))});else if("object"===(void 0===e?"undefined":pa(e)))for(var n in e)i=i.concat(o.generateParamsList(e[n],t?t+"["+n+"]":n));else i.push({key:t,value:e});return i},hb.prototype.serializeParams=function(e){var t=this.generateParamsList(e),o=[];return t.forEach(function(e){o.push(encodeURIComponent(e.key)+"="+encodeURIComponent(e.value))}),o.join("&")},hb.prototype.sendRequest=function(e){var t,o=this,i=this,n=i.url;return i.requestOrder++,t=i.requestOrder,i._loadDefaultConfig(),new Promise(function(a,r){!1!==i.table.options.ajaxRequesting.call(o.table,i.url,i.params)?(i.loading=!0,e||i.showLoader(),o.loaderPromise(n,i.config,i.params).then(function(e){t===i.requestOrder?(i.table.options.ajaxResponse&&(e=i.table.options.ajaxResponse.call(i.table,i.url,i.params,e)),a(e),i.hideLoader(),i.loading=!1):console.warn("Ajax Response Blocked - An active ajax request was blocked by an attempt to change table data while the request was being made")}).catch(function(e){console.error("Ajax Load Error: ",e),i.table.options.ajaxError.call(i.table,e),i.showError(),setTimeout(function(){i.hideLoader()},3e3),i.loading=!1,r(e)})):r()})},hb.prototype.showLoader=function(){if("function"==typeof this.table.options.ajaxLoader?this.table.options.ajaxLoader():this.table.options.ajaxLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.table.modules.localize.getText("ajax|loading"),this.table.element.appendChild(this.loaderElement)}},hb.prototype.showError=function(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.table.modules.localize.getText("ajax|error"),this.table.element.appendChild(this.loaderElement)},hb.prototype.hideLoader=function(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)},hb.prototype.defaultConfig={method:"GET"},hb.prototype.defaultURLGenerator=function(e,t,o){return e&&o&&Object.keys(o).length&&(t.method&&"get"!=t.method.toLowerCase()||(t.method="get",e+=(e.includes("?")?"&":"?")+this.modules.ajax.serializeParams(o))),e},hb.prototype.defaultLoaderPromise=function(e,t,o){var i,n=this;return new Promise(function(a,r){if(e=n.urlGenerator.call(n.table,e,t,o),"GET"!=t.method.toUpperCase())if(i="object"===pa(n.table.options.ajaxContentType)?n.table.options.ajaxContentType:n.contentTypeFormatters[n.table.options.ajaxContentType]){for(var s in i.headers)t.headers||(t.headers={}),void 0===t.headers[s]&&(t.headers[s]=i.headers[s]);t.body=i.body.call(n,e,t,o)}else console.warn("Ajax Error - Invalid ajaxContentType value:",n.table.options.ajaxContentType);e?(void 0===t.headers&&(t.headers={}),void 0===t.headers.Accept&&(t.headers.Accept="application/json"),void 0===t.headers["X-Requested-With"]&&(t.headers["X-Requested-With"]="XMLHttpRequest"),void 0===t.mode&&(t.mode="cors"),"cors"==t.mode?(void 0===t.headers["Access-Control-Allow-Origin"]&&(t.headers["Access-Control-Allow-Origin"]=window.location.origin),void 0===t.credentials&&(t.credentials="same-origin")):void 0===t.credentials&&(t.credentials="include"),fetch(e,t).then(function(e){e.ok?e.json().then(function(e){a(e)}).catch(function(e){r(e),console.warn("Ajax Load Error - Invalid JSON returned",e)}):(console.error("Ajax Load Error - Connection Error: "+e.status,e.statusText),r(e))}).catch(function(e){console.error("Ajax Load Error - Connection Error: ",e),r(e)})):(console.warn("Ajax Load Error - No URL Set"),a([]))})},hb.prototype.contentTypeFormatters={json:{headers:{"Content-Type":"application/json"},body:function(e,t,o){return JSON.stringify(o)}},form:{headers:{},body:function(e,t,o){var i=this.generateParamsList(o),n=new FormData;return i.forEach(function(e){n.append(e.key,e.value)}),n}}},ea.prototype.registerModule("ajax",hb);var ad=function(e){this._row=e};ad.prototype.getData=function(e){return this._row.getData(e)},ad.prototype.getElement=function(){return this._row.getElement()},ad.prototype.getTable=function(){return this._row.table},ad.prototype.getCells=function(){var e=[];return this._row.getCells().forEach(function(t){e.push(t.getComponent())}),e},ad.prototype.getCell=function(e){var t=this._row.getCell(e);return!!t&&t.getComponent()},ad.prototype._getSelf=function(){return this._row};var lb=function(e){this.table=e,this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.initialize()};lb.prototype.createElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-calcs-holder"),e},lb.prototype.initialize=function(){this.genColumn=new ra({field:"value"},this)},lb.prototype.registerColumnField=function(){},lb.prototype.initializeColumn=function(e){var t=e.definition,o={topCalcParams:t.topCalcParams||{},botCalcParams:t.bottomCalcParams||{}};if(t.topCalc){switch(pa(t.topCalc)){case"string":this.calculations[t.topCalc]?o.topCalc=this.calculations[t.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",t.topCalc);break;case"function":o.topCalc=t.topCalc;}o.topCalc&&(e.modules.columnCalcs=o,this.topCalcs.push(e),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(t.bottomCalc){switch(pa(t.bottomCalc)){case"string":this.calculations[t.bottomCalc]?o.botCalc=this.calculations[t.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",t.bottomCalc);break;case"function":o.botCalc=t.bottomCalc;}o.botCalc&&(e.modules.columnCalcs=o,this.botCalcs.push(e),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}},lb.prototype.removeCalcs=function(){var e=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),e=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),e=!0),e&&this.table.rowManager.adjustTableSize()},lb.prototype.initializeTopRow=function(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)},lb.prototype.initializeBottomRow=function(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)},lb.prototype.scrollHorizontal=function(e){this.botInitialized&&this.botRow&&(this.botRow.getElement().style.marginLeft=-e+"px")},lb.prototype.recalc=function(e){var t;if(this.topInitialized||this.botInitialized){if(this.rowsToData(e),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),t=this.generateRow("top",this.rowsToData(e)),this.topRow=t;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(t.getElement()),t.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),t=this.generateRow("bottom",this.rowsToData(e)),this.botRow=t;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(t.getElement()),t.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}},lb.prototype.recalcRowGroup=function(e){this.recalcGroup(this.table.modules.groupRows.getRowGroup(e))},lb.prototype.recalcAll=function(){var e=this;(this.topCalcs.length||this.botCalcs.length)&&("group"!==this.table.options.columnCalcs&&this.recalc(this.table.rowManager.activeRows),this.table.options.groupBy&&"table"!==this.table.options.columnCalcs&&table.modules.groupRows.getChildGroups().forEach(function(t){e.recalcGroup(t)}))},lb.prototype.recalcGroup=function(e){var t,o;e&&e.calcs&&(e.calcs.bottom&&(t=this.rowsToData(e.rows),o=this.generateRowData("bottom",t),e.calcs.bottom.updateData(o),e.calcs.bottom.reinitialize()),e.calcs.top&&(t=this.rowsToData(e.rows),o=this.generateRowData("top",t),e.calcs.top.updateData(o),e.calcs.top.reinitialize()))},lb.prototype.generateTopRow=function(e){return this.generateRow("top",this.rowsToData(e))},lb.prototype.generateBottomRow=function(e){return this.generateRow("bottom",this.rowsToData(e))},lb.prototype.rowsToData=function(e){var t=this,o=[];return e.forEach(function(e){if(o.push(e.getData()),t.table.options.dataTree&&t.table.options.dataTreeChildColumnCalcs&&e.modules.dataTree.open){var i=t.rowsToData(t.table.modules.dataTree.getFilteredTreeChildren(e));o=o.concat(i)}}),o},lb.prototype.generateRow=function(e,t){var o,i=this,n=this.generateRowData(e,t);return i.table.modExists("mutator")&&i.table.modules.mutator.disable(),o=new ya(n,this,"calc"),i.table.modExists("mutator")&&i.table.modules.mutator.enable(),o.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+e),o.component=!1,o.getComponent=function(){return this.component||(this.component=new ad(this)),this.component},o.generateCells=function(){var t=[];i.table.columnManager.columnsByIndex.forEach(function(n){i.genColumn.setField(n.getField()),i.genColumn.hozAlign=n.hozAlign,n.definition[e+"CalcFormatter"]&&i.table.modExists("format")?i.genColumn.modules.format={formatter:i.table.modules.format.getFormatter(n.definition[e+"CalcFormatter"]),params:n.definition[e+"CalcFormatterParams"]||{}}:i.genColumn.modules.format={formatter:i.table.modules.format.getFormatter("plaintext"),params:{}},i.genColumn.definition.cssClass=n.definition.cssClass;var a=new Na(i.genColumn,o);a.getElement(),a.column=n,a.setWidth(),n.cells.push(a),t.push(a),n.visible||a.hide()}),this.cells=t},o},lb.prototype.generateRowData=function(e,t){var o,i,n={},a="top"==e?this.topCalcs:this.botCalcs,r="top"==e?"topCalc":"botCalc";return a.forEach(function(e){var a=[];e.modules.columnCalcs&&e.modules.columnCalcs[r]&&(t.forEach(function(t){a.push(e.getFieldValue(t))}),i=r+"Params",o="function"==typeof e.modules.columnCalcs[i]?e.modules.columnCalcs[i](a,t):e.modules.columnCalcs[i],e.setFieldValue(n,e.modules.columnCalcs[r](a,t,o)))}),n},lb.prototype.hasTopCalcs=function(){return!!this.topCalcs.length},lb.prototype.hasBottomCalcs=function(){return!!this.botCalcs.length},lb.prototype.redraw=function(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)},lb.prototype.getResults=function(){var e=this,t={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach(function(o){t[o.getKey()]=e.getGroupResults(o)}):t={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},t},lb.prototype.getGroupResults=function(e){var t=this,o=e._getSelf(),i=e.getSubGroups(),n={};return i.forEach(function(e){n[e.getKey()]=t.getGroupResults(e)}),{top:o.calcs.top?o.calcs.top.getData():{},bottom:o.calcs.bottom?o.calcs.bottom.getData():{},groups:n}},lb.prototype.calculations={avg:function(e,t,o){var i=0,n=void 0!==o.precision?o.precision:2;return e.length&&(i=e.reduce(function(e,t){return Number(e)+Number(t)}),i/=e.length,i=!1!==n?i.toFixed(n):i),parseFloat(i).toString()},max:function(e,t,o){var i=null,n=void 0!==o.precision&&o.precision;return e.forEach(function(e){((e=Number(e))>i||null===i)&&(i=e)}),null!==i?!1!==n?i.toFixed(n):i:""},min:function(e,t,o){var i=null,n=void 0!==o.precision&&o.precision;return e.forEach(function(e){((e=Number(e))<i||null===i)&&(i=e)}),null!==i?!1!==n?i.toFixed(n):i:""},sum:function(e,t,o){var i=0,n=void 0!==o.precision&&o.precision;return e.length&&e.forEach(function(e){e=Number(e),i+=isNaN(e)?0:Number(e)}),!1!==n?i.toFixed(n):i},concat:function(e,t,o){var i=0;return e.length&&(i=e.reduce(function(e,t){return String(e)+String(t)})),i},count:function(e,t,o){var i=0;return e.length&&e.forEach(function(e){e&&i++}),i}},ea.prototype.registerModule("columnCalcs",lb);var Sb=function(e){this.table=e,this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0};Sb.prototype.initialize=function(){var e=this;this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,!0!==this.mode&&"copy"!==this.mode||this.table.element.addEventListener("copy",function(t){var o,i;if(!e.blocked){if(t.preventDefault(),e.customSelection)o=e.customSelection,e.table.options.clipboardCopyFormatter&&(o=e.table.options.clipboardCopyFormatter("plain",o));else{var n=e.table.modules.export.generateExportList(e.table.options.clipboardCopyConfig,e.table.options.clipboardCopyStyled,e.rowRange,"clipboard");o=(i=e.table.modules.export.genereateHTMLTable(n))?e.generatePlainContent(n):"",e.table.options.clipboardCopyFormatter&&(o=e.table.options.clipboardCopyFormatter("plain",o),i=e.table.options.clipboardCopyFormatter("html",i))}window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",o):t.clipboardData&&t.clipboardData.setData?(t.clipboardData.setData("text/plain",o),i&&t.clipboardData.setData("text/html",i)):t.originalEvent&&t.originalEvent.clipboardData.setData&&(t.originalEvent.clipboardData.setData("text/plain",o),i&&t.originalEvent.clipboardData.setData("text/html",i)),e.table.options.clipboardCopied.call(e.table,o,i),e.reset()}}),!0!==this.mode&&"paste"!==this.mode||this.table.element.addEventListener("paste",function(t){e.paste(t)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction)},Sb.prototype.reset=function(){this.blocked=!0,this.customSelection=!1},Sb.prototype.generatePlainContent=function(e){var t=[];return e.forEach(function(e){var o=[];e.columns.forEach(function(t){var i="";if(t)if("group"===e.type&&(t.value=t.component.getKey()),null===t.value)i="";else switch(pa(t.value)){case"object":i=JSON.stringify(t.value);break;case"undefined":i="";break;default:i=t.value;}o.push(i)}),t.push(o.join("\t"))}),t.join("\n")},Sb.prototype.copy=function(e,t){var o,i;this.blocked=!1,this.customSelection=!1,!0!==this.mode&&"copy"!==this.mode||(this.rowRange=e||this.table.options.clipboardCopyRowRange,void 0!==window.getSelection&&void 0!==document.createRange?((e=document.createRange()).selectNodeContents(this.table.element),(o=window.getSelection()).toString()&&t&&(this.customSelection=o.toString()),o.removeAllRanges(),o.addRange(e)):void 0!==document.selection&&void 0!==document.body.createTextRange&&((i=document.body.createTextRange()).moveToElementText(this.table.element),i.select()),document.execCommand("copy"),o&&o.removeAllRanges())},Sb.prototype.setPasteAction=function(e){switch(void 0===e?"undefined":pa(e)){case"string":this.pasteAction=this.pasteActions[e],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",e);break;case"function":this.pasteAction=e;}},Sb.prototype.setPasteParser=function(e){switch(void 0===e?"undefined":pa(e)){case"string":this.pasteParser=this.pasteParsers[e],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",e);break;case"function":this.pasteParser=e;}},Sb.prototype.paste=function(e){var t,o,i;this.checkPaseOrigin(e)&&(t=this.getPasteData(e),(o=this.pasteParser.call(this,t))?(e.preventDefault(),this.table.modExists("mutator")&&(o=this.mutateData(o)),i=this.pasteAction.call(this,o),this.table.options.clipboardPasted.call(this.table,t,o,i)):this.table.options.clipboardPasteError.call(this.table,t))},Sb.prototype.mutateData=function(e){var t=this,o=[];return Array.isArray(e)?e.forEach(function(e){o.push(t.table.modules.mutator.transformRow(e,"clipboard"))}):o=e,o},Sb.prototype.checkPaseOrigin=function(e){var t=!0;return("DIV"!=e.target.tagName||this.table.modules.edit.currentCell)&&(t=!1),t},Sb.prototype.getPasteData=function(e){var t;return window.clipboardData&&window.clipboardData.getData?t=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData?t=e.clipboardData.getData("text/plain"):e.originalEvent&&e.originalEvent.clipboardData.getData&&(t=e.originalEvent.clipboardData.getData("text/plain")),t},Sb.prototype.pasteParsers={table:function(e){var t=[],o=!0,i=this.table.columnManager.columns,n=[],a=[];return(e=e.split("\n")).forEach(function(e){t.push(e.split("\t"))}),!(!t.length||1===t.length&&t[0].length<2)&&(!0,t[0].forEach(function(e){var t=i.find(function(t){return e&&t.definition.title&&e.trim()&&t.definition.title.trim()===e.trim()});t?n.push(t):o=!1}),o||(o=!0,n=[],t[0].forEach(function(e){var t=i.find(function(t){return e&&t.field&&e.trim()&&t.field.trim()===e.trim()});t?n.push(t):o=!1}),o||(n=this.table.columnManager.columnsByIndex)),o&&t.shift(),t.forEach(function(e){var t={};e.forEach(function(e,o){n[o]&&(t[n[o].field]=e)}),a.push(t)}),a)}},Sb.prototype.pasteActions={replace:function(e){return this.table.setData(e)},update:function(e){return this.table.updateOrAddData(e)},insert:function(e){return this.table.addData(e)}},ea.prototype.registerModule("clipboard",Sb);var pb=function(e){this.table=e,this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0};pb.prototype.initialize=function(){var e=null,t=this.table.columnManager.getFirstVisibileColumn(),o=this.table.options;switch(this.field=o.dataTreeChildField,this.indent=o.dataTreeChildIndent,this.elementField=o.dataTreeElementColumn||!!t&&t.field,o.dataTreeBranchElement&&(!0===o.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof o.dataTreeBranchElement?((e=document.createElement("div")).innerHTML=o.dataTreeBranchElement,this.branchEl=e.firstChild):this.branchEl=o.dataTreeBranchElement),o.dataTreeCollapseElement?"string"==typeof o.dataTreeCollapseElement?((e=document.createElement("div")).innerHTML=o.dataTreeCollapseElement,this.collapseEl=e.firstChild):this.collapseEl=o.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),o.dataTreeExpandElement?"string"==typeof o.dataTreeExpandElement?((e=document.createElement("div")).innerHTML=o.dataTreeExpandElement,this.expandEl=e.firstChild):this.expandEl=o.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),pa(o.dataTreeStartExpanded)){case"boolean":this.startOpen=function(e,t){return o.dataTreeStartExpanded};break;case"function":this.startOpen=o.dataTreeStartExpanded;break;default:this.startOpen=function(e,t){return o.dataTreeStartExpanded[t]};}},pb.prototype.initializeRow=function(e){var t=e.getData()[this.field],o=Array.isArray(t),i=o||!o&&"object"===(void 0===t?"undefined":pa(t))&&null!==t;!i&&e.modules.dataTree&&e.modules.dataTree.branchEl&&e.modules.dataTree.branchEl.parentNode.removeChild(e.modules.dataTree.branchEl),!i&&e.modules.dataTree&&e.modules.dataTree.controlEl&&e.modules.dataTree.controlEl.parentNode.removeChild(e.modules.dataTree.controlEl),e.modules.dataTree={index:e.modules.dataTree?e.modules.dataTree.index:0,open:!!i&&(e.modules.dataTree?e.modules.dataTree.open:this.startOpen(e.getComponent(),0)),controlEl:!(!e.modules.dataTree||!i)&&e.modules.dataTree.controlEl,branchEl:!(!e.modules.dataTree||!i)&&e.modules.dataTree.branchEl,parent:!!e.modules.dataTree&&e.modules.dataTree.parent,children:i}},pb.prototype.layoutRow=function(e){var t=(this.elementField?e.getCell(this.elementField):e.getCells()[0]).getElement(),o=e.modules.dataTree;o.branchEl&&(o.branchEl.parentNode&&o.branchEl.parentNode.removeChild(o.branchEl),o.branchEl=!1),o.controlEl&&(o.controlEl.parentNode&&o.controlEl.parentNode.removeChild(o.controlEl),o.controlEl=!1),this.generateControlElement(e,t),e.getElement().classList.add("tabulator-tree-level-"+o.index),o.index&&(this.branchEl?(o.branchEl=this.branchEl.cloneNode(!0),t.insertBefore(o.branchEl,t.firstChild),this.table.rtl?o.branchEl.style.marginRight=(o.branchEl.offsetWidth+o.branchEl.style.marginLeft)*(o.index-1)+o.index*this.indent+"px":o.branchEl.style.marginLeft=(o.branchEl.offsetWidth+o.branchEl.style.marginRight)*(o.index-1)+o.index*this.indent+"px"):this.table.rtl?t.style.paddingRight=parseInt(window.getComputedStyle(t,null).getPropertyValue("padding-right"))+o.index*this.indent+"px":t.style.paddingLeft=parseInt(window.getComputedStyle(t,null).getPropertyValue("padding-left"))+o.index*this.indent+"px")},pb.prototype.generateControlElement=function(e,t){var o=this,i=e.modules.dataTree,n=(t=t||e.getCells()[0].getElement(),i.controlEl);!1!==i.children&&(i.open?(i.controlEl=this.collapseEl.cloneNode(!0),i.controlEl.addEventListener("click",function(t){t.stopPropagation(),o.collapseRow(e)})):(i.controlEl=this.expandEl.cloneNode(!0),i.controlEl.addEventListener("click",function(t){t.stopPropagation(),o.expandRow(e)})),i.controlEl.addEventListener("mousedown",function(e){e.stopPropagation()}),n&&n.parentNode===t?n.parentNode.replaceChild(i.controlEl,n):t.insertBefore(i.controlEl,t.firstChild))},pb.prototype.setDisplayIndex=function(e){this.displayIndex=e},pb.prototype.getDisplayIndex=function(){return this.displayIndex},pb.prototype.getRows=function(e){var t=this,o=[];return e.forEach(function(e,i){var n;o.push(e),e instanceof ya&&(e.create(),(n=e.modules.dataTree.children).index||!1===n.children||t.getChildren(e).forEach(function(e){e.create(),o.push(e)}))}),o},pb.prototype.getChildren=function(e,t){var o=this,i=e.modules.dataTree,n=[],a=[];return!1!==i.children&&(i.open||t)&&(Array.isArray(i.children)||(i.children=this.generateChildren(e)),n=this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(i.children):i.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(n),n.forEach(function(e){a.push(e),o.getChildren(e).forEach(function(e){a.push(e)})})),a},pb.prototype.generateChildren=function(e){var t=this,o=[],i=e.getData()[this.field];return Array.isArray(i)||(i=[i]),i.forEach(function(i){var n=new ya(i||{},t.table.rowManager);n.create(),n.modules.dataTree.index=e.modules.dataTree.index+1,n.modules.dataTree.parent=e,n.modules.dataTree.children&&(n.modules.dataTree.open=t.startOpen(n.getComponent(),n.modules.dataTree.index)),o.push(n)}),o},pb.prototype.expandRow=function(e,t){var o=e.modules.dataTree;!1!==o.children&&(o.open=!0,e.reinitialize(),this.table.rowManager.refreshActiveData("tree",!1,!0),this.table.options.dataTreeRowExpanded(e.getComponent(),e.modules.dataTree.index))},pb.prototype.collapseRow=function(e){var t=e.modules.dataTree;!1!==t.children&&(t.open=!1,e.reinitialize(),this.table.rowManager.refreshActiveData("tree",!1,!0),this.table.options.dataTreeRowCollapsed(e.getComponent(),e.modules.dataTree.index))},pb.prototype.toggleRow=function(e){var t=e.modules.dataTree;!1!==t.children&&(t.open?this.collapseRow(e):this.expandRow(e))},pb.prototype.getTreeParent=function(e){return!!e.modules.dataTree.parent&&e.modules.dataTree.parent.getComponent()},pb.prototype.getFilteredTreeChildren=function(e){var t=e.modules.dataTree,o=[];return t.children&&(Array.isArray(t.children)||(t.children=this.generateChildren(e)),(this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(t.children):t.children).forEach(function(e){e instanceof ya&&o.push(e)})),o},pb.prototype.rowDelete=function(e){var t,o=e.modules.dataTree.parent;o&&(!1!==(t=this.findChildIndex(e,o))&&o.data[this.field].splice(t,1),o.data[this.field].length||delete o.data[this.field],this.initializeRow(o),this.layoutRow(o)),this.table.rowManager.refreshActiveData("tree",!1,!0)},pb.prototype.addTreeChildRow=function(e,t,o,i){var n=!1;"string"==typeof t&&(t=JSON.parse(t)),Array.isArray(e.data[this.field])||(e.data[this.field]=[],e.modules.dataTree.open=this.startOpen(e.getComponent(),e.modules.dataTree.index)),void 0!==i&&!1!==(n=this.findChildIndex(i,e))&&e.data[this.field].splice(o?n:n+1,0,t),!1===n&&(o?e.data[this.field].unshift(t):e.data[this.field].push(t)),this.initializeRow(e),this.layoutRow(e),this.table.rowManager.refreshActiveData("tree",!1,!0)},pb.prototype.findChildIndex=function(e,t){var o=this,i=!1;return"object"==(void 0===e?"undefined":pa(e))?e instanceof ya?i=e.data:e instanceof Oa?i=e._getSelf().data:"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&t.modules.dataTree&&(i=t.modules.dataTree.children.find(function(t){return t instanceof ya&&t.element===e}))&&(i=i.data):i=null!=e&&t.data[this.field].find(function(t){return t.data[o.table.options.index]==e}),i&&(Array.isArray(t.data[this.field])&&(i=t.data[this.field].indexOf(i)),-1==i&&(i=!1)),i},pb.prototype.getTreeChildren=function(e,t,o){var i=this,n=e.modules.dataTree,a=[];return n.children&&(Array.isArray(n.children)||(n.children=this.generateChildren(e)),n.children.forEach(function(e){e instanceof ya&&(a.push(t?e.getComponent():e),o&&(a=a.concat(i.getTreeChildren(e,t,o))))})),a},pb.prototype.checkForRestyle=function(e){e.row.cells.indexOf(e)||e.row.reinitialize()},pb.prototype.getChildField=function(){return this.field},pb.prototype.redrawNeeded=function(e){return!!this.field&&void 0!==e[this.field]||!!this.elementField&&void 0!==e[this.elementField]},ea.prototype.registerModule("dataTree",pb);var sd=function(e){this.table=e};sd.prototype.download=function(e,t,o,i,n){var a=this,r=!1;if("function"==typeof e?r=e:a.downloaders[e]?r=a.downloaders[e]:console.warn("Download Error - No such download type found: ",e),r){var s=this.generateExportList(i);r.call(this.table,s,o||{},function(o,i){n?!0===n?a.triggerDownload(o,i,e,t,!0):n(o):a.triggerDownload(o,i,e,t)})}},sd.prototype.generateExportList=function(e){var t=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,e||this.table.options.downloadRowRange,"download"),o=this.table.options.groupHeaderDownload;return o&&!Array.isArray(o)&&(o=[o]),t.forEach(function(e){var t;"group"===e.type&&(t=e.columns[0],o&&o[e.indent]&&(t.value=o[e.indent](t.value,e.component._group.getRowCount(),e.component._group.getData(),e.component)))}),t},sd.prototype.triggerDownload=function(e,t,o,i,n){var a=document.createElement("a"),r=new Blob([e],{type:t});i=i||"Tabulator."+("function"==typeof o?"txt":o);(r=this.table.options.downloadReady.call(this.table,e,r))&&(n?window.open(window.URL.createObjectURL(r)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(r,i):(a.setAttribute("href",window.URL.createObjectURL(r)),a.setAttribute("download",i),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)),this.table.options.downloadComplete&&this.table.options.downloadComplete())},sd.prototype.commsReceived=function(e,t,o){switch(t){case"intercept":this.download(o.type,"",o.options,o.active,o.intercept);}},sd.prototype.downloaders={csv:function(e,t,o){var i=t&&t.delimiter?t.delimiter:",",n=[],a=[];e.forEach(function(e){var t=[];switch(e.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":e.columns.forEach(function(e,t){e&&1===e.depth&&(a[t]=void 0===e.value||null===e.value?"":"\""+String(e.value).split("\"").join("\"\"")+"\"")});break;case"row":e.columns.forEach(function(e){if(e){switch(pa(e.value)){case"object":e.value=JSON.stringify(e.value);break;case"undefined":case"null":e.value="";}t.push("\""+String(e.value).split("\"").join("\"\"")+"\"")}}),n.push(t.join(i));}}),a.length&&n.unshift(a.join(i)),n=n.join("\n"),t.bom&&(n="\uFEFF"+n),o(n,"text/csv")},json:function(e,t,o){var i=[];e.forEach(function(e){var t={};switch(e.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":e.columns.forEach(function(e){e&&(t[e.component.getField()]=e.value)}),i.push(t);}}),o(i=JSON.stringify(i,null,"\t"),"application/json")},pdf:function(e,t,o){var i=[],n=[],a={},r=t.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},s=t.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},l=t.jsPDF||{},u=t&&t.title?t.title:"";function c(e,t){var o=[];return e.columns.forEach(function(e){var i;if(e){switch(pa(e.value)){case"object":e.value=JSON.stringify(e.value);break;case"undefined":case"null":e.value="";}i={content:e.value,colSpan:e.width,rowSpan:e.height},t&&(i.styles=t),o.push(i)}else o.push("")}),o}l.orientation||(l.orientation=t.orientation||"landscape"),l.unit||(l.unit="pt"),e.forEach(function(e){switch(e.type){case"header":i.push(c(e));break;case"group":n.push(c(e,r));break;case"calc":n.push(c(e,s));break;case"row":n.push(c(e));}});var d=new jsPDF(l);t&&t.autoTable&&(a="function"==typeof t.autoTable?t.autoTable(d)||{}:t.autoTable),u&&(a.addPageContent=function(e){d.text(u,40,30)}),a.head=i,a.body=n,d.autoTable(a),t&&t.documentProcessing&&t.documentProcessing(d),o(d.output("arraybuffer"),"application/pdf")},xlsx:function(e,t,o){var i=t.sheetName||"Sheet1",n=XLSX.utils.book_new();function a(){var t=[],o=[],i={},n={s:{c:0,r:0},e:{c:e[0]?e[0].columns.reduce(function(e,t){return e+(t&&t.width?t.width:1)},0):0,r:e.length}};return e.forEach(function(e,i){var n=[];e.columns.forEach(function(e,t){e?(n.push(e.value instanceof Date||"object"!==pa(e.value)?e.value:JSON.stringify(e.value)),(e.width>1||e.height>-1)&&o.push({s:{r:i,c:t},e:{r:i+e.height-1,c:t+e.width-1}})):n.push("")}),t.push(n)}),XLSX.utils.sheet_add_aoa(i,t),i["!ref"]=XLSX.utils.encode_range(n),o.length&&(i["!merges"]=o),i}if(n.SheetNames=[],n.Sheets={},t.sheetOnly)o(a());else{if(t.sheets)for(var r in t.sheets)!0===t.sheets[r]?(n.SheetNames.push(r),n.Sheets[r]=a()):(n.SheetNames.push(r),this.modules.comms.send(t.sheets[r],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:this.active,intercept:function(e){n.Sheets[r]=e}}));else n.SheetNames.push(i),n.Sheets[i]=a();t.documentProcessing&&(n=t.documentProcessing(n)),o(function(e){for(var t=new ArrayBuffer(e.length),o=new Uint8Array(t),i=0;i!=e.length;++i)o[i]=255&e.charCodeAt(i);return t}(XLSX.write(n,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}},html:function(e,t,o){this.modExists("export",!0)&&o(this.modules.export.genereateHTMLTable(e),"text/html")}},ea.prototype.registerModule("download",sd);var Mb=function(e){this.table=e,this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[]};Mb.prototype.initializeColumn=function(e){var t={editor:!1,blocked:!1,check:e.definition.editable,params:e.definition.editorParams||{}};switch(pa(e.definition.editor)){case"string":"tick"===e.definition.editor&&(e.definition.editor="tickCross",console.warn("DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor")),this.editors[e.definition.editor]?t.editor=this.editors[e.definition.editor]:console.warn("Editor Error - No such editor found: ",e.definition.editor);break;case"function":t.editor=e.definition.editor;break;case"boolean":!0===e.definition.editor&&("function"!=typeof e.definition.formatter?("tick"===e.definition.formatter&&(e.definition.formatter="tickCross",console.warn("DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor")),this.editors[e.definition.formatter]?t.editor=this.editors[e.definition.formatter]:t.editor=this.editors.input):console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",e.definition.formatter));}t.editor&&(e.modules.edit=t)},Mb.prototype.getCurrentCell=function(){return!!this.currentCell&&this.currentCell.getComponent()},Mb.prototype.clearEditor=function(e){var t,o=this.currentCell;if(this.invalidEdit=!1,o){for(this.currentCell=!1,t=o.getElement(),e?o.validate():t.classList.remove("tabulator-validation-fail"),t.classList.remove("tabulator-editing");t.firstChild;)t.removeChild(t.firstChild);o.row.getElement().classList.remove("tabulator-row-editing")}},Mb.prototype.cancelEdit=function(){if(this.currentCell){var e=this.currentCell,t=this.currentCell.getComponent();this.clearEditor(!0),e.setValueActual(e.getValue()),e.cellRendered(),("textarea"==e.column.definition.editor||e.column.definition.variableHeight)&&e.row.normalizeHeight(!0),e.column.cellEvents.cellEditCancelled&&e.column.cellEvents.cellEditCancelled.call(this.table,t),this.table.options.cellEditCancelled.call(this.table,t)}},Mb.prototype.bindEditor=function(e){var t=this,o=e.getElement(!0);o.setAttribute("tabindex",0),o.addEventListener("click",function(e){o.classList.contains("tabulator-editing")||o.focus({preventScroll:!0})}),o.addEventListener("mousedown",function(e){2===e.button?e.preventDefault():t.mouseClick=!0}),o.addEventListener("focus",function(o){t.recursionBlock||t.edit(e,o,!1)})},Mb.prototype.focusCellNoEvent=function(e,t){this.recursionBlock=!0,t&&"ie"===this.table.browser||e.getElement().focus({preventScroll:!0}),this.recursionBlock=!1},Mb.prototype.editCell=function(e,t){this.focusCellNoEvent(e),this.edit(e,!1,t)},Mb.prototype.focusScrollAdjust=function(e){if("virtual"==this.table.rowManager.getRenderMode()){var t=this.table.rowManager.element.scrollTop,o=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,i=e.row.getElement();i.offsetTop;i.offsetTop<t?this.table.rowManager.element.scrollTop-=t-i.offsetTop:i.offsetTop+i.offsetHeight>o&&(this.table.rowManager.element.scrollTop+=i.offsetTop+i.offsetHeight-o);var n=this.table.rowManager.element.scrollLeft,a=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,r=e.getElement();r.offsetLeft;this.table.modExists("frozenColumns")&&(n+=parseInt(this.table.modules.frozenColumns.leftMargin),a-=parseInt(this.table.modules.frozenColumns.rightMargin)),this.table.options.virtualDomHoz&&(n-=parseInt(this.table.vdomHoz.vDomPadLeft),a-=parseInt(this.table.vdomHoz.vDomPadLeft)),r.offsetLeft<n?this.table.rowManager.element.scrollLeft-=n-r.offsetLeft:r.offsetLeft+r.offsetWidth>a&&(this.table.rowManager.element.scrollLeft+=r.offsetLeft+r.offsetWidth-a)}},Mb.prototype.edit=function(e,t,o){var i,n,a,r=this,s=!0,l=function(){},u=e.getElement();if(!this.currentCell){if(e.column.modules.edit.blocked)return this.mouseClick=!1,u.blur(),!1;switch(t&&t.stopPropagation(),pa(e.column.modules.edit.check)){case"function":s=e.column.modules.edit.check(e.getComponent());break;case"boolean":s=e.column.modules.edit.check;}if(s||o){if(r.cancelEdit(),r.currentCell=e,this.focusScrollAdjust(e),n=e.getComponent(),this.mouseClick&&(this.mouseClick=!1,e.column.cellEvents.cellClick&&e.column.cellEvents.cellClick.call(this.table,t,n)),e.column.cellEvents.cellEditing&&e.column.cellEvents.cellEditing.call(this.table,n),r.table.options.cellEditing.call(this.table,n),a="function"==typeof e.column.modules.edit.params?e.column.modules.edit.params(n):e.column.modules.edit.params,!1===(i=e.column.modules.edit.editor.call(r,n,function(e){l=e},function(t){if(r.currentCell===e){var o=!0;return e.column.modules.validate&&r.table.modExists("validate")&&"manual"!=r.table.options.validationMode&&(o=r.table.modules.validate.validate(e.column.modules.validate,e,t)),!0===o||"highlight"===r.table.options.validationMode?(r.clearEditor(),e.modules.edit||(e.modules.edit={}),e.modules.edit.edited=!0,-1==r.editedCells.indexOf(e)&&r.editedCells.push(e),e.setValue(t,!0),r.table.options.dataTree&&r.table.modExists("dataTree")&&r.table.modules.dataTree.checkForRestyle(e),!0===o||(u.classList.add("tabulator-validation-fail"),r.table.options.validationFailed.call(r.table,e.getComponent(),t,o),!1)):(r.invalidEdit=!0,u.classList.add("tabulator-validation-fail"),r.focusCellNoEvent(e,!0),l(),r.table.options.validationFailed.call(r.table,e.getComponent(),t,o),!1)}},function(){r.currentCell===e&&(r.cancelEdit(),r.table.options.dataTree&&r.table.modExists("dataTree")&&r.table.modules.dataTree.checkForRestyle(e))},a)))return u.blur(),!1;if(!(i instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",i),u.blur(),!1;for(u.classList.add("tabulator-editing"),e.row.getElement().classList.add("tabulator-row-editing");u.firstChild;)u.removeChild(u.firstChild);u.appendChild(i),l();for(var c=u.children,d=0;d<c.length;d++)c[d].addEventListener("click",function(e){e.stopPropagation()});return!0}return this.mouseClick=!1,u.blur(),!1}this.invalidEdit||this.cancelEdit()},Mb.prototype.maskInput=function(e,t){var o=t.mask,i=void 0!==t.maskLetterChar?t.maskLetterChar:"A",n=void 0!==t.maskNumberChar?t.maskNumberChar:"9",a=void 0!==t.maskWildcardChar?t.maskWildcardChar:"*";function r(t){var s=o[t];void 0!==s&&s!==a&&s!==i&&s!==n&&(e.value=e.value+""+s,r(t+1))}e.addEventListener("keydown",function(t){var r=e.value.length,s=t.key;if(t.keyCode>46){if(r>=o.length)return t.preventDefault(),t.stopPropagation(),!1,!1;switch(o[r]){case i:if(s.toUpperCase()==s.toLowerCase())return t.preventDefault(),t.stopPropagation(),!1,!1;break;case n:if(isNaN(s))return t.preventDefault(),t.stopPropagation(),!1,!1;break;case a:break;default:if(s!==o[r])return t.preventDefault(),t.stopPropagation(),!1,!1;}!0}}),e.addEventListener("keyup",function(o){o.keyCode>46&&t.maskAutoFill&&r(e.value.length)}),e.placeholder||(e.placeholder=o),t.maskAutoFill&&r(e.value.length)},Mb.prototype.getEditedCells=function(){var e=[];return this.editedCells.forEach(function(t){e.push(t.getComponent())}),e},Mb.prototype.clearEdited=function(e){var t;e.modules.edit&&e.modules.edit.edited&&(e.modules.edit.edited=!1,e.modules.validate&&(e.modules.validate.invalid=!1)),(t=this.editedCells.indexOf(e))>-1&&this.editedCells.splice(t,1)},Mb.prototype.editors={input:function(e,t,o,i,n){var a=e.getValue(),r=document.createElement("input");if(r.setAttribute("type",n.search?"search":"text"),r.style.padding="4px",r.style.width="100%",r.style.boxSizing="border-box",n.elementAttributes&&"object"==pa(n.elementAttributes))for(var s in n.elementAttributes)"+"==s.charAt(0)?(s=s.slice(1),r.setAttribute(s,r.getAttribute(s)+n.elementAttributes["+"+s])):r.setAttribute(s,n.elementAttributes[s]);function l(e){null==a&&""!==r.value||r.value!==a?o(r.value)&&(a=r.value):i()}return r.value=void 0!==a?a:"",t(function(){r.focus({preventScroll:!0}),r.style.height="100%"}),r.addEventListener("change",l),r.addEventListener("blur",l),r.addEventListener("keydown",function(e){switch(e.keyCode){case 13:l();break;case 27:i();break;case 35:case 36:e.stopPropagation();}}),n.mask&&this.table.modules.edit.maskInput(r,n),r},textarea:function(e,t,o,i,n){var a=e.getValue(),r=n.verticalNavigation||"hybrid",s=String(null!=a?a:""),l=((s.match(/(?:\r\n|\r|\n)/g)||[]).length,document.createElement("textarea")),u=0;if(l.style.display="block",l.style.padding="2px",l.style.height="100%",l.style.width="100%",l.style.boxSizing="border-box",l.style.whiteSpace="pre-wrap",l.style.resize="none",n.elementAttributes&&"object"==pa(n.elementAttributes))for(var c in n.elementAttributes)"+"==c.charAt(0)?(c=c.slice(1),l.setAttribute(c,l.getAttribute(c)+n.elementAttributes["+"+c])):l.setAttribute(c,n.elementAttributes[c]);function d(t){null==a&&""!==l.value||l.value!==a?(o(l.value)&&(a=l.value),setTimeout(function(){e.getRow().normalizeHeight()},300)):i()}return l.value=s,t(function(){l.focus({preventScroll:!0}),l.style.height="100%",l.scrollHeight,l.style.height=l.scrollHeight+"px",e.getRow().normalizeHeight()}),l.addEventListener("change",d),l.addEventListener("blur",d),l.addEventListener("keyup",function(){l.style.height="";var t=l.scrollHeight;l.style.height=t+"px",t!=u&&(u=t,e.getRow().normalizeHeight())}),l.addEventListener("keydown",function(e){switch(e.keyCode){case 27:i();break;case 38:("editor"==r||"hybrid"==r&&l.selectionStart)&&(e.stopImmediatePropagation(),e.stopPropagation());break;case 40:("editor"==r||"hybrid"==r&&l.selectionStart!==l.value.length)&&(e.stopImmediatePropagation(),e.stopPropagation());break;case 35:case 36:e.stopPropagation();}}),n.mask&&this.table.modules.edit.maskInput(l,n),l},number:function(e,t,o,i,n){var a=e.getValue(),r=n.verticalNavigation||"editor",s=document.createElement("input");if(s.setAttribute("type","number"),void 0!==n.max&&s.setAttribute("max",n.max),void 0!==n.min&&s.setAttribute("min",n.min),void 0!==n.step&&s.setAttribute("step",n.step),s.style.padding="4px",s.style.width="100%",s.style.boxSizing="border-box",n.elementAttributes&&"object"==pa(n.elementAttributes))for(var l in n.elementAttributes)"+"==l.charAt(0)?(l=l.slice(1),s.setAttribute(l,s.getAttribute(l)+n.elementAttributes["+"+l])):s.setAttribute(l,n.elementAttributes[l]);s.value=a;var u=function(e){c()};function c(){var e=s.value;isNaN(e)||""===e||(e=Number(e)),e!==a?o(e)&&(a=e):i()}return t(function(){s.removeEventListener("blur",u),s.focus({preventScroll:!0}),s.style.height="100%",s.addEventListener("blur",u)}),s.addEventListener("keydown",function(e){switch(e.keyCode){case 13:c();break;case 27:i();break;case 38:case 40:"editor"==r&&(e.stopImmediatePropagation(),e.stopPropagation());break;case 35:case 36:e.stopPropagation();}}),n.mask&&this.table.modules.edit.maskInput(s,n),s},range:function(e,t,o,i,n){var a=e.getValue(),r=document.createElement("input");if(r.setAttribute("type","range"),void 0!==n.max&&r.setAttribute("max",n.max),void 0!==n.min&&r.setAttribute("min",n.min),void 0!==n.step&&r.setAttribute("step",n.step),r.style.padding="4px",r.style.width="100%",r.style.boxSizing="border-box",n.elementAttributes&&"object"==pa(n.elementAttributes))for(var s in n.elementAttributes)"+"==s.charAt(0)?(s=s.slice(1),r.setAttribute(s,r.getAttribute(s)+n.elementAttributes["+"+s])):r.setAttribute(s,n.elementAttributes[s]);function l(){var e=r.value;isNaN(e)||""===e||(e=Number(e)),e!=a?o(e)&&(a=e):i()}return r.value=a,t(function(){r.focus({preventScroll:!0}),r.style.height="100%"}),r.addEventListener("blur",function(e){l()}),r.addEventListener("keydown",function(e){switch(e.keyCode){case 13:l();break;case 27:i();}}),r},select:function(e,t,o,i,n){var a=this,r=this,s=e.getElement(),l=e.getValue(),u=n.verticalNavigation||"editor",c=void 0!==l||null===l?Array.isArray(l)?l:[l]:void 0!==n.defaultValue?n.defaultValue:[],d=document.createElement("input"),h=document.createElement("div"),p=n.multiselect,m=[],v={},f=[],b=[],g=!0,$=!1,w="",y=null;function C(t){var o,i={},n=r.table.getData();return(o=t?r.table.columnManager.getColumnByField(t):e.getColumn()._getSelf())?n.forEach(function(e){var t=o.getFieldValue(e);null!=t&&""!==t&&(i[t]=!0)}):console.warn("unable to find matching column to create select lookup list:",t),Object.keys(i)}function E(t,o){var i=[],a=[];function r(e){e={label:e.label,value:e.value,itemParams:e.itemParams,elementAttributes:e.elementAttributes,element:!1};return o.indexOf(e.value)>-1&&x(e),i.push(e),a.push(e),e}if("function"==typeof t&&(t=t(e)),Array.isArray(t))t.forEach(function(e){var t;"object"===(void 0===e?"undefined":pa(e))?e.options?(t={label:e.label,group:!0,itemParams:e.itemParams,elementAttributes:e.elementAttributes,element:!1},a.push(t),e.options.forEach(function(e){r(e)})):r(e):(t={label:e,value:e,element:!1},o.indexOf(t.value)>-1&&x(t),i.push(t),a.push(t))});else for(var s in t){var l={label:t[s],value:s,element:!1};o.indexOf(l.value)>-1&&x(l),i.push(l),a.push(l)}n.sortValuesList&&(i.sort(function(e,t){return e.label<t.label?-1:e.label>t.label?1:0}),a.sort(function(e,t){return e.label<t.label?-1:e.label>t.label?1:0}),"asc"!==n.sortValuesList&&(i.reverse(),a.reverse())),m=i,f=a,function(){for(;h.firstChild;)h.removeChild(h.firstChild);f.forEach(function(t){var o=t.element;if(!o){if(o=document.createElement("div"),t.label=n.listItemFormatter?n.listItemFormatter(t.value,t.label,e,o,t.itemParams):t.label,t.group?(o.classList.add("tabulator-edit-select-list-group"),o.tabIndex=0,o.innerHTML=""===t.label?"&nbsp;":t.label):(o.classList.add("tabulator-edit-select-list-item"),o.tabIndex=0,o.innerHTML=""===t.label?"&nbsp;":t.label,o.addEventListener("click",function(){$=!0,setTimeout(function(){$=!1},10),p?(K(t),d.focus()):M(t)}),b.indexOf(t)>-1&&o.classList.add("active")),t.elementAttributes&&"object"==pa(t.elementAttributes))for(var i in t.elementAttributes)"+"==i.charAt(0)?(i=i.slice(1),o.setAttribute(i,d.getAttribute(i)+t.elementAttributes["+"+i])):o.setAttribute(i,t.elementAttributes[i]);o.addEventListener("mousedown",function(){g=!1,setTimeout(function(){g=!0},10)}),t.element=o}h.appendChild(o)})}()}function F(e,t){!p&&v&&v.element&&v.element.classList.remove("active"),v&&v.element&&v.element.classList.remove("focused"),v=e,e.element&&(e.element.classList.add("focused"),t&&e.element.classList.add("active")),e&&e.element&&e.element.scrollIntoView&&e.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function x(e){-1==b.indexOf(e)&&(b.push(e),F(e,!0)),D()}function R(e){var t=b[e];e>-1&&(b.splice(e,1),t.element&&t.element.classList.remove("active"))}function K(e){e||(e=v);var t=b.indexOf(e);t>-1?R(t):(!0!==p&&b.length>=p&&R(0),x(e)),D()}function M(e){z(),e||(e=v),e&&(d.value=e.label,o(e.value)),c=[e.value]}function L(e){e||z();var t=[];b.forEach(function(e){t.push(e.value)}),c=t,o(t)}function D(){var e=[];b.forEach(function(t){e.push(t.label)}),d.value=e.join(", "),!1===r.currentCell&&L(!0)}function T(){z(),i()}function z(){h.parentNode&&h.parentNode.removeChild(h),r.table.rowManager.element.removeEventListener("scroll",T)}if((Array.isArray(n)||!Array.isArray(n)&&"object"===(void 0===n?"undefined":pa(n))&&!n.values)&&(console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),n={values:n}),d.setAttribute("type","text"),d.style.padding="4px",d.style.width="100%",d.style.boxSizing="border-box",d.style.cursor="default",d.readOnly=0!=this.currentCell,n.elementAttributes&&"object"==pa(n.elementAttributes))for(var k in n.elementAttributes)"+"==k.charAt(0)?(k=k.slice(1),d.setAttribute(k,d.getAttribute(k)+n.elementAttributes["+"+k])):d.setAttribute(k,n.elementAttributes[k]);return d.value=void 0!==l||null===l?l:"",d.addEventListener("search",function(e){d.value||(!function(){for(var e=b.length,t=0;t<e;t++)R(0)}(),L())}),d.addEventListener("keydown",function(e){var t;switch(e.keyCode){case 38:t=m.indexOf(v),("editor"==u||"hybrid"==u&&t)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t>0&&F(m[t-1],!p));break;case 40:t=m.indexOf(v),("editor"==u||"hybrid"==u&&t<m.length-1)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t<m.length-1&&F(-1==t?m[0]:m[t+1],!p));break;case 37:case 39:e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault();break;case 13:p?K():M();break;case 27:T();break;case 9:break;default:!1===r.currentCell&&e.preventDefault(),e.keyCode>=38&&e.keyCode<=90&&function(e){clearTimeout(y);var t=String.fromCharCode(event.keyCode).toLowerCase();w+=t.toLowerCase();var o=m.find(function(e){return void 0!==e.label&&e.label.toLowerCase().startsWith(w)});o&&F(o,!p),y=setTimeout(function(){w=""},800)}(e.keyCode);}}),d.addEventListener("blur",function(e){g&&(p?L():T())}),d.addEventListener("focus",function(e){$||function(){if(b=[],!h.parentNode){!0===n.values?E(C(),c):"string"==typeof n.values?E(C(n.values),c):E(n.values||[],c);var e=ea.prototype.helpers.elOffset(s);h.style.minWidth=s.offsetWidth+"px",h.style.top=e.top+s.offsetHeight+"px",h.style.left=e.left+"px",h.addEventListener("mousedown",function(e){g=!1,setTimeout(function(){g=!0},10)}),document.body.appendChild(h)}}()}),(h=document.createElement("div")).classList.add("tabulator-edit-select-list"),t(function(){d.style.height="100%",d.focus({preventScroll:!0})}),setTimeout(function(){a.table.rowManager.element.addEventListener("scroll",T)},10),d},autocomplete:function(e,t,o,i,n){var a=this,r=this,s=e.getElement(),l=e.getValue(),u=n.verticalNavigation||"editor",c=void 0!==l||null===l?l:void 0!==n.defaultValue?n.defaultValue:"",d=document.createElement("input"),h=document.createElement("div"),p=[],m=!1,v=!0,f=!1;if(d.setAttribute("type","search"),d.style.padding="4px",d.style.width="100%",d.style.boxSizing="border-box",n.elementAttributes&&"object"==pa(n.elementAttributes))for(var b in n.elementAttributes)"+"==b.charAt(0)?(b=b.slice(1),d.setAttribute(b,d.getAttribute(b)+n.elementAttributes["+"+b])):d.setAttribute(b,n.elementAttributes[b]);function g(){!0===n.values?f=$():"string"==typeof n.values&&(f=$(n.values))}function $(t){var o,i={},a=r.table.getData();return(o=t?r.table.columnManager.getColumnByField(t):e.getColumn()._getSelf())?(a.forEach(function(e){var t=o.getFieldValue(e);null!=t&&""!==t&&(i[t]=!0)}),i=n.sortValuesList?"asc"==n.sortValuesList?Object.keys(i).sort():Object.keys(i).sort().reverse():Object.keys(i)):console.warn("unable to find matching column to create autocomplete lookup list:",t),i}function w(e,t){var o,i,a=[];o=f||n.values||[],n.searchFunc?(a=n.searchFunc(e,o))instanceof Promise?(y(void 0!==n.searchingPlaceholder?n.searchingPlaceholder:"Searching..."),a.then(function(e){F(C(e),t)}).catch(function(e){console.err("error in autocomplete search promise:",e)})):F(C(a),t):(i=C(o),""===e?n.showListOnEmpty&&(a=i):i.forEach(function(t){null===t.value&&void 0===t.value||(String(t.value).toLowerCase().indexOf(String(e).toLowerCase())>-1||String(t.title).toLowerCase().indexOf(String(e).toLowerCase())>-1)&&a.push(t)}),F(a,t))}function y(e){var t=document.createElement("div");E(),!1!==e&&(t.classList.add("tabulator-edit-select-list-notice"),t.tabIndex=0,e instanceof Node?t.appendChild(e):t.innerHTML=e,h.appendChild(t))}function C(e){var t=[];if(Array.isArray(e))e.forEach(function(e){var o={};"object"===(void 0===e?"undefined":pa(e))?(o.title=n.listItemFormatter?n.listItemFormatter(e.value,e.label):e.label,o.value=e.value):(o.title=n.listItemFormatter?n.listItemFormatter(e,e):e,o.value=e),t.push(o)});else for(var o in e){var i={title:n.listItemFormatter?n.listItemFormatter(o,e[o]):e[o],value:o};t.push(i)}return t}function E(){for(;h.firstChild;)h.removeChild(h.firstChild)}function F(e,t){e.length?function(e,t){var o=!1;E(),(p=e).forEach(function(e){var i=e.element;i||((i=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),i.tabIndex=0,i.innerHTML=e.title,i.addEventListener("click",function(t){R(e),x()}),i.addEventListener("mousedown",function(e){v=!1,setTimeout(function(){v=!0},10)}),e.element=i,t&&e.value==l&&(d.value=e.title,e.element.classList.add("active"),o=!0),e===m&&(e.element.classList.add("active"),o=!0)),h.appendChild(i)}),o||R(!1)}(e,t):n.emptyPlaceholder&&y(n.emptyPlaceholder)}function x(){K(),m?l!==m.value?(l=m.value,d.value=m.title,o(m.value)):i():n.freetext?(l=d.value,o(d.value)):n.allowEmpty&&""===d.value?(l=d.value,o(d.value)):i()}function R(e,t){m&&m.element&&m.element.classList.remove("active"),m=e,e&&e.element&&e.element.classList.add("active"),e&&e.element&&e.element.scrollIntoView&&e.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function K(){h.parentNode&&h.parentNode.removeChild(h),r.table.rowManager.element.removeEventListener("scroll",M)}function M(){K(),i()}return h.classList.add("tabulator-edit-select-list"),h.addEventListener("mousedown",function(e){v=!1,setTimeout(function(){v=!0},10)}),d.addEventListener("keydown",function(e){var t;switch(e.keyCode){case 38:t=p.indexOf(m),("editor"==u||"hybrid"==u&&t)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),R(t>0&&p[t-1]));break;case 40:t=p.indexOf(m),("editor"==u||"hybrid"==u&&t<p.length-1)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t<p.length-1&&R(-1==t?p[0]:p[t+1]));break;case 37:case 39:e.stopImmediatePropagation(),e.stopPropagation();break;case 13:x();break;case 27:M();break;case 36:case 35:e.stopImmediatePropagation();}}),d.addEventListener("keyup",function(e){switch(e.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:w(d.value);}}),d.addEventListener("search",function(e){w(d.value)}),d.addEventListener("blur",function(e){v&&x()}),d.addEventListener("focus",function(e){var t=c;g(),function(){if(!h.parentNode){for(console.log("show",c);h.firstChild;)h.removeChild(h.firstChild);var e=ea.prototype.helpers.elOffset(s);h.style.minWidth=s.offsetWidth+"px",h.style.top=e.top+s.offsetHeight+"px",h.style.left=e.left+"px",document.body.appendChild(h)}}(),d.value=t,w(t,!0)}),t(function(){d.style.height="100%",d.focus({preventScroll:!0})}),n.mask&&this.table.modules.edit.maskInput(d,n),setTimeout(function(){a.table.rowManager.element.addEventListener("scroll",M)},10),g(),d.value=c,w(c,!0),d},star:function(e,t,o,i,n){var a=this,r=e.getElement(),s=e.getValue(),l=r.getElementsByTagName("svg").length||5,u=r.getElementsByTagName("svg")[0]?r.getElementsByTagName("svg")[0].getAttribute("width"):14,c=[],d=document.createElement("div"),h=document.createElementNS("http://www.w3.org/2000/svg","svg");function p(e){c.forEach(function(t,o){o<e?("ie"==a.table.browser?t.setAttribute("class","tabulator-star-active"):t.classList.replace("tabulator-star-inactive","tabulator-star-active"),t.innerHTML="<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>"):("ie"==a.table.browser?t.setAttribute("class","tabulator-star-inactive"):t.classList.replace("tabulator-star-active","tabulator-star-inactive"),t.innerHTML="<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>")})}function m(e){var t=document.createElement("span"),i=h.cloneNode(!0);c.push(i),t.addEventListener("mouseenter",function(t){t.stopPropagation(),t.stopImmediatePropagation(),p(e)}),t.addEventListener("mousemove",function(e){e.stopPropagation(),e.stopImmediatePropagation()}),t.addEventListener("click",function(t){t.stopPropagation(),t.stopImmediatePropagation(),o(e),r.blur()}),t.appendChild(i),d.appendChild(t)}function v(e){s=e,p(e)}if(r.style.whiteSpace="nowrap",r.style.overflow="hidden",r.style.textOverflow="ellipsis",d.style.verticalAlign="middle",d.style.display="inline-block",d.style.padding="4px",h.setAttribute("width",u),h.setAttribute("height",u),h.setAttribute("viewBox","0 0 512 512"),h.setAttribute("xml:space","preserve"),h.style.padding="0 1px",n.elementAttributes&&"object"==pa(n.elementAttributes))for(var f in n.elementAttributes)"+"==f.charAt(0)?(f=f.slice(1),d.setAttribute(f,d.getAttribute(f)+n.elementAttributes["+"+f])):d.setAttribute(f,n.elementAttributes[f]);for(var b=1;b<=l;b++)m(b);return p(s=Math.min(parseInt(s),l)),d.addEventListener("mousemove",function(e){p(0)}),d.addEventListener("click",function(e){o(0)}),r.addEventListener("blur",function(e){i()}),r.addEventListener("keydown",function(e){switch(e.keyCode){case 39:v(s+1);break;case 37:v(s-1);break;case 13:o(s);break;case 27:i();}}),d},progress:function(e,t,o,i,n){var a,r,s=e.getElement(),l=void 0===n.max?s.getElementsByTagName("div")[0].getAttribute("max")||100:n.max,u=void 0===n.min?s.getElementsByTagName("div")[0].getAttribute("min")||0:n.min,c=(l-u)/100,d=e.getValue()||0,h=document.createElement("div"),p=document.createElement("div");function m(){var e=window.getComputedStyle(s,null),t=c*Math.round(p.offsetWidth/((s.clientWidth-parseInt(e.getPropertyValue("padding-left"))-parseInt(e.getPropertyValue("padding-right")))/100))+u;o(t),s.setAttribute("aria-valuenow",t),s.setAttribute("aria-label",d)}if(h.style.position="absolute",h.style.right="0",h.style.top="0",h.style.bottom="0",h.style.width="5px",h.classList.add("tabulator-progress-handle"),p.style.display="inline-block",p.style.position="relative",p.style.height="100%",p.style.backgroundColor="#488CE9",p.style.maxWidth="100%",p.style.minWidth="0%",n.elementAttributes&&"object"==pa(n.elementAttributes))for(var v in n.elementAttributes)"+"==v.charAt(0)?(v=v.slice(1),p.setAttribute(v,p.getAttribute(v)+n.elementAttributes["+"+v])):p.setAttribute(v,n.elementAttributes[v]);return s.style.padding="4px 4px",d=Math.min(parseFloat(d),l),d=Math.max(parseFloat(d),u),d=Math.round((d-u)/c),p.style.width=d+"%",s.setAttribute("aria-valuemin",u),s.setAttribute("aria-valuemax",l),p.appendChild(h),h.addEventListener("mousedown",function(e){a=e.screenX,r=p.offsetWidth}),h.addEventListener("mouseover",function(){h.style.cursor="ew-resize"}),s.addEventListener("mousemove",function(e){a&&(p.style.width=r+e.screenX-a+"px")}),s.addEventListener("mouseup",function(e){a&&(e.stopPropagation(),e.stopImmediatePropagation(),a=!1,r=!1,m())}),s.addEventListener("keydown",function(e){switch(e.keyCode){case 39:e.preventDefault(),p.style.width=p.clientWidth+s.clientWidth/100+"px";break;case 37:e.preventDefault(),p.style.width=p.clientWidth-s.clientWidth/100+"px";break;case 9:case 13:m();break;case 27:i();}}),s.addEventListener("blur",function(){i()}),p},tickCross:function(e,t,o,i,n){var a=e.getValue(),r=document.createElement("input"),s=n.tristate,l=void 0===n.indeterminateValue?null:n.indeterminateValue,u=!1;if(r.setAttribute("type","checkbox"),r.style.marginTop="5px",r.style.boxSizing="border-box",n.elementAttributes&&"object"==pa(n.elementAttributes))for(var c in n.elementAttributes)"+"==c.charAt(0)?(c=c.slice(1),r.setAttribute(c,r.getAttribute(c)+n.elementAttributes["+"+c])):r.setAttribute(c,n.elementAttributes[c]);function d(e){return s?e?u?l:r.checked:r.checked&&!u?(r.checked=!1,r.indeterminate=!0,u=!0,l):(u=!1,r.checked):r.checked}return r.value=a,!s||void 0!==a&&a!==l&&""!==a||(u=!0,r.indeterminate=!0),"firefox"!=this.table.browser&&t(function(){r.focus({preventScroll:!0})}),r.checked=!0===a||"true"===a||"True"===a||1===a,t(function(){r.focus()}),r.addEventListener("change",function(e){o(d())}),r.addEventListener("blur",function(e){o(d(!0))}),r.addEventListener("keydown",function(e){13==e.keyCode&&o(d()),27==e.keyCode&&i()}),r}},ea.prototype.registerModule("edit",Mb);var gj=function(e,t,o,i){this.type=e,this.columns=t,this.component=o||!1,this.indent=i||0},Dg=function(e,t,o,i,n){this.value=e,this.component=t||!1,this.width=o,this.height=i,this.depth=n},Cb=function(e){this.table=e,this.config={},this.cloneTableStyle=!0,this.colVisProp=""};Cb.prototype.generateExportList=function(e,t,o,i){this.cloneTableStyle=t,this.config=e||{},this.colVisProp=i;var n=!1!==this.config.columnHeaders?this.headersToExportRows(this.generateColumnGroupHeaders()):[],a=this.bodyToExportRows(this.rowLookup(o));return n.concat(a)},Cb.prototype.genereateTable=function(e,t,o,i){var n=this.generateExportList(e,t,o,i);return this.genereateTableElement(n)},Cb.prototype.rowLookup=function(e){var t=this,o=[];if("function"==typeof e)e.call(this.table).forEach(function(e){(e=t.table.rowManager.findRow(e))&&o.push(e)});else switch(e){case!0:case"visible":o=this.table.rowManager.getVisibleRows(!0);break;case"all":o=this.table.rowManager.rows;break;case"selected":o=this.table.modules.selectRow.selectedRows;break;case"active":default:o=this.table.options.pagination?this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2):this.table.rowManager.getDisplayRows();}return Object.assign([],o)},Cb.prototype.generateColumnGroupHeaders=function(){var e=this,t=[];return(!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex).forEach(function(o){var i=e.processColumnGroup(o);i&&t.push(i)}),t},Cb.prototype.processColumnGroup=function(e){var t=this,o=e.columns,i=0,n={title:e.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||e.definition.title,column:e,depth:1};if(o.length){if(n.subGroups=[],n.width=0,o.forEach(function(e){var o=t.processColumnGroup(e);o&&(n.width+=o.width,n.subGroups.push(o),o.depth>i&&(i=o.depth))}),n.depth+=i,!n.width)return!1}else{if(!this.columnVisCheck(e))return!1;n.width=1}return n},Cb.prototype.columnVisCheck=function(e){return!1!==e.definition[this.colVisProp]&&(e.visible||!e.visible&&e.definition[this.colVisProp])},Cb.prototype.headersToExportRows=function(e){var t=[],o=0,i=[];return e.forEach(function(e){e.depth>o&&(o=e.depth)}),e.forEach(function(e){!function e(i,n){var a=o-n;if(void 0===t[n]&&(t[n]=[]),i.height=i.subGroups?1:a-i.depth+1,t[n].push(i),i.height>1)for(var r=1;r<i.height;r++)void 0===t[n+r]&&(t[n+r]=[]),t[n+r].push(!1);if(i.width>1)for(var s=1;s<i.width;s++)t[n].push(!1);i.subGroups&&i.subGroups.forEach(function(t){e(t,n+1)})}(e,0)}),t.forEach(function(e){var t=[];e.forEach(function(e){e?t.push(new Dg(e.title,e.column.getComponent(),e.width,e.height,e.depth)):t.push(null)}),i.push(new gj("header",t))}),i},Cb.prototype.bodyToExportRows=function(e){var t=this,o=[],i=[];return this.table.columnManager.columnsByIndex.forEach(function(e){t.columnVisCheck(e)&&o.push(e.getComponent())}),!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&e.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&e.push(this.table.modules.columnCalcs.botRow)),(e=e.filter(function(e){switch(e.type){case"group":return!1!==t.config.rowGroups;case"calc":return!1!==t.config.columnCalcs;case"row":return!(t.table.options.dataTree&&!1===t.config.dataTree&&e.modules.dataTree.parent);}return!0})).forEach(function(e,n){var a=e.getData(t.colVisProp),r=[],s=0;switch(e.type){case"group":s=e.level,r.push(new Dg(e.key,e.getComponent(),o.length,1));break;case"calc":case"row":o.forEach(function(e){r.push(new Dg(e._column.getFieldValue(a),e,1,1))}),t.table.options.dataTree&&!1!==t.config.dataTree&&(s=e.modules.dataTree.index);}i.push(new gj(e.type,r,e.getComponent(),s))}),i},Cb.prototype.genereateTableElement=function(e){var t=this,o=document.createElement("table"),i=document.createElement("thead"),n=document.createElement("tbody"),a=this.lookupTableStyles(),r=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],s={};return s.rowFormatter=null!==r?r:this.table.options.rowFormatter,this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")&&(s.treeElementField=this.table.modules.dataTree.elementField),s.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],s.groupHeader&&!Array.isArray(s.groupHeader)&&(s.groupHeader=[s.groupHeader]),o.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),i,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),e.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),e.forEach(function(e,o){switch(e.type){case"header":i.appendChild(t.genereateHeaderElement(e,s,a));break;case"group":n.appendChild(t.genereateGroupElement(e,s,a));break;case"calc":n.appendChild(t.genereateCalcElement(e,s,a));break;case"row":var r=t.genereateRowElement(e,s,a);t.mapElementStyles(o%2&&a.evenRow?a.evenRow:a.oddRow,r,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),n.appendChild(r);}}),i.innerHTML&&o.appendChild(i),o.appendChild(n),this.mapElementStyles(this.table.element,o,["border-top","border-left","border-right","border-bottom"]),o},Cb.prototype.lookupTableStyles=function(){var e={};return this.cloneTableStyle&&window.getComputedStyle&&(e.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),e.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),e.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),e.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),e.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],e.firstRow&&(e.styleCells=e.firstRow.getElementsByClassName("tabulator-cell"),e.firstCell=e.styleCells[0],e.lastCell=e.styleCells[e.styleCells.length-1])),e},Cb.prototype.genereateHeaderElement=function(e,t,o){var i=this,n=document.createElement("tr");return e.columns.forEach(function(e){if(e){var t=document.createElement("th"),o=e.component._column.definition.cssClass?e.component._column.definition.cssClass.split(" "):[];t.colSpan=e.width,t.rowSpan=e.height,t.innerHTML=e.value,i.cloneTableStyle&&(t.style.boxSizing="border-box"),o.forEach(function(e){t.classList.add(e)}),i.mapElementStyles(e.component.getElement(),t,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),i.mapElementStyles(e.component._column.contentElement,t,["padding-top","padding-left","padding-right","padding-bottom"]),e.component._column.visible?i.mapElementStyles(e.component.getElement(),t,["width"]):e.component._column.definition.width&&(t.style.width=e.component._column.definition.width+"px"),e.component._column.parent&&i.mapElementStyles(e.component._column.parent.groupElement,t,["border-top"]),n.appendChild(t)}}),n},Cb.prototype.genereateGroupElement=function(e,t,o){var i=document.createElement("tr"),n=document.createElement("td"),a=e.columns[0];return i.classList.add("tabulator-print-table-row"),t.groupHeader&&t.groupHeader[e.indent]?a.value=t.groupHeader[e.indent](a.value,e.component._group.getRowCount(),e.component._group.getData(),e.component):!1===t.groupHeader?a.value=a.value:a.value=e.component._group.generator(a.value,e.component._group.getRowCount(),e.component._group.getData(),e.component),n.colSpan=a.width,n.innerHTML=a.value,i.classList.add("tabulator-print-table-group"),i.classList.add("tabulator-group-level-"+e.indent),a.component.isVisible()&&i.classList.add("tabulator-group-visible"),this.mapElementStyles(o.firstGroup,i,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(o.firstGroup,n,["padding-top","padding-left","padding-right","padding-bottom"]),i.appendChild(n),i},Cb.prototype.genereateCalcElement=function(e,t,o){var i=this.genereateRowElement(e,t,o);return i.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(o.calcRow,i,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),i},Cb.prototype.genereateRowElement=function(e,t,o){var n=this,a=document.createElement("tr");return a.classList.add("tabulator-print-table-row"),e.columns.forEach(function(r){if(r){var s=document.createElement("td"),l=r.component._column,u=r.value,c={modules:{},getValue:function(){return u},getField:function(){return l.definition.field},getElement:function(){return s},getColumn:function(){return l.getComponent()},getData:function(){return e.component.getData()},getRow:function(){return e.component},getComponent:function(){return c},column:l};if((l.definition.cssClass?l.definition.cssClass.split(" "):[]).forEach(function(e){s.classList.add(e)}),n.table.modExists("format")&&!1!==n.config.formatCells)u=n.table.modules.format.formatExportValue(c,n.colVisProp);else switch(void 0===u?"undefined":pa(u)){case"object":u=JSON.stringify(u);break;case"undefined":case"null":u="";break;default:u=u;}u instanceof Node?s.appendChild(u):s.innerHTML=u,o.firstCell&&(n.mapElementStyles(o.firstCell,s,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),l.definition.align&&(s.style.textAlign=l.definition.align)),n.table.options.dataTree&&!1!==n.config.dataTree&&(t.treeElementField&&t.treeElementField==l.field||!t.treeElementField&&0==i)&&(e.component._row.modules.dataTree.controlEl&&s.insertBefore(e.component._row.modules.dataTree.controlEl.cloneNode(!0),s.firstChild),e.component._row.modules.dataTree.branchEl&&s.insertBefore(e.component._row.modules.dataTree.branchEl.cloneNode(!0),s.firstChild)),a.appendChild(s),c.modules.format&&c.modules.format.renderedCallback&&c.modules.format.renderedCallback(),t.rowFormatter&&!1!==n.config.formatCells&&t.rowFormatter(e.component)}}),a},Cb.prototype.genereateHTMLTable=function(e){var t=document.createElement("div");return t.appendChild(this.genereateTableElement(e)),t.innerHTML},Cb.prototype.getHtml=function(e,t,o,i){var n=this.generateExportList(o||this.table.options.htmlOutputConfig,t,e,i||"htmlOutput");return this.genereateHTMLTable(n)},Cb.prototype.mapElementStyles=function(e,t,o){if(this.cloneTableStyle&&e&&t){var i={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var n=window.getComputedStyle(e);o.forEach(function(e){t.style[i[e]]=n.getPropertyValue(e)})}}},ea.prototype.registerModule("export",Cb);var ib=function(e){this.table=e,this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1};ib.prototype.initializeColumn=function(e,t){var o,i=this,n=e.getField();e.modules.filter={success:function(t){var a,r="input"==e.modules.filter.tagType&&"text"==e.modules.filter.attrType||"textarea"==e.modules.filter.tagType?"partial":"match",s="",l="";if(void 0===e.modules.filter.prevSuccess||e.modules.filter.prevSuccess!==t){if(e.modules.filter.prevSuccess=t,e.modules.filter.emptyFunc(t))delete i.headerFilters[n];else{switch(e.modules.filter.value=t,pa(e.definition.headerFilterFunc)){case"string":i.filters[e.definition.headerFilterFunc]?(s=e.definition.headerFilterFunc,a=function(o){var n=e.definition.headerFilterFuncParams||{},a=e.getFieldValue(o);return n="function"==typeof n?n(t,a,o):n,i.filters[e.definition.headerFilterFunc](t,a,o,n)}):console.warn("Header Filter Error - Matching filter function not found: ",e.definition.headerFilterFunc);break;case"function":s=a=function(o){var i=e.definition.headerFilterFuncParams||{},n=e.getFieldValue(o);return i="function"==typeof i?i(t,n,o):i,e.definition.headerFilterFunc(t,n,o,i)};}if(!a)switch(r){case"partial":a=function(o){var i=e.getFieldValue(o);return null!=i&&String(i).toLowerCase().indexOf(String(t).toLowerCase())>-1},s="like";break;default:a=function(o){return e.getFieldValue(o)==t},s="=";}i.headerFilters[n]={value:t,func:a,type:s,params:o||{}}}l=JSON.stringify(i.headerFilters),i.prevHeaderFilterChangeCheck!==l&&(i.prevHeaderFilterChangeCheck=l,i.changed=!0,i.table.rowManager.filterRefresh())}return!0},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(e)},ib.prototype.generateHeaderFilterElement=function(e,t,o){var i,n,a,r,s,l,u,c=this,d=this,h=e.modules.filter.success,p=e.getField();if(e.modules.filter.headerElement&&e.modules.filter.headerElement.parentNode&&e.contentElement.removeChild(e.modules.filter.headerElement.parentNode),p){switch(e.modules.filter.emptyFunc=e.definition.headerFilterEmptyCheck||function(e){return!e&&"0"!==e&&0!==e},(i=document.createElement("div")).classList.add("tabulator-header-filter"),pa(e.definition.headerFilter)){case"string":d.table.modules.edit.editors[e.definition.headerFilter]?(n=d.table.modules.edit.editors[e.definition.headerFilter],"tick"!==e.definition.headerFilter&&"tickCross"!==e.definition.headerFilter||e.definition.headerFilterEmptyCheck||(e.modules.filter.emptyFunc=function(e){return!0!==e&&!1!==e})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",e.definition.editor);break;case"function":n=e.definition.headerFilter;break;case"boolean":e.modules.edit&&e.modules.edit.editor?n=e.modules.edit.editor:e.definition.formatter&&d.table.modules.edit.editors[e.definition.formatter]?(n=d.table.modules.edit.editors[e.definition.formatter],"tick"!==e.definition.formatter&&"tickCross"!==e.definition.formatter||e.definition.headerFilterEmptyCheck||(e.modules.filter.emptyFunc=function(e){return!0!==e&&!1!==e})):n=d.table.modules.edit.editors.input;}if(n){if(r={getValue:function(){return void 0!==t?t:""},getField:function(){return e.definition.field},getElement:function(){return i},getColumn:function(){return e.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},u="function"==typeof(u=e.definition.headerFilterParams||{})?u.call(d.table):u,!(a=n.call(this.table.modules.edit,r,function(){},h,function(){},u)))return void console.warn("Filter Error - Cannot add filter to "+p+" column, editor returned a value of false");if(!(a instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+p+" column, editor should return an instance of Node, the editor returned:",a);p?d.table.modules.localize.bind("headerFilters|columns|"+e.definition.field,function(e){a.setAttribute("placeholder",void 0!==e&&e?e:d.table.modules.localize.getText("headerFilters|default"))}):d.table.modules.localize.bind("headerFilters|default",function(e){a.setAttribute("placeholder",void 0!==d.column.definition.headerFilterPlaceholder&&d.column.definition.headerFilterPlaceholder?d.column.definition.headerFilterPlaceholder:e)}),a.addEventListener("click",function(e){e.stopPropagation(),a.focus()}),a.addEventListener("focus",function(e){var t=c.table.columnManager.element.scrollLeft;t!==c.table.rowManager.element.scrollLeft&&(c.table.rowManager.scrollHorizontal(t),c.table.columnManager.scrollHorizontal(t))}),s=!1,l=function(e){s&&clearTimeout(s),s=setTimeout(function(){h(a.value)},d.table.options.headerFilterLiveFilterDelay)},e.modules.filter.headerElement=a,e.modules.filter.attrType=a.hasAttribute("type")?a.getAttribute("type").toLowerCase():"",e.modules.filter.tagType=a.tagName.toLowerCase(),!1!==e.definition.headerFilterLiveFilter&&("autocomplete"!==e.definition.headerFilter&&"tickCross"!==e.definition.headerFilter&&("autocomplete"!==e.definition.editor&&"tickCross"!==e.definition.editor||!0!==e.definition.headerFilter)&&(a.addEventListener("keyup",l),a.addEventListener("search",l),"number"==e.modules.filter.attrType&&a.addEventListener("change",function(e){h(a.value)}),"text"==e.modules.filter.attrType&&"ie"!==this.table.browser&&a.setAttribute("type","search")),"input"!=e.modules.filter.tagType&&"select"!=e.modules.filter.tagType&&"textarea"!=e.modules.filter.tagType||a.addEventListener("mousedown",function(e){e.stopPropagation()})),i.appendChild(a),e.contentElement.appendChild(i),o||d.headerFilterColumns.push(e)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",e.definition.title)},ib.prototype.hideHeaderFilterElements=function(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="none")})},ib.prototype.showHeaderFilterElements=function(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="")})},ib.prototype.setHeaderFilterFocus=function(e){e.modules.filter&&e.modules.filter.headerElement?e.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",e.getField())},ib.prototype.getHeaderFilterValue=function(e){if(e.modules.filter&&e.modules.filter.headerElement)return e.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",e.getField())},ib.prototype.setHeaderFilterValue=function(e,t){e&&(e.modules.filter&&e.modules.filter.headerElement?(this.generateHeaderFilterElement(e,t,!0),e.modules.filter.success(t)):console.warn("Column Filter Error - No header filter set on column:",e.getField()))},ib.prototype.reloadHeaderFilter=function(e){e&&(e.modules.filter&&e.modules.filter.headerElement?this.generateHeaderFilterElement(e,e.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",e.getField()))},ib.prototype.hasChanged=function(){var e=this.changed;return this.changed=!1,e},ib.prototype.setFilter=function(e,t,o,i){this.filterList=[],Array.isArray(e)||(e=[{field:e,type:t,value:o,params:i}]),this.addFilter(e)},ib.prototype.addFilter=function(e,t,o,i){var n=this;Array.isArray(e)||(e=[{field:e,type:t,value:o,params:i}]),e.forEach(function(e){(e=n.findFilter(e))&&(n.filterList.push(e),n.changed=!0)}),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter&&this.table.modules.persistence.save("filter")},ib.prototype.findFilter=function(e){var t,o=this;if(Array.isArray(e))return this.findSubFilters(e);var i=!1;return"function"==typeof e.field?i=function(t){return e.field(t,e.type||{})}:o.filters[e.type]?i=(t=o.table.columnManager.getColumnByField(e.field))?function(i){return o.filters[e.type](e.value,t.getFieldValue(i),i,e.params||{})}:function(t){return o.filters[e.type](e.value,t[e.field],t,e.params||{})}:console.warn("Filter Error - No such filter type found, ignoring: ",e.type),e.func=i,!!e.func&&e},ib.prototype.findSubFilters=function(e){var t=this,o=[];return e.forEach(function(e){(e=t.findFilter(e))&&o.push(e)}),!!o.length&&o},ib.prototype.getFilters=function(e,t){var o=[];return e&&(o=this.getHeaderFilters()),t&&o.forEach(function(e){"function"==typeof e.type&&(e.type="function")}),o=o.concat(this.filtersToArray(this.filterList,t))},ib.prototype.filtersToArray=function(e,t){var o=this,i=[];return e.forEach(function(e){var n;Array.isArray(e)?i.push(o.filtersToArray(e,t)):(n={field:e.field,type:e.type,value:e.value},t&&"function"==typeof n.type&&(n.type="function"),i.push(n))}),i},ib.prototype.getHeaderFilters=function(){var e=[];for(var t in this.headerFilters)e.push({field:t,type:this.headerFilters[t].type,value:this.headerFilters[t].value});return e},ib.prototype.removeFilter=function(e,t,o){var i=this;Array.isArray(e)||(e=[{field:e,type:t,value:o}]),e.forEach(function(e){var t=-1;(t="object"==pa(e.field)?i.filterList.findIndex(function(t){return e===t}):i.filterList.findIndex(function(t){return e.field===t.field&&e.type===t.type&&e.value===t.value}))>-1?(i.filterList.splice(t,1),i.changed=!0):console.warn("Filter Error - No matching filter type found, ignoring: ",e.type)}),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter&&this.table.modules.persistence.save("filter")},ib.prototype.clearFilter=function(e){this.filterList=[],e&&this.clearHeaderFilter(),this.changed=!0,this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter&&this.table.modules.persistence.save("filter")},ib.prototype.clearHeaderFilter=function(){var e=this;this.headerFilters={},e.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(function(t){void 0!==t.modules.filter.value&&delete t.modules.filter.value,t.modules.filter.prevSuccess=void 0,e.reloadHeaderFilter(t)}),this.changed=!0},ib.prototype.search=function(e,t,o,i){var n=this,a=[],r=[];return Array.isArray(t)||(t=[{field:t,type:o,value:i}]),t.forEach(function(e){(e=n.findFilter(e))&&r.push(e)}),this.table.rowManager.rows.forEach(function(t){var o=!0;r.forEach(function(e){n.filterRecurse(e,t.getData())||(o=!1)}),o&&a.push("data"===e?t.getData("data"):t.getComponent())}),a},ib.prototype.filter=function(e,t){var o=this,i=[],n=[];return o.table.options.dataFiltering&&o.table.options.dataFiltering.call(o.table,o.getFilters()),o.table.options.ajaxFiltering||!o.filterList.length&&!Object.keys(o.headerFilters).length?i=e.slice(0):e.forEach(function(e){o.filterRow(e)&&i.push(e)}),o.table.options.dataFiltered&&(i.forEach(function(e){n.push(e.getComponent())}),o.table.options.dataFiltered.call(o.table,o.getFilters(),n)),i},ib.prototype.filterRow=function(e,t){var o=this,i=!0,n=e.getData();for(var a in o.filterList.forEach(function(e){o.filterRecurse(e,n)||(i=!1)}),o.headerFilters)o.headerFilters[a].func(n)||(i=!1);return i},ib.prototype.filterRecurse=function(e,t){var o=this,i=!1;return Array.isArray(e)?e.forEach(function(e){o.filterRecurse(e,t)&&(i=!0)}):i=e.func(t),i},ib.prototype.filters={"=":function(e,t,o,i){return t==e},"<":function(e,t,o,i){return t<e},"<=":function(e,t,o,i){return t<=e},">":function(e,t,o,i){return t>e},">=":function(e,t,o,i){return t>=e},"!=":function(e,t,o,i){return t!=e},regex:function(e,t,o,i){return"string"==typeof e&&(e=new RegExp(e)),e.test(t)},like:function(e,t,o,i){return null==e?t===e:null!=t&&String(t).toLowerCase().indexOf(e.toLowerCase())>-1},keywords:function(e,t,o,i){var n=e.toLowerCase().split(void 0===i.separator?" ":i.separator),a=String(null==t?"":t).toLowerCase(),r=[];return n.forEach(function(e){a.includes(e)&&r.push(!0)}),i.matchAll?r.length===n.length:!!r.length},starts:function(e,t,o,i){return null==e?t===e:null!=t&&String(t).toLowerCase().startsWith(e.toLowerCase())},ends:function(e,t,o,i){return null==e?t===e:null!=t&&String(t).toLowerCase().endsWith(e.toLowerCase())},in:function(e,t,o,i){return Array.isArray(e)?!e.length||e.indexOf(t)>-1:(console.warn("Filter Error - filter value is not an array:",e),!1)}},ea.prototype.registerModule("filter",ib);var pc=function(e){this.table=e};pc.prototype.initializeColumn=function(e){e.modules.format=this.lookupFormatter(e,""),void 0!==e.definition.formatterPrint&&(e.modules.format.print=this.lookupFormatter(e,"Print")),void 0!==e.definition.formatterClipboard&&(e.modules.format.clipboard=this.lookupFormatter(e,"Clipboard")),void 0!==e.definition.formatterHtmlOutput&&(e.modules.format.htmlOutput=this.lookupFormatter(e,"HtmlOutput"))},pc.prototype.lookupFormatter=function(e,t){var o={params:e.definition["formatter"+t+"Params"]||{}},i=e.definition["formatter"+t];switch(void 0===i?"undefined":pa(i)){case"string":"tick"===i&&(i="tickCross",void 0===o.params.crossElement&&(o.params.crossElement=!1),console.warn("DEPRECATION WARNING - the tick formatter has been deprecated, please use the tickCross formatter with the crossElement param set to false")),this.formatters[i]?o.formatter=this.formatters[i]:(console.warn("Formatter Error - No such formatter found: ",i),o.formatter=this.formatters.plaintext);break;case"function":o.formatter=i;break;default:o.formatter=this.formatters.plaintext;}return o},pc.prototype.cellRendered=function(e){e.modules.format&&e.modules.format.renderedCallback&&!e.modules.format.rendered&&(e.modules.format.renderedCallback(),e.modules.format.rendered=!0)},pc.prototype.formatValue=function(e){var t=e.getComponent(),o="function"==typeof e.column.modules.format.params?e.column.modules.format.params(t):e.column.modules.format.params;return e.column.modules.format.formatter.call(this,t,o,function(t){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=t,e.modules.format.rendered=!1})},pc.prototype.formatExportValue=function(e,t){var o,i=e.column.modules.format[t];if(i){return o="function"==typeof i.params?i.params(component):i.params,i.formatter.call(this,e.getComponent(),o,function(t){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=t,e.modules.format.rendered=!1})}return this.formatValue(e)},pc.prototype.sanitizeHTML=function(e){if(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,function(e){return t[e]})}return e},pc.prototype.emptyToSpace=function(e){return null==e||""===e?"&nbsp;":e},pc.prototype.getFormatter=function(e){switch(void 0===e?"undefined":pa(e)){case"string":this.formatters[e]?e=this.formatters[e]:(console.warn("Formatter Error - No such formatter found: ",e),e=this.formatters.plaintext);break;case"function":e=e;break;default:e=this.formatters.plaintext;}return e},pc.prototype.formatters={plaintext:function(e,t,o){return this.emptyToSpace(this.sanitizeHTML(e.getValue()))},html:function(e,t,o){return e.getValue()},textarea:function(e,t,o){return e.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(e.getValue()))},money:function(e,t,o){var i,n,a,r,s=parseFloat(e.getValue()),l=t.decimal||".",u=t.thousand||",",c=t.symbol||"",d=!!t.symbolAfter,h=void 0!==t.precision?t.precision:2;if(isNaN(s))return this.emptyToSpace(this.sanitizeHTML(e.getValue()));for(i=!1!==h?s.toFixed(h):s,n=(i=String(i).split("."))[0],a=i.length>1?l+i[1]:"",r=/(\d+)(\d{3})/;r.test(n);)n=n.replace(r,"$1"+u+"$2");return d?n+a+c:c+n+a},link:function(e,t,o){var i=e.getValue(),n=t.urlPrefix||"",a=t.download,r=i,s=document.createElement("a");if(t.labelField&&(r=e.getData()[t.labelField]),t.label)switch(pa(t.label)){case"string":r=t.label;break;case"function":r=t.label(e);}if(r){if(t.urlField&&(i=e.getData()[t.urlField]),t.url)switch(pa(t.url)){case"string":i=t.url;break;case"function":i=t.url(e);}return s.setAttribute("href",n+i),t.target&&s.setAttribute("target",t.target),t.download&&(a="function"==typeof a?a(e):!0===a?"":a,s.setAttribute("download",a)),s.innerHTML=this.emptyToSpace(this.sanitizeHTML(r)),s}return"&nbsp;"},image:function(e,t,o){var i=document.createElement("img"),n=e.getValue();switch(t.urlPrefix&&(n=t.urlPrefix+e.getValue()),t.urlSuffix&&(n+=t.urlSuffix),i.setAttribute("src",n),pa(t.height)){case"number":i.style.height=t.height+"px";break;case"string":i.style.height=t.height;}switch(pa(t.width)){case"number":i.style.width=t.width+"px";break;case"string":i.style.width=t.width;}return i.addEventListener("load",function(){e.getRow().normalizeHeight()}),i},tickCross:function(e,t,o){var i=e.getValue(),n=e.getElement(),a=t.allowEmpty,r=t.allowTruthy,s=void 0!==t.tickElement?t.tickElement:"<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>",l=void 0!==t.crossElement?t.crossElement:"<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>";return r&&i||!0===i||"true"===i||"True"===i||1===i||"1"===i?(n.setAttribute("aria-checked",!0),s||""):!a||"null"!==i&&""!==i&&null!=i?(n.setAttribute("aria-checked",!1),l||""):(n.setAttribute("aria-checked","mixed"),"")},datetime:function(e,t,o){var i=t.inputFormat||"YYYY-MM-DD hh:mm:ss",n=t.outputFormat||"DD/MM/YYYY hh:mm:ss",a=void 0!==t.invalidPlaceholder?t.invalidPlaceholder:"",r=e.getValue(),s=moment(r,i);return s.isValid()?t.timezone?s.tz(t.timezone).format(n):s.format(n):!0===a?r:"function"==typeof a?a(r):a},datetimediff:function(e,t,o){var i=t.inputFormat||"YYYY-MM-DD hh:mm:ss",n=void 0!==t.invalidPlaceholder?t.invalidPlaceholder:"",a=void 0!==t.suffix&&t.suffix,r=void 0!==t.unit?t.unit:void 0,s=void 0!==t.humanize&&t.humanize,l=void 0!==t.date?t.date:moment(),u=e.getValue(),c=moment(u,i);return c.isValid()?s?moment.duration(c.diff(l)).humanize(a):c.diff(l,r)+(a?" "+a:""):!0===n?u:"function"==typeof n?n(u):n},lookup:function(e,t,o){var i=e.getValue();return void 0===t[i]?(console.warn("Missing display value for "+i),i):t[i]},star:function(e,t,o){var i=e.getValue(),n=e.getElement(),a=t&&t.stars?t.stars:5,r=document.createElement("span"),s=document.createElementNS("http://www.w3.org/2000/svg","svg");r.style.verticalAlign="middle",s.setAttribute("width","14"),s.setAttribute("height","14"),s.setAttribute("viewBox","0 0 512 512"),s.setAttribute("xml:space","preserve"),s.style.padding="0 1px",i=i&&!isNaN(i)?parseInt(i):0,i=Math.max(0,Math.min(i,a));for(var l=1;l<=a;l++){var u=s.cloneNode(!0);u.innerHTML=l<=i?"<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>":"<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>",r.appendChild(u)}return n.style.whiteSpace="nowrap",n.style.overflow="hidden",n.style.textOverflow="ellipsis",n.setAttribute("aria-label",i),r},traffic:function(e,t,o){var i,n,a=this.sanitizeHTML(e.getValue())||0,r=document.createElement("span"),s=t&&t.max?t.max:100,l=t&&t.min?t.min:0,u=t&&void 0!==t.color?t.color:["red","orange","green"],c="#666666";if(!isNaN(a)&&void 0!==e.getValue()){switch(r.classList.add("tabulator-traffic-light"),n=parseFloat(a)<=s?parseFloat(a):s,n=parseFloat(n)>=l?parseFloat(n):l,i=(s-l)/100,n=Math.round((n-l)/i),void 0===u?"undefined":pa(u)){case"string":c=u;break;case"function":c=u(a);break;case"object":if(Array.isArray(u)){var d=100/u.length,h=Math.floor(n/d);h=Math.min(h,u.length-1),c=u[h=Math.max(h,0)];break}}return r.style.backgroundColor=c,r}},progress:function(e,t,o){var i,n,a,r,s,l=this.sanitizeHTML(e.getValue())||0,u=e.getElement(),c=t&&t.max?t.max:100,d=t&&t.min?t.min:0,h=t&&t.legendAlign?t.legendAlign:"center";switch(n=parseFloat(l)<=c?parseFloat(l):c,n=parseFloat(n)>=d?parseFloat(n):d,i=(c-d)/100,n=Math.round((n-d)/i),pa(t.color)){case"string":a=t.color;break;case"function":a=t.color(l);break;case"object":if(Array.isArray(t.color)){var p=100/t.color.length,m=Math.floor(n/p);m=Math.min(m,t.color.length-1),m=Math.max(m,0),a=t.color[m];break}default:a="#2DC214";}switch(pa(t.legend)){case"string":r=t.legend;break;case"function":r=t.legend(l);break;case"boolean":r=l;break;default:r=!1;}switch(pa(t.legendColor)){case"string":s=t.legendColor;break;case"function":s=t.legendColor(l);break;case"object":if(Array.isArray(t.legendColor)){p=100/t.legendColor.length,m=Math.floor(n/p);m=Math.min(m,t.legendColor.length-1),m=Math.max(m,0),s=t.legendColor[m]}break;default:s="#000";}u.style.minWidth="30px",u.style.position="relative",u.setAttribute("aria-label",n);var v=document.createElement("div");if(v.style.display="inline-block",v.style.position="relative",v.style.width=n+"%",v.style.backgroundColor=a,v.style.height="100%",v.setAttribute("data-max",c),v.setAttribute("data-min",d),r){var f=document.createElement("div");f.style.position="absolute",f.style.top="4px",f.style.left=0,f.style.textAlign=h,f.style.width="100%",f.style.color=s,f.innerHTML=r}return o(function(){if(!(e instanceof kb)){var t=document.createElement("div");t.style.position="absolute",t.style.top="4px",t.style.bottom="4px",t.style.left="4px",t.style.right="4px",u.appendChild(t),u=t}u.appendChild(v),r&&u.appendChild(f)}),""},color:function(e,t,o){return e.getElement().style.backgroundColor=this.sanitizeHTML(e.getValue()),""},buttonTick:function(e,t,o){return"<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>"},buttonCross:function(e,t,o){return"<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>"},rownum:function(e,t,o){return this.table.rowManager.activeRows.indexOf(e.getRow()._getSelf())+1},handle:function(e,t,o){return e.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(e,t,o){var i=document.createElement("div"),n=e.getRow()._row.modules.responsiveLayout;function a(e){var t=n.element;n.open=e,t&&(n.open?(i.classList.add("open"),t.style.display=""):(i.classList.remove("open"),t.style.display="none"))}return i.classList.add("tabulator-responsive-collapse-toggle"),i.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",e.getElement().classList.add("tabulator-row-handle"),i.addEventListener("click",function(e){e.stopImmediatePropagation(),a(!n.open)}),a(n.open),i},rowSelection:function(e,t,o){var i=this,n=document.createElement("input");if(n.type="checkbox",this.table.modExists("selectRow",!0))if(n.addEventListener("click",function(e){e.stopPropagation()}),"function"==typeof e.getRow){var a=e.getRow();a instanceof Oa?(n.addEventListener("change",function(e){a.toggleSelect()}),n.checked=a.isSelected&&a.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(a,n)):n=""}else n.addEventListener("change",function(e){i.table.modules.selectRow.selectedRows.length?i.table.deselectRow():i.table.selectRow(t.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(n);return n}},ea.prototype.registerModule("format",pc);var Tb=function(e){this.table=e,this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1};Tb.prototype.reset=function(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0},Tb.prototype.initializeColumn=function(e){var t={margin:0,edge:!1};e.isGroup||(this.frozenCheck(e)?(t.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(e):this.rightColumns.unshift(e),this.active=!0,e.modules.frozen=t):this.initializationMode="right")},Tb.prototype.frozenCheck=function(e){return e.parent.isGroup&&e.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),e.parent.isGroup?this.frozenCheck(e.parent):e.definition.frozen},Tb.prototype.scrollHorizontal=function(){var e,t=this;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout(function(){t.layout()},100),e=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),e.forEach(function(e){"row"===e.type&&t.layoutRow(e)}),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)},Tb.prototype.calcMargins=function(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft},Tb.prototype.layoutCalcRows=function(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow))},Tb.prototype.layoutColumnPosition=function(e){var t=this,o=[];this.leftColumns.forEach(function(i,n){if(i.modules.frozen.margin=t._calcSpace(t.leftColumns,n)+t.table.columnManager.scrollLeft+"px",n==t.leftColumns.length-1?i.modules.frozen.edge=!0:i.modules.frozen.edge=!1,i.parent.isGroup){var a=t.getColGroupParentElement(i);o.includes(a)||(t.layoutElement(a,i),o.push(a)),i.modules.frozen.edge&&a.classList.add("tabulator-frozen-"+i.modules.frozen.position)}else t.layoutElement(i.getElement(),i);e&&i.cells.forEach(function(e){t.layoutElement(e.getElement(!0),i)})}),this.rightColumns.forEach(function(o,i){o.modules.frozen.margin=t.rightPadding-t._calcSpace(t.rightColumns,i+1)+"px",i==t.rightColumns.length-1?o.modules.frozen.edge=!0:o.modules.frozen.edge=!1,o.parent.isGroup?t.layoutElement(t.getColGroupParentElement(o),o):t.layoutElement(o.getElement(),o),e&&o.cells.forEach(function(e){t.layoutElement(e.getElement(!0),o)})})},Tb.prototype.getColGroupParentElement=function(e){return e.parent.isGroup?this.getColGroupParentElement(e.parent):e.getElement()},Tb.prototype.layout=function(){var e=this;e.active&&(this.calcMargins(),e.table.rowManager.getDisplayRows().forEach(function(t){"row"===t.type&&e.layoutRow(t)}),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)},Tb.prototype.layoutRow=function(e){var t=this;e.getElement().style.paddingLeft=this.leftMargin,this.leftColumns.forEach(function(o){var i=e.getCell(o);i&&t.layoutElement(i.getElement(!0),o)}),this.rightColumns.forEach(function(o){var i=e.getCell(o);i&&t.layoutElement(i.getElement(!0),o)})},Tb.prototype.layoutElement=function(e,t){t.modules.frozen&&(e.style.position="absolute",e.style.left=t.modules.frozen.margin,e.classList.add("tabulator-frozen"),t.modules.frozen.edge&&e.classList.add("tabulator-frozen-"+t.modules.frozen.position))},Tb.prototype._calcSpace=function(e,t){for(var o=0,i=0;i<t;i++)e[i].visible&&(o+=e[i].getWidth());return o},ea.prototype.registerModule("frozenColumns",Tb);var qc=function(e){this.table=e,this.topElement=document.createElement("div"),this.rows=[],this.displayIndex=0};qc.prototype.initialize=function(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling)},qc.prototype.setDisplayIndex=function(e){this.displayIndex=e},qc.prototype.getDisplayIndex=function(){return this.displayIndex},qc.prototype.isFrozen=function(){return!!this.rows.length},qc.prototype.getRows=function(e){var t=e.slice(0);return this.rows.forEach(function(e){var o=t.indexOf(e);o>-1&&t.splice(o,1)}),t},qc.prototype.freezeRow=function(e){e.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(e.modules.frozen=!0,this.topElement.appendChild(e.getElement()),e.initialize(),e.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(e),this.table.rowManager.refreshActiveData("display"),this.styleRows())},qc.prototype.unfreezeRow=function(e){this.rows.indexOf(e);e.modules.frozen?(e.modules.frozen=!1,this.detachRow(e),this.table.rowManager.adjustTableSize(),this.table.rowManager.refreshActiveData("display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")},qc.prototype.detachRow=function(e){var t=this.rows.indexOf(e);if(t>-1){var o=e.getElement();o.parentNode.removeChild(o),this.rows.splice(t,1)}},qc.prototype.styleRows=function(e){var t=this;this.rows.forEach(function(e,o){t.table.rowManager.styleRow(e,o)})},ea.prototype.registerModule("frozenRows",qc);var Nb=function(e){this._group=e,this.type="GroupComponent"};Nb.prototype.getKey=function(){return this._group.key},Nb.prototype.getField=function(){return this._group.field},Nb.prototype.getElement=function(){return this._group.element},Nb.prototype.getRows=function(){return this._group.getRows(!0)},Nb.prototype.getSubGroups=function(){return this._group.getSubGroups(!0)},Nb.prototype.getParentGroup=function(){return!!this._group.parent&&this._group.parent.getComponent()},Nb.prototype.getVisibility=function(){return console.warn("getVisibility function is deprecated, you should now use the isVisible function"),this._group.visible},Nb.prototype.isVisible=function(){return this._group.visible},Nb.prototype.show=function(){this._group.show()},Nb.prototype.hide=function(){this._group.hide()},Nb.prototype.toggle=function(){this._group.toggleVisibility()},Nb.prototype._getSelf=function(){return this._group},Nb.prototype.getTable=function(){return this._group.groupManager.table};var Ha=function(e,t,o,i,n,a,r){this.groupManager=e,this.parent=t,this.key=i,this.level=o,this.field=n,this.hasSubGroups=o<e.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=r,this.rows=[],this.groups=[],this.groupList=[],this.generator=a,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=r?r.visible:void 0!==e.startOpen[o]?e.startOpen[o]:e.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()};Ha.prototype.wipe=function(){this.groupList.length?this.groupList.forEach(function(e){e.wipe()}):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)},Ha.prototype.createElements=function(){var e=document.createElement("div");e.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(e),!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)},Ha.prototype.createValueGroups=function(){var e=this,t=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[t]&&this.groupManager.allowedValues[t].forEach(function(o){e._createGroup(o,t)})},Ha.prototype.addBindings=function(){var e,t,o,i=this;i.groupManager.table.options.groupClick&&i.element.addEventListener("click",function(e){i.groupManager.table.options.groupClick.call(i.groupManager.table,e,i.getComponent())}),i.groupManager.table.options.groupDblClick&&i.element.addEventListener("dblclick",function(e){i.groupManager.table.options.groupDblClick.call(i.groupManager.table,e,i.getComponent())}),i.groupManager.table.options.groupContext&&i.element.addEventListener("contextmenu",function(e){i.groupManager.table.options.groupContext.call(i.groupManager.table,e,i.getComponent())}),(i.groupManager.table.options.groupContextMenu||i.groupManager.table.options.groupClickMenu)&&i.groupManager.table.modExists("menu")&&i.groupManager.table.modules.menu.initializeGroup.call(i.groupManager.table.modules.menu,i),i.groupManager.table.options.groupTap&&(o=!1,i.element.addEventListener("touchstart",function(e){o=!0},{passive:!0}),i.element.addEventListener("touchend",function(e){o&&i.groupManager.table.options.groupTap(e,i.getComponent()),o=!1})),i.groupManager.table.options.groupDblTap&&(e=null,i.element.addEventListener("touchend",function(t){e?(clearTimeout(e),e=null,i.groupManager.table.options.groupDblTap(t,i.getComponent())):e=setTimeout(function(){clearTimeout(e),e=null},300)})),i.groupManager.table.options.groupTapHold&&(t=null,i.element.addEventListener("touchstart",function(e){clearTimeout(t),t=setTimeout(function(){clearTimeout(t),t=null,o=!1,i.groupManager.table.options.groupTapHold(e,i.getComponent())},1e3)},{passive:!0}),i.element.addEventListener("touchend",function(e){clearTimeout(t),t=null})),i.groupManager.table.options.groupToggleElement&&("arrow"==i.groupManager.table.options.groupToggleElement?i.arrowElement:i.element).addEventListener("click",function(e){e.stopPropagation(),e.stopImmediatePropagation(),i.toggleVisibility()})},Ha.prototype._createGroup=function(e,t){var o=t+"_"+e,i=new Ha(this.groupManager,this,t,e,this.groupManager.groupIDLookups[t].field,this.groupManager.headerGenerator[t]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[o]);this.groups[o]=i,this.groupList.push(i)},Ha.prototype._addRowToGroup=function(e){var t=this.level+1;if(this.hasSubGroups){var o=this.groupManager.groupIDLookups[t].func(e.getData()),i=t+"_"+o;this.groupManager.allowedValues&&this.groupManager.allowedValues[t]?this.groups[i]&&this.groups[i].addRow(e):(this.groups[i]||this._createGroup(o,t),this.groups[i].addRow(e))}},Ha.prototype._addRow=function(e){this.rows.push(e),e.modules.group=this},Ha.prototype.insertRow=function(e,t,o){var i=this.conformRowData({});e.updateData(i);var n=this.rows.indexOf(t);n>-1?o?this.rows.splice(n+1,0,e):this.rows.splice(n,0,e):o?this.rows.push(e):this.rows.unshift(e),e.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)},Ha.prototype.scrollHeader=function(e){this.arrowElement.style.marginLeft=e,this.groupList.forEach(function(t){t.scrollHeader(e)})},Ha.prototype.getRowIndex=function(e){},Ha.prototype.conformRowData=function(e){return this.field?e[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(e=this.parent.conformRowData(e)),e},Ha.prototype.removeRow=function(e){var t=this.rows.indexOf(e),o=e.getElement();t>-1&&this.rows.splice(t,1),this.groupManager.table.options.groupValues||this.rows.length?(o.parentNode&&o.parentNode.removeChild(o),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))},Ha.prototype.removeGroup=function(e){var t,o=e.level+"_"+e.key;this.groups[o]&&(delete this.groups[o],(t=this.groupList.indexOf(e))>-1&&this.groupList.splice(t,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))},Ha.prototype.getHeadersAndRows=function(e){var t=[];return t.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach(function(o){t=t.concat(o.getHeadersAndRows(e))}):(!e&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),t.push(this.calcs.top)),t=t.concat(this.rows),!e&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),t.push(this.calcs.bottom))):this.groupList.length||"table"==this.groupManager.table.options.columnCalcs||this.groupManager.table.modExists("columnCalcs")&&(!e&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),t.push(this.calcs.top))),!e&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),t.push(this.calcs.bottom)))),t},Ha.prototype.getData=function(e,t){var o=[];return this._visSet(),(!e||e&&this.visible)&&this.rows.forEach(function(e){o.push(e.getData(t||"data"))}),o},Ha.prototype.getRowCount=function(){var e=0;return this.groupList.length?this.groupList.forEach(function(t){e+=t.getRowCount()}):e=this.rows.length,e},Ha.prototype.toggleVisibility=function(){this.visible?this.hide():this.show()},Ha.prototype.hide=function(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(function(e){e.getHeadersAndRows().forEach(function(e){e.detachElement()})}):this.rows.forEach(function(e){var t=e.getElement();t.parentNode.removeChild(t)}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.options.groupVisibilityChanged.call(this.table,this.getComponent(),!1)},Ha.prototype.show=function(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var e=this.getElement();this.groupList.length?this.groupList.forEach(function(t){t.getHeadersAndRows().forEach(function(t){var o=t.getElement();e.parentNode.insertBefore(o,e.nextSibling),t.initialize(),e=o})}):this.rows.forEach(function(t){var o=t.getElement();e.parentNode.insertBefore(o,e.nextSibling),t.initialize(),e=o}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.options.groupVisibilityChanged.call(this.table,this.getComponent(),!0)},Ha.prototype._visSet=function(){var e=[];"function"==typeof this.visible&&(this.rows.forEach(function(t){e.push(t.getData())}),this.visible=this.visible(this.key,this.getRowCount(),e,this.getComponent()))},Ha.prototype.getRowGroup=function(e){var t=!1;return this.groupList.length?this.groupList.forEach(function(o){var i=o.getRowGroup(e);i&&(t=i)}):this.rows.find(function(t){return t===e})&&(t=this),t},Ha.prototype.getSubGroups=function(e){var t=[];return this.groupList.forEach(function(o){t.push(e?o.getComponent():o)}),t},Ha.prototype.getRows=function(e){var t=[];return this.rows.forEach(function(o){t.push(e?o.getComponent():o)}),t},Ha.prototype.generateGroupHeaderContents=function(){var e=[];for(this.rows.forEach(function(t){e.push(t.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),e,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)},Ha.prototype.getPath=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.unshift(this.key),this.parent&&this.parent.getPath(e),e},Ha.prototype.getElement=function(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var e=0;e<this.element.childNodes.length;++e)this.element.childNodes[e].parentNode.removeChild(this.element.childNodes[e]);return this.generateGroupHeaderContents(),this.element},Ha.prototype.detachElement=function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)},Ha.prototype.normalizeHeight=function(){this.setHeight(this.element.clientHeight)},Ha.prototype.initialize=function(e){this.initialized&&!e||(this.normalizeHeight(),this.initialized=!0)},Ha.prototype.reinitialize=function(){this.initialized=!1,this.height=0,ea.prototype.helpers.elVisible(this.element)&&this.initialize(!0)},Ha.prototype.setHeight=function(e){this.height!=e&&(this.height=e,this.outerHeight=this.element.offsetHeight)},Ha.prototype.getHeight=function(){return this.outerHeight},Ha.prototype.getGroup=function(){return this},Ha.prototype.reinitializeHeight=function(){},Ha.prototype.calcHeight=function(){},Ha.prototype.setCellHeight=function(){},Ha.prototype.clearCellHeight=function(){},Ha.prototype.getComponent=function(){return this.component||(this.component=new Nb(this)),this.component};var sb=function(e){this.table=e,this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0};sb.prototype.initialize=function(){var e=this,t=e.table.options.groupBy,o=e.table.options.groupStartOpen,i=e.table.options.groupHeader;(this.allowedValues=e.table.options.groupValues,Array.isArray(t)&&Array.isArray(i)&&t.length>i.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),e.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],e.table.modules.localize.bind("groups|item",function(t,o){e.headerGenerator[0]=function(e,i,n){return(void 0===e?"":e)+"<span>("+i+" "+(1===i?t:o.groups.items)+")</span>"}}),this.groupIDLookups=[],Array.isArray(t)||t)?this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs&&this.table.columnManager.getRealColumns().forEach(function(t){t.definition.topCalc&&e.table.modules.columnCalcs.initializeTopRow(),t.definition.bottomCalc&&e.table.modules.columnCalcs.initializeBottomRow()});Array.isArray(t)||(t=[t]),t.forEach(function(t,o){var i,n;i="function"==typeof t?t:(n=e.table.columnManager.getColumnByField(t))?function(e){return n.getFieldValue(e)}:function(e){return e[t]},e.groupIDLookups.push({field:"function"!=typeof t&&t,func:i,values:!!e.allowedValues&&e.allowedValues[o]})}),o&&(Array.isArray(o)||(o=[o]),o.forEach(function(e){e="function"==typeof e?e:function(){return!0}}),e.startOpen=o),i&&(e.headerGenerator=Array.isArray(i)?i:[i]),this.initialized=!0},sb.prototype.setDisplayIndex=function(e){this.displayIndex=e},sb.prototype.getDisplayIndex=function(){return this.displayIndex},sb.prototype.getRows=function(e){return this.groupIDLookups.length?(this.table.options.dataGrouping.call(this.table),this.generateGroups(e),this.table.options.dataGrouped&&this.table.options.dataGrouped.call(this.table,this.getGroups(!0)),this.updateGroupRows()):e.slice(0)},sb.prototype.getGroups=function(e){var t=[];return this.groupList.forEach(function(o){t.push(e?o.getComponent():o)}),t},sb.prototype.getChildGroups=function(e){var t=this,o=[];return e||(e=this),e.groupList.forEach(function(e){e.groupList.length?o=o.concat(t.getChildGroups(e)):o.push(e)}),o},sb.prototype.wipe=function(){this.groupList.forEach(function(e){e.wipe()})},sb.prototype.pullGroupListData=function(e){var t=this,o=[];return e.forEach(function(e){var i={level:0,rowCount:0,headerContent:""},n=[];e.hasSubGroups?(n=t.pullGroupListData(e.groupList),i.level=e.level,i.rowCount=n.length-e.groupList.length,i.headerContent=e.generator(e.key,i.rowCount,e.rows,e),o.push(i),o=o.concat(n)):(i.level=e.level,i.headerContent=e.generator(e.key,e.rows.length,e.rows,e),i.rowCount=e.getRows().length,o.push(i),e.getRows().forEach(function(e){o.push(e.getData("data"))}))}),o},sb.prototype.getGroupedData=function(){return this.pullGroupListData(this.groupList)},sb.prototype.getRowGroup=function(e){var t=!1;return this.groupList.forEach(function(o){var i=o.getRowGroup(e);i&&(t=i)}),t},sb.prototype.countGroups=function(){return this.groupList.length},sb.prototype.generateGroups=function(e){var t=this,o=t.groups;t.groups={},t.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(function(e){t.createGroup(e,0,o)}),e.forEach(function(e){t.assignRowToExistingGroup(e,o)})):e.forEach(function(e){t.assignRowToGroup(e,o)})},sb.prototype.createGroup=function(e,t,o){var i,n=t+"_"+e;o=o||[],i=new Ha(this,!1,t,e,this.groupIDLookups[0].field,this.headerGenerator[0],o[n]),this.groups[n]=i,this.groupList.push(i)},sb.prototype.assignRowToExistingGroup=function(e,t){var o="0_"+this.groupIDLookups[0].func(e.getData());this.groups[o]&&this.groups[o].addRow(e)},sb.prototype.assignRowToGroup=function(e,t){var o=this.groupIDLookups[0].func(e.getData()),i=!this.groups["0_"+o];return i&&this.createGroup(o,0,t),this.groups["0_"+o].addRow(e),!i},sb.prototype.reassignRowToGroup=function(e){var t=e.getGroup(),o=t.getPath(),i=this.getExpectedPath(e);o.length==i.length&&o.every(function(e,t){return e===i[t]})||(t.removeRow(e),this.assignRowToGroup(e,self.groups),this.table.rowManager.refreshActiveData("group",!1,!0))},sb.prototype.getExpectedPath=function(e){var t=[],o=e.getData();return this.groupIDLookups.forEach(function(e){t.push(e.func(o))}),t},sb.prototype.updateGroupRows=function(e){var t=[];if(this.groupList.forEach(function(e){t=t.concat(e.getHeadersAndRows())}),e){var o=this.table.rowManager.setDisplayRows(t,this.getDisplayIndex());!0!==o&&this.setDisplayIndex(o),this.table.rowManager.refreshActiveData("group",!0,!0)}return t},sb.prototype.scrollHeaders=function(e){this.table.options.virtualDomHoz&&(e-=this.table.vdomHoz.vDomPadLeft),e+="px",this.groupList.forEach(function(t){t.scrollHeader(e)})},sb.prototype.removeGroup=function(e){var t,o=e.level+"_"+e.key;this.groups[o]&&(delete this.groups[o],(t=this.groupList.indexOf(e))>-1&&this.groupList.splice(t,1))},ea.prototype.registerModule("groupRows",sb);var ec=function(e){this.table=e,this.history=[],this.index=-1};ec.prototype.clear=function(){this.history=[],this.index=-1},ec.prototype.action=function(e,t,o){this.history=this.history.slice(0,this.index+1),this.history.push({type:e,component:t,data:o}),this.index++},ec.prototype.getHistoryUndoSize=function(){return this.index+1},ec.prototype.getHistoryRedoSize=function(){return this.history.length-(this.index+1)},ec.prototype.clearComponentHistory=function(e){var t=this.history.findIndex(function(t){return t.component===e});t>-1&&(this.history.splice(t,1),t<=this.index&&this.index--,this.clearComponentHistory(e))},ec.prototype.undo=function(){if(this.index>-1){var e=this.history[this.index];return this.undoers[e.type].call(this,e),this.index--,this.table.options.historyUndo.call(this.table,e.type,e.component.getComponent(),e.data),!0}return console.warn("History Undo Error - No more history to undo"),!1},ec.prototype.redo=function(){if(this.history.length-1>this.index){this.index++;var e=this.history[this.index];return this.redoers[e.type].call(this,e),this.table.options.historyRedo.call(this.table,e.type,e.component.getComponent(),e.data),!0}return console.warn("History Redo Error - No more history to redo"),!1},ec.prototype.undoers={cellEdit:function(e){e.component.setValueProcessData(e.data.oldValue)},rowAdd:function(e){e.component.deleteActual()},rowDelete:function(e){var t=this.table.rowManager.addRowActual(e.data.data,e.data.pos,e.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(e.component,t)},rowMove:function(e){this.table.rowManager.moveRowActual(e.component,this.table.rowManager.rows[e.data.posFrom],!e.data.after),this.table.rowManager.redraw()}},ec.prototype.redoers={cellEdit:function(e){e.component.setValueProcessData(e.data.newValue)},rowAdd:function(e){var t=this.table.rowManager.addRowActual(e.data.data,e.data.pos,e.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(e.component,t)},rowDelete:function(e){e.component.deleteActual()},rowMove:function(e){this.table.rowManager.moveRowActual(e.component,this.table.rowManager.rows[e.data.posTo],e.data.after),this.table.rowManager.redraw()}},ec.prototype._rebindRow=function(e,t){this.history.forEach(function(o){if(o.component instanceof ya)o.component===e&&(o.component=t);else if(o.component instanceof Na&&o.component.row===e){var i=o.component.column.getField();i&&(o.component=t.getCell(i))}})},ea.prototype.registerModule("history",ec);var bd=function(e){this.table=e,this.fieldIndex=[],this.hasIndex=!1};bd.prototype.parseTable=function(){var e=this.table.element,t=this.table.options,o=(t.columns,e.getElementsByTagName("th")),i=e.getElementsByTagName("tbody")[0],n=[];this.hasIndex=!1,this.table.options.htmlImporting.call(this.table),i=i?i.getElementsByTagName("tr"):[],this._extractOptions(e,t),o.length?this._extractHeaders(o,i):this._generateBlankHeaders(o,i);for(var a=0;a<i.length;a++){var r=i[a].getElementsByTagName("td"),s={};this.hasIndex||(s[t.index]=a);for(var l=0;l<r.length;l++){var u=r[l];void 0!==this.fieldIndex[l]&&(s[this.fieldIndex[l]]=u.innerHTML)}n.push(s)}var c=document.createElement("div"),d=e.attributes;for(var l in d)"object"==pa(d[l])&&c.setAttribute(d[l].name,d[l].value);e.parentNode.replaceChild(c,e),t.data=n,this.table.options.htmlImported.call(this.table),this.table.element=c},bd.prototype._extractOptions=function(e,t,o){var i=e.attributes,n=o?Object.assign([],o):Object.keys(t),a={};for(var r in n.forEach(function(e){a[e.toLowerCase()]=e}),i){var s,l=i[r];l&&"object"==(void 0===l?"undefined":pa(l))&&l.name&&0===l.name.indexOf("tabulator-")&&(s=l.name.replace("tabulator-",""),void 0!==a[s]&&(t[a[s]]=this._attribValue(l.value)))}},bd.prototype._attribValue=function(e){return"true"===e||"false"!==e&&e},bd.prototype._findCol=function(e){return this.table.options.columns.find(function(t){return t.title===e})||!1},bd.prototype._extractHeaders=function(e,t){for(var o=0;o<e.length;o++){var i,n=e[o],a=!1,r=this._findCol(n.textContent);r?a=!0:r={title:n.textContent.trim()},r.field||(r.field=n.textContent.trim().toLowerCase().replace(" ","_")),(i=n.getAttribute("width"))&&!r.width&&(r.width=i),n.attributes,this._extractOptions(n,r,ra.prototype.defaultOptionList),this.fieldIndex[o]=r.field,r.field==this.table.options.index&&(this.hasIndex=!0),a||this.table.options.columns.push(r)}},bd.prototype._generateBlankHeaders=function(e,t){for(var o=0;o<e.length;o++){var i=e[o],n={title:"",field:"col"+o};this.fieldIndex[o]=n.field;var a=i.getAttribute("width");a&&(n.width=a),this.table.options.columns.push(n)}},ea.prototype.registerModule("htmlTableImport",bd);var wc=function(e){this.table=e,this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1};wc.prototype.initialize=function(){var e=this.table.options.keybindings,t={};if(this.watchKeys={},this.pressedKeys=[],!1!==e){for(var o in this.bindings)t[o]=this.bindings[o];if(Object.keys(e).length)for(var i in e)t[i]=e[i];this.mapBindings(t),this.bindEvents()}},wc.prototype.mapBindings=function(e){var t=this,o=this,i=function(i){t.actions[i]?e[i]&&("object"!==pa(e[i])&&(e[i]=[e[i]]),e[i].forEach(function(e){o.mapBinding(i,e)})):console.warn("Key Binding Error - no such action:",i)};for(var n in e)i(n)},wc.prototype.mapBinding=function(e,t){var o=this,i={action:this.actions[e],keys:[],ctrl:!1,shift:!1,meta:!1};t.toString().toLowerCase().split(" ").join("").split("+").forEach(function(e){switch(e){case"ctrl":i.ctrl=!0;break;case"shift":i.shift=!0;break;case"meta":i.meta=!0;break;default:e=parseInt(e),i.keys.push(e),o.watchKeys[e]||(o.watchKeys[e]=[]),o.watchKeys[e].push(i);}})},wc.prototype.bindEvents=function(){var e=this;this.keyupBinding=function(t){var o=t.keyCode,i=e.watchKeys[o];i&&(e.pressedKeys.push(o),i.forEach(function(o){e.checkBinding(t,o)}))},this.keydownBinding=function(t){var o=t.keyCode;if(e.watchKeys[o]){var i=e.pressedKeys.indexOf(o);i>-1&&e.pressedKeys.splice(i,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)},wc.prototype.clearBindings=function(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)},wc.prototype.checkBinding=function(e,t){var o=this,i=!0;return e.ctrlKey==t.ctrl&&e.shiftKey==t.shift&&e.metaKey==t.meta&&(t.keys.forEach(function(e){-1==o.pressedKeys.indexOf(e)&&(i=!1)}),i&&t.action.call(o,e),!0)},wc.prototype.bindings={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},wc.prototype.actions={keyBlock:function(e){e.stopPropagation(),e.preventDefault()},scrollPageUp:function(e){var t=this.table.rowManager,o=t.scrollTop-t.height;t.element.scrollHeight;e.preventDefault(),t.displayRowsCount&&(o>=0?t.element.scrollTop=o:t.scrollToRow(t.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(e){var t=this.table.rowManager,o=t.scrollTop+t.height,i=t.element.scrollHeight;e.preventDefault(),t.displayRowsCount&&(o<=i?t.element.scrollTop=o:t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(e){var t=this.table.rowManager;e.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(e){var t=this.table.rowManager;e.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1]),this.table.element.focus()},navPrev:function(e){var t=!1;this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell)&&(e.preventDefault(),t.nav().prev())},navNext:function(e){var t,o=!1,i=this.table.options.tabEndNewRow;this.table.modExists("edit")&&(o=this.table.modules.edit.currentCell)&&(e.preventDefault(),(t=o.nav()).next()||i&&(o.getElement().firstChild.blur(),(i=!0===i?this.table.addRow({}):"function"==typeof i?this.table.addRow(i(o.row.getComponent())):this.table.addRow(Object.assign({},i))).then(function(){setTimeout(function(){t.next()})})))},navLeft:function(e){var t=!1;this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell)&&(e.preventDefault(),t.nav().left())},navRight:function(e){var t=!1;this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell)&&(e.preventDefault(),t.nav().right())},navUp:function(e){var t=!1;this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell)&&(e.preventDefault(),t.nav().up())},navDown:function(e){var t=!1;this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell)&&(e.preventDefault(),t.nav().down())},undo:function(e){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(e.preventDefault(),this.table.modules.history.undo()))},redo:function(e){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(e.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(e){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}},ea.prototype.registerModule("keybindings",wc);var Ob=function(e){this.table=e,this.menuElements=[],this.blurEvent=this.hideMenu.bind(this),this.escEvent=this.escMenu.bind(this),this.nestedMenuBlock=!1,this.positionReversedX=!1};Ob.prototype.initializeColumnHeader=function(e){var t,o=this;e.definition.headerContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,e.definition.headerContextMenu)),this.tapHold(e,e.definition.headerContextMenu)),e.definition.headerMenu&&((t=document.createElement("span")).classList.add("tabulator-header-menu-button"),t.innerHTML="&vellip;",t.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),o.LoadMenuEvent(e,e.definition.headerMenu,t)}),e.titleElement.insertBefore(t,e.titleElement.firstChild))},Ob.prototype.LoadMenuEvent=function(e,t,o){t="function"==typeof t?t.call(this.table,e.getComponent(),o):t,this.loadMenu(o,e,t)},Ob.prototype.tapHold=function(e,t){var o=this,i=e.getElement(),n=null,a=!1;i.addEventListener("touchstart",function(i){clearTimeout(n),a=!1,n=setTimeout(function(){clearTimeout(n),n=null,a=!0,o.LoadMenuEvent(e,t,i)},1e3)},{passive:!0}),i.addEventListener("touchend",function(e){clearTimeout(n),n=null,a&&e.preventDefault()})},Ob.prototype.initializeCell=function(e){e.column.definition.contextMenu&&(e.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,e.column.definition.contextMenu)),this.tapHold(e,e.column.definition.contextMenu)),e.column.definition.clickMenu&&e.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,e,e.column.definition.clickMenu))},Ob.prototype.initializeRow=function(e){this.table.options.rowContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,this.table.options.rowContextMenu)),this.tapHold(e,this.table.options.rowContextMenu)),this.table.options.rowClickMenu&&e.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,e,this.table.options.rowClickMenu))},Ob.prototype.initializeGroup=function(e){this.table.options.groupContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,this.table.options.groupContextMenu)),this.tapHold(e,this.table.options.groupContextMenu)),this.table.options.groupClickMenu&&e.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,e,this.table.options.groupClickMenu))},Ob.prototype.loadMenu=function(e,t,o,i){var n=this,a=!(e instanceof MouseEvent),r=document.createElement("div");if(r.classList.add("tabulator-menu"),a||e.preventDefault(),o&&o.length){if(!i){if(this.nestedMenuBlock){if(this.isOpen())return}else this.nestedMenuBlock=setTimeout(function(){n.nestedMenuBlock=!1},100);this.hideMenu(),this.menuElements=[]}o.forEach(function(e){var o=document.createElement("div"),i=e.label,a=e.disabled;e.separator?o.classList.add("tabulator-menu-separator"):(o.classList.add("tabulator-menu-item"),"function"==typeof i&&(i=i.call(n.table,t.getComponent())),i instanceof Node?o.appendChild(i):o.innerHTML=i,"function"==typeof a&&(a=a.call(n.table,t.getComponent())),a?(o.classList.add("tabulator-menu-item-disabled"),o.addEventListener("click",function(e){e.stopPropagation()})):e.menu&&e.menu.length?o.addEventListener("click",function(i){i.stopPropagation(),n.hideOldSubMenus(r),n.loadMenu(i,t,e.menu,o)}):e.action&&o.addEventListener("click",function(o){e.action(o,t.getComponent())}),e.menu&&e.menu.length&&o.classList.add("tabulator-menu-item-submenu")),r.appendChild(o)}),r.addEventListener("click",function(e){n.hideMenu()}),this.menuElements.push(r),this.positionMenu(r,i,a,e)}},Ob.prototype.hideOldSubMenus=function(e){var t=this.menuElements.indexOf(e);if(t>-1)for(var o=this.menuElements.length-1;o>t;o--){var i=this.menuElements[o];i.parentNode&&i.parentNode.removeChild(i),this.menuElements.pop()}},Ob.prototype.positionMenu=function(e,t,o,i){var n,a,r,s=this,l=Math.max(document.body.offsetHeight,window.innerHeight);t?(n=(r=ea.prototype.helpers.elOffset(t)).left+t.offsetWidth,a=r.top-1):(n=o?i.touches[0].pageX:i.pageX,a=o?i.touches[0].pageY:i.pageY,this.positionReversedX=!1),e.style.top=a+"px",e.style.left=n+"px",setTimeout(function(){s.table.rowManager.element.addEventListener("scroll",s.blurEvent),document.body.addEventListener("click",s.blurEvent),document.body.addEventListener("contextmenu",s.blurEvent),window.addEventListener("resize",s.blurEvent),document.body.addEventListener("keydown",s.escEvent)},100),document.body.appendChild(e),a+e.offsetHeight>=l&&(e.style.top="",e.style.bottom=t?l-r.top-t.offsetHeight-1+"px":l-a+"px"),(n+e.offsetWidth>=document.body.offsetWidth||this.positionReversedX)&&(e.style.left="",e.style.right=t?document.documentElement.offsetWidth-r.left+"px":document.documentElement.offsetWidth-n+"px",this.positionReversedX=!0)},Ob.prototype.isOpen=function(){return!!this.menuElements.length},Ob.prototype.escMenu=function(e){27==e.keyCode&&this.hideMenu()},Ob.prototype.hideMenu=function(){this.menuElements.forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)}),document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)},Ob.prototype.menus={},ea.prototype.registerModule("menu",Ob);var rc=function(e){this.table=e,this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this)};rc.prototype.createPlaceholderElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.classList.add("tabulator-col-placeholder"),e},rc.prototype.initializeColumn=function(e){var t,o=this,i={};e.modules.frozen||(t=e.getElement(),i.mousemove=function(i){e.parent===o.moving.parent&&((o.touchMove?i.touches[0].pageX:i.pageX)-ea.prototype.helpers.elOffset(t).left+o.table.columnManager.element.scrollLeft>e.getWidth()/2?o.toCol===e&&o.toColAfter||(t.parentNode.insertBefore(o.placeholderElement,t.nextSibling),o.moveColumn(e,!0)):(o.toCol!==e||o.toColAfter)&&(t.parentNode.insertBefore(o.placeholderElement,t),o.moveColumn(e,!1)))}.bind(o),t.addEventListener("mousedown",function(t){o.touchMove=!1,1===t.which&&(o.checkTimeout=setTimeout(function(){o.startMove(t,e)},o.checkPeriod))}),t.addEventListener("mouseup",function(e){1===e.which&&o.checkTimeout&&clearTimeout(o.checkTimeout)}),o.bindTouchEvents(e)),e.modules.moveColumn=i},rc.prototype.bindTouchEvents=function(e){var t,o,i,n,a,r,s=this,l=e.getElement(),u=!1;l.addEventListener("touchstart",function(l){s.checkTimeout=setTimeout(function(){s.touchMove=!0,e,t=e.nextColumn(),i=t?t.getWidth()/2:0,o=e.prevColumn(),n=o?o.getWidth()/2:0,a=0,r=0,u=!1,s.startMove(l,e)},s.checkPeriod)},{passive:!0}),l.addEventListener("touchmove",function(l){var c,d;s.moving&&(s.moveHover(l),u||(u=l.touches[0].pageX),(c=l.touches[0].pageX-u)>0?t&&c-a>i&&(d=t)!==e&&(u=l.touches[0].pageX,d.getElement().parentNode.insertBefore(s.placeholderElement,d.getElement().nextSibling),s.moveColumn(d,!0)):o&&-c-r>n&&(d=o)!==e&&(u=l.touches[0].pageX,d.getElement().parentNode.insertBefore(s.placeholderElement,d.getElement()),s.moveColumn(d,!1)),d&&(d,t=d.nextColumn(),a=i,i=t?t.getWidth()/2:0,o=d.prevColumn(),r=n,n=o?o.getWidth()/2:0))},{passive:!0}),l.addEventListener("touchend",function(e){s.checkTimeout&&clearTimeout(s.checkTimeout),s.moving&&s.endMove(e)})},rc.prototype.startMove=function(e,t){var o=t.getElement();this.moving=t,this.startX=(this.touchMove?e.touches[0].pageX:e.pageX)-ea.prototype.helpers.elOffset(o).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=t.getWidth()+"px",this.placeholderElement.style.height=t.getHeight()+"px",o.parentNode.insertBefore(this.placeholderElement,o),o.parentNode.removeChild(o),this.hoverElement=o.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom="0",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(e)},rc.prototype._bindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveColumn.mousemove)})},rc.prototype._unbindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveColumn.mousemove)})},rc.prototype.moveColumn=function(e,t){var o=this.moving.getCells();this.toCol=e,this.toColAfter=t,t?e.getCells().forEach(function(e,t){var i=e.getElement(!0);i.parentNode.insertBefore(o[t].getElement(),i.nextSibling)}):e.getCells().forEach(function(e,t){var i=e.getElement(!0);i.parentNode.insertBefore(o[t].getElement(),i)})},rc.prototype.endMove=function(e){(1===e.which||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))},rc.prototype.moveHover=function(e){var t,o=this,i=o.table.columnManager.getElement(),n=i.scrollLeft,a=(o.touchMove?e.touches[0].pageX:e.pageX)-ea.prototype.helpers.elOffset(i).left+n;o.hoverElement.style.left=a-o.startX+"px",a-n<o.autoScrollMargin&&(o.autoScrollTimeout||(o.autoScrollTimeout=setTimeout(function(){t=Math.max(0,n-5),o.table.rowManager.getElement().scrollLeft=t,o.autoScrollTimeout=!1},1))),n+i.clientWidth-a<o.autoScrollMargin&&(o.autoScrollTimeout||(o.autoScrollTimeout=setTimeout(function(){t=Math.min(i.clientWidth,n+5),o.table.rowManager.getElement().scrollLeft=t,o.autoScrollTimeout=!1},1)))},ea.prototype.registerModule("moveColumn",rc);var fb=function(e){this.table=e,this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1};fb.prototype.createPlaceholderElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-row"),e.classList.add("tabulator-row-placeholder"),e},fb.prototype.initialize=function(e){this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements},fb.prototype.setHandle=function(e){this.hasHandle=e},fb.prototype.initializeGroupHeader=function(e){var t=this,o={};o.mouseup=function(e){t.tableRowDrop(e,row)}.bind(t),o.mousemove=function(o){var i;o.pageY-ea.prototype.helpers.elOffset(e.element).top+t.table.rowManager.element.scrollTop>e.getHeight()/2?t.toRow===e&&t.toRowAfter||((i=e.getElement()).parentNode.insertBefore(t.placeholderElement,i.nextSibling),t.moveRow(e,!0)):(t.toRow!==e||t.toRowAfter)&&(i=e.getElement()).previousSibling&&(i.parentNode.insertBefore(t.placeholderElement,i),t.moveRow(e,!1))}.bind(t),e.modules.moveRow=o},fb.prototype.initializeRow=function(e){var t,o=this,i={};i.mouseup=function(t){o.tableRowDrop(t,e)}.bind(o),i.mousemove=function(t){var i=e.getElement();t.pageY-ea.prototype.helpers.elOffset(i).top+o.table.rowManager.element.scrollTop>e.getHeight()/2?o.toRow===e&&o.toRowAfter||(i.parentNode.insertBefore(o.placeholderElement,i.nextSibling),o.moveRow(e,!0)):(o.toRow!==e||o.toRowAfter)&&(i.parentNode.insertBefore(o.placeholderElement,i),o.moveRow(e,!1))}.bind(o),this.hasHandle||((t=e.getElement()).addEventListener("mousedown",function(t){1===t.which&&(o.checkTimeout=setTimeout(function(){o.startMove(t,e)},o.checkPeriod))}),t.addEventListener("mouseup",function(e){1===e.which&&o.checkTimeout&&clearTimeout(o.checkTimeout)}),this.bindTouchEvents(e,e.getElement())),e.modules.moveRow=i},fb.prototype.initializeCell=function(e){var t=this,o=e.getElement(!0);o.addEventListener("mousedown",function(o){1===o.which&&(t.checkTimeout=setTimeout(function(){t.startMove(o,e.row)},t.checkPeriod))}),o.addEventListener("mouseup",function(e){1===e.which&&t.checkTimeout&&clearTimeout(t.checkTimeout)}),this.bindTouchEvents(e.row,o)},fb.prototype.bindTouchEvents=function(e,t){var o,i,n,a,r,s,l=this,u=!1;t.addEventListener("touchstart",function(t){l.checkTimeout=setTimeout(function(){l.touchMove=!0,e,o=e.nextRow(),n=o?o.getHeight()/2:0,i=e.prevRow(),a=i?i.getHeight()/2:0,r=0,s=0,u=!1,l.startMove(t,e)},l.checkPeriod)},{passive:!0}),this.moving,this.toRow,this.toRowAfter,t.addEventListener("touchmove",function(t){var c,d;l.moving&&(t.preventDefault(),l.moveHover(t),u||(u=t.touches[0].pageY),(c=t.touches[0].pageY-u)>0?o&&c-r>n&&(d=o)!==e&&(u=t.touches[0].pageY,d.getElement().parentNode.insertBefore(l.placeholderElement,d.getElement().nextSibling),l.moveRow(d,!0)):i&&-c-s>a&&(d=i)!==e&&(u=t.touches[0].pageY,d.getElement().parentNode.insertBefore(l.placeholderElement,d.getElement()),l.moveRow(d,!1)),d&&(d,o=d.nextRow(),r=n,n=o?o.getHeight()/2:0,i=d.prevRow(),s=a,a=i?i.getHeight()/2:0))}),t.addEventListener("touchend",function(e){l.checkTimeout&&clearTimeout(l.checkTimeout),l.moving&&(l.endMove(e),l.touchMove=!1)})},fb.prototype._bindMouseMove=function(){this.table.rowManager.getDisplayRows().forEach(function(e){"row"!==e.type&&"group"!==e.type||!e.modules.moveRow.mousemove||e.getElement().addEventListener("mousemove",e.modules.moveRow.mousemove)})},fb.prototype._unbindMouseMove=function(){this.table.rowManager.getDisplayRows().forEach(function(e){"row"!==e.type&&"group"!==e.type||!e.modules.moveRow.mousemove||e.getElement().removeEventListener("mousemove",e.modules.moveRow.mousemove)})},fb.prototype.startMove=function(e,t){var o=t.getElement();this.setStartPosition(e,t),this.moving=t,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=t.getWidth()+"px",this.placeholderElement.style.height=t.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(t)):(o.parentNode.insertBefore(this.placeholderElement,o),o.parentNode.removeChild(o)),this.hoverElement=o.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(e)},fb.prototype.setStartPosition=function(e,t){var o,i,n=this.touchMove?e.touches[0].pageX:e.pageX,a=this.touchMove?e.touches[0].pageY:e.pageY;o=t.getElement(),this.connection?(i=o.getBoundingClientRect(),this.startX=i.left-n+window.pageXOffset,this.startY=i.top-a+window.pageYOffset):this.startY=a-o.getBoundingClientRect().top},fb.prototype.endMove=function(e){e&&1!==e.which&&!this.touchMove||(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))},fb.prototype.moveRow=function(e,t){this.toRow=e,this.toRowAfter=t},fb.prototype.moveHover=function(e){this.connection?this.moveHoverConnections.call(this,e):this.moveHoverTable.call(this,e)},fb.prototype.moveHoverTable=function(e){var t=this.table.rowManager.getElement(),o=t.scrollTop,i=(this.touchMove?e.touches[0].pageY:e.pageY)-t.getBoundingClientRect().top+o;this.hoverElement.style.top=i-this.startY+"px"},fb.prototype.moveHoverConnections=function(e){this.hoverElement.style.left=this.startX+(this.touchMove?e.touches[0].pageX:e.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?e.touches[0].pageY:e.pageY)+"px"},fb.prototype.elementRowDrop=function(e,t,o){this.table.options.movableRowsElementDrop&&this.table.options.movableRowsElementDrop(e,t,!!o&&o.getComponent())},fb.prototype.connectToTables=function(e){var t,o=this;this.connectionSelectorsTables&&(t=this.table.modules.comms.getConnections(this.connectionSelectorsTables),this.table.options.movableRowsSendingStart.call(this.table,t),this.table.modules.comms.send(this.connectionSelectorsTables,"moveRow","connect",{row:e})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(function(e){"string"==typeof e?o.connectionElements=o.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(e))):o.connectionElements.push(e)}),this.connectionElements.forEach(function(e){var t=function(t){o.elementRowDrop(t,e,o.moving)};e.addEventListener("mouseup",t),e.tabulatorElementDropEvent=t,e.classList.add("tabulator-movingrow-receiving")}))},fb.prototype.disconnectFromTables=function(){var e;this.connectionSelectorsTables&&(e=this.table.modules.comms.getConnections(this.connectionSelectorsTables),this.table.options.movableRowsSendingStop.call(this.table,e),this.table.modules.comms.send(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(function(e){e.classList.remove("tabulator-movingrow-receiving"),e.removeEventListener("mouseup",e.tabulatorElementDropEvent),delete e.tabulatorElementDropEvent})},fb.prototype.connect=function(e,t){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=e,this.connectedRow=t,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(function(e){"row"===e.type&&e.modules.moveRow&&e.modules.moveRow.mouseup&&e.getElement().addEventListener("mouseup",e.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.table.options.movableRowsReceivingStart.call(this.table,t,e),!0)},fb.prototype.disconnect=function(e){e===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(function(e){"row"===e.type&&e.modules.moveRow&&e.modules.moveRow.mouseup&&e.getElement().removeEventListener("mouseup",e.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.table.options.movableRowsReceivingStop.call(this.table,e)):console.warn("Move Row Error - trying to disconnect from non connected table")},fb.prototype.dropComplete=function(e,t,o){var i=!1;if(o){switch(pa(this.table.options.movableRowsSender)){case"string":i=this.senders[this.table.options.movableRowsSender];break;case"function":i=this.table.options.movableRowsSender;}i?i.call(this,this.moving.getComponent(),t?t.getComponent():void 0,e):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.table.options.movableRowsSent.call(this.table,this.moving.getComponent(),t?t.getComponent():void 0,e)}else this.table.options.movableRowsSentFailed.call(this.table,this.moving.getComponent(),t?t.getComponent():void 0,e);this.endMove()},fb.prototype.tableRowDrop=function(e,t){var o=!1,i=!1;switch(e.stopImmediatePropagation(),pa(this.table.options.movableRowsReceiver)){case"string":o=this.receivers[this.table.options.movableRowsReceiver];break;case"function":o=this.table.options.movableRowsReceiver;}o?i=o.call(this,this.connectedRow.getComponent(),t?t.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),i?this.table.options.movableRowsReceived.call(this.table,this.connectedRow.getComponent(),t?t.getComponent():void 0,this.connectedTable):this.table.options.movableRowsReceivedFailed.call(this.table,this.connectedRow.getComponent(),t?t.getComponent():void 0,this.connectedTable),this.table.modules.comms.send(this.connectedTable,"moveRow","dropcomplete",{row:t,success:i})},fb.prototype.receivers={insert:function(e,t,o){return this.table.addRow(e.getData(),void 0,t),!0},add:function(e,t,o){return this.table.addRow(e.getData()),!0},update:function(e,t,o){return!!t&&(t.update(e.getData()),!0)},replace:function(e,t,o){return!!t&&(this.table.addRow(e.getData(),void 0,t),t.delete(),!0)}},fb.prototype.senders={delete:function(e,t,o){e.delete()}},fb.prototype.commsReceived=function(e,t,o){switch(t){case"connect":return this.connect(e,o.row);case"disconnect":return this.disconnect(e);case"dropcomplete":return this.dropComplete(e,o.row,o.success);}},ea.prototype.registerModule("moveRow",fb);var Jc=function(e){this.table=e,this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0};Jc.prototype.initializeColumn=function(e){var t=this,o=!1,i={};this.allowedTypes.forEach(function(n){var a,r="mutator"+(n.charAt(0).toUpperCase()+n.slice(1));e.definition[r]&&(a=t.lookupMutator(e.definition[r]))&&(o=!0,i[r]={mutator:a,params:e.definition[r+"Params"]||{}})}),o&&(e.modules.mutate=i)},Jc.prototype.lookupMutator=function(e){var t=!1;switch(void 0===e?"undefined":pa(e)){case"string":this.mutators[e]?t=this.mutators[e]:console.warn("Mutator Error - No such mutator found, ignoring: ",e);break;case"function":t=e;}return t},Jc.prototype.transformRow=function(e,t,o){var i,n="mutator"+(t.charAt(0).toUpperCase()+t.slice(1));return this.enabled&&this.table.columnManager.traverse(function(a){var r,s,l;a.modules.mutate&&(r=a.modules.mutate[n]||a.modules.mutate.mutator||!1)&&(i=a.getFieldValue(void 0!==o?o:e),"data"!=t&&void 0===i||(l=a.getComponent(),s="function"==typeof r.params?r.params(i,e,t,l):r.params,a.setFieldValue(e,r.mutator(i,e,t,s,l))))}),e},Jc.prototype.transformCell=function(e,t){var o=e.column.modules.mutate.mutatorEdit||e.column.modules.mutate.mutator||!1,i={};return o?(i=Object.assign(i,e.row.getData()),e.column.setFieldValue(i,t),o.mutator(t,i,"edit",o.params,e.getComponent())):t},Jc.prototype.enable=function(){this.enabled=!0},Jc.prototype.disable=function(){this.enabled=!1},Jc.prototype.mutators={},ea.prototype.registerModule("mutator",Jc);var bb=function(e){this.table=e,this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.pageSizes=[],this.dataReceivedNames={},this.dataSentNames={},this.createElements()};bb.prototype.createElements=function(){var e;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(e=document.createElement("button")).classList.add("tabulator-page"),e.setAttribute("type","button"),e.setAttribute("role","button"),e.setAttribute("aria-label",""),e.setAttribute("title",""),this.firstBut=e.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=e.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=e.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=e.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))},bb.prototype.generatePageSizeSelectList=function(){var e=this,t=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))t=this.table.options.paginationSizeSelector,this.pageSizes=t,-1==this.pageSizes.indexOf(this.size)&&t.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){t=[];for(var o=1;o<5;o++)t.push(this.size*o);this.pageSizes=t}else t=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);t.forEach(function(t){var o=document.createElement("option");o.value=t,!0===t?e.table.modules.localize.bind("pagination|all",function(e){o.innerHTML=e}):o.innerHTML=t,e.pageSizeSelect.appendChild(o)}),this.pageSizeSelect.value=this.size}},bb.prototype.initialize=function(e){var t,o,i,n=this;this.dataSentNames=Object.assign({},this.paginationDataSentNames),this.dataSentNames=Object.assign(this.dataSentNames,this.table.options.paginationDataSent),this.dataReceivedNames=Object.assign({},this.paginationDataReceivedNames),this.dataReceivedNames=Object.assign(this.dataReceivedNames,this.table.options.paginationDataReceived),n.table.modules.localize.bind("pagination|first",function(e){n.firstBut.innerHTML=e}),n.table.modules.localize.bind("pagination|first_title",function(e){n.firstBut.setAttribute("aria-label",e),n.firstBut.setAttribute("title",e)}),n.table.modules.localize.bind("pagination|prev",function(e){n.prevBut.innerHTML=e}),n.table.modules.localize.bind("pagination|prev_title",function(e){n.prevBut.setAttribute("aria-label",e),n.prevBut.setAttribute("title",e)}),n.table.modules.localize.bind("pagination|next",function(e){n.nextBut.innerHTML=e}),n.table.modules.localize.bind("pagination|next_title",function(e){n.nextBut.setAttribute("aria-label",e),n.nextBut.setAttribute("title",e)}),n.table.modules.localize.bind("pagination|last",function(e){n.lastBut.innerHTML=e}),n.table.modules.localize.bind("pagination|last_title",function(e){n.lastBut.setAttribute("aria-label",e),n.lastBut.setAttribute("title",e)}),n.firstBut.addEventListener("click",function(){n.setPage(1).then(function(){}).catch(function(){})}),n.prevBut.addEventListener("click",function(){n.previousPage().then(function(){}).catch(function(){})}),n.nextBut.addEventListener("click",function(){n.nextPage().then(function(){}).catch(function(){})}),n.lastBut.addEventListener("click",function(){n.setPage(n.max).then(function(){}).catch(function(){})}),n.table.options.paginationElement&&(n.element=n.table.options.paginationElement),this.pageSizeSelect&&(t=document.createElement("label"),n.table.modules.localize.bind("pagination|page_size",function(e){n.pageSizeSelect.setAttribute("aria-label",e),n.pageSizeSelect.setAttribute("title",e),t.innerHTML=e}),n.element.appendChild(t),n.element.appendChild(n.pageSizeSelect),n.pageSizeSelect.addEventListener("change",function(e){n.setPageSize("true"==n.pageSizeSelect.value||n.pageSizeSelect.value),n.setPage(1).then(function(){}).catch(function(){})})),n.element.appendChild(n.firstBut),n.element.appendChild(n.prevBut),n.element.appendChild(n.pagesElement),n.element.appendChild(n.nextBut),n.element.appendChild(n.lastBut),n.table.options.paginationElement||e||n.table.footerManager.append(n.element,n),n.mode=n.table.options.pagination,n.table.options.paginationSize?n.size=n.table.options.paginationSize:((o=document.createElement("div")).classList.add("tabulator-row"),o.style.visibility=e,(i=document.createElement("div")).classList.add("tabulator-cell"),i.innerHTML="Page Row Test",o.appendChild(i),n.table.rowManager.getTableElement().appendChild(o),n.size=Math.floor(n.table.rowManager.getElement().clientHeight/o.offsetHeight),n.table.rowManager.getTableElement().removeChild(o)),n.count=n.table.options.paginationButtonCount,n.generatePageSizeSelectList()},bb.prototype.initializeProgressive=function(e){this.initialize(!0),this.mode="progressive_"+e,this.progressiveLoad=!0},bb.prototype.setDisplayIndex=function(e){this.displayIndex=e},bb.prototype.getDisplayIndex=function(){return this.displayIndex},bb.prototype.setMaxRows=function(e){this.max=e?!0===this.size?1:Math.ceil(e/this.size):1,this.page>this.max&&(this.page=this.max)},bb.prototype.reset=function(e,t){return("local"==this.mode||e)&&(this.page=1),t&&(this.initialLoad=!0),!0},bb.prototype.setMaxPage=function(e){e=parseInt(e),this.max=e||1,this.page>this.max&&(this.page=this.max,this.trigger())},bb.prototype.setPage=function(e){var t=this,o=this;switch(e){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max);}return new Promise(function(i,n){(e=parseInt(e))>0&&e<=t.max||"local"!==t.mode?(t.page=e,t.trigger().then(function(){i()}).catch(function(){n()}),o.table.options.persistence&&o.table.modExists("persistence",!0)&&o.table.modules.persistence.config.page&&o.table.modules.persistence.save("page")):(console.warn("Pagination Error - Requested page is out of range of 1 - "+t.max+":",e),n())})},bb.prototype.setPageToRow=function(e){var t=this;return new Promise(function(o,i){var n=t.table.rowManager.getDisplayRows(t.displayIndex-1).indexOf(e);if(n>-1){var a=!0===t.size?1:Math.ceil((n+1)/t.size);t.setPage(a).then(function(){o()}).catch(function(){i()})}else console.warn("Pagination Error - Requested row is not visible"),i()})},bb.prototype.setPageSize=function(e){!0!==e&&(e=parseInt(e)),e>0&&(this.size=e),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.page&&this.table.modules.persistence.save("page")},bb.prototype._setPageButtons=function(){for(var e=Math.floor((this.count-1)/2),t=Math.ceil((this.count-1)/2),o=this.max-this.page+e+1<this.count?this.max-this.count+1:Math.max(this.page-e,1),i=this.page<=t?Math.min(this.count,this.max):Math.min(this.page+t,this.max);this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);1==this.page?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(var n=o;n<=i;n++)n>0&&n<=this.max&&this.pagesElement.appendChild(this._generatePageButton(n));this.footerRedraw()},bb.prototype._generatePageButton=function(e){var t=this,o=document.createElement("button");return o.classList.add("tabulator-page"),e==t.page&&o.classList.add("active"),o.setAttribute("type","button"),o.setAttribute("role","button"),t.table.modules.localize.bind("pagination|page_title",function(t){o.setAttribute("aria-label",t+" "+e),o.setAttribute("title",t+" "+e)}),o.setAttribute("data-page",e),o.textContent=e,o.addEventListener("click",function(o){t.setPage(e).then(function(){}).catch(function(){})}),o},bb.prototype.previousPage=function(){var e=this;return new Promise(function(t,o){e.page>1?(e.page--,e.trigger().then(function(){t()}).catch(function(){o()}),e.table.options.persistence&&e.table.modExists("persistence",!0)&&e.table.modules.persistence.config.page&&e.table.modules.persistence.save("page")):(console.warn("Pagination Error - Previous page would be less than page 1:",0),o())})},bb.prototype.nextPage=function(){var e=this;return new Promise(function(t,o){e.page<e.max?(e.page++,e.trigger().then(function(){t()}).catch(function(){o()}),e.table.options.persistence&&e.table.modExists("persistence",!0)&&e.table.modules.persistence.config.page&&e.table.modules.persistence.save("page")):(e.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+e.max+":",e.max+1),o())})},bb.prototype.getPage=function(){return this.page},bb.prototype.getPageMax=function(){return this.max},bb.prototype.getPageSize=function(e){return this.size},bb.prototype.getMode=function(){return this.mode},bb.prototype.getRows=function(e){var t,o,i;if("local"==this.mode){t=[],!0===this.size?(o=0,i=e.length):i=(o=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(var n=o;n<i;n++)e[n]&&t.push(e[n]);return t}return this._setPageButtons(),e.slice(0)},bb.prototype.trigger=function(){var e,t=this;return new Promise(function(o,i){switch(t.mode){case"local":e=t.table.rowManager.scrollLeft,t.table.rowManager.refreshActiveData("page"),t.table.rowManager.scrollHorizontal(e),t.table.options.pageLoaded.call(t.table,t.getPage()),o();break;case"remote":case"progressive_load":case"progressive_scroll":t.table.modules.ajax.blockActiveRequest(),t._getRemotePage().then(function(){o()}).catch(function(){i()});break;default:console.warn("Pagination Error - no such pagination mode:",t.mode),i();}})},bb.prototype._getRemotePage=function(){var e,t,o=this,i=this;return new Promise(function(n,a){if(i.table.modExists("ajax",!0)||a(),e=ea.prototype.helpers.deepClone(i.table.modules.ajax.getParams()||{}),(t=i.table.modules.ajax.getParams())[o.dataSentNames.page]=i.page,o.size&&(t[o.dataSentNames.size]=o.size),o.table.options.ajaxSorting&&o.table.modExists("sort")){var r=i.table.modules.sort.getSort();r.forEach(function(e){delete e.column}),t[o.dataSentNames.sorters]=r}if(o.table.options.ajaxFiltering&&o.table.modExists("filter")){var s=i.table.modules.filter.getFilters(!0,!0);t[o.dataSentNames.filters]=s}i.table.modules.ajax.setParams(t),i.table.modules.ajax.sendRequest(o.progressiveLoad).then(function(e){i._parseRemoteData(e),n()}).catch(function(e){a()}),i.table.modules.ajax.setParams(e)})},bb.prototype._parseRemoteData=function(e){var t,o,i=this;if(void 0===e[this.dataReceivedNames.last_page]&&console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property"),e[this.dataReceivedNames.data]){if(this.max=parseInt(e[this.dataReceivedNames.last_page])||1,this.progressiveLoad)switch(this.mode){case"progressive_load":1==this.page?this.table.rowManager.setData(e[this.dataReceivedNames.data],!1,this.initialLoad&&1==this.page):this.table.rowManager.addRows(e[this.dataReceivedNames.data]),this.page<this.max&&setTimeout(function(){i.nextPage().then(function(){}).catch(function(){})},i.table.options.ajaxProgressiveLoadDelay);break;case"progressive_scroll":e=this.table.rowManager.getData().concat(e[this.dataReceivedNames.data]),this.table.rowManager.setData(e,!0,this.initialLoad&&1==this.page),o=this.table.options.ajaxProgressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight,i.table.rowManager.element.scrollHeight<=i.table.rowManager.element.clientHeight+o&&i.nextPage().then(function(){}).catch(function(){});}else t=this.table.rowManager.scrollLeft,this.table.rowManager.setData(e[this.dataReceivedNames.data],!1,this.initialLoad&&1==this.page),this.table.rowManager.scrollHorizontal(t),this.table.columnManager.scrollHorizontal(t),this.table.options.pageLoaded.call(this.table,this.getPage());this.initialLoad=!1}else console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property")},bb.prototype.footerRedraw=function(){var e=this.table.footerManager.element;Math.ceil(e.clientWidth)-e.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(e.clientWidth)-e.scrollWidth<0&&(this.pagesElement.style.display="none"))},bb.prototype.paginationDataSentNames={page:"page",size:"size",sorters:"sorters",filters:"filters"},bb.prototype.paginationDataReceivedNames={current_page:"current_page",last_page:"last_page",data:"data"},ea.prototype.registerModule("page",bb);var Ib=function(e){this.table=e,this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1};Ib.prototype.localStorageTest=function(){var t="_tabulator_test";try{return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(e){return!1}},Ib.prototype.initialize=function(){var e,t=this.table.options.persistenceMode,o=this.table.options.persistenceID;this.mode=!0!==t?t:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?"function"==typeof this.table.options.persistenceReaderFunc?this.readFunc=this.table.options.persistenceReaderFunc:this.readers[this.table.options.persistenceReaderFunc]?this.readFunc=this.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):this.readers[this.mode]?this.readFunc=this.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?"function"==typeof this.table.options.persistenceWriterFunc?this.writeFunc=this.table.options.persistenceWriterFunc:this.readers[this.table.options.persistenceWriterFunc]?this.writeFunc=this.readers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):this.writers[this.mode]?this.writeFunc=this.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(o||this.table.element.getAttribute("id")||""),this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(e=this.retreiveData("page"))&&(void 0===e.paginationSize||!0!==this.config.page&&!this.config.page.size||(this.table.options.paginationSize=e.paginationSize),void 0===e.paginationInitialPage||!0!==this.config.page&&!this.config.page.page||(this.table.options.paginationInitialPage=e.paginationInitialPage)),this.config.group&&(e=this.retreiveData("group"))&&(void 0===e.groupBy||!0!==this.config.group&&!this.config.group.groupBy||(this.table.options.groupBy=e.groupBy),void 0===e.groupStartOpen||!0!==this.config.group&&!this.config.group.groupStartOpen||(this.table.options.groupStartOpen=e.groupStartOpen),void 0===e.groupHeader||!0!==this.config.group&&!this.config.group.groupHeader||(this.table.options.groupHeader=e.groupHeader)),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns))},Ib.prototype.initializeColumn=function(e){var t,o=this;this.config.columns&&(this.defWatcherBlock=!0,t=e.getDefinition(),(!0===this.config.columns?Object.keys(t):this.config.columns).forEach(function(e){var i=Object.getOwnPropertyDescriptor(t,e),n=t[e];i&&Object.defineProperty(t,e,{set:function(e){n=e,o.defWatcherBlock||o.save("columns"),i.set&&i.set(e)},get:function(){return i.get&&i.get(),n}})}),this.defWatcherBlock=!1)},Ib.prototype.load=function(e,t){var o=this.retreiveData(e);return t&&(o=o?this.mergeDefinition(t,o):t),o},Ib.prototype.retreiveData=function(e){return!!this.readFunc&&this.readFunc(this.id,e)},Ib.prototype.mergeDefinition=function(e,t){var o=this,i=[];return(t=t||[]).forEach(function(t,n){var a,r=o._findColumn(e,t);r&&(!0===o.config.columns||null==o.config.columns?(a=Object.keys(r)).push("width"):a=o.config.columns,a.forEach(function(e){"columns"!==e&&void 0!==t[e]&&(r[e]=t[e])}),r.columns&&(r.columns=o.mergeDefinition(r.columns,t.columns)),i.push(r))}),e.forEach(function(e,n){o._findColumn(t,e)||(i.length>n?i.splice(n,0,e):i.push(e))}),i},Ib.prototype._findColumn=function(e,t){var o=t.columns?"group":t.field?"field":"object";return e.find(function(e){switch(o){case"group":return e.title===t.title&&e.columns.length===t.columns.length;case"field":return e.field===t.field;case"object":return e===t;}})},Ib.prototype.save=function(e){var t={};switch(e){case"columns":t=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":t=this.table.modules.filter.getFilters();break;case"sort":t=this.validateSorters(this.table.modules.sort.getSort());break;case"group":t=this.getGroupConfig();break;case"page":t=this.getPageConfig();}this.writeFunc&&this.writeFunc(this.id,e,t)},Ib.prototype.validateSorters=function(e){return e.forEach(function(e){e.column=e.field,delete e.field}),e},Ib.prototype.getGroupConfig=function(){var e={};return this.config.group&&((!0===this.config.group||this.config.group.groupBy)&&(e.groupBy=this.table.options.groupBy),(!0===this.config.group||this.config.group.groupStartOpen)&&(e.groupStartOpen=this.table.options.groupStartOpen),(!0===this.config.group||this.config.group.groupHeader)&&(e.groupHeader=this.table.options.groupHeader)),e},Ib.prototype.getPageConfig=function(){var e={};return this.config.page&&((!0===this.config.page||this.config.page.size)&&(e.paginationSize=this.table.modules.page.getPageSize()),(!0===this.config.page||this.config.page.page)&&(e.paginationInitialPage=this.table.modules.page.getPage())),e},Ib.prototype.parseColumns=function(e){var t=this,o=[],i=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return e.forEach(function(e){var n,a={},r=e.getDefinition();e.isGroup?(a.title=r.title,a.columns=t.parseColumns(e.getColumns())):(a.field=e.getField(),!0===t.config.columns||null==t.config.columns?(n=Object.keys(r)).push("width"):n=t.config.columns,n.forEach(function(t){switch(t){case"width":a.width=e.getWidth();break;case"visible":a.visible=e.visible;break;default:"function"!=typeof r[t]&&-1===i.indexOf(t)&&(a[t]=r[t]);}})),o.push(a)}),o},Ib.prototype.readers={local:function(e,t){var o=localStorage.getItem(e+"-"+t);return!!o&&JSON.parse(o)},cookie:function(e,t){var o,i,n=document.cookie,a=e+"-"+t,r=n.indexOf(a+"=");return r>-1&&(n=n.substr(r),(o=n.indexOf(";"))>-1&&(n=n.substr(0,o)),i=n.replace(a+"=","")),!!i&&JSON.parse(i)}},Ib.prototype.writers={local:function(e,t,o){localStorage.setItem(e+"-"+t,JSON.stringify(o))},cookie:function(e,t,o){var i=new Date;i.setDate(i.getDate()+1e4),document.cookie=e+"-"+t+"="+JSON.stringify(o)+"; expires="+i.toUTCString()}},ea.prototype.registerModule("persistence",Ib);var _d=function(e){this.table=e,this.element=!1,this.manualBlock=!1};_d.prototype.initialize=function(){window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))},_d.prototype.replaceTable=function(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))},_d.prototype.cleanup=function(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")},_d.prototype.printFullscreen=function(e,t,o){var i,n,a=window.scrollX,r=window.scrollY,s=document.createElement("div"),l=document.createElement("div"),u=this.table.modules.export.genereateTable(void 0!==o?o:this.table.options.printConfig,void 0!==t?t:this.table.options.printStyled,e,"print");this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(s.classList.add("tabulator-print-header"),"string"==typeof(i="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader)?s.innerHTML=i:s.appendChild(i),this.element.appendChild(s)),this.element.appendChild(u),this.table.options.printFooter&&(l.classList.add("tabulator-print-footer"),"string"==typeof(n="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter)?l.innerHTML=n:l.appendChild(n),this.element.appendChild(l)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,u),window.print(),this.cleanup(),window.scrollTo(a,r),this.manualBlock=!1},ea.prototype.registerModule("print",_d);var xc=function(e){this.table=e,this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0};xc.prototype.watchData=function(e){var t,o=this;this.currentVersion++,t=this.currentVersion,o.unwatchData(),o.data=e,o.origFuncs.push=e.push,Object.defineProperty(o.data,"push",{enumerable:!1,configurable:!0,value:function(){var i=Array.from(arguments);return o.blocked||t!==o.currentVersion||i.forEach(function(e){o.table.rowManager.addRowActual(e,!1)}),o.origFuncs.push.apply(e,arguments)}}),o.origFuncs.unshift=e.unshift,Object.defineProperty(o.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var i=Array.from(arguments);return o.blocked||t!==o.currentVersion||i.forEach(function(e){o.table.rowManager.addRowActual(e,!0)}),o.origFuncs.unshift.apply(e,arguments)}}),o.origFuncs.shift=e.shift,Object.defineProperty(o.data,"shift",{enumerable:!1,configurable:!0,value:function(){var i;return o.blocked||t!==o.currentVersion||o.data.length&&(i=o.table.rowManager.getRowFromDataObject(o.data[0]))&&i.deleteActual(),o.origFuncs.shift.call(e)}}),o.origFuncs.pop=e.pop,Object.defineProperty(o.data,"pop",{enumerable:!1,configurable:!0,value:function(){var i;return o.blocked||t!==o.currentVersion||o.data.length&&(i=o.table.rowManager.getRowFromDataObject(o.data[o.data.length-1]))&&i.deleteActual(),o.origFuncs.pop.call(e)}}),o.origFuncs.splice=e.splice,Object.defineProperty(o.data,"splice",{enumerable:!1,configurable:!0,value:function(){var i,n=Array.from(arguments),a=n[0]<0?e.length+n[0]:n[0],r=n[1],s=!!n[2]&&n.slice(2);if(!o.blocked&&t===o.currentVersion){if(s&&((i=!!e[a]&&o.table.rowManager.getRowFromDataObject(e[a]))?s.forEach(function(e){o.table.rowManager.addRowActual(e,!0,i,!0)}):(s=s.slice().reverse()).forEach(function(e){o.table.rowManager.addRowActual(e,!0,!1,!0)})),0!==r){var l=e.slice(a,void 0===n[1]?n[1]:a+r);l.forEach(function(e,t){var i=o.table.rowManager.getRowFromDataObject(e);i&&i.deleteActual(t!==l.length-1)})}(s||0!==r)&&o.table.rowManager.reRenderInPosition()}return o.origFuncs.splice.apply(e,arguments)}})},xc.prototype.unwatchData=function(){if(!1!==this.data)for(var e in this.origFuncs)Object.defineProperty(this.data,e,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})},xc.prototype.watchRow=function(e){var t=e.getData();for(var o in this.blocked=!0,t)this.watchKey(e,t,o);this.table.options.dataTree&&this.watchTreeChildren(e),this.blocked=!1},xc.prototype.watchTreeChildren=function(e){var t=this,o=e.getData()[this.table.options.dataTreeChildField],i={};function n(){t.table.modules.dataTree.initializeRow(e),t.table.modules.dataTree.layoutRow(e),t.table.rowManager.refreshActiveData("tree",!1,!0)}o&&(i.push=o.push,Object.defineProperty(o,"push",{enumerable:!1,configurable:!0,value:function(){var e=i.push.apply(o,arguments);return n(),e}}),i.unshift=o.unshift,Object.defineProperty(o,"unshift",{enumerable:!1,configurable:!0,value:function(){var e=i.unshift.apply(o,arguments);return n(),e}}),i.shift=o.shift,Object.defineProperty(o,"shift",{enumerable:!1,configurable:!0,value:function(){var e=i.shift.call(o);return n(),e}}),i.pop=o.pop,Object.defineProperty(o,"pop",{enumerable:!1,configurable:!0,value:function(){var e=i.pop.call(o);return n(),e}}),i.splice=o.splice,Object.defineProperty(o,"splice",{enumerable:!1,configurable:!0,value:function(){var e=i.splice.apply(o,arguments);return n(),e}}))},xc.prototype.watchKey=function(e,t,o){var i=this,n=Object.getOwnPropertyDescriptor(t,o),a=t[o],r=this.currentVersion;Object.defineProperty(t,o,{set:function(t){if(a=t,!i.blocked&&r===i.currentVersion){var s={};s[o]=t,e.updateData(s)}n.set&&n.set(t)},get:function(){return n.get&&n.get(),a}})},xc.prototype.unwatchRow=function(e){var t=e.getData();for(var o in t)Object.defineProperty(t,o,{value:t[o]})},xc.prototype.block=function(){this.blocked=!0},xc.prototype.unblock=function(){this.blocked=!1},ea.prototype.registerModule("reactiveData",xc);var ef=function(e){this.table=e,this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null};ef.prototype.initializeColumn=function(e,t,o){var i=this,n=!1,a=this.table.options.resizableColumns;if("header"===e&&(n="textarea"==t.definition.formatter||t.definition.variableHeight,t.modules.resize={variableHeight:n}),!0===a||a==e){var r=document.createElement("div");r.className="tabulator-col-resize-handle";var s=document.createElement("div");s.className="tabulator-col-resize-handle prev",r.addEventListener("click",function(e){e.stopPropagation()});var l=function(e){var o=t.getLastColumn();o&&i._checkResizability(o)&&(i.startColumn=t,i._mouseDown(e,o,r))};r.addEventListener("mousedown",l),r.addEventListener("touchstart",l,{passive:!0}),r.addEventListener("dblclick",function(e){var o=t.getLastColumn();o&&i._checkResizability(o)&&(e.stopPropagation(),o.reinitializeWidth(!0))}),s.addEventListener("click",function(e){e.stopPropagation()});var u=function(e){var o,n,a;(o=t.getFirstColumn())&&(a=(n=i.table.columnManager.findColumnIndex(o))>0&&i.table.columnManager.getColumnByIndex(n-1))&&i._checkResizability(a)&&(i.startColumn=t,i._mouseDown(e,a,s))};s.addEventListener("mousedown",u),s.addEventListener("touchstart",u,{passive:!0}),s.addEventListener("dblclick",function(e){var o,n,a;(o=t.getFirstColumn())&&(a=(n=i.table.columnManager.findColumnIndex(o))>0&&i.table.columnManager.getColumnByIndex(n-1))&&i._checkResizability(a)&&(e.stopPropagation(),a.reinitializeWidth(!0))}),o.appendChild(r),o.appendChild(s)}},ef.prototype._checkResizability=function(e){return void 0!==e.definition.resizable?e.definition.resizable:this.table.options.resizableColumns},ef.prototype._mouseDown=function(e,t,o){var i=this;function n(e){i.table.rtl?t.setWidth(i.startWidth-((void 0===e.screenX?e.touches[0].screenX:e.screenX)-i.startX)):t.setWidth(i.startWidth+((void 0===e.screenX?e.touches[0].screenX:e.screenX)-i.startX)),i.table.options.virtualDomHoz&&i.table.vdomHoz.reinitialize(!0),!i.table.browserSlow&&t.modules.resize&&t.modules.resize.variableHeight&&t.checkCellHeights()}function a(e){i.startColumn.modules.edit&&(i.startColumn.modules.edit.blocked=!1),i.table.browserSlow&&t.modules.resize&&t.modules.resize.variableHeight&&t.checkCellHeights(),document.body.removeEventListener("mouseup",a),document.body.removeEventListener("mousemove",n),o.removeEventListener("touchmove",n),o.removeEventListener("touchend",a),i.table.element.classList.remove("tabulator-block-select"),i.table.options.persistence&&i.table.modExists("persistence",!0)&&i.table.modules.persistence.config.columns&&i.table.modules.persistence.save("columns"),i.table.options.columnResized.call(i.table,t.getComponent())}i.table.element.classList.add("tabulator-block-select"),e.stopPropagation(),i.startColumn.modules.edit&&(i.startColumn.modules.edit.blocked=!0),i.startX=void 0===e.screenX?e.touches[0].screenX:e.screenX,i.startWidth=t.getWidth(),document.body.addEventListener("mousemove",n),document.body.addEventListener("mouseup",a),o.addEventListener("touchmove",n,{passive:!0}),o.addEventListener("touchend",a)},ea.prototype.registerModule("resizeColumns",ef);var Eg=function(e){this.table=e,this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null};Eg.prototype.initializeRow=function(e){var t=this,o=e.getElement(),i=document.createElement("div");i.className="tabulator-row-resize-handle";var n=document.createElement("div");n.className="tabulator-row-resize-handle prev",i.addEventListener("click",function(e){e.stopPropagation()});var a=function(o){t.startRow=e,t._mouseDown(o,e,i)};i.addEventListener("mousedown",a),i.addEventListener("touchstart",a,{passive:!0}),n.addEventListener("click",function(e){e.stopPropagation()});var r=function(o){var i=t.table.rowManager.prevDisplayRow(e);i&&(t.startRow=i,t._mouseDown(o,i,n))};n.addEventListener("mousedown",r),n.addEventListener("touchstart",r,{passive:!0}),o.appendChild(i),o.appendChild(n)},Eg.prototype._mouseDown=function(e,t,o){var i=this;function n(e){t.setHeight(i.startHeight+((void 0===e.screenY?e.touches[0].screenY:e.screenY)-i.startY))}function a(e){document.body.removeEventListener("mouseup",n),document.body.removeEventListener("mousemove",n),o.removeEventListener("touchmove",n),o.removeEventListener("touchend",a),i.table.element.classList.remove("tabulator-block-select"),i.table.options.rowResized.call(this.table,t.getComponent())}i.table.element.classList.add("tabulator-block-select"),e.stopPropagation(),i.startY=void 0===e.screenY?e.touches[0].screenY:e.screenY,i.startHeight=t.getHeight(),document.body.addEventListener("mousemove",n),document.body.addEventListener("mouseup",a),o.addEventListener("touchmove",n,{passive:!0}),o.addEventListener("touchend",a)},ea.prototype.registerModule("resizeRows",Eg);var Fg=function(e){this.table=e,this.binding=!1,this.observer=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1};Fg.prototype.initialize=function(e){var t,o=this,i=this.table;this.tableHeight=i.element.clientHeight,this.tableWidth=i.element.clientWidth,i.element.parentNode&&(this.containerHeight=i.element.parentNode.clientHeight,this.containerWidth=i.element.parentNode.clientWidth),"undefined"!=typeof ResizeObserver&&"virtual"===i.rowManager.getRenderMode()?(this.autoResize=!0,this.observer=new ResizeObserver(function(e){if(!i.browserMobile||i.browserMobile&&!i.modules.edit.currentCell){var t=Math.floor(e[0].contentRect.height),n=Math.floor(e[0].contentRect.width);o.tableHeight==t&&o.tableWidth==n||(o.tableHeight=t,o.tableWidth=n,i.element.parentNode&&(o.containerHeight=i.element.parentNode.clientHeight,o.containerWidth=i.element.parentNode.clientWidth),i.options.virtualDomHoz&&i.vdomHoz.reinitialize(!0),i.redraw())}}),this.observer.observe(i.element),t=window.getComputedStyle(i.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(t.getPropertyValue("max-height")||t.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(function(e){if(!i.browserMobile||i.browserMobile&&!i.modules.edit.currentCell){var t=Math.floor(e[0].contentRect.height),n=Math.floor(e[0].contentRect.width);o.containerHeight==t&&o.containerWidth==n||(o.containerHeight=t,o.containerWidth=n,o.tableHeight=i.element.clientHeight,o.tableWidth=i.element.clientWidth),i.options.virtualDomHoz&&i.vdomHoz.reinitialize(!0),i.redraw()}}),this.containerObserver.observe(this.table.element.parentNode))):(this.binding=function(){(!i.browserMobile||i.browserMobile&&!i.modules.edit.currentCell)&&(i.options.virtualDomHoz&&i.vdomHoz.reinitialize(!0),i.redraw())},window.addEventListener("resize",this.binding))},Fg.prototype.clearBindings=function(e){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)},ea.prototype.registerModule("resizeTable",Fg);var Ub=function(e){this.table=e,this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1};Ub.prototype.initialize=function(){var e=this,t=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach(function(o,i){o.modules.responsive&&o.modules.responsive.order&&o.modules.responsive.visible&&(o.modules.responsive.index=i,t.push(o),o.visible||"collapse"!==e.mode||e.hiddenColumns.push(o))}),t=(t=t.reverse()).sort(function(e,t){return t.modules.responsive.order-e.modules.responsive.order||t.modules.responsive.index-e.modules.responsive.index}),this.columns=t,"collapse"===this.mode&&this.generateCollapsedContent();var o=this.table.columnManager.columnsByIndex,i=Array.isArray(o),n=0;for(o=i?o:o[Symbol.iterator]();;){var a;if(i){if(n>=o.length)break;a=o[n++]}else{if((n=o.next()).done)break;a=n.value}var r=a;if("responsiveCollapse"==r.definition.formatter){this.collapseHandleColumn=r;break}}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())},Ub.prototype.initializeColumn=function(e){var t=e.getDefinition();e.modules.responsive={order:void 0===t.responsive?1:t.responsive,visible:!1!==t.visible}},Ub.prototype.initializeRow=function(e){var t;"calc"!==e.type&&((t=document.createElement("div")).classList.add("tabulator-responsive-collapse"),e.modules.responsiveLayout={element:t,open:this.collapseStartOpen},this.collapseStartOpen||(t.style.display="none"))},Ub.prototype.layoutRow=function(e){var t=e.getElement();e.modules.responsiveLayout&&(t.appendChild(e.modules.responsiveLayout.element),this.generateCollapsedRowContent(e))},Ub.prototype.updateColumnVisibility=function(e,t){e.modules.responsive&&(e.modules.responsive.visible=t,this.initialize())},Ub.prototype.hideColumn=function(e){var t=this.hiddenColumns.length;e.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(e),this.generateCollapsedContent(),this.collapseHandleColumn&&!t&&this.collapseHandleColumn.show())},Ub.prototype.showColumn=function(e){var t;e.show(!1,!0),e.setWidth(e.getWidth()),"collapse"===this.mode&&((t=this.hiddenColumns.indexOf(e))>-1&&this.hiddenColumns.splice(t,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())},Ub.prototype.update=function(){for(var e=!0;e;){var t="fitColumns"==this.table.modules.layout.getMode()?this.table.columnManager.getFlexBaseWidth():this.table.columnManager.getWidth(),o=(this.table.options.headerVisible?this.table.columnManager.element.clientWidth:this.table.element.clientWidth)-t;if(o<0){var i=this.columns[this.index];i?(this.hideColumn(i),this.index++):e=!1}else{var n=this.columns[this.index-1];n&&o>0&&o>=n.getWidth()?(this.showColumn(n),this.index--):e=!1}this.table.rowManager.activeRowsCount||this.table.rowManager.renderEmptyScroll()}},Ub.prototype.generateCollapsedContent=function(){var e=this;this.table.rowManager.getDisplayRows().forEach(function(t){e.generateCollapsedRowContent(t)})},Ub.prototype.generateCollapsedRowContent=function(e){var t,o;if(e.modules.responsiveLayout){for(t=e.modules.responsiveLayout.element;t.firstChild;)t.removeChild(t.firstChild);(o=this.collapseFormatter(this.generateCollapsedRowData(e)))&&t.appendChild(o)}},Ub.prototype.generateCollapsedRowData=function(e){var t,o=this,i=e.getData(),n=[];return this.hiddenColumns.forEach(function(a){var r=a.getFieldValue(i);a.definition.title&&a.field&&(a.modules.format&&o.table.options.responsiveLayoutCollapseUseFormatters?(t={value:!1,data:{},getValue:function(){return r},getData:function(){return i},getElement:function(){return document.createElement("div")},getRow:function(){return e.getComponent()},getColumn:function(){return a.getComponent()}},n.push({field:a.field,title:a.definition.title,value:a.modules.format.formatter.call(o.table.modules.format,t,a.modules.format.params)})):n.push({field:a.field,title:a.definition.title,value:r}))}),n},Ub.prototype.formatCollapsedData=function(e){var t=document.createElement("table");return e.forEach(function(e){var o,i=document.createElement("tr"),n=document.createElement("td"),a=document.createElement("td"),r=document.createElement("strong");n.appendChild(r),this.table.modules.localize.bind("columns|"+e.field,function(t){r.innerText=t||e.title}),e.value instanceof Node?((o=document.createElement("div")).appendChild(e.value),a.appendChild(o)):a.innerHTML=e.value,i.appendChild(n),i.appendChild(a),t.appendChild(i)},this),Object.keys(e).length?t:""},ea.prototype.registerModule("responsiveLayout",Ub);var Jb=function(e){this.table=e,this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null};Jb.prototype.clearSelectionData=function(e){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],e||this._rowSelectionChanged()},Jb.prototype.initializeRow=function(e){var t=this,o=e.getElement(),i=function e(){setTimeout(function(){t.selecting=!1},50),document.body.removeEventListener("mouseup",e)};e.modules.select={selected:!1},t.table.options.selectableCheck.call(this.table,e.getComponent())?(o.classList.add("tabulator-selectable"),o.classList.remove("tabulator-unselectable"),t.table.options.selectable&&"highlight"!=t.table.options.selectable&&("click"===t.table.options.selectableRangeMode?o.addEventListener("click",function(o){if(o.shiftKey){t.table._clearSelection(),t.lastClickedRow=t.lastClickedRow||e;var i=t.table.rowManager.getDisplayRowIndex(t.lastClickedRow),n=t.table.rowManager.getDisplayRowIndex(e),a=i<=n?i:n,r=i>=n?i:n,s=t.table.rowManager.getDisplayRows().slice(0).splice(a,r-a+1);o.ctrlKey||o.metaKey?(s.forEach(function(o){o!==t.lastClickedRow&&(!0===t.table.options.selectable||t.isRowSelected(e)?t.toggleRow(o):t.selectedRows.length<t.table.options.selectable&&t.toggleRow(o))}),t.lastClickedRow=e):(t.deselectRows(void 0,!0),!0!==t.table.options.selectable&&s.length>t.table.options.selectable&&(s=s.slice(0,t.table.options.selectable)),t.selectRows(s)),t.table._clearSelection()}else o.ctrlKey||o.metaKey?(t.toggleRow(e),t.lastClickedRow=e):(t.deselectRows(void 0,!0),t.selectRows(e),t.lastClickedRow=e)}):(o.addEventListener("click",function(o){t.table.modExists("edit")&&t.table.modules.edit.getCurrentCell()||t.table._clearSelection(),t.selecting||t.toggleRow(e)}),o.addEventListener("mousedown",function(o){if(o.shiftKey)return t.table._clearSelection(),t.selecting=!0,t.selectPrev=[],document.body.addEventListener("mouseup",i),document.body.addEventListener("keyup",i),t.toggleRow(e),!1}),o.addEventListener("mouseenter",function(o){t.selecting&&(t.table._clearSelection(),t.toggleRow(e),t.selectPrev[1]==e&&t.toggleRow(t.selectPrev[0]))}),o.addEventListener("mouseout",function(o){t.selecting&&(t.table._clearSelection(),t.selectPrev.unshift(e))})))):(o.classList.add("tabulator-unselectable"),o.classList.remove("tabulator-selectable"))},Jb.prototype.toggleRow=function(e){this.table.options.selectableCheck.call(this.table,e.getComponent())&&(e.modules.select&&e.modules.select.selected?this._deselectRow(e):this._selectRow(e))},Jb.prototype.selectRows=function(e){var t,o=this;switch(void 0===e?"undefined":pa(e)){case"undefined":this.table.rowManager.rows.forEach(function(e){o._selectRow(e,!0,!0)}),this._rowSelectionChanged();break;case"string":(t=this.table.rowManager.findRow(e))?this._selectRow(t,!0,!0):this.table.rowManager.getRows(e).forEach(function(e){o._selectRow(e,!0,!0)}),this._rowSelectionChanged();break;default:Array.isArray(e)?(e.forEach(function(e){o._selectRow(e,!0,!0)}),this._rowSelectionChanged()):this._selectRow(e,!1,!0);}},Jb.prototype._selectRow=function(e,t,o){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!o&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var i=this.table.rowManager.findRow(e);i?-1==this.selectedRows.indexOf(i)&&(i.getElement().classList.add("tabulator-selected"),i.modules.select||(i.modules.select={}),i.modules.select.selected=!0,i.modules.select.checkboxEl&&(i.modules.select.checkboxEl.checked=!0),this.selectedRows.push(i),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(i,!0),t||this.table.options.rowSelected.call(this.table,i.getComponent()),this._rowSelectionChanged(t)):t||console.warn("Selection Error - No such row found, ignoring selection:"+e)},Jb.prototype.isRowSelected=function(e){return-1!==this.selectedRows.indexOf(e)},Jb.prototype.deselectRows=function(e,t){var o,i=this;if(void 0===e){o=i.selectedRows.length;for(var n=0;n<o;n++)i._deselectRow(i.selectedRows[0],!0);i._rowSelectionChanged(t)}else Array.isArray(e)?(e.forEach(function(e){i._deselectRow(e,!0)}),i._rowSelectionChanged(t)):i._deselectRow(e,t)},Jb.prototype._deselectRow=function(e,t){var o,i=this.table.rowManager.findRow(e);i?(o=this.selectedRows.findIndex(function(e){return e==i}))>-1&&(i.getElement().classList.remove("tabulator-selected"),i.modules.select||(i.modules.select={}),i.modules.select.selected=!1,i.modules.select.checkboxEl&&(i.modules.select.checkboxEl.checked=!1),this.selectedRows.splice(o,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(i,!1),t||this.table.options.rowDeselected.call(this.table,i.getComponent()),this._rowSelectionChanged(t)):t||console.warn("Deselection Error - No such row found, ignoring selection:"+e)},Jb.prototype.getSelectedData=function(){var e=[];return this.selectedRows.forEach(function(t){e.push(t.getData())}),e},Jb.prototype.getSelectedRows=function(){var e=[];return this.selectedRows.forEach(function(t){e.push(t.getComponent())}),e},Jb.prototype._rowSelectionChanged=function(e){this.headerCheckboxElement&&(0===this.selectedRows.length?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),e||this.table.options.rowSelectionChanged.call(this.table,this.getSelectedData(),this.getSelectedRows())},Jb.prototype.registerRowSelectCheckbox=function(e,t){e._row.modules.select||(e._row.modules.select={}),e._row.modules.select.checkboxEl=t},Jb.prototype.registerHeaderSelectCheckbox=function(e){this.headerCheckboxElement=e},Jb.prototype.childRowSelection=function(e,t){var o=this.table.modules.dataTree.getChildren(e,!0);if(t){var i=o,n=Array.isArray(i),a=0;for(i=n?i:i[Symbol.iterator]();;){var r;if(n){if(a>=i.length)break;r=i[a++]}else{if((a=i.next()).done)break;r=a.value}var s=r;this._selectRow(s,!0)}}else{var l=o,u=Array.isArray(l),c=0;for(l=u?l:l[Symbol.iterator]();;){var d;if(u){if(c>=l.length)break;d=l[c++]}else{if((c=l.next()).done)break;d=c.value}var h=d;this._deselectRow(h,!0)}}},ea.prototype.registerModule("selectRow",Jb);var Vb=function(e){this.table=e,this.sortList=[],this.changed=!1};Vb.prototype.initializeColumn=function(e,t){var o,i,n=this,a=!1;switch(pa(e.definition.sorter)){case"string":n.sorters[e.definition.sorter]?a=n.sorters[e.definition.sorter]:console.warn("Sort Error - No such sorter found: ",e.definition.sorter);break;case"function":a=e.definition.sorter;}e.modules.sort={sorter:a,dir:"none",params:e.definition.sorterParams||{},startingDir:e.definition.headerSortStartingDir||"asc",tristate:void 0!==e.definition.headerSortTristate?e.definition.headerSortTristate:this.table.options.headerSortTristate},(void 0===e.definition.headerSort?!1!==this.table.options.headerSort:!1!==e.definition.headerSort)&&((o=e.getElement()).classList.add("tabulator-sortable"),(i=document.createElement("div")).classList.add("tabulator-col-sorter"),"object"==pa(this.table.options.headerSortElement)?i.appendChild(this.table.options.headerSortElement):i.innerHTML=this.table.options.headerSortElement,t.appendChild(i),e.modules.sort.element=i,o.addEventListener("click",function(t){var o="",i=[],a=!1;if(e.modules.sort){if(e.modules.sort.tristate)o="none"==e.modules.sort.dir?e.modules.sort.startingDir:e.modules.sort.dir==e.modules.sort.startingDir?"asc"==e.modules.sort.dir?"desc":"asc":"none";else switch(e.modules.sort.dir){case"asc":o="desc";break;case"desc":o="asc";break;default:o=e.modules.sort.startingDir;}n.table.options.columnHeaderSortMulti&&(t.shiftKey||t.ctrlKey)?((a=(i=n.getSort()).findIndex(function(t){return t.field===e.getField()}))>-1?(i[a].dir=o,a!=i.length-1&&(a=i.splice(a,1)[0],"none"!=o&&i.push(a))):"none"!=o&&i.push({column:e,dir:o}),n.setSort(i)):"none"==o?n.clear():n.setSort(e,o),n.table.rowManager.sorterRefresh(!n.sortList.length)}}))},Vb.prototype.hasChanged=function(){var e=this.changed;return this.changed=!1,e},Vb.prototype.getSort=function(){var e=[];return this.sortList.forEach(function(t){t.column&&e.push({column:t.column.getComponent(),field:t.column.getField(),dir:t.dir})}),e},Vb.prototype.setSort=function(e,t){var o=this,i=[];Array.isArray(e)||(e=[{column:e,dir:t}]),e.forEach(function(e){var t;(t=o.table.columnManager.findColumn(e.column))?(e.column=t,i.push(e),o.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",e.column)}),o.sortList=i,this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.sort&&this.table.modules.persistence.save("sort")},Vb.prototype.clear=function(){this.setSort([])},Vb.prototype.findSorter=function(e){var t,o=this.table.rowManager.activeRows[0],i="string";if(o&&(o=o.getData(),e.getField()))switch(void 0===(t=e.getFieldValue(o))?"undefined":pa(t)){case"undefined":i="string";break;case"boolean":i="boolean";break;default:isNaN(t)||""===t?t.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(i="alphanum"):i="number";}return this.sorters[i]},Vb.prototype.sort=function(e){var t=this,o=this.table.options.sortOrderReverse?t.sortList.slice().reverse():t.sortList,i=[],n=[];t.table.options.dataSorting&&t.table.options.dataSorting.call(t.table,t.getSort()),t.clearColumnHeaders(),t.table.options.ajaxSorting?o.forEach(function(e,o){t.setColumnHeader(e.column,e.dir)}):(o.forEach(function(e,o){var n=e.column.modules.sort;e.column&&n&&(n.sorter||(n.sorter=t.findSorter(e.column)),e.params="function"==typeof n.params?n.params(e.column.getComponent(),e.dir):n.params,i.push(e)),t.setColumnHeader(e.column,e.dir)}),i.length&&t._sortItems(e,i)),t.table.options.dataSorted&&(e.forEach(function(e){n.push(e.getComponent())}),t.table.options.dataSorted.call(t.table,t.getSort(),n))},Vb.prototype.clearColumnHeaders=function(){this.table.columnManager.getRealColumns().forEach(function(e){e.modules.sort&&(e.modules.sort.dir="none",e.getElement().setAttribute("aria-sort","none"))})},Vb.prototype.setColumnHeader=function(e,t){e.modules.sort.dir=t,e.getElement().setAttribute("aria-sort",t)},Vb.prototype._sortItems=function(e,t){var o=this,i=t.length-1;e.sort(function(e,n){for(var a,r=i;r>=0;r--){var s=t[r];if(0!==(a=o._sortRow(e,n,s.column,s.dir,s.params)))break}return a})},Vb.prototype._sortRow=function(e,t,o,i,n){var a,r,s="asc"==i?e:t,l="asc"==i?t:e;return e=void 0!==(e=o.getFieldValue(s.getData()))?e:"",t=void 0!==(t=o.getFieldValue(l.getData()))?t:"",a=s.getComponent(),r=l.getComponent(),o.modules.sort.sorter.call(this,e,t,a,r,o.getComponent(),i,n)},Vb.prototype.sorters={number:function(e,t,o,i,n,a,r){var s=r.alignEmptyValues,l=r.decimalSeparator,u=r.thousandSeparator,c=0;if(e=String(e),t=String(t),u&&(e=e.split(u).join(""),t=t.split(u).join("")),l&&(e=e.split(l).join("."),t=t.split(l).join(".")),e=parseFloat(e),t=parseFloat(t),isNaN(e))c=isNaN(t)?0:-1;else{if(!isNaN(t))return e-t;c=1}return("top"===s&&"desc"===a||"bottom"===s&&"asc"===a)&&(c*=-1),c},string:function(e,t,o,i,n,a,r){var s,l=r.alignEmptyValues,u=0;if(e){if(t){switch(pa(r.locale)){case"boolean":r.locale&&(s=this.table.modules.localize.getLocale());break;case"string":s=r.locale;}return String(e).toLowerCase().localeCompare(String(t).toLowerCase(),s)}u=1}else u=t?-1:0;return("top"===l&&"desc"===a||"bottom"===l&&"asc"===a)&&(u*=-1),u},date:function(e,t,o,i,n,a,r){return r.format||(r.format="DD/MM/YYYY"),this.sorters.datetime.call(this,e,t,o,i,n,a,r)},time:function(e,t,o,i,n,a,r){return r.format||(r.format="HH:mm"),this.sorters.datetime.call(this,e,t,o,i,n,a,r)},datetime:function(e,t,o,i,n,a,r){var s=r.format||"DD/MM/YYYY HH:mm:ss",l=r.alignEmptyValues,u=0;if("undefined"!=typeof moment){if(e=moment(e,s),t=moment(t,s),e.isValid()){if(t.isValid())return e-t;u=1}else u=t.isValid()?-1:0;return("top"===l&&"desc"===a||"bottom"===l&&"asc"===a)&&(u*=-1),u}console.error("Sort Error - 'datetime' sorter is dependant on moment.js")},boolean:function(e,t,o,i,n,a,r){return(!0===e||"true"===e||"True"===e||1===e?1:0)-(!0===t||"true"===t||"True"===t||1===t?1:0)},array:function(e,t,o,i,n,a,r){var s=r.type||"length",l=r.alignEmptyValues,u=0;function c(e){switch(s){case"length":return e.length;case"sum":return e.reduce(function(e,t){return e+t});case"max":return Math.max.apply(null,e);case"min":return Math.min.apply(null,e);case"avg":return e.reduce(function(e,t){return e+t})/e.length;}}if(Array.isArray(e)){if(Array.isArray(t))return(e?c(e):0)-(t?c(t):0);l=1}else l=Array.isArray(t)?-1:0;return("top"===l&&"desc"===a||"bottom"===l&&"asc"===a)&&(u*=-1),u},exists:function(e,t,o,i,n,a,r){return(void 0===e?0:1)-(void 0===t?0:1)},alphanum:function(e,t,o,i,n,a,r){var s,l,u,c,d,h=0,p=/(\d+)|(\D+)/g,m=/\d/,v=r.alignEmptyValues,f=0;if(e||0===e){if(t||0===t){if(isFinite(e)&&isFinite(t))return e-t;if((s=String(e).toLowerCase())===(l=String(t).toLowerCase()))return 0;if(!m.test(s)||!m.test(l))return s>l?1:-1;for(s=s.match(p),l=l.match(p),d=s.length>l.length?l.length:s.length;h<d;)if((u=s[h])!==(c=l[h++]))return isFinite(u)&&isFinite(c)?("0"===u.charAt(0)&&(u="."+u),"0"===c.charAt(0)&&(c="."+c),u-c):u>c?1:-1;return s.length>l.length}f=1}else f=t||0===t?-1:0;return("top"===v&&"desc"===a||"bottom"===v&&"asc"===a)&&(f*=-1),f}},ea.prototype.registerModule("sort",Vb);var Kc=function(e){this.table=e,this.invalidCells=[]};Kc.prototype.initializeColumn=function(e){var t,o=this,i=[];e.definition.validator&&(Array.isArray(e.definition.validator)?e.definition.validator.forEach(function(e){(t=o._extractValidator(e))&&i.push(t)}):(t=this._extractValidator(e.definition.validator))&&i.push(t),e.modules.validate=!!i.length&&i)},Kc.prototype._extractValidator=function(e){var t,o,i;switch(void 0===e?"undefined":pa(e)){case"string":return(i=e.indexOf(":"))>-1?(t=e.substring(0,i),o=e.substring(i+1)):t=e,this._buildValidator(t,o);case"function":return this._buildValidator(e);case"object":return this._buildValidator(e.type,e.parameters);}},Kc.prototype._buildValidator=function(e,t){var o="function"==typeof e?e:this.validators[e];return o?{type:"function"==typeof e?"function":e,func:o,params:t}:(console.warn("Validator Setup Error - No matching validator found:",e),!1)},Kc.prototype.validate=function(e,t,o){var i=this,n=[],a=this.invalidCells.indexOf(t);return e&&e.forEach(function(e){e.func.call(i,t.getComponent(),o,e.params)||n.push({type:e.type,parameters:e.params})}),n=!n.length||n,t.modules.validate||(t.modules.validate={}),!0===n?(t.modules.validate.invalid=!1,t.getElement().classList.remove("tabulator-validation-fail"),a>-1&&this.invalidCells.splice(a,1)):(t.modules.validate.invalid=!0,"manual"!==this.table.options.validationMode&&t.getElement().classList.add("tabulator-validation-fail"),-1==a&&this.invalidCells.push(t)),n},Kc.prototype.getInvalidCells=function(){var e=[];return this.invalidCells.forEach(function(t){e.push(t.getComponent())}),e},Kc.prototype.clearValidation=function(e){var t;e.modules.validate&&e.modules.validate.invalid&&(e.getElement().classList.remove("tabulator-validation-fail"),e.modules.validate.invalid=!1,(t=this.invalidCells.indexOf(e))>-1&&this.invalidCells.splice(t,1))},Kc.prototype.validators={integer:function(e,t,o){return""===t||null==t||"number"==typeof(t=Number(t))&&isFinite(t)&&Math.floor(t)===t},float:function(e,t,o){return""===t||null==t||"number"==typeof(t=Number(t))&&isFinite(t)&&t%1!=0},numeric:function(e,t,o){return""===t||null==t||!isNaN(t)},string:function(e,t,o){return""===t||null==t||isNaN(t)},max:function(e,t,o){return""===t||null==t||parseFloat(t)<=o},min:function(e,t,o){return""===t||null==t||parseFloat(t)>=o},starts:function(e,t,o){return""===t||null==t||String(t).toLowerCase().startsWith(String(o).toLowerCase())},ends:function(e,t,o){return""===t||null==t||String(t).toLowerCase().endsWith(String(o).toLowerCase())},minLength:function(e,t,o){return""===t||null==t||String(t).length>=o},maxLength:function(e,t,o){return""===t||null==t||String(t).length<=o},in:function(e,t,o){return""===t||null==t||("string"==typeof o&&(o=o.split("|")),""===t||o.indexOf(t)>-1)},regex:function(e,t,o){return""===t||null==t||new RegExp(o).test(t)},unique:function(e,t,o){if(""===t||null==t)return!0;var i=!0,n=e.getData(),a=e.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(e){var o=e.getData();o!==n&&t==a.getFieldValue(o)&&(i=!1)}),i},required:function(e,t,o){return""!==t&&null!=t}},ea.prototype.registerModule("validate",Kc);var Sm=[{id:1,name:"123\u4E2D\u6587Billy Bob",age:12,gender:"male",height:95,col:"red",dob:"14/05/2010"},{id:2,name:"\u5C31\u7B97\u7DE8\u8B6F\u4E5F\u53EF\u4EE5\u76F4\u63A5\u8DD1Jenny Jane",age:42,gender:"female",height:142,col:"blue",dob:"30/07/1954"},{id:3,name:"Steve McAlistaire",age:35,gender:"male",height:176,col:"green",dob:"04/11/1982"}],k=new ea("#example-table",{data:Sm,autoColumns:!0}),Gg=im("chartdiv",sg),hj=Gg.series.push(new _e);hj.dataFields.value="litres",hj.dataFields.category="country",Gg.data=[{country:"Lithuania\u4E2D\u6587",litres:501.9},{country:"Czech Republic",litres:301.9},{country:"Ireland",litres:201.1},{country:"Germany",litres:165.8},{country:"Australia",litres:139.9},{country:"Austria",litres:128.3},{country:"\u82F1\u570BUK",litres:99},{country:"Belgium",litres:60},{country:"The Netherlands",litres:50}],Gg.legend=new Td;var td,ud,Tm={},vb=Tm={};function Hg(){throw new Error("setTimeout has not been defined")}function Ig(){throw new Error("clearTimeout has not been defined")}function ij($){if(td===setTimeout)return setTimeout($,0);if((td===Hg||!td)&&setTimeout)return td=setTimeout,setTimeout($,0);try{return td($,0)}catch(e){try{return td.call(null,$,0)}catch(e){return td.call(this,$,0)}}}function Um($){if(ud===clearTimeout)return clearTimeout($);if((ud===Ig||!ud)&&clearTimeout)return ud=clearTimeout,clearTimeout($);try{return ud($)}catch(e){try{return ud.call(null,$)}catch(e){return ud.call(this,$)}}}!function(){try{td="function"==typeof setTimeout?setTimeout:Hg}catch($){td=Hg}try{ud="function"==typeof clearTimeout?clearTimeout:Ig}catch($){ud=Ig}}();var ae,cd=[],Jg=!1,jj=-1;function Vm(){Jg&&ae&&(Jg=!1,ae.length?cd=ae.concat(cd):jj=-1,cd.length&&kj())}function kj(){if(!Jg){var $=ij(Vm);Jg=!0;for(var e=cd.length;e;){for(ae=cd,cd=[];++jj<e;)ae&&ae[jj].run();jj=-1,e=cd.length}ae=null,Jg=!1,Um($)}}function lj($,e){this.fun=$,this.array=e}function yc(){}vb.nextTick=function($){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];cd.push(new lj($,e)),1!==cd.length||Jg||ij(kj)},lj.prototype.run=function(){this.fun.apply(null,this.array)},vb.title="browser",vb.env={},vb.argv=[],vb.version="",vb.versions={},vb.on=yc,vb.addListener=yc,vb.once=yc,vb.off=yc,vb.removeListener=yc,vb.removeAllListeners=yc,vb.emit=yc,vb.prependListener=yc,vb.prependOnceListener=yc,vb.listeners=function($){return[]},vb.binding=function($){throw new Error("process.binding is not supported")},vb.cwd=function(){return"/"},vb.chdir=function($){throw new Error("process.chdir is not supported")},vb.umask=function(){return 0};return{"g5IB":Tm,"H99C":{}};});